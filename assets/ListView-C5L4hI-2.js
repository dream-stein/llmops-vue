import{a as R,o as l,c,b as p,e,w as t,u as a,i as T,t as _,k as E,l as F,f as s,g as r}from"./index-ChrAzW4i.js";import{h as L}from"./moment-C5S46NFB.js";import{c as W,d as A}from"./use-dataset-DiG9mJkY.js";import"./request-CqNJTr02.js";const I={class:"p-6"},J={class:"flex items-center w-full gap-2 mb-6"},K={class:"flex items-center gap-3"},O={class:"flex flex-col justify-between h-[40px]"},Q={key:1,class:"text-gray-700"},U={key:2,class:"flex items-center gap-2"},X={key:3,class:"flex items-center gap-2"},Z={class:"flex items-center justify-between mb-6"},$={class:""},ee={class:"line-clamp-1"},te={key:0,class:"w-2 h-2 bg-green-500 rounded-sm border border-green-700"},ae={key:1,class:"w-2 h-2 bg-gray-500 rounded-sm border border-gray-700"},se={key:2,class:"text-gray-700"},ne={key:3,class:"text-gray-700"},_e=R({__name:"ListView",setup(oe){var f,w;const g=E(),b=F(),{dataset:d}=W((f=g.params)==null?void 0:f.dataset_id),{loading:D,documents:B,paginator:h}=A((w=g.params)==null?void 0:w.dataset_id);return(le,o)=>{var k,z,q;const S=s("icon-left"),u=s("a-button"),V=s("router-link"),Y=s("a-avatar"),m=s("a-skeleton-line"),y=s("a-tag"),N=s("a-input-search"),x=s("a-space"),i=s("a-table-column"),P=s("a-divider"),j=s("a-switch"),G=s("icon-more"),v=s("a-doption"),H=s("a-dropdown"),M=s("a-table");return l(),c("div",I,[p("div",J,[e(V,{to:{name:"space-datasets-list"}},{default:t(()=>[e(u,{size:"mini",type:"text",class:"!text-gray-700"},{icon:t(()=>[e(S)]),_:1})]),_:1}),p("div",K,[e(Y,{size:40,shape:"square",class:"rounded-lg","image-url":a(d).icon},null,8,["image-url"]),p("div",O,[(k=a(d))!=null&&k.name?(l(),c("div",Q,"知识库 / "+_(a(d).name),1)):(l(),T(m,{key:0,widths:[100]})),(z=a(d))!=null&&z.name?(l(),c("div",X,[e(y,{size:"small",class:"rounded h-[18px] leading-[18px] bg-gray-200 text-gray-500"},{default:t(()=>[r(_(a(d).document_count)+" 文档",1)]),_:1}),e(y,{size:"small",class:"rounded h-[18px] leading-[18px] bg-gray-200 text-gray-500"},{default:t(()=>[r(_(a(d).hit_count)+" 命中",1)]),_:1}),e(y,{size:"small",class:"rounded h-[18px] leading-[18px] bg-gray-200 text-gray-500"},{default:t(()=>[r(_(a(d).related_app_count)+" 关联应用",1)]),_:1})])):(l(),c("div",U,[e(m,{widths:[60],"line-height":18}),e(m,{widths:[60],"line-height":18}),e(m,{widths:[60],"line-height":18})]))])])]),p("div",Z,[e(N,{"default-value":((q=a(g).query)==null?void 0:q.search_word)||"",placeholder:"请输入关键词搜素文档",class:"w-[240px] bg-white rounded-lg border-gray-200",onSearch:o[0]||(o[0]=n=>{a(b).push({path:a(g).path,query:{search_word:n,current_page:1}})})},null,8,["default-value"]),e(x,{size:12},{default:t(()=>[e(u,{class:"rounded-lg"},{default:t(()=>o[2]||(o[2]=[r("召回测试")])),_:1}),e(u,{type:"primary",class:"rounded-lg"},{default:t(()=>o[3]||(o[3]=[r("添加文件")])),_:1})]),_:1})]),p("div",$,[e(M,{hoverable:"",pagination:{total:a(h).total_record,current:a(h).current_page,defaultCurrent:1,pageSize:a(h).page_size,defaultPageSize:10,showTotal:!0},loading:a(D),data:a(B),bordered:{wrapper:!1},onPageChange:o[1]||(o[1]=n=>{var C;a(b).push({path:a(g).path,query:{current_page:n,search_word:((C=a(g).query)==null?void 0:C.search_word)||""}})})},{columns:t(()=>[e(i,{title:"#","data-index":"position",align:"center",width:80,"header-cell-class":"rounded-tl-lg !bg-gray-200 text-gray-700","cell-class":"bg-transparent text-gray-700"}),e(i,{title:"文档名","data-index":"name",width:400,"header-cell-class":"!bg-gray-200 text-gray-700","cell-class":"bg-transparent text-gray-700"},{cell:t(({record:n})=>[p("div",ee,_(n.name),1)]),_:1}),e(i,{title:"字符数","data-index":"character_count","header-cell-class":"!bg-gray-200 text-gray-700","cell-class":"bg-transparent text-gray-700"},{cell:t(({record:n})=>[r(_((n.character_count/1e3).toFixed(1))+"k ",1)]),_:1}),e(i,{title:"召回次数","data-index":"hit_count","header-cell-class":"!bg-gray-200 text-gray-700","cell-class":"bg-transparent text-gray-700"}),e(i,{title:"上传时间","data-index":"created_at","header-cell-class":"!bg-gray-200 text-gray-700","cell-class":"bg-transparent text-gray-700"},{cell:t(({record:n})=>[r(_(a(L)(n.created_at*1e3).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1}),e(i,{title:"状态","data-index":"enabled","header-cell-class":"!bg-gray-200 text-gray-700","cell-class":"bg-transparent text-gray-700"},{cell:t(({record:n})=>[e(x,null,{default:t(()=>[n.enabled?(l(),c("div",te)):(l(),c("div",ae)),n.enabled?(l(),c("div",se,"可用")):(l(),c("div",ne,"已禁用"))]),_:2},1024)]),_:1}),e(i,{title:"操作","data-index":"operator","header-cell-class":"rounded-tr-lg !bg-gray-200 text-gray-700","cell-class":"bg-transparent text-gray-700 !h-[40px]",width:100},{cell:t(({record:n})=>[e(x,{size:0},{split:t(()=>[e(P,{direction:"vertical"})]),default:t(()=>[e(j,{size:"small","checked-color":"#10b981",type:"round","unchecked-color":"#556581","default-checked":""}),e(H,{position:"br"},{content:t(()=>[e(v,null,{default:t(()=>o[4]||(o[4]=[r("重命名")])),_:1}),e(v,{class:"!text-red-700"},{default:t(()=>o[5]||(o[5]=[r("删除")])),_:1})]),default:t(()=>[e(u,{type:"text",size:"small",class:"!text-gray-700"},{icon:t(()=>[e(G)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["pagination","loading","data"])])])}}});export{_e as default};
