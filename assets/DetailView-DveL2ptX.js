import{I as n_,D as i_,b as ae,d as ut,o as C,f as E,g as _,h,w as x,t as ce,u as M,c as Ae,a as de,i as xe,J as Es,K as va,s as _n,r as $,L as r_,N as Qn,n as ma,F as Ye,q as it,O as In,P as cr,e as dr,y as xt,m as Xn,p as ya,v as s_,Q as da,R as o_,S as l_,T as a_,U as u_,V as f_,W as c_,B as hn,X as pa,Y as xa,Z as d_,A as p_,$ as g_,a0 as h_,a1 as __,_ as v_,a2 as Ke,a3 as m_,a4 as y_,j as ba}from"./index-BnBffiuW.js";import{e as vn,f as x_,g as b_,h as w_,i as S_,j as A_,k as $_,l as C_}from"./use-app-DFAVozQ3.js";import{u as T_}from"./use-dataset-DIDzxyei.js";import{b as I_,a as z_}from"./api-tools-BEQn5MX5.js";import{g as R_,b as O_,a as k_}from"./builtin-tool-CM5z0csN.js";import"./dataset-DcslHZW9.js";const D_=(a,f)=>n_("/ai/optimize-prompt",{body:{prompt:a}},f),L_=a=>i_("/ai/suggested-questions",{body:a}),E_=()=>{const a=ae(!1),f=ae([]);return{loading:a,suggested_questions:f,handleGenerateSuggestedQuestions:async g=>{try{a.value=!0;const y=await L_(g);f.value=y.data}finally{a.value=!1}}}},P_=()=>{const a=ae(!1),f=ae("");return{loading:a,optimize_prompt:f,handleOptimizePrompt:async g=>{try{a.value=!0,f.value="",await D_(g,y=>{const z=y.data;f.value+=z==null?void 0:z.optimize_prompt})}finally{a.value=!1}}}},U_={class:"flex flex-col h-[calc(100vh-173px)]"},M_={class:"flex items-center justify-between px-4 mb-4"},B_={class:"flex flex-col"},W_={key:0,class:"mb-4 flex flex-col"},F_={class:"max-h-[321px] overflow-scroll scrollbar-w-none mb-2 text-gray-700 whitespace-pre-line"},q_={class:""},N_={class:"h-[50px] flex items-center gap-2 px-4 flex-1 border border-gray-200 rounded-full"},H_={class:"flex-1"},G_=ut({__name:"PresetPromptTextarea",props:{app_id:{type:String,required:!0},preset_prompt:{type:String,required:!0}},emits:["update:preset_prompt"],setup(a,{emit:f}){const r=a,g=f,y=ae(!1),z=ae(""),{handleUpdateDraftAppConfig:v}=vn(),{loading:I,optimize_prompt:A,handleOptimizePrompt:O}=P_(),V=()=>{if(A.value.trim()===""){_n.warning("优化prompt为空，请重新生成");return}g("update:preset_prompt",A.value),v(r.app_id,{preset_prompt:A.value}),y.value=!1},Y=async()=>{if(z.value.trim()===""){_n.warning("原始prompt不能为空");return}await O(A.value)};return(G,q)=>{const ie=$("icon-sync"),N=$("a-button"),U=$("a-space"),pe=$("icon-send"),we=$("a-card"),ue=$("a-trigger"),F=$("a-textarea");return C(),E("div",U_,[_("div",M_,[q[8]||(q[8]=_("div",{class:"text-gray-700 font-bold"},"人设与回复逻辑",-1)),h(ue,{"popup-visible":y.value,"onUpdate:popupVisible":q[2]||(q[2]=L=>y.value=L),trigger:["click"],position:"bl","popup-translate":[0,8]},{content:x(()=>[h(we,{class:"rounded-lg w-[422px]"},{default:x(()=>[_("div",B_,[z.value?(C(),E("div",W_,[_("div",F_,ce(M(A)),1),M(I)?xe("",!0):(C(),Ae(U,{key:0},{default:x(()=>[h(N,{size:"small",type:"primary",class:"rounded-lg",onClick:V},{default:x(()=>q[6]||(q[6]=[de(" 替换 ")])),_:1}),h(N,{size:"small",class:"rounded-lg",onClick:q[0]||(q[0]=L=>y.value=!1)},{default:x(()=>q[7]||(q[7]=[de("退出")])),_:1})]),_:1}))])):xe("",!0),_("div",q_,[_("div",N_,[Es(_("input",{"onUpdate:modelValue":q[1]||(q[1]=L=>z.value=L),type:"text",class:"flex-1 outline-0",placeholder:"你希望如何编写或优化提示词"},null,512),[[va,z.value]]),h(N,{loading:M(I),type:"text",shape:"circle",onClick:Y},{icon:x(()=>[h(pe,{size:16,class:"!text-blue-700"})]),_:1},8,["loading"])])])])]),_:1})]),default:x(()=>[h(N,{size:"mini",class:"rounded-lg px-2"},{icon:x(()=>[h(ie)]),default:x(()=>[q[5]||(q[5]=de(" 优化 "))]),_:1})]),_:1},8,["popup-visible"])]),_("div",H_,[h(F,{class:"h-full resize-none !bg-transparent !border-0 text-gray-700 px-1 preset-prompt-textarea",placeholder:"请在这里输入Agent的人设与回复逻辑(预设prompt)","max-length":2e3,"show-word-limit":"","model-value":r.preset_prompt,"onUpdate:modelValue":q[3]||(q[3]=L=>g("update:preset_prompt",L)),onBlur:q[4]||(q[4]=async()=>{await M(v)(r.app_id,{preset_prompt:r.preset_prompt})})},null,8,["model-value"])])])}}}),V_={class:""},K_={class:"flex items-center justify-between border-b h-[64px] px-4"},Y_={class:"flex items-center justify-between"},Z_={class:"pt-6"},Q_={class:"flex items-center justify-between"},X_=ut({__name:"PreviewDebugHeader",props:{app_id:{type:String,required:!0},long_term_memory:{type:Object,required:!0}},setup(a){const f=a,{debug_conversation_summary:r,loadDebugConversationSummary:g}=x_(),{loading:y,handleUpdateDebugConversationSummary:z}=b_(),v=ae(!1),I=async()=>{await g(f.app_id),v.value=!0};return(A,O)=>{var U;const V=$("icon-save"),Y=$("a-button"),G=$("icon-close"),q=$("a-textarea"),ie=$("a-space"),N=$("a-modal");return C(),E("div",V_,[_("div",K_,[O[6]||(O[6]=_("div",{class:"text-lg text-gray-700"},"预览与调试",-1)),h(Y,{disabled:!((U=f.long_term_memory)!=null&&U.enable),size:"mini",type:"text",class:"rounded-lg px-1 !text-blue-700",onClick:I},{icon:x(()=>[h(V)]),default:x(()=>[O[5]||(O[5]=de(" 长期记忆 "))]),_:1},8,["disabled"])]),h(N,{width:520,visible:v.value,"onUpdate:visible":O[4]||(O[4]=pe=>v.value=pe),"hide-title":"",footer:!1,"modal-class":"rounded-xl"},{default:x(()=>[_("div",Y_,[O[7]||(O[7]=_("div",{class:"text-lg font-bold text-gray-700"},"长期记忆",-1)),h(Y,{type:"text",class:"!text-gray-700",size:"small",onClick:O[0]||(O[0]=pe=>v.value=!1)},{icon:x(()=>[h(G)]),_:1})]),_("div",Z_,[h(q,{"model-value":M(r),"onUpdate:modelValue":O[1]||(O[1]=pe=>r_(r)?r.value=pe:null),placeholder:"请输入当前调试会话长期记忆","show-word-limit":"","max-length":2e3,"auto-size":{minRows:8,maxRows:8}},null,8,["model-value"]),_("div",Q_,[O[10]||(O[10]=_("div",{class:""},null,-1)),h(ie,{size:16},{default:x(()=>[h(Y,{class:"rounded-lg",onClick:O[2]||(O[2]=pe=>v.value=!1)},{default:x(()=>O[8]||(O[8]=[de("取消")])),_:1}),h(Y,{loading:M(y),type:"primary",class:"rounded-lg",onClick:O[3]||(O[3]=async()=>{await M(z)(f.app_id,M(r)),v.value=!1})},{default:x(()=>O[9]||(O[9]=[de(" 保存 ")])),_:1},8,["loading"])]),_:1})])])]),_:1},8,["visible"])])}}}),J_={class:""},j_=ut({__name:"LongTermMemoryAbilityItem",props:{app_id:{type:String,default:"",required:!0},long_term_memory:{type:Object,default:{enable:!1},required:!0}},emits:["update:long_term_memory"],setup(a,{emit:f}){const r=a,g=f,{handleUpdateDraftAppConfig:y}=vn();return(z,v)=>{const I=$("icon-down"),A=$("a-button"),O=$("a-doption"),V=$("a-dropdown"),Y=$("a-collapse-item");return C(),E("div",J_,[h(Y,{key:"long_term_memory",class:"app-ability-item"},{header:x(()=>v[2]||(v[2]=[_("div",{class:"text-gray-700 font-bold"},"长期记忆",-1)])),extra:x(()=>[h(V,{onSelect:v[1]||(v[1]=async G=>{var q;!!G!==((q=r.long_term_memory)==null?void 0:q.enable)&&(g("update:long_term_memory",{enable:!!G}),await M(y)(r.app_id,{long_term_memory:{enable:!!G}}))})},{content:x(()=>[h(O,{value:1,class:"text-xs py-1.5 text-gray-700"},{default:x(()=>v[3]||(v[3]=[de("开启")])),_:1}),h(O,{value:0,class:"text-xs py-1.5 text-red-700"},{default:x(()=>v[4]||(v[4]=[de("关闭")])),_:1})]),default:x(()=>[h(A,{size:"mini",class:"rounded-lg flex items-center gap-1 px-1",onClick:v[0]||(v[0]=Qn(()=>{},["stop"]))},{default:x(()=>{var G;return[de(ce((G=r.long_term_memory)!=null&&G.enable?"开启":"关闭")+" ",1),h(I)]}),_:1})]),_:1})]),default:x(()=>[v[5]||(v[5]=_("div",{class:"text-xs text-gray-500 leading-[22px]"}," 总结聊天对话内容，并用于更好的响应用户的信息 ",-1))]),_:1})])}}}),ev={class:""},tv={class:"text-xs text-gray-500"},nv={class:"flex flex-col gap-2 mb-2"},iv={class:"flex items-center gap-2"},rv={class:"flex flex-col gap-2 mb-2"},sv={class:"flex items-center gap-2"},ov={class:"flex flex-col gap-2"},lv=ut({__name:"OpeningAbilityItem",props:{app_id:{type:String,default:"",required:!0},opening_statement:{type:String,default:"",required:!0},opening_questions:{type:Array,default:[],required:!0}},emits:["update:opening_statement","update:opening_questions"],setup(a,{emit:f}){const r=a,g=f,{handleUpdateDraftAppConfig:y}=vn(),z=ma({get(){const I=[...r.opening_questions];return I.length<3&&I[I.length-1]!==""&&I.push(""),I},set(I){g("update:opening_questions",I)}}),v=async()=>{await y(r.app_id,{opening_questions:z.value.filter(I=>I.trim()!=="")})};return(I,A)=>{const O=$("icon-exclamation-circle"),V=$("a-tooltip"),Y=$("a-textarea"),G=$("a-input"),q=$("icon-delete"),ie=$("a-button"),N=$("a-collapse-item");return C(),E("div",ev,[h(N,{key:"opening",class:"app-ability-item"},{header:x(()=>A[3]||(A[3]=[_("div",{class:"text-gray-700 font-bold"},"对话开场白",-1)])),default:x(()=>[_("div",tv,[_("div",nv,[_("div",iv,[A[4]||(A[4]=_("div",{class:"text-gray-700"},"开场白文案",-1)),h(V,{content:"开场白是与Agent应用对话时，Agent默认展示的对话。"},{default:x(()=>[h(O)]),_:1})]),h(Y,{"model-value":r.opening_statement,"onUpdate:modelValue":A[0]||(A[0]=U=>g("update:opening_statement",U)),placeholder:"在此处填写 AI 应用的开场白",class:"bg-white text-gray-700 rounded-lg border border-gray-200","auto-size":{minRows:4,maxRows:4},onBlur:A[1]||(A[1]=async()=>{await M(y)(r.app_id,{opening_statement:r.opening_statement})})},null,8,["model-value"])]),_("div",rv,[_("div",sv,[A[5]||(A[5]=_("div",{class:"text-gray-700"},"开场白预设问题",-1)),h(V,{content:"开场白预设问题是与Agent对话时，初始化提供的建议问题，最多不超过3个"},{default:x(()=>[h(O)]),_:1})]),_("div",ov,[(C(!0),E(Ye,null,it(z.value,(U,pe)=>(C(),E("div",{key:pe,class:"flex items-center gap-2"},[h(G,{"model-value":U,"onUpdate:modelValue":we=>{const ue=[...z.value];ue[pe]=we,z.value=ue},class:"rounded-lg bg-white",placeholder:"输入开场白引导问题",onBlur:A[2]||(A[2]=async()=>await v())},null,8,["model-value","onUpdate:modelValue"]),h(ie,{class:"rounded-lg",onClick:async()=>{const we=[...z.value];we.splice(pe,1),g("update:opening_questions",we),await In(),await v()}},{icon:x(()=>[h(q)]),_:2},1032,["onClick"])]))),128))])])])]),_:1})])}}}),av={class:""},uv=ut({__name:"SuggestedAfterAnswerAbilityItem",props:{app_id:{type:String,default:"",required:!0},suggested_after_answer:{type:Object,default:{enable:!1},required:!0}},emits:["update:suggested_after_answer"],setup(a,{emit:f}){const r=a,g=f,{handleUpdateDraftAppConfig:y}=vn();return(z,v)=>{const I=$("icon-down"),A=$("a-button"),O=$("a-doption"),V=$("a-dropdown"),Y=$("a-collapse-item");return C(),E("div",av,[h(Y,{key:"suggested_after_answer",class:"app-ability-item"},{header:x(()=>v[2]||(v[2]=[_("div",{class:"text-gray-700 font-bold"},"用户问题建议",-1)])),extra:x(()=>[h(V,{onSelect:v[1]||(v[1]=async G=>{var q;!!G!==((q=r.suggested_after_answer)==null?void 0:q.enable)&&(g("update:suggested_after_answer",{enable:!!G}),await M(y)(r.app_id,{suggested_after_answer:{enable:!!G}}))})},{content:x(()=>[h(O,{value:1,class:"text-xs py-1.5 text-gray-700"},{default:x(()=>v[3]||(v[3]=[de("开启")])),_:1}),h(O,{value:0,class:"text-xs py-1.5 text-red-700"},{default:x(()=>v[4]||(v[4]=[de("关闭")])),_:1})]),default:x(()=>[h(A,{size:"mini",class:"rounded-lg flex items-center gap-1 px-1",onClick:v[0]||(v[0]=Qn(()=>{},["stop"]))},{default:x(()=>{var G;return[de(ce((G=r.suggested_after_answer)!=null&&G.enable?"开启":"关闭")+" ",1),h(I)]}),_:1})]),_:1})]),default:x(()=>[v[5]||(v[5]=_("div",{class:"text-xs text-gray-500 leading-[22px]"}," 在应用回复后，自动根据对话内容提供 3 条用户提问建议 ",-1))]),_:1})])}}});var hi={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var fv=hi.exports,ga;function cv(){return ga||(ga=1,function(a,f){(function(){var r,g="4.17.21",y=200,z="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",v="Expected a function",I="Invalid `variable` option passed into `_.template`",A="__lodash_hash_undefined__",O=500,V="__lodash_placeholder__",Y=1,G=2,q=4,ie=1,N=2,U=1,pe=2,we=4,ue=8,F=16,L=32,Ue=64,se=128,Ce=256,Oe=512,W=30,D="...",X=800,J=16,ze=1,Ne=2,k=3,me=1/0,ke=9007199254740991,Ze=17976931348623157e292,j=NaN,R=4294967295,_e=R-1,ee=R>>>1,ye=[["ary",se],["bind",U],["bindKey",pe],["curry",ue],["curryRight",F],["flip",Oe],["partial",L],["partialRight",Ue],["rearg",Ce]],bt="[object Arguments]",ft="[object Array]",Nt="[object AsyncFunction]",Pt="[object Boolean]",Ut="[object Date]",Te="[object DOMException]",ct="[object Error]",wt="[object Function]",zn="[object GeneratorFunction]",dt="[object Map]",en="[object Number]",_r="[object Null]",Ot="[object Object]",_i="[object Promise]",vi="[object Proxy]",tn="[object RegExp]",pt="[object Set]",mn="[object String]",Rn="[object Symbol]",vr="[object Undefined]",nn="[object WeakMap]",mi="[object WeakSet]",rn="[object ArrayBuffer]",sn="[object DataView]",ge="[object Float32Array]",je="[object Float64Array]",Qe="[object Int8Array]",Mt="[object Int16Array]",On="[object Int32Array]",kn="[object Uint8Array]",Dn="[object Uint8ClampedArray]",Ln="[object Uint16Array]",En="[object Uint32Array]",yi=/\b__p \+= '';/g,xi=/\b(__p \+=) '' \+/g,bi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Jn=/&(?:amp|lt|gt|quot|#39);/g,jn=/[&<>"']/g,rt=RegExp(Jn.source),wi=RegExp(jn.source),De=/<%-([\s\S]+?)%>/g,Ht=/<%([\s\S]+?)%>/g,Ms=/<%=([\s\S]+?)%>/g,za=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ra=/^\w*$/,Oa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mr=/[\\^$.*+?()[\]{}|]/g,ka=RegExp(mr.source),yr=/^\s+/,Da=/\s/,La=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ea=/\{\n\/\* \[wrapped with (.+)\] \*/,Pa=/,? & /,Ua=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ma=/[()=,{}\[\]\/\s]/,Ba=/\\(\\)?/g,Wa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Bs=/\w*$/,Fa=/^[-+]0x[0-9a-f]+$/i,qa=/^0b[01]+$/i,Na=/^\[object .+?Constructor\]$/,Ha=/^0o[0-7]+$/i,Ga=/^(?:0|[1-9]\d*)$/,Va=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Si=/($^)/,Ka=/['\n\r\u2028\u2029\\]/g,Ai="\\ud800-\\udfff",Ya="\\u0300-\\u036f",Za="\\ufe20-\\ufe2f",Qa="\\u20d0-\\u20ff",Ws=Ya+Za+Qa,Fs="\\u2700-\\u27bf",qs="a-z\\xdf-\\xf6\\xf8-\\xff",Xa="\\xac\\xb1\\xd7\\xf7",Ja="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ja="\\u2000-\\u206f",eu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ns="A-Z\\xc0-\\xd6\\xd8-\\xde",Hs="\\ufe0e\\ufe0f",Gs=Xa+Ja+ja+eu,xr="['’]",tu="["+Ai+"]",Vs="["+Gs+"]",$i="["+Ws+"]",Ks="\\d+",nu="["+Fs+"]",Ys="["+qs+"]",Zs="[^"+Ai+Gs+Ks+Fs+qs+Ns+"]",br="\\ud83c[\\udffb-\\udfff]",iu="(?:"+$i+"|"+br+")",Qs="[^"+Ai+"]",wr="(?:\\ud83c[\\udde6-\\uddff]){2}",Sr="[\\ud800-\\udbff][\\udc00-\\udfff]",Pn="["+Ns+"]",Xs="\\u200d",Js="(?:"+Ys+"|"+Zs+")",ru="(?:"+Pn+"|"+Zs+")",js="(?:"+xr+"(?:d|ll|m|re|s|t|ve))?",eo="(?:"+xr+"(?:D|LL|M|RE|S|T|VE))?",to=iu+"?",no="["+Hs+"]?",su="(?:"+Xs+"(?:"+[Qs,wr,Sr].join("|")+")"+no+to+")*",ou="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",lu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",io=no+to+su,au="(?:"+[nu,wr,Sr].join("|")+")"+io,uu="(?:"+[Qs+$i+"?",$i,wr,Sr,tu].join("|")+")",fu=RegExp(xr,"g"),cu=RegExp($i,"g"),Ar=RegExp(br+"(?="+br+")|"+uu+io,"g"),du=RegExp([Pn+"?"+Ys+"+"+js+"(?="+[Vs,Pn,"$"].join("|")+")",ru+"+"+eo+"(?="+[Vs,Pn+Js,"$"].join("|")+")",Pn+"?"+Js+"+"+js,Pn+"+"+eo,lu,ou,Ks,au].join("|"),"g"),pu=RegExp("["+Xs+Ai+Ws+Hs+"]"),gu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,hu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_u=-1,Le={};Le[ge]=Le[je]=Le[Qe]=Le[Mt]=Le[On]=Le[kn]=Le[Dn]=Le[Ln]=Le[En]=!0,Le[bt]=Le[ft]=Le[rn]=Le[Pt]=Le[sn]=Le[Ut]=Le[ct]=Le[wt]=Le[dt]=Le[en]=Le[Ot]=Le[tn]=Le[pt]=Le[mn]=Le[nn]=!1;var Re={};Re[bt]=Re[ft]=Re[rn]=Re[sn]=Re[Pt]=Re[Ut]=Re[ge]=Re[je]=Re[Qe]=Re[Mt]=Re[On]=Re[dt]=Re[en]=Re[Ot]=Re[tn]=Re[pt]=Re[mn]=Re[Rn]=Re[kn]=Re[Dn]=Re[Ln]=Re[En]=!0,Re[ct]=Re[wt]=Re[nn]=!1;var vu={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},mu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},xu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},bu=parseFloat,wu=parseInt,ro=typeof cr=="object"&&cr&&cr.Object===Object&&cr,Su=typeof self=="object"&&self&&self.Object===Object&&self,Ge=ro||Su||Function("return this")(),$r=f&&!f.nodeType&&f,yn=$r&&!0&&a&&!a.nodeType&&a,so=yn&&yn.exports===$r,Cr=so&&ro.process,St=function(){try{var d=yn&&yn.require&&yn.require("util").types;return d||Cr&&Cr.binding&&Cr.binding("util")}catch{}}(),oo=St&&St.isArrayBuffer,lo=St&&St.isDate,ao=St&&St.isMap,uo=St&&St.isRegExp,fo=St&&St.isSet,co=St&&St.isTypedArray;function gt(d,b,m){switch(m.length){case 0:return d.call(b);case 1:return d.call(b,m[0]);case 2:return d.call(b,m[0],m[1]);case 3:return d.call(b,m[0],m[1],m[2])}return d.apply(b,m)}function Au(d,b,m,B){for(var te=-1,be=d==null?0:d.length;++te<be;){var Fe=d[te];b(B,Fe,m(Fe),d)}return B}function At(d,b){for(var m=-1,B=d==null?0:d.length;++m<B&&b(d[m],m,d)!==!1;);return d}function $u(d,b){for(var m=d==null?0:d.length;m--&&b(d[m],m,d)!==!1;);return d}function po(d,b){for(var m=-1,B=d==null?0:d.length;++m<B;)if(!b(d[m],m,d))return!1;return!0}function on(d,b){for(var m=-1,B=d==null?0:d.length,te=0,be=[];++m<B;){var Fe=d[m];b(Fe,m,d)&&(be[te++]=Fe)}return be}function Ci(d,b){var m=d==null?0:d.length;return!!m&&Un(d,b,0)>-1}function Tr(d,b,m){for(var B=-1,te=d==null?0:d.length;++B<te;)if(m(b,d[B]))return!0;return!1}function Ee(d,b){for(var m=-1,B=d==null?0:d.length,te=Array(B);++m<B;)te[m]=b(d[m],m,d);return te}function ln(d,b){for(var m=-1,B=b.length,te=d.length;++m<B;)d[te+m]=b[m];return d}function Ir(d,b,m,B){var te=-1,be=d==null?0:d.length;for(B&&be&&(m=d[++te]);++te<be;)m=b(m,d[te],te,d);return m}function Cu(d,b,m,B){var te=d==null?0:d.length;for(B&&te&&(m=d[--te]);te--;)m=b(m,d[te],te,d);return m}function zr(d,b){for(var m=-1,B=d==null?0:d.length;++m<B;)if(b(d[m],m,d))return!0;return!1}var Tu=Rr("length");function Iu(d){return d.split("")}function zu(d){return d.match(Ua)||[]}function go(d,b,m){var B;return m(d,function(te,be,Fe){if(b(te,be,Fe))return B=be,!1}),B}function Ti(d,b,m,B){for(var te=d.length,be=m+(B?1:-1);B?be--:++be<te;)if(b(d[be],be,d))return be;return-1}function Un(d,b,m){return b===b?Fu(d,b,m):Ti(d,ho,m)}function Ru(d,b,m,B){for(var te=m-1,be=d.length;++te<be;)if(B(d[te],b))return te;return-1}function ho(d){return d!==d}function _o(d,b){var m=d==null?0:d.length;return m?kr(d,b)/m:j}function Rr(d){return function(b){return b==null?r:b[d]}}function Or(d){return function(b){return d==null?r:d[b]}}function vo(d,b,m,B,te){return te(d,function(be,Fe,Ie){m=B?(B=!1,be):b(m,be,Fe,Ie)}),m}function Ou(d,b){var m=d.length;for(d.sort(b);m--;)d[m]=d[m].value;return d}function kr(d,b){for(var m,B=-1,te=d.length;++B<te;){var be=b(d[B]);be!==r&&(m=m===r?be:m+be)}return m}function Dr(d,b){for(var m=-1,B=Array(d);++m<d;)B[m]=b(m);return B}function ku(d,b){return Ee(b,function(m){return[m,d[m]]})}function mo(d){return d&&d.slice(0,wo(d)+1).replace(yr,"")}function ht(d){return function(b){return d(b)}}function Lr(d,b){return Ee(b,function(m){return d[m]})}function ei(d,b){return d.has(b)}function yo(d,b){for(var m=-1,B=d.length;++m<B&&Un(b,d[m],0)>-1;);return m}function xo(d,b){for(var m=d.length;m--&&Un(b,d[m],0)>-1;);return m}function Du(d,b){for(var m=d.length,B=0;m--;)d[m]===b&&++B;return B}var Lu=Or(vu),Eu=Or(mu);function Pu(d){return"\\"+xu[d]}function Uu(d,b){return d==null?r:d[b]}function Mn(d){return pu.test(d)}function Mu(d){return gu.test(d)}function Bu(d){for(var b,m=[];!(b=d.next()).done;)m.push(b.value);return m}function Er(d){var b=-1,m=Array(d.size);return d.forEach(function(B,te){m[++b]=[te,B]}),m}function bo(d,b){return function(m){return d(b(m))}}function an(d,b){for(var m=-1,B=d.length,te=0,be=[];++m<B;){var Fe=d[m];(Fe===b||Fe===V)&&(d[m]=V,be[te++]=m)}return be}function Ii(d){var b=-1,m=Array(d.size);return d.forEach(function(B){m[++b]=B}),m}function Wu(d){var b=-1,m=Array(d.size);return d.forEach(function(B){m[++b]=[B,B]}),m}function Fu(d,b,m){for(var B=m-1,te=d.length;++B<te;)if(d[B]===b)return B;return-1}function qu(d,b,m){for(var B=m+1;B--;)if(d[B]===b)return B;return B}function Bn(d){return Mn(d)?Hu(d):Tu(d)}function kt(d){return Mn(d)?Gu(d):Iu(d)}function wo(d){for(var b=d.length;b--&&Da.test(d.charAt(b)););return b}var Nu=Or(yu);function Hu(d){for(var b=Ar.lastIndex=0;Ar.test(d);)++b;return b}function Gu(d){return d.match(Ar)||[]}function Vu(d){return d.match(du)||[]}var Ku=function d(b){b=b==null?Ge:Wn.defaults(Ge.Object(),b,Wn.pick(Ge,hu));var m=b.Array,B=b.Date,te=b.Error,be=b.Function,Fe=b.Math,Ie=b.Object,Pr=b.RegExp,Yu=b.String,$t=b.TypeError,zi=m.prototype,Zu=be.prototype,Fn=Ie.prototype,Ri=b["__core-js_shared__"],Oi=Zu.toString,$e=Fn.hasOwnProperty,Qu=0,So=function(){var e=/[^.]+$/.exec(Ri&&Ri.keys&&Ri.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ki=Fn.toString,Xu=Oi.call(Ie),Ju=Ge._,ju=Pr("^"+Oi.call($e).replace(mr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Di=so?b.Buffer:r,un=b.Symbol,Li=b.Uint8Array,Ao=Di?Di.allocUnsafe:r,Ei=bo(Ie.getPrototypeOf,Ie),$o=Ie.create,Co=Fn.propertyIsEnumerable,Pi=zi.splice,To=un?un.isConcatSpreadable:r,ti=un?un.iterator:r,xn=un?un.toStringTag:r,Ui=function(){try{var e=$n(Ie,"defineProperty");return e({},"",{}),e}catch{}}(),ef=b.clearTimeout!==Ge.clearTimeout&&b.clearTimeout,tf=B&&B.now!==Ge.Date.now&&B.now,nf=b.setTimeout!==Ge.setTimeout&&b.setTimeout,Mi=Fe.ceil,Bi=Fe.floor,Ur=Ie.getOwnPropertySymbols,rf=Di?Di.isBuffer:r,Io=b.isFinite,sf=zi.join,of=bo(Ie.keys,Ie),qe=Fe.max,Xe=Fe.min,lf=B.now,af=b.parseInt,zo=Fe.random,uf=zi.reverse,Mr=$n(b,"DataView"),ni=$n(b,"Map"),Br=$n(b,"Promise"),qn=$n(b,"Set"),ii=$n(b,"WeakMap"),ri=$n(Ie,"create"),Wi=ii&&new ii,Nn={},ff=Cn(Mr),cf=Cn(ni),df=Cn(Br),pf=Cn(qn),gf=Cn(ii),Fi=un?un.prototype:r,si=Fi?Fi.valueOf:r,Ro=Fi?Fi.toString:r;function o(e){if(Me(e)&&!ne(e)&&!(e instanceof he)){if(e instanceof Ct)return e;if($e.call(e,"__wrapped__"))return Ol(e)}return new Ct(e)}var Hn=function(){function e(){}return function(t){if(!Pe(t))return{};if($o)return $o(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function qi(){}function Ct(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}o.templateSettings={escape:De,evaluate:Ht,interpolate:Ms,variable:"",imports:{_:o}},o.prototype=qi.prototype,o.prototype.constructor=o,Ct.prototype=Hn(qi.prototype),Ct.prototype.constructor=Ct;function he(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=R,this.__views__=[]}function hf(){var e=new he(this.__wrapped__);return e.__actions__=st(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=st(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=st(this.__views__),e}function _f(){if(this.__filtered__){var e=new he(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function vf(){var e=this.__wrapped__.value(),t=this.__dir__,n=ne(e),i=t<0,s=n?e.length:0,l=zc(0,s,this.__views__),u=l.start,c=l.end,p=c-u,w=i?c:u-1,S=this.__iteratees__,T=S.length,P=0,H=Xe(p,this.__takeCount__);if(!n||!i&&s==p&&H==p)return el(e,this.__actions__);var Z=[];e:for(;p--&&P<H;){w+=t;for(var oe=-1,Q=e[w];++oe<T;){var fe=S[oe],ve=fe.iteratee,mt=fe.type,nt=ve(Q);if(mt==Ne)Q=nt;else if(!nt){if(mt==ze)continue e;break e}}Z[P++]=Q}return Z}he.prototype=Hn(qi.prototype),he.prototype.constructor=he;function bn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function mf(){this.__data__=ri?ri(null):{},this.size=0}function yf(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function xf(e){var t=this.__data__;if(ri){var n=t[e];return n===A?r:n}return $e.call(t,e)?t[e]:r}function bf(e){var t=this.__data__;return ri?t[e]!==r:$e.call(t,e)}function wf(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ri&&t===r?A:t,this}bn.prototype.clear=mf,bn.prototype.delete=yf,bn.prototype.get=xf,bn.prototype.has=bf,bn.prototype.set=wf;function Gt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Sf(){this.__data__=[],this.size=0}function Af(e){var t=this.__data__,n=Ni(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():Pi.call(t,n,1),--this.size,!0}function $f(e){var t=this.__data__,n=Ni(t,e);return n<0?r:t[n][1]}function Cf(e){return Ni(this.__data__,e)>-1}function Tf(e,t){var n=this.__data__,i=Ni(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}Gt.prototype.clear=Sf,Gt.prototype.delete=Af,Gt.prototype.get=$f,Gt.prototype.has=Cf,Gt.prototype.set=Tf;function Vt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function If(){this.size=0,this.__data__={hash:new bn,map:new(ni||Gt),string:new bn}}function zf(e){var t=tr(this,e).delete(e);return this.size-=t?1:0,t}function Rf(e){return tr(this,e).get(e)}function Of(e){return tr(this,e).has(e)}function kf(e,t){var n=tr(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}Vt.prototype.clear=If,Vt.prototype.delete=zf,Vt.prototype.get=Rf,Vt.prototype.has=Of,Vt.prototype.set=kf;function wn(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Vt;++t<n;)this.add(e[t])}function Df(e){return this.__data__.set(e,A),this}function Lf(e){return this.__data__.has(e)}wn.prototype.add=wn.prototype.push=Df,wn.prototype.has=Lf;function Dt(e){var t=this.__data__=new Gt(e);this.size=t.size}function Ef(){this.__data__=new Gt,this.size=0}function Pf(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Uf(e){return this.__data__.get(e)}function Mf(e){return this.__data__.has(e)}function Bf(e,t){var n=this.__data__;if(n instanceof Gt){var i=n.__data__;if(!ni||i.length<y-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Vt(i)}return n.set(e,t),this.size=n.size,this}Dt.prototype.clear=Ef,Dt.prototype.delete=Pf,Dt.prototype.get=Uf,Dt.prototype.has=Mf,Dt.prototype.set=Bf;function Oo(e,t){var n=ne(e),i=!n&&Tn(e),s=!n&&!i&&gn(e),l=!n&&!i&&!s&&Yn(e),u=n||i||s||l,c=u?Dr(e.length,Yu):[],p=c.length;for(var w in e)(t||$e.call(e,w))&&!(u&&(w=="length"||s&&(w=="offset"||w=="parent")||l&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||Qt(w,p)))&&c.push(w);return c}function ko(e){var t=e.length;return t?e[Qr(0,t-1)]:r}function Wf(e,t){return nr(st(e),Sn(t,0,e.length))}function Ff(e){return nr(st(e))}function Wr(e,t,n){(n!==r&&!Lt(e[t],n)||n===r&&!(t in e))&&Kt(e,t,n)}function oi(e,t,n){var i=e[t];(!($e.call(e,t)&&Lt(i,n))||n===r&&!(t in e))&&Kt(e,t,n)}function Ni(e,t){for(var n=e.length;n--;)if(Lt(e[n][0],t))return n;return-1}function qf(e,t,n,i){return fn(e,function(s,l,u){t(i,s,n(s),u)}),i}function Do(e,t){return e&&Wt(t,He(t),e)}function Nf(e,t){return e&&Wt(t,lt(t),e)}function Kt(e,t,n){t=="__proto__"&&Ui?Ui(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Fr(e,t){for(var n=-1,i=t.length,s=m(i),l=e==null;++n<i;)s[n]=l?r:bs(e,t[n]);return s}function Sn(e,t,n){return e===e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function Tt(e,t,n,i,s,l){var u,c=t&Y,p=t&G,w=t&q;if(n&&(u=s?n(e,i,s,l):n(e)),u!==r)return u;if(!Pe(e))return e;var S=ne(e);if(S){if(u=Oc(e),!c)return st(e,u)}else{var T=Je(e),P=T==wt||T==zn;if(gn(e))return il(e,c);if(T==Ot||T==bt||P&&!s){if(u=p||P?{}:wl(e),!c)return p?xc(e,Nf(u,e)):yc(e,Do(u,e))}else{if(!Re[T])return s?e:{};u=kc(e,T,c)}}l||(l=new Dt);var H=l.get(e);if(H)return H;l.set(e,u),Xl(e)?e.forEach(function(Q){u.add(Tt(Q,t,n,Q,e,l))}):Zl(e)&&e.forEach(function(Q,fe){u.set(fe,Tt(Q,t,n,fe,e,l))});var Z=w?p?ls:os:p?lt:He,oe=S?r:Z(e);return At(oe||e,function(Q,fe){oe&&(fe=Q,Q=e[fe]),oi(u,fe,Tt(Q,t,n,fe,e,l))}),u}function Hf(e){var t=He(e);return function(n){return Lo(n,e,t)}}function Lo(e,t,n){var i=n.length;if(e==null)return!i;for(e=Ie(e);i--;){var s=n[i],l=t[s],u=e[s];if(u===r&&!(s in e)||!l(u))return!1}return!0}function Eo(e,t,n){if(typeof e!="function")throw new $t(v);return pi(function(){e.apply(r,n)},t)}function li(e,t,n,i){var s=-1,l=Ci,u=!0,c=e.length,p=[],w=t.length;if(!c)return p;n&&(t=Ee(t,ht(n))),i?(l=Tr,u=!1):t.length>=y&&(l=ei,u=!1,t=new wn(t));e:for(;++s<c;){var S=e[s],T=n==null?S:n(S);if(S=i||S!==0?S:0,u&&T===T){for(var P=w;P--;)if(t[P]===T)continue e;p.push(S)}else l(t,T,i)||p.push(S)}return p}var fn=al(Bt),Po=al(Nr,!0);function Gf(e,t){var n=!0;return fn(e,function(i,s,l){return n=!!t(i,s,l),n}),n}function Hi(e,t,n){for(var i=-1,s=e.length;++i<s;){var l=e[i],u=t(l);if(u!=null&&(c===r?u===u&&!vt(u):n(u,c)))var c=u,p=l}return p}function Vf(e,t,n,i){var s=e.length;for(n=re(n),n<0&&(n=-n>s?0:s+n),i=i===r||i>s?s:re(i),i<0&&(i+=s),i=n>i?0:jl(i);n<i;)e[n++]=t;return e}function Uo(e,t){var n=[];return fn(e,function(i,s,l){t(i,s,l)&&n.push(i)}),n}function Ve(e,t,n,i,s){var l=-1,u=e.length;for(n||(n=Lc),s||(s=[]);++l<u;){var c=e[l];t>0&&n(c)?t>1?Ve(c,t-1,n,i,s):ln(s,c):i||(s[s.length]=c)}return s}var qr=ul(),Mo=ul(!0);function Bt(e,t){return e&&qr(e,t,He)}function Nr(e,t){return e&&Mo(e,t,He)}function Gi(e,t){return on(t,function(n){return Xt(e[n])})}function An(e,t){t=dn(t,e);for(var n=0,i=t.length;e!=null&&n<i;)e=e[Ft(t[n++])];return n&&n==i?e:r}function Bo(e,t,n){var i=t(e);return ne(e)?i:ln(i,n(e))}function et(e){return e==null?e===r?vr:_r:xn&&xn in Ie(e)?Ic(e):Fc(e)}function Hr(e,t){return e>t}function Kf(e,t){return e!=null&&$e.call(e,t)}function Yf(e,t){return e!=null&&t in Ie(e)}function Zf(e,t,n){return e>=Xe(t,n)&&e<qe(t,n)}function Gr(e,t,n){for(var i=n?Tr:Ci,s=e[0].length,l=e.length,u=l,c=m(l),p=1/0,w=[];u--;){var S=e[u];u&&t&&(S=Ee(S,ht(t))),p=Xe(S.length,p),c[u]=!n&&(t||s>=120&&S.length>=120)?new wn(u&&S):r}S=e[0];var T=-1,P=c[0];e:for(;++T<s&&w.length<p;){var H=S[T],Z=t?t(H):H;if(H=n||H!==0?H:0,!(P?ei(P,Z):i(w,Z,n))){for(u=l;--u;){var oe=c[u];if(!(oe?ei(oe,Z):i(e[u],Z,n)))continue e}P&&P.push(Z),w.push(H)}}return w}function Qf(e,t,n,i){return Bt(e,function(s,l,u){t(i,n(s),l,u)}),i}function ai(e,t,n){t=dn(t,e),e=Cl(e,t);var i=e==null?e:e[Ft(zt(t))];return i==null?r:gt(i,e,n)}function Wo(e){return Me(e)&&et(e)==bt}function Xf(e){return Me(e)&&et(e)==rn}function Jf(e){return Me(e)&&et(e)==Ut}function ui(e,t,n,i,s){return e===t?!0:e==null||t==null||!Me(e)&&!Me(t)?e!==e&&t!==t:jf(e,t,n,i,ui,s)}function jf(e,t,n,i,s,l){var u=ne(e),c=ne(t),p=u?ft:Je(e),w=c?ft:Je(t);p=p==bt?Ot:p,w=w==bt?Ot:w;var S=p==Ot,T=w==Ot,P=p==w;if(P&&gn(e)){if(!gn(t))return!1;u=!0,S=!1}if(P&&!S)return l||(l=new Dt),u||Yn(e)?yl(e,t,n,i,s,l):Cc(e,t,p,n,i,s,l);if(!(n&ie)){var H=S&&$e.call(e,"__wrapped__"),Z=T&&$e.call(t,"__wrapped__");if(H||Z){var oe=H?e.value():e,Q=Z?t.value():t;return l||(l=new Dt),s(oe,Q,n,i,l)}}return P?(l||(l=new Dt),Tc(e,t,n,i,s,l)):!1}function ec(e){return Me(e)&&Je(e)==dt}function Vr(e,t,n,i){var s=n.length,l=s,u=!i;if(e==null)return!l;for(e=Ie(e);s--;){var c=n[s];if(u&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++s<l;){c=n[s];var p=c[0],w=e[p],S=c[1];if(u&&c[2]){if(w===r&&!(p in e))return!1}else{var T=new Dt;if(i)var P=i(w,S,p,e,t,T);if(!(P===r?ui(S,w,ie|N,i,T):P))return!1}}return!0}function Fo(e){if(!Pe(e)||Pc(e))return!1;var t=Xt(e)?ju:Na;return t.test(Cn(e))}function tc(e){return Me(e)&&et(e)==tn}function nc(e){return Me(e)&&Je(e)==pt}function ic(e){return Me(e)&&ar(e.length)&&!!Le[et(e)]}function qo(e){return typeof e=="function"?e:e==null?at:typeof e=="object"?ne(e)?Go(e[0],e[1]):Ho(e):fa(e)}function Kr(e){if(!di(e))return of(e);var t=[];for(var n in Ie(e))$e.call(e,n)&&n!="constructor"&&t.push(n);return t}function rc(e){if(!Pe(e))return Wc(e);var t=di(e),n=[];for(var i in e)i=="constructor"&&(t||!$e.call(e,i))||n.push(i);return n}function Yr(e,t){return e<t}function No(e,t){var n=-1,i=ot(e)?m(e.length):[];return fn(e,function(s,l,u){i[++n]=t(s,l,u)}),i}function Ho(e){var t=us(e);return t.length==1&&t[0][2]?Al(t[0][0],t[0][1]):function(n){return n===e||Vr(n,e,t)}}function Go(e,t){return cs(e)&&Sl(t)?Al(Ft(e),t):function(n){var i=bs(n,e);return i===r&&i===t?ws(n,e):ui(t,i,ie|N)}}function Vi(e,t,n,i,s){e!==t&&qr(t,function(l,u){if(s||(s=new Dt),Pe(l))sc(e,t,u,n,Vi,i,s);else{var c=i?i(ps(e,u),l,u+"",e,t,s):r;c===r&&(c=l),Wr(e,u,c)}},lt)}function sc(e,t,n,i,s,l,u){var c=ps(e,n),p=ps(t,n),w=u.get(p);if(w){Wr(e,n,w);return}var S=l?l(c,p,n+"",e,t,u):r,T=S===r;if(T){var P=ne(p),H=!P&&gn(p),Z=!P&&!H&&Yn(p);S=p,P||H||Z?ne(c)?S=c:Be(c)?S=st(c):H?(T=!1,S=il(p,!0)):Z?(T=!1,S=rl(p,!0)):S=[]:gi(p)||Tn(p)?(S=c,Tn(c)?S=ea(c):(!Pe(c)||Xt(c))&&(S=wl(p))):T=!1}T&&(u.set(p,S),s(S,p,i,l,u),u.delete(p)),Wr(e,n,S)}function Vo(e,t){var n=e.length;if(n)return t+=t<0?n:0,Qt(t,n)?e[t]:r}function Ko(e,t,n){t.length?t=Ee(t,function(l){return ne(l)?function(u){return An(u,l.length===1?l[0]:l)}:l}):t=[at];var i=-1;t=Ee(t,ht(K()));var s=No(e,function(l,u,c){var p=Ee(t,function(w){return w(l)});return{criteria:p,index:++i,value:l}});return Ou(s,function(l,u){return mc(l,u,n)})}function oc(e,t){return Yo(e,t,function(n,i){return ws(e,i)})}function Yo(e,t,n){for(var i=-1,s=t.length,l={};++i<s;){var u=t[i],c=An(e,u);n(c,u)&&fi(l,dn(u,e),c)}return l}function lc(e){return function(t){return An(t,e)}}function Zr(e,t,n,i){var s=i?Ru:Un,l=-1,u=t.length,c=e;for(e===t&&(t=st(t)),n&&(c=Ee(e,ht(n)));++l<u;)for(var p=0,w=t[l],S=n?n(w):w;(p=s(c,S,p,i))>-1;)c!==e&&Pi.call(c,p,1),Pi.call(e,p,1);return e}function Zo(e,t){for(var n=e?t.length:0,i=n-1;n--;){var s=t[n];if(n==i||s!==l){var l=s;Qt(s)?Pi.call(e,s,1):jr(e,s)}}return e}function Qr(e,t){return e+Bi(zo()*(t-e+1))}function ac(e,t,n,i){for(var s=-1,l=qe(Mi((t-e)/(n||1)),0),u=m(l);l--;)u[i?l:++s]=e,e+=n;return u}function Xr(e,t){var n="";if(!e||t<1||t>ke)return n;do t%2&&(n+=e),t=Bi(t/2),t&&(e+=e);while(t);return n}function le(e,t){return gs($l(e,t,at),e+"")}function uc(e){return ko(Zn(e))}function fc(e,t){var n=Zn(e);return nr(n,Sn(t,0,n.length))}function fi(e,t,n,i){if(!Pe(e))return e;t=dn(t,e);for(var s=-1,l=t.length,u=l-1,c=e;c!=null&&++s<l;){var p=Ft(t[s]),w=n;if(p==="__proto__"||p==="constructor"||p==="prototype")return e;if(s!=u){var S=c[p];w=i?i(S,p,c):r,w===r&&(w=Pe(S)?S:Qt(t[s+1])?[]:{})}oi(c,p,w),c=c[p]}return e}var Qo=Wi?function(e,t){return Wi.set(e,t),e}:at,cc=Ui?function(e,t){return Ui(e,"toString",{configurable:!0,enumerable:!1,value:As(t),writable:!0})}:at;function dc(e){return nr(Zn(e))}function It(e,t,n){var i=-1,s=e.length;t<0&&(t=-t>s?0:s+t),n=n>s?s:n,n<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var l=m(s);++i<s;)l[i]=e[i+t];return l}function pc(e,t){var n;return fn(e,function(i,s,l){return n=t(i,s,l),!n}),!!n}function Ki(e,t,n){var i=0,s=e==null?i:e.length;if(typeof t=="number"&&t===t&&s<=ee){for(;i<s;){var l=i+s>>>1,u=e[l];u!==null&&!vt(u)&&(n?u<=t:u<t)?i=l+1:s=l}return s}return Jr(e,t,at,n)}function Jr(e,t,n,i){var s=0,l=e==null?0:e.length;if(l===0)return 0;t=n(t);for(var u=t!==t,c=t===null,p=vt(t),w=t===r;s<l;){var S=Bi((s+l)/2),T=n(e[S]),P=T!==r,H=T===null,Z=T===T,oe=vt(T);if(u)var Q=i||Z;else w?Q=Z&&(i||P):c?Q=Z&&P&&(i||!H):p?Q=Z&&P&&!H&&(i||!oe):H||oe?Q=!1:Q=i?T<=t:T<t;Q?s=S+1:l=S}return Xe(l,_e)}function Xo(e,t){for(var n=-1,i=e.length,s=0,l=[];++n<i;){var u=e[n],c=t?t(u):u;if(!n||!Lt(c,p)){var p=c;l[s++]=u===0?0:u}}return l}function Jo(e){return typeof e=="number"?e:vt(e)?j:+e}function _t(e){if(typeof e=="string")return e;if(ne(e))return Ee(e,_t)+"";if(vt(e))return Ro?Ro.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function cn(e,t,n){var i=-1,s=Ci,l=e.length,u=!0,c=[],p=c;if(n)u=!1,s=Tr;else if(l>=y){var w=t?null:Ac(e);if(w)return Ii(w);u=!1,s=ei,p=new wn}else p=t?[]:c;e:for(;++i<l;){var S=e[i],T=t?t(S):S;if(S=n||S!==0?S:0,u&&T===T){for(var P=p.length;P--;)if(p[P]===T)continue e;t&&p.push(T),c.push(S)}else s(p,T,n)||(p!==c&&p.push(T),c.push(S))}return c}function jr(e,t){return t=dn(t,e),e=Cl(e,t),e==null||delete e[Ft(zt(t))]}function jo(e,t,n,i){return fi(e,t,n(An(e,t)),i)}function Yi(e,t,n,i){for(var s=e.length,l=i?s:-1;(i?l--:++l<s)&&t(e[l],l,e););return n?It(e,i?0:l,i?l+1:s):It(e,i?l+1:0,i?s:l)}function el(e,t){var n=e;return n instanceof he&&(n=n.value()),Ir(t,function(i,s){return s.func.apply(s.thisArg,ln([i],s.args))},n)}function es(e,t,n){var i=e.length;if(i<2)return i?cn(e[0]):[];for(var s=-1,l=m(i);++s<i;)for(var u=e[s],c=-1;++c<i;)c!=s&&(l[s]=li(l[s]||u,e[c],t,n));return cn(Ve(l,1),t,n)}function tl(e,t,n){for(var i=-1,s=e.length,l=t.length,u={};++i<s;){var c=i<l?t[i]:r;n(u,e[i],c)}return u}function ts(e){return Be(e)?e:[]}function ns(e){return typeof e=="function"?e:at}function dn(e,t){return ne(e)?e:cs(e,t)?[e]:Rl(Se(e))}var gc=le;function pn(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:It(e,t,n)}var nl=ef||function(e){return Ge.clearTimeout(e)};function il(e,t){if(t)return e.slice();var n=e.length,i=Ao?Ao(n):new e.constructor(n);return e.copy(i),i}function is(e){var t=new e.constructor(e.byteLength);return new Li(t).set(new Li(e)),t}function hc(e,t){var n=t?is(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function _c(e){var t=new e.constructor(e.source,Bs.exec(e));return t.lastIndex=e.lastIndex,t}function vc(e){return si?Ie(si.call(e)):{}}function rl(e,t){var n=t?is(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function sl(e,t){if(e!==t){var n=e!==r,i=e===null,s=e===e,l=vt(e),u=t!==r,c=t===null,p=t===t,w=vt(t);if(!c&&!w&&!l&&e>t||l&&u&&p&&!c&&!w||i&&u&&p||!n&&p||!s)return 1;if(!i&&!l&&!w&&e<t||w&&n&&s&&!i&&!l||c&&n&&s||!u&&s||!p)return-1}return 0}function mc(e,t,n){for(var i=-1,s=e.criteria,l=t.criteria,u=s.length,c=n.length;++i<u;){var p=sl(s[i],l[i]);if(p){if(i>=c)return p;var w=n[i];return p*(w=="desc"?-1:1)}}return e.index-t.index}function ol(e,t,n,i){for(var s=-1,l=e.length,u=n.length,c=-1,p=t.length,w=qe(l-u,0),S=m(p+w),T=!i;++c<p;)S[c]=t[c];for(;++s<u;)(T||s<l)&&(S[n[s]]=e[s]);for(;w--;)S[c++]=e[s++];return S}function ll(e,t,n,i){for(var s=-1,l=e.length,u=-1,c=n.length,p=-1,w=t.length,S=qe(l-c,0),T=m(S+w),P=!i;++s<S;)T[s]=e[s];for(var H=s;++p<w;)T[H+p]=t[p];for(;++u<c;)(P||s<l)&&(T[H+n[u]]=e[s++]);return T}function st(e,t){var n=-1,i=e.length;for(t||(t=m(i));++n<i;)t[n]=e[n];return t}function Wt(e,t,n,i){var s=!n;n||(n={});for(var l=-1,u=t.length;++l<u;){var c=t[l],p=i?i(n[c],e[c],c,n,e):r;p===r&&(p=e[c]),s?Kt(n,c,p):oi(n,c,p)}return n}function yc(e,t){return Wt(e,fs(e),t)}function xc(e,t){return Wt(e,xl(e),t)}function Zi(e,t){return function(n,i){var s=ne(n)?Au:qf,l=t?t():{};return s(n,e,K(i,2),l)}}function Gn(e){return le(function(t,n){var i=-1,s=n.length,l=s>1?n[s-1]:r,u=s>2?n[2]:r;for(l=e.length>3&&typeof l=="function"?(s--,l):r,u&&tt(n[0],n[1],u)&&(l=s<3?r:l,s=1),t=Ie(t);++i<s;){var c=n[i];c&&e(t,c,i,l)}return t})}function al(e,t){return function(n,i){if(n==null)return n;if(!ot(n))return e(n,i);for(var s=n.length,l=t?s:-1,u=Ie(n);(t?l--:++l<s)&&i(u[l],l,u)!==!1;);return n}}function ul(e){return function(t,n,i){for(var s=-1,l=Ie(t),u=i(t),c=u.length;c--;){var p=u[e?c:++s];if(n(l[p],p,l)===!1)break}return t}}function bc(e,t,n){var i=t&U,s=ci(e);function l(){var u=this&&this!==Ge&&this instanceof l?s:e;return u.apply(i?n:this,arguments)}return l}function fl(e){return function(t){t=Se(t);var n=Mn(t)?kt(t):r,i=n?n[0]:t.charAt(0),s=n?pn(n,1).join(""):t.slice(1);return i[e]()+s}}function Vn(e){return function(t){return Ir(aa(la(t).replace(fu,"")),e,"")}}function ci(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Hn(e.prototype),i=e.apply(n,t);return Pe(i)?i:n}}function wc(e,t,n){var i=ci(e);function s(){for(var l=arguments.length,u=m(l),c=l,p=Kn(s);c--;)u[c]=arguments[c];var w=l<3&&u[0]!==p&&u[l-1]!==p?[]:an(u,p);if(l-=w.length,l<n)return hl(e,t,Qi,s.placeholder,r,u,w,r,r,n-l);var S=this&&this!==Ge&&this instanceof s?i:e;return gt(S,this,u)}return s}function cl(e){return function(t,n,i){var s=Ie(t);if(!ot(t)){var l=K(n,3);t=He(t),n=function(c){return l(s[c],c,s)}}var u=e(t,n,i);return u>-1?s[l?t[u]:u]:r}}function dl(e){return Zt(function(t){var n=t.length,i=n,s=Ct.prototype.thru;for(e&&t.reverse();i--;){var l=t[i];if(typeof l!="function")throw new $t(v);if(s&&!u&&er(l)=="wrapper")var u=new Ct([],!0)}for(i=u?i:n;++i<n;){l=t[i];var c=er(l),p=c=="wrapper"?as(l):r;p&&ds(p[0])&&p[1]==(se|ue|L|Ce)&&!p[4].length&&p[9]==1?u=u[er(p[0])].apply(u,p[3]):u=l.length==1&&ds(l)?u[c]():u.thru(l)}return function(){var w=arguments,S=w[0];if(u&&w.length==1&&ne(S))return u.plant(S).value();for(var T=0,P=n?t[T].apply(this,w):S;++T<n;)P=t[T].call(this,P);return P}})}function Qi(e,t,n,i,s,l,u,c,p,w){var S=t&se,T=t&U,P=t&pe,H=t&(ue|F),Z=t&Oe,oe=P?r:ci(e);function Q(){for(var fe=arguments.length,ve=m(fe),mt=fe;mt--;)ve[mt]=arguments[mt];if(H)var nt=Kn(Q),yt=Du(ve,nt);if(i&&(ve=ol(ve,i,s,H)),l&&(ve=ll(ve,l,u,H)),fe-=yt,H&&fe<w){var We=an(ve,nt);return hl(e,t,Qi,Q.placeholder,n,ve,We,c,p,w-fe)}var Et=T?n:this,jt=P?Et[e]:e;return fe=ve.length,c?ve=qc(ve,c):Z&&fe>1&&ve.reverse(),S&&p<fe&&(ve.length=p),this&&this!==Ge&&this instanceof Q&&(jt=oe||ci(jt)),jt.apply(Et,ve)}return Q}function pl(e,t){return function(n,i){return Qf(n,e,t(i),{})}}function Xi(e,t){return function(n,i){var s;if(n===r&&i===r)return t;if(n!==r&&(s=n),i!==r){if(s===r)return i;typeof n=="string"||typeof i=="string"?(n=_t(n),i=_t(i)):(n=Jo(n),i=Jo(i)),s=e(n,i)}return s}}function rs(e){return Zt(function(t){return t=Ee(t,ht(K())),le(function(n){var i=this;return e(t,function(s){return gt(s,i,n)})})})}function Ji(e,t){t=t===r?" ":_t(t);var n=t.length;if(n<2)return n?Xr(t,e):t;var i=Xr(t,Mi(e/Bn(t)));return Mn(t)?pn(kt(i),0,e).join(""):i.slice(0,e)}function Sc(e,t,n,i){var s=t&U,l=ci(e);function u(){for(var c=-1,p=arguments.length,w=-1,S=i.length,T=m(S+p),P=this&&this!==Ge&&this instanceof u?l:e;++w<S;)T[w]=i[w];for(;p--;)T[w++]=arguments[++c];return gt(P,s?n:this,T)}return u}function gl(e){return function(t,n,i){return i&&typeof i!="number"&&tt(t,n,i)&&(n=i=r),t=Jt(t),n===r?(n=t,t=0):n=Jt(n),i=i===r?t<n?1:-1:Jt(i),ac(t,n,i,e)}}function ji(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Rt(t),n=Rt(n)),e(t,n)}}function hl(e,t,n,i,s,l,u,c,p,w){var S=t&ue,T=S?u:r,P=S?r:u,H=S?l:r,Z=S?r:l;t|=S?L:Ue,t&=~(S?Ue:L),t&we||(t&=-4);var oe=[e,t,s,H,T,Z,P,c,p,w],Q=n.apply(r,oe);return ds(e)&&Tl(Q,oe),Q.placeholder=i,Il(Q,e,t)}function ss(e){var t=Fe[e];return function(n,i){if(n=Rt(n),i=i==null?0:Xe(re(i),292),i&&Io(n)){var s=(Se(n)+"e").split("e"),l=t(s[0]+"e"+(+s[1]+i));return s=(Se(l)+"e").split("e"),+(s[0]+"e"+(+s[1]-i))}return t(n)}}var Ac=qn&&1/Ii(new qn([,-0]))[1]==me?function(e){return new qn(e)}:Ts;function _l(e){return function(t){var n=Je(t);return n==dt?Er(t):n==pt?Wu(t):ku(t,e(t))}}function Yt(e,t,n,i,s,l,u,c){var p=t&pe;if(!p&&typeof e!="function")throw new $t(v);var w=i?i.length:0;if(w||(t&=-97,i=s=r),u=u===r?u:qe(re(u),0),c=c===r?c:re(c),w-=s?s.length:0,t&Ue){var S=i,T=s;i=s=r}var P=p?r:as(e),H=[e,t,n,i,s,S,T,l,u,c];if(P&&Bc(H,P),e=H[0],t=H[1],n=H[2],i=H[3],s=H[4],c=H[9]=H[9]===r?p?0:e.length:qe(H[9]-w,0),!c&&t&(ue|F)&&(t&=-25),!t||t==U)var Z=bc(e,t,n);else t==ue||t==F?Z=wc(e,t,c):(t==L||t==(U|L))&&!s.length?Z=Sc(e,t,n,i):Z=Qi.apply(r,H);var oe=P?Qo:Tl;return Il(oe(Z,H),e,t)}function vl(e,t,n,i){return e===r||Lt(e,Fn[n])&&!$e.call(i,n)?t:e}function ml(e,t,n,i,s,l){return Pe(e)&&Pe(t)&&(l.set(t,e),Vi(e,t,r,ml,l),l.delete(t)),e}function $c(e){return gi(e)?r:e}function yl(e,t,n,i,s,l){var u=n&ie,c=e.length,p=t.length;if(c!=p&&!(u&&p>c))return!1;var w=l.get(e),S=l.get(t);if(w&&S)return w==t&&S==e;var T=-1,P=!0,H=n&N?new wn:r;for(l.set(e,t),l.set(t,e);++T<c;){var Z=e[T],oe=t[T];if(i)var Q=u?i(oe,Z,T,t,e,l):i(Z,oe,T,e,t,l);if(Q!==r){if(Q)continue;P=!1;break}if(H){if(!zr(t,function(fe,ve){if(!ei(H,ve)&&(Z===fe||s(Z,fe,n,i,l)))return H.push(ve)})){P=!1;break}}else if(!(Z===oe||s(Z,oe,n,i,l))){P=!1;break}}return l.delete(e),l.delete(t),P}function Cc(e,t,n,i,s,l,u){switch(n){case sn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case rn:return!(e.byteLength!=t.byteLength||!l(new Li(e),new Li(t)));case Pt:case Ut:case en:return Lt(+e,+t);case ct:return e.name==t.name&&e.message==t.message;case tn:case mn:return e==t+"";case dt:var c=Er;case pt:var p=i&ie;if(c||(c=Ii),e.size!=t.size&&!p)return!1;var w=u.get(e);if(w)return w==t;i|=N,u.set(e,t);var S=yl(c(e),c(t),i,s,l,u);return u.delete(e),S;case Rn:if(si)return si.call(e)==si.call(t)}return!1}function Tc(e,t,n,i,s,l){var u=n&ie,c=os(e),p=c.length,w=os(t),S=w.length;if(p!=S&&!u)return!1;for(var T=p;T--;){var P=c[T];if(!(u?P in t:$e.call(t,P)))return!1}var H=l.get(e),Z=l.get(t);if(H&&Z)return H==t&&Z==e;var oe=!0;l.set(e,t),l.set(t,e);for(var Q=u;++T<p;){P=c[T];var fe=e[P],ve=t[P];if(i)var mt=u?i(ve,fe,P,t,e,l):i(fe,ve,P,e,t,l);if(!(mt===r?fe===ve||s(fe,ve,n,i,l):mt)){oe=!1;break}Q||(Q=P=="constructor")}if(oe&&!Q){var nt=e.constructor,yt=t.constructor;nt!=yt&&"constructor"in e&&"constructor"in t&&!(typeof nt=="function"&&nt instanceof nt&&typeof yt=="function"&&yt instanceof yt)&&(oe=!1)}return l.delete(e),l.delete(t),oe}function Zt(e){return gs($l(e,r,Ll),e+"")}function os(e){return Bo(e,He,fs)}function ls(e){return Bo(e,lt,xl)}var as=Wi?function(e){return Wi.get(e)}:Ts;function er(e){for(var t=e.name+"",n=Nn[t],i=$e.call(Nn,t)?n.length:0;i--;){var s=n[i],l=s.func;if(l==null||l==e)return s.name}return t}function Kn(e){var t=$e.call(o,"placeholder")?o:e;return t.placeholder}function K(){var e=o.iteratee||$s;return e=e===$s?qo:e,arguments.length?e(arguments[0],arguments[1]):e}function tr(e,t){var n=e.__data__;return Ec(t)?n[typeof t=="string"?"string":"hash"]:n.map}function us(e){for(var t=He(e),n=t.length;n--;){var i=t[n],s=e[i];t[n]=[i,s,Sl(s)]}return t}function $n(e,t){var n=Uu(e,t);return Fo(n)?n:r}function Ic(e){var t=$e.call(e,xn),n=e[xn];try{e[xn]=r;var i=!0}catch{}var s=ki.call(e);return i&&(t?e[xn]=n:delete e[xn]),s}var fs=Ur?function(e){return e==null?[]:(e=Ie(e),on(Ur(e),function(t){return Co.call(e,t)}))}:Is,xl=Ur?function(e){for(var t=[];e;)ln(t,fs(e)),e=Ei(e);return t}:Is,Je=et;(Mr&&Je(new Mr(new ArrayBuffer(1)))!=sn||ni&&Je(new ni)!=dt||Br&&Je(Br.resolve())!=_i||qn&&Je(new qn)!=pt||ii&&Je(new ii)!=nn)&&(Je=function(e){var t=et(e),n=t==Ot?e.constructor:r,i=n?Cn(n):"";if(i)switch(i){case ff:return sn;case cf:return dt;case df:return _i;case pf:return pt;case gf:return nn}return t});function zc(e,t,n){for(var i=-1,s=n.length;++i<s;){var l=n[i],u=l.size;switch(l.type){case"drop":e+=u;break;case"dropRight":t-=u;break;case"take":t=Xe(t,e+u);break;case"takeRight":e=qe(e,t-u);break}}return{start:e,end:t}}function Rc(e){var t=e.match(Ea);return t?t[1].split(Pa):[]}function bl(e,t,n){t=dn(t,e);for(var i=-1,s=t.length,l=!1;++i<s;){var u=Ft(t[i]);if(!(l=e!=null&&n(e,u)))break;e=e[u]}return l||++i!=s?l:(s=e==null?0:e.length,!!s&&ar(s)&&Qt(u,s)&&(ne(e)||Tn(e)))}function Oc(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&$e.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function wl(e){return typeof e.constructor=="function"&&!di(e)?Hn(Ei(e)):{}}function kc(e,t,n){var i=e.constructor;switch(t){case rn:return is(e);case Pt:case Ut:return new i(+e);case sn:return hc(e,n);case ge:case je:case Qe:case Mt:case On:case kn:case Dn:case Ln:case En:return rl(e,n);case dt:return new i;case en:case mn:return new i(e);case tn:return _c(e);case pt:return new i;case Rn:return vc(e)}}function Dc(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(La,`{
/* [wrapped with `+t+`] */
`)}function Lc(e){return ne(e)||Tn(e)||!!(To&&e&&e[To])}function Qt(e,t){var n=typeof e;return t=t??ke,!!t&&(n=="number"||n!="symbol"&&Ga.test(e))&&e>-1&&e%1==0&&e<t}function tt(e,t,n){if(!Pe(n))return!1;var i=typeof t;return(i=="number"?ot(n)&&Qt(t,n.length):i=="string"&&t in n)?Lt(n[t],e):!1}function cs(e,t){if(ne(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||vt(e)?!0:Ra.test(e)||!za.test(e)||t!=null&&e in Ie(t)}function Ec(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ds(e){var t=er(e),n=o[t];if(typeof n!="function"||!(t in he.prototype))return!1;if(e===n)return!0;var i=as(n);return!!i&&e===i[0]}function Pc(e){return!!So&&So in e}var Uc=Ri?Xt:zs;function di(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Fn;return e===n}function Sl(e){return e===e&&!Pe(e)}function Al(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==r||e in Ie(n))}}function Mc(e){var t=or(e,function(i){return n.size===O&&n.clear(),i}),n=t.cache;return t}function Bc(e,t){var n=e[1],i=t[1],s=n|i,l=s<(U|pe|se),u=i==se&&n==ue||i==se&&n==Ce&&e[7].length<=t[8]||i==(se|Ce)&&t[7].length<=t[8]&&n==ue;if(!(l||u))return e;i&U&&(e[2]=t[2],s|=n&U?0:we);var c=t[3];if(c){var p=e[3];e[3]=p?ol(p,c,t[4]):c,e[4]=p?an(e[3],V):t[4]}return c=t[5],c&&(p=e[5],e[5]=p?ll(p,c,t[6]):c,e[6]=p?an(e[5],V):t[6]),c=t[7],c&&(e[7]=c),i&se&&(e[8]=e[8]==null?t[8]:Xe(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=s,e}function Wc(e){var t=[];if(e!=null)for(var n in Ie(e))t.push(n);return t}function Fc(e){return ki.call(e)}function $l(e,t,n){return t=qe(t===r?e.length-1:t,0),function(){for(var i=arguments,s=-1,l=qe(i.length-t,0),u=m(l);++s<l;)u[s]=i[t+s];s=-1;for(var c=m(t+1);++s<t;)c[s]=i[s];return c[t]=n(u),gt(e,this,c)}}function Cl(e,t){return t.length<2?e:An(e,It(t,0,-1))}function qc(e,t){for(var n=e.length,i=Xe(t.length,n),s=st(e);i--;){var l=t[i];e[i]=Qt(l,n)?s[l]:r}return e}function ps(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Tl=zl(Qo),pi=nf||function(e,t){return Ge.setTimeout(e,t)},gs=zl(cc);function Il(e,t,n){var i=t+"";return gs(e,Dc(i,Nc(Rc(i),n)))}function zl(e){var t=0,n=0;return function(){var i=lf(),s=J-(i-n);if(n=i,s>0){if(++t>=X)return arguments[0]}else t=0;return e.apply(r,arguments)}}function nr(e,t){var n=-1,i=e.length,s=i-1;for(t=t===r?i:t;++n<t;){var l=Qr(n,s),u=e[l];e[l]=e[n],e[n]=u}return e.length=t,e}var Rl=Mc(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Oa,function(n,i,s,l){t.push(s?l.replace(Ba,"$1"):i||n)}),t});function Ft(e){if(typeof e=="string"||vt(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Cn(e){if(e!=null){try{return Oi.call(e)}catch{}try{return e+""}catch{}}return""}function Nc(e,t){return At(ye,function(n){var i="_."+n[0];t&n[1]&&!Ci(e,i)&&e.push(i)}),e.sort()}function Ol(e){if(e instanceof he)return e.clone();var t=new Ct(e.__wrapped__,e.__chain__);return t.__actions__=st(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Hc(e,t,n){(n?tt(e,t,n):t===r)?t=1:t=qe(re(t),0);var i=e==null?0:e.length;if(!i||t<1)return[];for(var s=0,l=0,u=m(Mi(i/t));s<i;)u[l++]=It(e,s,s+=t);return u}function Gc(e){for(var t=-1,n=e==null?0:e.length,i=0,s=[];++t<n;){var l=e[t];l&&(s[i++]=l)}return s}function Vc(){var e=arguments.length;if(!e)return[];for(var t=m(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return ln(ne(n)?st(n):[n],Ve(t,1))}var Kc=le(function(e,t){return Be(e)?li(e,Ve(t,1,Be,!0)):[]}),Yc=le(function(e,t){var n=zt(t);return Be(n)&&(n=r),Be(e)?li(e,Ve(t,1,Be,!0),K(n,2)):[]}),Zc=le(function(e,t){var n=zt(t);return Be(n)&&(n=r),Be(e)?li(e,Ve(t,1,Be,!0),r,n):[]});function Qc(e,t,n){var i=e==null?0:e.length;return i?(t=n||t===r?1:re(t),It(e,t<0?0:t,i)):[]}function Xc(e,t,n){var i=e==null?0:e.length;return i?(t=n||t===r?1:re(t),t=i-t,It(e,0,t<0?0:t)):[]}function Jc(e,t){return e&&e.length?Yi(e,K(t,3),!0,!0):[]}function jc(e,t){return e&&e.length?Yi(e,K(t,3),!0):[]}function ed(e,t,n,i){var s=e==null?0:e.length;return s?(n&&typeof n!="number"&&tt(e,t,n)&&(n=0,i=s),Vf(e,t,n,i)):[]}function kl(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var s=n==null?0:re(n);return s<0&&(s=qe(i+s,0)),Ti(e,K(t,3),s)}function Dl(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var s=i-1;return n!==r&&(s=re(n),s=n<0?qe(i+s,0):Xe(s,i-1)),Ti(e,K(t,3),s,!0)}function Ll(e){var t=e==null?0:e.length;return t?Ve(e,1):[]}function td(e){var t=e==null?0:e.length;return t?Ve(e,me):[]}function nd(e,t){var n=e==null?0:e.length;return n?(t=t===r?1:re(t),Ve(e,t)):[]}function id(e){for(var t=-1,n=e==null?0:e.length,i={};++t<n;){var s=e[t];i[s[0]]=s[1]}return i}function El(e){return e&&e.length?e[0]:r}function rd(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var s=n==null?0:re(n);return s<0&&(s=qe(i+s,0)),Un(e,t,s)}function sd(e){var t=e==null?0:e.length;return t?It(e,0,-1):[]}var od=le(function(e){var t=Ee(e,ts);return t.length&&t[0]===e[0]?Gr(t):[]}),ld=le(function(e){var t=zt(e),n=Ee(e,ts);return t===zt(n)?t=r:n.pop(),n.length&&n[0]===e[0]?Gr(n,K(t,2)):[]}),ad=le(function(e){var t=zt(e),n=Ee(e,ts);return t=typeof t=="function"?t:r,t&&n.pop(),n.length&&n[0]===e[0]?Gr(n,r,t):[]});function ud(e,t){return e==null?"":sf.call(e,t)}function zt(e){var t=e==null?0:e.length;return t?e[t-1]:r}function fd(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var s=i;return n!==r&&(s=re(n),s=s<0?qe(i+s,0):Xe(s,i-1)),t===t?qu(e,t,s):Ti(e,ho,s,!0)}function cd(e,t){return e&&e.length?Vo(e,re(t)):r}var dd=le(Pl);function Pl(e,t){return e&&e.length&&t&&t.length?Zr(e,t):e}function pd(e,t,n){return e&&e.length&&t&&t.length?Zr(e,t,K(n,2)):e}function gd(e,t,n){return e&&e.length&&t&&t.length?Zr(e,t,r,n):e}var hd=Zt(function(e,t){var n=e==null?0:e.length,i=Fr(e,t);return Zo(e,Ee(t,function(s){return Qt(s,n)?+s:s}).sort(sl)),i});function _d(e,t){var n=[];if(!(e&&e.length))return n;var i=-1,s=[],l=e.length;for(t=K(t,3);++i<l;){var u=e[i];t(u,i,e)&&(n.push(u),s.push(i))}return Zo(e,s),n}function hs(e){return e==null?e:uf.call(e)}function vd(e,t,n){var i=e==null?0:e.length;return i?(n&&typeof n!="number"&&tt(e,t,n)?(t=0,n=i):(t=t==null?0:re(t),n=n===r?i:re(n)),It(e,t,n)):[]}function md(e,t){return Ki(e,t)}function yd(e,t,n){return Jr(e,t,K(n,2))}function xd(e,t){var n=e==null?0:e.length;if(n){var i=Ki(e,t);if(i<n&&Lt(e[i],t))return i}return-1}function bd(e,t){return Ki(e,t,!0)}function wd(e,t,n){return Jr(e,t,K(n,2),!0)}function Sd(e,t){var n=e==null?0:e.length;if(n){var i=Ki(e,t,!0)-1;if(Lt(e[i],t))return i}return-1}function Ad(e){return e&&e.length?Xo(e):[]}function $d(e,t){return e&&e.length?Xo(e,K(t,2)):[]}function Cd(e){var t=e==null?0:e.length;return t?It(e,1,t):[]}function Td(e,t,n){return e&&e.length?(t=n||t===r?1:re(t),It(e,0,t<0?0:t)):[]}function Id(e,t,n){var i=e==null?0:e.length;return i?(t=n||t===r?1:re(t),t=i-t,It(e,t<0?0:t,i)):[]}function zd(e,t){return e&&e.length?Yi(e,K(t,3),!1,!0):[]}function Rd(e,t){return e&&e.length?Yi(e,K(t,3)):[]}var Od=le(function(e){return cn(Ve(e,1,Be,!0))}),kd=le(function(e){var t=zt(e);return Be(t)&&(t=r),cn(Ve(e,1,Be,!0),K(t,2))}),Dd=le(function(e){var t=zt(e);return t=typeof t=="function"?t:r,cn(Ve(e,1,Be,!0),r,t)});function Ld(e){return e&&e.length?cn(e):[]}function Ed(e,t){return e&&e.length?cn(e,K(t,2)):[]}function Pd(e,t){return t=typeof t=="function"?t:r,e&&e.length?cn(e,r,t):[]}function _s(e){if(!(e&&e.length))return[];var t=0;return e=on(e,function(n){if(Be(n))return t=qe(n.length,t),!0}),Dr(t,function(n){return Ee(e,Rr(n))})}function Ul(e,t){if(!(e&&e.length))return[];var n=_s(e);return t==null?n:Ee(n,function(i){return gt(t,r,i)})}var Ud=le(function(e,t){return Be(e)?li(e,t):[]}),Md=le(function(e){return es(on(e,Be))}),Bd=le(function(e){var t=zt(e);return Be(t)&&(t=r),es(on(e,Be),K(t,2))}),Wd=le(function(e){var t=zt(e);return t=typeof t=="function"?t:r,es(on(e,Be),r,t)}),Fd=le(_s);function qd(e,t){return tl(e||[],t||[],oi)}function Nd(e,t){return tl(e||[],t||[],fi)}var Hd=le(function(e){var t=e.length,n=t>1?e[t-1]:r;return n=typeof n=="function"?(e.pop(),n):r,Ul(e,n)});function Ml(e){var t=o(e);return t.__chain__=!0,t}function Gd(e,t){return t(e),e}function ir(e,t){return t(e)}var Vd=Zt(function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,s=function(l){return Fr(l,e)};return t>1||this.__actions__.length||!(i instanceof he)||!Qt(n)?this.thru(s):(i=i.slice(n,+n+(t?1:0)),i.__actions__.push({func:ir,args:[s],thisArg:r}),new Ct(i,this.__chain__).thru(function(l){return t&&!l.length&&l.push(r),l}))});function Kd(){return Ml(this)}function Yd(){return new Ct(this.value(),this.__chain__)}function Zd(){this.__values__===r&&(this.__values__=Jl(this.value()));var e=this.__index__>=this.__values__.length,t=e?r:this.__values__[this.__index__++];return{done:e,value:t}}function Qd(){return this}function Xd(e){for(var t,n=this;n instanceof qi;){var i=Ol(n);i.__index__=0,i.__values__=r,t?s.__wrapped__=i:t=i;var s=i;n=n.__wrapped__}return s.__wrapped__=e,t}function Jd(){var e=this.__wrapped__;if(e instanceof he){var t=e;return this.__actions__.length&&(t=new he(this)),t=t.reverse(),t.__actions__.push({func:ir,args:[hs],thisArg:r}),new Ct(t,this.__chain__)}return this.thru(hs)}function jd(){return el(this.__wrapped__,this.__actions__)}var ep=Zi(function(e,t,n){$e.call(e,n)?++e[n]:Kt(e,n,1)});function tp(e,t,n){var i=ne(e)?po:Gf;return n&&tt(e,t,n)&&(t=r),i(e,K(t,3))}function np(e,t){var n=ne(e)?on:Uo;return n(e,K(t,3))}var ip=cl(kl),rp=cl(Dl);function sp(e,t){return Ve(rr(e,t),1)}function op(e,t){return Ve(rr(e,t),me)}function lp(e,t,n){return n=n===r?1:re(n),Ve(rr(e,t),n)}function Bl(e,t){var n=ne(e)?At:fn;return n(e,K(t,3))}function Wl(e,t){var n=ne(e)?$u:Po;return n(e,K(t,3))}var ap=Zi(function(e,t,n){$e.call(e,n)?e[n].push(t):Kt(e,n,[t])});function up(e,t,n,i){e=ot(e)?e:Zn(e),n=n&&!i?re(n):0;var s=e.length;return n<0&&(n=qe(s+n,0)),ur(e)?n<=s&&e.indexOf(t,n)>-1:!!s&&Un(e,t,n)>-1}var fp=le(function(e,t,n){var i=-1,s=typeof t=="function",l=ot(e)?m(e.length):[];return fn(e,function(u){l[++i]=s?gt(t,u,n):ai(u,t,n)}),l}),cp=Zi(function(e,t,n){Kt(e,n,t)});function rr(e,t){var n=ne(e)?Ee:No;return n(e,K(t,3))}function dp(e,t,n,i){return e==null?[]:(ne(t)||(t=t==null?[]:[t]),n=i?r:n,ne(n)||(n=n==null?[]:[n]),Ko(e,t,n))}var pp=Zi(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function gp(e,t,n){var i=ne(e)?Ir:vo,s=arguments.length<3;return i(e,K(t,4),n,s,fn)}function hp(e,t,n){var i=ne(e)?Cu:vo,s=arguments.length<3;return i(e,K(t,4),n,s,Po)}function _p(e,t){var n=ne(e)?on:Uo;return n(e,lr(K(t,3)))}function vp(e){var t=ne(e)?ko:uc;return t(e)}function mp(e,t,n){(n?tt(e,t,n):t===r)?t=1:t=re(t);var i=ne(e)?Wf:fc;return i(e,t)}function yp(e){var t=ne(e)?Ff:dc;return t(e)}function xp(e){if(e==null)return 0;if(ot(e))return ur(e)?Bn(e):e.length;var t=Je(e);return t==dt||t==pt?e.size:Kr(e).length}function bp(e,t,n){var i=ne(e)?zr:pc;return n&&tt(e,t,n)&&(t=r),i(e,K(t,3))}var wp=le(function(e,t){if(e==null)return[];var n=t.length;return n>1&&tt(e,t[0],t[1])?t=[]:n>2&&tt(t[0],t[1],t[2])&&(t=[t[0]]),Ko(e,Ve(t,1),[])}),sr=tf||function(){return Ge.Date.now()};function Sp(e,t){if(typeof t!="function")throw new $t(v);return e=re(e),function(){if(--e<1)return t.apply(this,arguments)}}function Fl(e,t,n){return t=n?r:t,t=e&&t==null?e.length:t,Yt(e,se,r,r,r,r,t)}function ql(e,t){var n;if(typeof t!="function")throw new $t(v);return e=re(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var vs=le(function(e,t,n){var i=U;if(n.length){var s=an(n,Kn(vs));i|=L}return Yt(e,i,t,n,s)}),Nl=le(function(e,t,n){var i=U|pe;if(n.length){var s=an(n,Kn(Nl));i|=L}return Yt(t,i,e,n,s)});function Hl(e,t,n){t=n?r:t;var i=Yt(e,ue,r,r,r,r,r,t);return i.placeholder=Hl.placeholder,i}function Gl(e,t,n){t=n?r:t;var i=Yt(e,F,r,r,r,r,r,t);return i.placeholder=Gl.placeholder,i}function Vl(e,t,n){var i,s,l,u,c,p,w=0,S=!1,T=!1,P=!0;if(typeof e!="function")throw new $t(v);t=Rt(t)||0,Pe(n)&&(S=!!n.leading,T="maxWait"in n,l=T?qe(Rt(n.maxWait)||0,t):l,P="trailing"in n?!!n.trailing:P);function H(We){var Et=i,jt=s;return i=s=r,w=We,u=e.apply(jt,Et),u}function Z(We){return w=We,c=pi(fe,t),S?H(We):u}function oe(We){var Et=We-p,jt=We-w,ca=t-Et;return T?Xe(ca,l-jt):ca}function Q(We){var Et=We-p,jt=We-w;return p===r||Et>=t||Et<0||T&&jt>=l}function fe(){var We=sr();if(Q(We))return ve(We);c=pi(fe,oe(We))}function ve(We){return c=r,P&&i?H(We):(i=s=r,u)}function mt(){c!==r&&nl(c),w=0,i=p=s=c=r}function nt(){return c===r?u:ve(sr())}function yt(){var We=sr(),Et=Q(We);if(i=arguments,s=this,p=We,Et){if(c===r)return Z(p);if(T)return nl(c),c=pi(fe,t),H(p)}return c===r&&(c=pi(fe,t)),u}return yt.cancel=mt,yt.flush=nt,yt}var Ap=le(function(e,t){return Eo(e,1,t)}),$p=le(function(e,t,n){return Eo(e,Rt(t)||0,n)});function Cp(e){return Yt(e,Oe)}function or(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new $t(v);var n=function(){var i=arguments,s=t?t.apply(this,i):i[0],l=n.cache;if(l.has(s))return l.get(s);var u=e.apply(this,i);return n.cache=l.set(s,u)||l,u};return n.cache=new(or.Cache||Vt),n}or.Cache=Vt;function lr(e){if(typeof e!="function")throw new $t(v);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Tp(e){return ql(2,e)}var Ip=gc(function(e,t){t=t.length==1&&ne(t[0])?Ee(t[0],ht(K())):Ee(Ve(t,1),ht(K()));var n=t.length;return le(function(i){for(var s=-1,l=Xe(i.length,n);++s<l;)i[s]=t[s].call(this,i[s]);return gt(e,this,i)})}),ms=le(function(e,t){var n=an(t,Kn(ms));return Yt(e,L,r,t,n)}),Kl=le(function(e,t){var n=an(t,Kn(Kl));return Yt(e,Ue,r,t,n)}),zp=Zt(function(e,t){return Yt(e,Ce,r,r,r,t)});function Rp(e,t){if(typeof e!="function")throw new $t(v);return t=t===r?t:re(t),le(e,t)}function Op(e,t){if(typeof e!="function")throw new $t(v);return t=t==null?0:qe(re(t),0),le(function(n){var i=n[t],s=pn(n,0,t);return i&&ln(s,i),gt(e,this,s)})}function kp(e,t,n){var i=!0,s=!0;if(typeof e!="function")throw new $t(v);return Pe(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),Vl(e,t,{leading:i,maxWait:t,trailing:s})}function Dp(e){return Fl(e,1)}function Lp(e,t){return ms(ns(t),e)}function Ep(){if(!arguments.length)return[];var e=arguments[0];return ne(e)?e:[e]}function Pp(e){return Tt(e,q)}function Up(e,t){return t=typeof t=="function"?t:r,Tt(e,q,t)}function Mp(e){return Tt(e,Y|q)}function Bp(e,t){return t=typeof t=="function"?t:r,Tt(e,Y|q,t)}function Wp(e,t){return t==null||Lo(e,t,He(t))}function Lt(e,t){return e===t||e!==e&&t!==t}var Fp=ji(Hr),qp=ji(function(e,t){return e>=t}),Tn=Wo(function(){return arguments}())?Wo:function(e){return Me(e)&&$e.call(e,"callee")&&!Co.call(e,"callee")},ne=m.isArray,Np=oo?ht(oo):Xf;function ot(e){return e!=null&&ar(e.length)&&!Xt(e)}function Be(e){return Me(e)&&ot(e)}function Hp(e){return e===!0||e===!1||Me(e)&&et(e)==Pt}var gn=rf||zs,Gp=lo?ht(lo):Jf;function Vp(e){return Me(e)&&e.nodeType===1&&!gi(e)}function Kp(e){if(e==null)return!0;if(ot(e)&&(ne(e)||typeof e=="string"||typeof e.splice=="function"||gn(e)||Yn(e)||Tn(e)))return!e.length;var t=Je(e);if(t==dt||t==pt)return!e.size;if(di(e))return!Kr(e).length;for(var n in e)if($e.call(e,n))return!1;return!0}function Yp(e,t){return ui(e,t)}function Zp(e,t,n){n=typeof n=="function"?n:r;var i=n?n(e,t):r;return i===r?ui(e,t,r,n):!!i}function ys(e){if(!Me(e))return!1;var t=et(e);return t==ct||t==Te||typeof e.message=="string"&&typeof e.name=="string"&&!gi(e)}function Qp(e){return typeof e=="number"&&Io(e)}function Xt(e){if(!Pe(e))return!1;var t=et(e);return t==wt||t==zn||t==Nt||t==vi}function Yl(e){return typeof e=="number"&&e==re(e)}function ar(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ke}function Pe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Me(e){return e!=null&&typeof e=="object"}var Zl=ao?ht(ao):ec;function Xp(e,t){return e===t||Vr(e,t,us(t))}function Jp(e,t,n){return n=typeof n=="function"?n:r,Vr(e,t,us(t),n)}function jp(e){return Ql(e)&&e!=+e}function eg(e){if(Uc(e))throw new te(z);return Fo(e)}function tg(e){return e===null}function ng(e){return e==null}function Ql(e){return typeof e=="number"||Me(e)&&et(e)==en}function gi(e){if(!Me(e)||et(e)!=Ot)return!1;var t=Ei(e);if(t===null)return!0;var n=$e.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Oi.call(n)==Xu}var xs=uo?ht(uo):tc;function ig(e){return Yl(e)&&e>=-9007199254740991&&e<=ke}var Xl=fo?ht(fo):nc;function ur(e){return typeof e=="string"||!ne(e)&&Me(e)&&et(e)==mn}function vt(e){return typeof e=="symbol"||Me(e)&&et(e)==Rn}var Yn=co?ht(co):ic;function rg(e){return e===r}function sg(e){return Me(e)&&Je(e)==nn}function og(e){return Me(e)&&et(e)==mi}var lg=ji(Yr),ag=ji(function(e,t){return e<=t});function Jl(e){if(!e)return[];if(ot(e))return ur(e)?kt(e):st(e);if(ti&&e[ti])return Bu(e[ti]());var t=Je(e),n=t==dt?Er:t==pt?Ii:Zn;return n(e)}function Jt(e){if(!e)return e===0?e:0;if(e=Rt(e),e===me||e===-1/0){var t=e<0?-1:1;return t*Ze}return e===e?e:0}function re(e){var t=Jt(e),n=t%1;return t===t?n?t-n:t:0}function jl(e){return e?Sn(re(e),0,R):0}function Rt(e){if(typeof e=="number")return e;if(vt(e))return j;if(Pe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Pe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=mo(e);var n=qa.test(e);return n||Ha.test(e)?wu(e.slice(2),n?2:8):Fa.test(e)?j:+e}function ea(e){return Wt(e,lt(e))}function ug(e){return e?Sn(re(e),-9007199254740991,ke):e===0?e:0}function Se(e){return e==null?"":_t(e)}var fg=Gn(function(e,t){if(di(t)||ot(t)){Wt(t,He(t),e);return}for(var n in t)$e.call(t,n)&&oi(e,n,t[n])}),ta=Gn(function(e,t){Wt(t,lt(t),e)}),fr=Gn(function(e,t,n,i){Wt(t,lt(t),e,i)}),cg=Gn(function(e,t,n,i){Wt(t,He(t),e,i)}),dg=Zt(Fr);function pg(e,t){var n=Hn(e);return t==null?n:Do(n,t)}var gg=le(function(e,t){e=Ie(e);var n=-1,i=t.length,s=i>2?t[2]:r;for(s&&tt(t[0],t[1],s)&&(i=1);++n<i;)for(var l=t[n],u=lt(l),c=-1,p=u.length;++c<p;){var w=u[c],S=e[w];(S===r||Lt(S,Fn[w])&&!$e.call(e,w))&&(e[w]=l[w])}return e}),hg=le(function(e){return e.push(r,ml),gt(na,r,e)});function _g(e,t){return go(e,K(t,3),Bt)}function vg(e,t){return go(e,K(t,3),Nr)}function mg(e,t){return e==null?e:qr(e,K(t,3),lt)}function yg(e,t){return e==null?e:Mo(e,K(t,3),lt)}function xg(e,t){return e&&Bt(e,K(t,3))}function bg(e,t){return e&&Nr(e,K(t,3))}function wg(e){return e==null?[]:Gi(e,He(e))}function Sg(e){return e==null?[]:Gi(e,lt(e))}function bs(e,t,n){var i=e==null?r:An(e,t);return i===r?n:i}function Ag(e,t){return e!=null&&bl(e,t,Kf)}function ws(e,t){return e!=null&&bl(e,t,Yf)}var $g=pl(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=ki.call(t)),e[t]=n},As(at)),Cg=pl(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=ki.call(t)),$e.call(e,t)?e[t].push(n):e[t]=[n]},K),Tg=le(ai);function He(e){return ot(e)?Oo(e):Kr(e)}function lt(e){return ot(e)?Oo(e,!0):rc(e)}function Ig(e,t){var n={};return t=K(t,3),Bt(e,function(i,s,l){Kt(n,t(i,s,l),i)}),n}function zg(e,t){var n={};return t=K(t,3),Bt(e,function(i,s,l){Kt(n,s,t(i,s,l))}),n}var Rg=Gn(function(e,t,n){Vi(e,t,n)}),na=Gn(function(e,t,n,i){Vi(e,t,n,i)}),Og=Zt(function(e,t){var n={};if(e==null)return n;var i=!1;t=Ee(t,function(l){return l=dn(l,e),i||(i=l.length>1),l}),Wt(e,ls(e),n),i&&(n=Tt(n,Y|G|q,$c));for(var s=t.length;s--;)jr(n,t[s]);return n});function kg(e,t){return ia(e,lr(K(t)))}var Dg=Zt(function(e,t){return e==null?{}:oc(e,t)});function ia(e,t){if(e==null)return{};var n=Ee(ls(e),function(i){return[i]});return t=K(t),Yo(e,n,function(i,s){return t(i,s[0])})}function Lg(e,t,n){t=dn(t,e);var i=-1,s=t.length;for(s||(s=1,e=r);++i<s;){var l=e==null?r:e[Ft(t[i])];l===r&&(i=s,l=n),e=Xt(l)?l.call(e):l}return e}function Eg(e,t,n){return e==null?e:fi(e,t,n)}function Pg(e,t,n,i){return i=typeof i=="function"?i:r,e==null?e:fi(e,t,n,i)}var ra=_l(He),sa=_l(lt);function Ug(e,t,n){var i=ne(e),s=i||gn(e)||Yn(e);if(t=K(t,4),n==null){var l=e&&e.constructor;s?n=i?new l:[]:Pe(e)?n=Xt(l)?Hn(Ei(e)):{}:n={}}return(s?At:Bt)(e,function(u,c,p){return t(n,u,c,p)}),n}function Mg(e,t){return e==null?!0:jr(e,t)}function Bg(e,t,n){return e==null?e:jo(e,t,ns(n))}function Wg(e,t,n,i){return i=typeof i=="function"?i:r,e==null?e:jo(e,t,ns(n),i)}function Zn(e){return e==null?[]:Lr(e,He(e))}function Fg(e){return e==null?[]:Lr(e,lt(e))}function qg(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=Rt(n),n=n===n?n:0),t!==r&&(t=Rt(t),t=t===t?t:0),Sn(Rt(e),t,n)}function Ng(e,t,n){return t=Jt(t),n===r?(n=t,t=0):n=Jt(n),e=Rt(e),Zf(e,t,n)}function Hg(e,t,n){if(n&&typeof n!="boolean"&&tt(e,t,n)&&(t=n=r),n===r&&(typeof t=="boolean"?(n=t,t=r):typeof e=="boolean"&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=Jt(e),t===r?(t=e,e=0):t=Jt(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var s=zo();return Xe(e+s*(t-e+bu("1e-"+((s+"").length-1))),t)}return Qr(e,t)}var Gg=Vn(function(e,t,n){return t=t.toLowerCase(),e+(n?oa(t):t)});function oa(e){return Ss(Se(e).toLowerCase())}function la(e){return e=Se(e),e&&e.replace(Va,Lu).replace(cu,"")}function Vg(e,t,n){e=Se(e),t=_t(t);var i=e.length;n=n===r?i:Sn(re(n),0,i);var s=n;return n-=t.length,n>=0&&e.slice(n,s)==t}function Kg(e){return e=Se(e),e&&wi.test(e)?e.replace(jn,Eu):e}function Yg(e){return e=Se(e),e&&ka.test(e)?e.replace(mr,"\\$&"):e}var Zg=Vn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Qg=Vn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Xg=fl("toLowerCase");function Jg(e,t,n){e=Se(e),t=re(t);var i=t?Bn(e):0;if(!t||i>=t)return e;var s=(t-i)/2;return Ji(Bi(s),n)+e+Ji(Mi(s),n)}function jg(e,t,n){e=Se(e),t=re(t);var i=t?Bn(e):0;return t&&i<t?e+Ji(t-i,n):e}function eh(e,t,n){e=Se(e),t=re(t);var i=t?Bn(e):0;return t&&i<t?Ji(t-i,n)+e:e}function th(e,t,n){return n||t==null?t=0:t&&(t=+t),af(Se(e).replace(yr,""),t||0)}function nh(e,t,n){return(n?tt(e,t,n):t===r)?t=1:t=re(t),Xr(Se(e),t)}function ih(){var e=arguments,t=Se(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var rh=Vn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function sh(e,t,n){return n&&typeof n!="number"&&tt(e,t,n)&&(t=n=r),n=n===r?R:n>>>0,n?(e=Se(e),e&&(typeof t=="string"||t!=null&&!xs(t))&&(t=_t(t),!t&&Mn(e))?pn(kt(e),0,n):e.split(t,n)):[]}var oh=Vn(function(e,t,n){return e+(n?" ":"")+Ss(t)});function lh(e,t,n){return e=Se(e),n=n==null?0:Sn(re(n),0,e.length),t=_t(t),e.slice(n,n+t.length)==t}function ah(e,t,n){var i=o.templateSettings;n&&tt(e,t,n)&&(t=r),e=Se(e),t=fr({},t,i,vl);var s=fr({},t.imports,i.imports,vl),l=He(s),u=Lr(s,l),c,p,w=0,S=t.interpolate||Si,T="__p += '",P=Pr((t.escape||Si).source+"|"+S.source+"|"+(S===Ms?Wa:Si).source+"|"+(t.evaluate||Si).source+"|$","g"),H="//# sourceURL="+($e.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_u+"]")+`
`;e.replace(P,function(Q,fe,ve,mt,nt,yt){return ve||(ve=mt),T+=e.slice(w,yt).replace(Ka,Pu),fe&&(c=!0,T+=`' +
__e(`+fe+`) +
'`),nt&&(p=!0,T+=`';
`+nt+`;
__p += '`),ve&&(T+=`' +
((__t = (`+ve+`)) == null ? '' : __t) +
'`),w=yt+Q.length,Q}),T+=`';
`;var Z=$e.call(t,"variable")&&t.variable;if(!Z)T=`with (obj) {
`+T+`
}
`;else if(Ma.test(Z))throw new te(I);T=(p?T.replace(yi,""):T).replace(xi,"$1").replace(bi,"$1;"),T="function("+(Z||"obj")+`) {
`+(Z?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(c?", __e = _.escape":"")+(p?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+T+`return __p
}`;var oe=ua(function(){return be(l,H+"return "+T).apply(r,u)});if(oe.source=T,ys(oe))throw oe;return oe}function uh(e){return Se(e).toLowerCase()}function fh(e){return Se(e).toUpperCase()}function ch(e,t,n){if(e=Se(e),e&&(n||t===r))return mo(e);if(!e||!(t=_t(t)))return e;var i=kt(e),s=kt(t),l=yo(i,s),u=xo(i,s)+1;return pn(i,l,u).join("")}function dh(e,t,n){if(e=Se(e),e&&(n||t===r))return e.slice(0,wo(e)+1);if(!e||!(t=_t(t)))return e;var i=kt(e),s=xo(i,kt(t))+1;return pn(i,0,s).join("")}function ph(e,t,n){if(e=Se(e),e&&(n||t===r))return e.replace(yr,"");if(!e||!(t=_t(t)))return e;var i=kt(e),s=yo(i,kt(t));return pn(i,s).join("")}function gh(e,t){var n=W,i=D;if(Pe(t)){var s="separator"in t?t.separator:s;n="length"in t?re(t.length):n,i="omission"in t?_t(t.omission):i}e=Se(e);var l=e.length;if(Mn(e)){var u=kt(e);l=u.length}if(n>=l)return e;var c=n-Bn(i);if(c<1)return i;var p=u?pn(u,0,c).join(""):e.slice(0,c);if(s===r)return p+i;if(u&&(c+=p.length-c),xs(s)){if(e.slice(c).search(s)){var w,S=p;for(s.global||(s=Pr(s.source,Se(Bs.exec(s))+"g")),s.lastIndex=0;w=s.exec(S);)var T=w.index;p=p.slice(0,T===r?c:T)}}else if(e.indexOf(_t(s),c)!=c){var P=p.lastIndexOf(s);P>-1&&(p=p.slice(0,P))}return p+i}function hh(e){return e=Se(e),e&&rt.test(e)?e.replace(Jn,Nu):e}var _h=Vn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Ss=fl("toUpperCase");function aa(e,t,n){return e=Se(e),t=n?r:t,t===r?Mu(e)?Vu(e):zu(e):e.match(t)||[]}var ua=le(function(e,t){try{return gt(e,r,t)}catch(n){return ys(n)?n:new te(n)}}),vh=Zt(function(e,t){return At(t,function(n){n=Ft(n),Kt(e,n,vs(e[n],e))}),e});function mh(e){var t=e==null?0:e.length,n=K();return e=t?Ee(e,function(i){if(typeof i[1]!="function")throw new $t(v);return[n(i[0]),i[1]]}):[],le(function(i){for(var s=-1;++s<t;){var l=e[s];if(gt(l[0],this,i))return gt(l[1],this,i)}})}function yh(e){return Hf(Tt(e,Y))}function As(e){return function(){return e}}function xh(e,t){return e==null||e!==e?t:e}var bh=dl(),wh=dl(!0);function at(e){return e}function $s(e){return qo(typeof e=="function"?e:Tt(e,Y))}function Sh(e){return Ho(Tt(e,Y))}function Ah(e,t){return Go(e,Tt(t,Y))}var $h=le(function(e,t){return function(n){return ai(n,e,t)}}),Ch=le(function(e,t){return function(n){return ai(e,n,t)}});function Cs(e,t,n){var i=He(t),s=Gi(t,i);n==null&&!(Pe(t)&&(s.length||!i.length))&&(n=t,t=e,e=this,s=Gi(t,He(t)));var l=!(Pe(n)&&"chain"in n)||!!n.chain,u=Xt(e);return At(s,function(c){var p=t[c];e[c]=p,u&&(e.prototype[c]=function(){var w=this.__chain__;if(l||w){var S=e(this.__wrapped__),T=S.__actions__=st(this.__actions__);return T.push({func:p,args:arguments,thisArg:e}),S.__chain__=w,S}return p.apply(e,ln([this.value()],arguments))})}),e}function Th(){return Ge._===this&&(Ge._=Ju),this}function Ts(){}function Ih(e){return e=re(e),le(function(t){return Vo(t,e)})}var zh=rs(Ee),Rh=rs(po),Oh=rs(zr);function fa(e){return cs(e)?Rr(Ft(e)):lc(e)}function kh(e){return function(t){return e==null?r:An(e,t)}}var Dh=gl(),Lh=gl(!0);function Is(){return[]}function zs(){return!1}function Eh(){return{}}function Ph(){return""}function Uh(){return!0}function Mh(e,t){if(e=re(e),e<1||e>ke)return[];var n=R,i=Xe(e,R);t=K(t),e-=R;for(var s=Dr(i,t);++n<e;)t(n);return s}function Bh(e){return ne(e)?Ee(e,Ft):vt(e)?[e]:st(Rl(Se(e)))}function Wh(e){var t=++Qu;return Se(e)+t}var Fh=Xi(function(e,t){return e+t},0),qh=ss("ceil"),Nh=Xi(function(e,t){return e/t},1),Hh=ss("floor");function Gh(e){return e&&e.length?Hi(e,at,Hr):r}function Vh(e,t){return e&&e.length?Hi(e,K(t,2),Hr):r}function Kh(e){return _o(e,at)}function Yh(e,t){return _o(e,K(t,2))}function Zh(e){return e&&e.length?Hi(e,at,Yr):r}function Qh(e,t){return e&&e.length?Hi(e,K(t,2),Yr):r}var Xh=Xi(function(e,t){return e*t},1),Jh=ss("round"),jh=Xi(function(e,t){return e-t},0);function e_(e){return e&&e.length?kr(e,at):0}function t_(e,t){return e&&e.length?kr(e,K(t,2)):0}return o.after=Sp,o.ary=Fl,o.assign=fg,o.assignIn=ta,o.assignInWith=fr,o.assignWith=cg,o.at=dg,o.before=ql,o.bind=vs,o.bindAll=vh,o.bindKey=Nl,o.castArray=Ep,o.chain=Ml,o.chunk=Hc,o.compact=Gc,o.concat=Vc,o.cond=mh,o.conforms=yh,o.constant=As,o.countBy=ep,o.create=pg,o.curry=Hl,o.curryRight=Gl,o.debounce=Vl,o.defaults=gg,o.defaultsDeep=hg,o.defer=Ap,o.delay=$p,o.difference=Kc,o.differenceBy=Yc,o.differenceWith=Zc,o.drop=Qc,o.dropRight=Xc,o.dropRightWhile=Jc,o.dropWhile=jc,o.fill=ed,o.filter=np,o.flatMap=sp,o.flatMapDeep=op,o.flatMapDepth=lp,o.flatten=Ll,o.flattenDeep=td,o.flattenDepth=nd,o.flip=Cp,o.flow=bh,o.flowRight=wh,o.fromPairs=id,o.functions=wg,o.functionsIn=Sg,o.groupBy=ap,o.initial=sd,o.intersection=od,o.intersectionBy=ld,o.intersectionWith=ad,o.invert=$g,o.invertBy=Cg,o.invokeMap=fp,o.iteratee=$s,o.keyBy=cp,o.keys=He,o.keysIn=lt,o.map=rr,o.mapKeys=Ig,o.mapValues=zg,o.matches=Sh,o.matchesProperty=Ah,o.memoize=or,o.merge=Rg,o.mergeWith=na,o.method=$h,o.methodOf=Ch,o.mixin=Cs,o.negate=lr,o.nthArg=Ih,o.omit=Og,o.omitBy=kg,o.once=Tp,o.orderBy=dp,o.over=zh,o.overArgs=Ip,o.overEvery=Rh,o.overSome=Oh,o.partial=ms,o.partialRight=Kl,o.partition=pp,o.pick=Dg,o.pickBy=ia,o.property=fa,o.propertyOf=kh,o.pull=dd,o.pullAll=Pl,o.pullAllBy=pd,o.pullAllWith=gd,o.pullAt=hd,o.range=Dh,o.rangeRight=Lh,o.rearg=zp,o.reject=_p,o.remove=_d,o.rest=Rp,o.reverse=hs,o.sampleSize=mp,o.set=Eg,o.setWith=Pg,o.shuffle=yp,o.slice=vd,o.sortBy=wp,o.sortedUniq=Ad,o.sortedUniqBy=$d,o.split=sh,o.spread=Op,o.tail=Cd,o.take=Td,o.takeRight=Id,o.takeRightWhile=zd,o.takeWhile=Rd,o.tap=Gd,o.throttle=kp,o.thru=ir,o.toArray=Jl,o.toPairs=ra,o.toPairsIn=sa,o.toPath=Bh,o.toPlainObject=ea,o.transform=Ug,o.unary=Dp,o.union=Od,o.unionBy=kd,o.unionWith=Dd,o.uniq=Ld,o.uniqBy=Ed,o.uniqWith=Pd,o.unset=Mg,o.unzip=_s,o.unzipWith=Ul,o.update=Bg,o.updateWith=Wg,o.values=Zn,o.valuesIn=Fg,o.without=Ud,o.words=aa,o.wrap=Lp,o.xor=Md,o.xorBy=Bd,o.xorWith=Wd,o.zip=Fd,o.zipObject=qd,o.zipObjectDeep=Nd,o.zipWith=Hd,o.entries=ra,o.entriesIn=sa,o.extend=ta,o.extendWith=fr,Cs(o,o),o.add=Fh,o.attempt=ua,o.camelCase=Gg,o.capitalize=oa,o.ceil=qh,o.clamp=qg,o.clone=Pp,o.cloneDeep=Mp,o.cloneDeepWith=Bp,o.cloneWith=Up,o.conformsTo=Wp,o.deburr=la,o.defaultTo=xh,o.divide=Nh,o.endsWith=Vg,o.eq=Lt,o.escape=Kg,o.escapeRegExp=Yg,o.every=tp,o.find=ip,o.findIndex=kl,o.findKey=_g,o.findLast=rp,o.findLastIndex=Dl,o.findLastKey=vg,o.floor=Hh,o.forEach=Bl,o.forEachRight=Wl,o.forIn=mg,o.forInRight=yg,o.forOwn=xg,o.forOwnRight=bg,o.get=bs,o.gt=Fp,o.gte=qp,o.has=Ag,o.hasIn=ws,o.head=El,o.identity=at,o.includes=up,o.indexOf=rd,o.inRange=Ng,o.invoke=Tg,o.isArguments=Tn,o.isArray=ne,o.isArrayBuffer=Np,o.isArrayLike=ot,o.isArrayLikeObject=Be,o.isBoolean=Hp,o.isBuffer=gn,o.isDate=Gp,o.isElement=Vp,o.isEmpty=Kp,o.isEqual=Yp,o.isEqualWith=Zp,o.isError=ys,o.isFinite=Qp,o.isFunction=Xt,o.isInteger=Yl,o.isLength=ar,o.isMap=Zl,o.isMatch=Xp,o.isMatchWith=Jp,o.isNaN=jp,o.isNative=eg,o.isNil=ng,o.isNull=tg,o.isNumber=Ql,o.isObject=Pe,o.isObjectLike=Me,o.isPlainObject=gi,o.isRegExp=xs,o.isSafeInteger=ig,o.isSet=Xl,o.isString=ur,o.isSymbol=vt,o.isTypedArray=Yn,o.isUndefined=rg,o.isWeakMap=sg,o.isWeakSet=og,o.join=ud,o.kebabCase=Zg,o.last=zt,o.lastIndexOf=fd,o.lowerCase=Qg,o.lowerFirst=Xg,o.lt=lg,o.lte=ag,o.max=Gh,o.maxBy=Vh,o.mean=Kh,o.meanBy=Yh,o.min=Zh,o.minBy=Qh,o.stubArray=Is,o.stubFalse=zs,o.stubObject=Eh,o.stubString=Ph,o.stubTrue=Uh,o.multiply=Xh,o.nth=cd,o.noConflict=Th,o.noop=Ts,o.now=sr,o.pad=Jg,o.padEnd=jg,o.padStart=eh,o.parseInt=th,o.random=Hg,o.reduce=gp,o.reduceRight=hp,o.repeat=nh,o.replace=ih,o.result=Lg,o.round=Jh,o.runInContext=d,o.sample=vp,o.size=xp,o.snakeCase=rh,o.some=bp,o.sortedIndex=md,o.sortedIndexBy=yd,o.sortedIndexOf=xd,o.sortedLastIndex=bd,o.sortedLastIndexBy=wd,o.sortedLastIndexOf=Sd,o.startCase=oh,o.startsWith=lh,o.subtract=jh,o.sum=e_,o.sumBy=t_,o.template=ah,o.times=Mh,o.toFinite=Jt,o.toInteger=re,o.toLength=jl,o.toLower=uh,o.toNumber=Rt,o.toSafeInteger=ug,o.toString=Se,o.toUpper=fh,o.trim=ch,o.trimEnd=dh,o.trimStart=ph,o.truncate=gh,o.unescape=hh,o.uniqueId=Wh,o.upperCase=_h,o.upperFirst=Ss,o.each=Bl,o.eachRight=Wl,o.first=El,Cs(o,function(){var e={};return Bt(o,function(t,n){$e.call(o.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),o.VERSION=g,At(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){o[e].placeholder=o}),At(["drop","take"],function(e,t){he.prototype[e]=function(n){n=n===r?1:qe(re(n),0);var i=this.__filtered__&&!t?new he(this):this.clone();return i.__filtered__?i.__takeCount__=Xe(n,i.__takeCount__):i.__views__.push({size:Xe(n,R),type:e+(i.__dir__<0?"Right":"")}),i},he.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),At(["filter","map","takeWhile"],function(e,t){var n=t+1,i=n==ze||n==k;he.prototype[e]=function(s){var l=this.clone();return l.__iteratees__.push({iteratee:K(s,3),type:n}),l.__filtered__=l.__filtered__||i,l}}),At(["head","last"],function(e,t){var n="take"+(t?"Right":"");he.prototype[e]=function(){return this[n](1).value()[0]}}),At(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");he.prototype[e]=function(){return this.__filtered__?new he(this):this[n](1)}}),he.prototype.compact=function(){return this.filter(at)},he.prototype.find=function(e){return this.filter(e).head()},he.prototype.findLast=function(e){return this.reverse().find(e)},he.prototype.invokeMap=le(function(e,t){return typeof e=="function"?new he(this):this.map(function(n){return ai(n,e,t)})}),he.prototype.reject=function(e){return this.filter(lr(K(e)))},he.prototype.slice=function(e,t){e=re(e);var n=this;return n.__filtered__&&(e>0||t<0)?new he(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(t=re(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},he.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},he.prototype.toArray=function(){return this.take(R)},Bt(he.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),s=o[i?"take"+(t=="last"?"Right":""):t],l=i||/^find/.test(t);s&&(o.prototype[t]=function(){var u=this.__wrapped__,c=i?[1]:arguments,p=u instanceof he,w=c[0],S=p||ne(u),T=function(fe){var ve=s.apply(o,ln([fe],c));return i&&P?ve[0]:ve};S&&n&&typeof w=="function"&&w.length!=1&&(p=S=!1);var P=this.__chain__,H=!!this.__actions__.length,Z=l&&!P,oe=p&&!H;if(!l&&S){u=oe?u:new he(this);var Q=e.apply(u,c);return Q.__actions__.push({func:ir,args:[T],thisArg:r}),new Ct(Q,P)}return Z&&oe?e.apply(this,c):(Q=this.thru(T),Z?i?Q.value()[0]:Q.value():Q)})}),At(["pop","push","shift","sort","splice","unshift"],function(e){var t=zi[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);o.prototype[e]=function(){var s=arguments;if(i&&!this.__chain__){var l=this.value();return t.apply(ne(l)?l:[],s)}return this[n](function(u){return t.apply(ne(u)?u:[],s)})}}),Bt(he.prototype,function(e,t){var n=o[t];if(n){var i=n.name+"";$e.call(Nn,i)||(Nn[i]=[]),Nn[i].push({name:t,func:n})}}),Nn[Qi(r,pe).name]=[{name:"wrapper",func:r}],he.prototype.clone=hf,he.prototype.reverse=_f,he.prototype.value=vf,o.prototype.at=Vd,o.prototype.chain=Kd,o.prototype.commit=Yd,o.prototype.next=Zd,o.prototype.plant=Xd,o.prototype.reverse=Jd,o.prototype.toJSON=o.prototype.valueOf=o.prototype.value=jd,o.prototype.first=o.prototype.head,ti&&(o.prototype[ti]=Qd),o},Wn=Ku();yn?((yn.exports=Wn)._=Wn,$r._=Wn):Ge._=Wn}).call(fv)}(hi,hi.exports)),hi.exports}var qt=cv();const dv={class:""},pv={class:"group py-2"},gv={class:"flex items-center justify-between"},hv={class:"py-4"},_v={class:"flex flex-col gap-5"},vv={class:"flex flex-col gap-2"},mv={class:"flex flex-col gap-2 p-3 bg-gray-50 border border-gray-200 rounded-lg"},yv={class:"flex items-center justify-between"},xv={class:"flex flex-col gap-2"},bv={class:"flex flex-col p-3 bg-gray-50 border border-gray-200 rounded-lg"},wv={class:"flex items-center justify-between"},Sv={class:"flex items-center justify-between"},Av=ut({__name:"ReviewConfigAbilityItem",props:{app_id:{type:String,default:"",required:!0},review_config:{type:Object,default:{},required:!0}},setup(a){var Y,G,q,ie,N,U,pe,we,ue;const f=a,{loading:r,handleUpdateDraftAppConfig:g}=vn(),y=ae(!1),z=ae(!1),v=ae({enable:(Y=f.review_config)==null?void 0:Y.enable,keywords:(q=(G=f.review_config)==null?void 0:G.keywords)==null?void 0:q.join(`
`),inputs_config:{enable:(N=(ie=f.review_config)==null?void 0:ie.inputs_config)==null?void 0:N.enable,preset_response:(pe=(U=f.review_config)==null?void 0:U.inputs_config)==null?void 0:pe.preset_response},outputs_config:{enable:(ue=(we=f.review_config)==null?void 0:we.outputs_config)==null?void 0:ue.enable}}),I=ae({...qt.cloneDeep(v.value)}),A=()=>qt.isEqual(I.value,v.value),O=()=>{z.value=!1,v.value=qt.cloneDeep(I.value)},V=async()=>{try{await g(f.app_id,{review_config:{enable:v.value.enable,keywords:v.value.keywords.split(/\r?\n/).filter(F=>F.trim()!==""),inputs_config:v.value.inputs_config,outputs_config:v.value.outputs_config}}),I.value=qt.cloneDeep(v.value),await In(),O()}catch{}};return dr(()=>f.review_config,F=>{(!y.value||!A())&&F&&Object.keys(F).length>0&&(v.value=qt.cloneDeep({...F,keywords:F==null?void 0:F.keywords.join(`
`)}),I.value=qt.cloneDeep({...F,keywords:F==null?void 0:F.keywords.join(`
`)}),y.value=!0)},{immediate:!0,deep:!0}),(F,L)=>{const Ue=$("icon-down"),se=$("a-button"),Ce=$("a-doption"),Oe=$("a-dropdown"),W=$("icon-settings"),D=$("a-collapse-item"),X=$("icon-close"),J=$("a-textarea"),ze=$("a-switch"),Ne=$("a-space"),k=$("a-modal");return C(),E("div",dv,[h(D,{key:"review_config",class:"app-ability-item review-config-ability-item"},{header:x(()=>L[7]||(L[7]=[_("div",{class:"text-gray-700 font-bold"},"内容审查",-1)])),extra:x(()=>[h(Oe,{onSelect:L[1]||(L[1]=async me=>{if(!!me!==v.value.enable)try{v.value.enable=!!me,await In(),await V()}catch{}})},{content:x(()=>[h(Ce,{value:1,class:"text-xs py-1.5 text-gray-700"},{default:x(()=>L[8]||(L[8]=[de("开启")])),_:1}),h(Ce,{value:0,class:"text-xs py-1.5 text-red-700"},{default:x(()=>L[9]||(L[9]=[de("关闭")])),_:1})]),default:x(()=>[h(se,{size:"mini",class:"rounded-lg flex items-center gap-1 px-1",onClick:L[0]||(L[0]=Qn(()=>{},["stop"]))},{default:x(()=>[de(ce(v.value.enable?"开启":"关闭")+" ",1),h(Ue)]),_:1})]),_:1})]),default:x(()=>[_("div",pv,[L[11]||(L[11]=_("div",{class:"text-xs text-gray-500 leading-[22px] group-hover:hidden"}," 对用户输入以及大语言模型输出内容进行审查。 ",-1)),h(se,{size:"small",long:"",class:"hidden group-hover:block rounded-lg transition-all",onClick:L[2]||(L[2]=me=>z.value=!0)},{icon:x(()=>[h(W)]),default:x(()=>[L[10]||(L[10]=de(" 设置 "))]),_:1})])]),_:1}),h(k,{visible:z.value,"hide-title":"",footer:!1,"modal-class":"rounded-xl",onCancel:O},{default:x(()=>[_("div",gv,[L[12]||(L[12]=_("div",{class:"text-lg font-bold text-gray-700"},"内容审核",-1)),h(se,{type:"text",class:"!text-gray-700",size:"small",onClick:O},{icon:x(()=>[h(X)]),_:1})]),_("div",hv,[_("div",_v,[_("div",vv,[L[13]||(L[13]=_("div",{class:"flex flex-col"},[_("div",{class:"flex items-center gap-1 text-gray-700"},[de(" 关键词 "),_("div",{class:"text-red-700"},"*")]),_("div",{class:"text-gray-500 text-xs"},"每行一个，用换行符分割，最多填写100个关键词")],-1)),h(J,{"model-value":v.value.keywords,"onUpdate:modelValue":L[3]||(L[3]=me=>v.value.keywords=me),class:"bg-white rounded-lg border border-gray-200",placeholder:"每行一个，用换行符分隔。","max-length":100,"show-word-limit":"","auto-size":{minRows:4,maxRows:4},"word-length":me=>me.trim()===""?0:me.split(/\r?\n/).length,"word-slice":(me,ke)=>me.split(/\r?\n/).slice(0,ke).join(`
`)},null,8,["model-value","word-length","word-slice"])]),_("div",mv,[_("div",yv,[L[14]||(L[14]=_("div",{class:"text-gray-700"},"输入审查内容",-1)),h(ze,{"model-value":v.value.inputs_config.enable,"onUpdate:modelValue":L[4]||(L[4]=me=>v.value.inputs_config.enable=me),size:"small",type:"round","checked-color":"#10b981","unchecked-color":"#556581"},null,8,["model-value"])]),_("div",xv,[L[15]||(L[15]=_("div",{class:"text-gray-700 text-xs"},"预设回复",-1)),h(J,{"model-value":v.value.inputs_config.preset_response,"onUpdate:modelValue":L[5]||(L[5]=me=>v.value.inputs_config.preset_response=me),placeholder:"这里是预设回复内容",class:"bg-white rounded-lg border border-gray-200","auto-size":{minRows:3,maxRows:3}},null,8,["model-value"])])]),_("div",bv,[_("div",wv,[L[16]||(L[16]=_("div",{class:"text-gray-700"},"输出审查内容",-1)),h(ze,{"model-value":v.value.outputs_config.enable,"onUpdate:modelValue":L[6]||(L[6]=me=>v.value.outputs_config.enable=me),size:"small",type:"round","checked-color":"#10b981","unchecked-color":"#556581"},null,8,["model-value"])])])])]),_("div",Sv,[L[19]||(L[19]=_("div",{class:""},null,-1)),h(Ne,{size:16},{default:x(()=>[h(se,{class:"rounded-lg",onClick:O},{default:x(()=>L[17]||(L[17]=[de("取消")])),_:1}),h(se,{loading:M(r),type:"primary",class:"rounded-lg",onClick:V},{default:x(()=>L[18]||(L[18]=[de(" 保存 ")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["visible"])])}}}),$v={class:""},Cv={key:0,class:""},Tv={key:1,class:""},Iv={key:2,class:""},zv={key:0,class:"flex flex-col gap-1"},Rv={class:"flex items-center gap-2"},Ov={class:"flex flex-col flex-1 gap-1 h-9"},kv={class:"text-gray-700 font-bold leading-[18px] line-clamp-1 break-all"},Dv={class:"text-gray-500 text-xs line-clamp-1 break-all"},Lv={key:1,class:"text-xs text-gray-500 leading-[22px]"},Ev={class:"flex items-center justify-between mb-6"},Pv={class:"h-[calc(100vh-180px)] mb-4 overflow-scroll scrollbar-w-none"},Uv={class:"flex flex-col gap-2"},Mv=["onClick"],Bv={class:"line-clamp-1 text-gray-500 flex-1"},Wv={class:"flex items-center justify-between"},Fv={class:""},qv={class:"flex items-center justify-between"},Nv={class:"flex items-center gap-4 w-full pl-3"},Hv={class:"flex items-center gap-4 w-full pl-3"},Gv={class:"flex items-center justify-between"},Vv=ut({__name:"DatasetsAbilityItem",props:{app_id:{type:String,default:"",required:!0},retrieval_config:{type:Object,default:{},required:!0},datasets:{type:Array,default:[],required:!0}},emits:["update:datasets","update:retrieval_config"],setup(a,{emit:f}){const r=a,g=f,{loading:y,handleUpdateDraftAppConfig:z}=vn(),{loading:v,paginator:I,datasets:A,loadDatasets:O}=T_(),V=ae(!1),Y=ae(!1),G=ae(!1),q=ae([]),ie=ae([]),N=ae({}),U=ae({}),pe=ae(!1),we=async W=>{const{scrollTop:D,scrollHeight:X,clientHeight:J}=W.target;if(D+J>=X-10){if(v.value)return;await O()}},ue=()=>qt.isEqual(q.value,ie.value),F=()=>qt.isEqual(N.value,U.value),L=()=>{V.value=!1,q.value=ie.value,G.value=!1},Ue=()=>{Y.value=!1,N.value=U.value,pe.value=!1},se=W=>{const D=A[W];if(q.value.some(X=>X.id===D.id))q.value=q.value.filter(X=>X.id!==D.id);else{if(q.value.length>=5){_n.warning("关联知识库已超过5个，无法继续关联");return}q.value.push({id:D.id,name:D.name,icon:D.icon,description:D.description})}},Ce=async()=>{try{await z(r.app_id,{datasets:q.value.map(W=>W.id)}),ie.value=q.value,await In(),g("update:datasets",q.value),L()}catch(W){_n.error(W.message)}},Oe=async()=>{try{await z(r.app_id,{retrieval_config:N.value}),U.value=N.value,g("update:retrieval_config",N.value),Ue()}catch(W){_n.error(W.message)}};return dr(()=>r.datasets,W=>{if((!G.value||!ue())&&W&&W.length>0){const D=r.datasets.map(X=>({id:X.id,name:X.name,icon:X.icon,description:X.description}));q.value=qt.cloneDeep(D),ie.value=qt.cloneDeep(D),G.value=!0}},{immediate:!0,deep:!0}),dr(()=>r.retrieval_config,W=>{(!pe.value||!F())&&W&&Object.keys(W).length>0&&(N.value={...W},U.value={...W},pe.value=!0)},{immediate:!0,deep:!0}),dr(()=>V.value,async W=>{W?await O(!0):A.splice(0,A.length)}),(W,D)=>{const X=$("icon-language"),J=$("a-button"),ze=$("icon-plus"),Ne=$("a-space"),k=$("a-avatar"),me=$("icon-delete"),ke=$("a-collapse-item"),Ze=$("icon-close"),j=$("a-empty"),R=$("a-spin"),_e=$("a-col"),ee=$("a-row"),ye=$("a-modal"),bt=$("a-radio-group"),ft=$("a-form-item"),Nt=$("a-slider"),Pt=$("a-input-number"),Ut=$("a-form");return C(),E("div",$v,[h(ke,{key:"datasets",class:"app-ability-item"},{header:x(()=>D[7]||(D[7]=[_("div",{class:"text-gray-700 font-bold"},"知识库",-1)])),extra:x(()=>[h(Ne,null,{default:x(()=>[h(J,{size:"mini",class:"rounded-lg px-2",onClick:D[0]||(D[0]=Qn(Te=>Y.value=!0,["stop"]))},{icon:x(()=>[h(X)]),default:x(()=>{var Te,ct;return[((Te=a.retrieval_config)==null?void 0:Te.retrieval_strategy)==="semantic"?(C(),E("div",Cv," 相似度检索 ")):((ct=a.retrieval_config)==null?void 0:ct.retrieval_strategy)==="full_text"?(C(),E("div",Tv," 全文检索 ")):(C(),E("div",Iv,"混合检索"))]}),_:1}),h(J,{size:"mini",type:"text",class:"!text-gray-700",onClick:D[1]||(D[1]=Qn(Te=>V.value=!0,["stop"]))},{icon:x(()=>[h(ze)]),_:1})]),_:1})]),default:x(()=>[r.datasets.length>0?(C(),E("div",zv,[(C(!0),E(Ye,null,it(r.datasets,(Te,ct)=>(C(),E("div",{key:Te.id,class:"flex items-center justify-between bg-white p-3 rounded-lg cursor-pointer hover:shadow-sm group"},[_("div",Rv,[h(k,{size:36,shape:"square",class:"rounded flex-shrink-0","image-url":Te.icon},null,8,["image-url"]),_("div",Ov,[_("div",kv,ce(Te.name),1),_("div",Dv,ce(Te.description),1)])]),h(J,{size:"mini",type:"text",class:"hidden group-hover:block flex-shrink-0 ml-2 !text-red-700 rounded",onClick:async()=>{const wt=[...r.datasets];wt.splice(ct,1),await M(z)(r.app_id,{datasets:wt.map(zn=>zn.id)}),G.value=!1,g("update:datasets",wt)}},{icon:x(()=>[h(me)]),_:2},1032,["onClick"])]))),128))])):(C(),E("div",Lv," 引用文本类型的数据，实现知识问答，应用最多支持关联 5 个知识库。 "))]),_:1}),h(ye,{visible:V.value,"hide-title":"",footer:!1,width:400,class:"datasets-modal","modal-class":"h-[calc(100vh-32px)] right-4",onCancel:L},{default:x(()=>[_("div",Ev,[D[8]||(D[8]=_("div",{class:"text-lg font-bold text-gray-700"},"选择引用知识库",-1)),h(J,{type:"text",class:"!text-gray-700",size:"small",onClick:L},{icon:x(()=>[h(Ze)]),_:1})]),_("div",Pv,[h(R,{loading:M(v),class:"block h-full scrollbar-w-none overflow-scroll",onScroll:we},{default:x(()=>[_("div",Uv,[(C(!0),E(Ye,null,it(M(A),(Te,ct)=>(C(),E("div",{key:Te.id,class:xt(`flex items-center gap-2 border px-3 py-2 rounded-lg cursor-pointer hover:bg-blue-50 hover:border-blue-700 ${q.value.some(wt=>wt.id===Te.id)?"bg-blue-50 border-blue-700":""}`),onClick:()=>se(ct)},[h(k,{size:24,shape:"square",class:"flex-shrink-0 rounded","image-url":Te.icon},null,8,["image-url"]),_("div",Bv,ce(Te.name),1)],10,Mv))),128)),M(A).length===0?(C(),Ae(j,{key:0,description:"没有可用知识库",class:"h-[400px] flex flex-col items-center justify-center"})):xe("",!0)]),M(I).total_page>=2?(C(),Ae(ee,{key:0},{default:x(()=>[M(I).current_page<=M(I).total_page?(C(),Ae(_e,{key:0,span:24,class:"!text-center"},{default:x(()=>[h(Ne,{class:"my-4"},{default:x(()=>[h(R),D[9]||(D[9]=_("div",{class:"text-gray-400"},"加载中",-1))]),_:1})]),_:1})):(C(),Ae(_e,{key:1,span:24,class:"!text-center"},{default:x(()=>D[10]||(D[10]=[_("div",{class:"text-gray-400 my-4"},"数据已加载完成",-1)])),_:1}))]),_:1})):xe("",!0)]),_:1},8,["loading"])]),_("div",Wv,[_("div",Fv,ce(q.value.length)+"个知识库被选中",1),h(Ne,{size:12},{default:x(()=>[h(J,{class:"rounded-lg",onClick:L},{default:x(()=>D[11]||(D[11]=[de("取消")])),_:1}),h(J,{loading:M(y),type:"primary",class:"rounded-lg",onClick:Ce},{default:x(()=>D[12]||(D[12]=[de(" 添加 ")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["visible"]),h(ye,{visible:Y.value,"hide-title":"",footer:!1,"modal-class":"rounded-xl",onCancel:Ue},{default:x(()=>[_("div",qv,[D[13]||(D[13]=_("div",{class:"text-lg font-bold text-gray-700"},"检索设置",-1)),h(J,{type:"text",class:"!text-gray-700",size:"small",onClick:Ue},{icon:x(()=>[h(Ze)]),_:1})]),h(Ut,{model:N.value,onSubmit:Oe,class:"pt-6"},{default:x(()=>[h(ft,{field:"retrieval_strategy",label:"检索策略","label-align":"left"},{default:x(()=>[h(bt,{"model-value":N.value.retrieval_strategy,"onUpdate:modelValue":D[2]||(D[2]=Te=>N.value.retrieval_strategy=Te),"default-value":"semantic",options:[{label:"混合策略",value:"hybrid"},{label:"全文检索",value:"full_text"},{label:"相似性检索",value:"semantic"}]},null,8,["model-value"])]),_:1}),h(ft,{field:"k",label:"最大召回数量"},{default:x(()=>[_("div",Nv,[h(Nt,{"model-value":N.value.k,"onUpdate:modelValue":D[3]||(D[3]=Te=>N.value.k=Te),step:1,min:1,max:10},null,8,["model-value"]),h(Pt,{"model-value":N.value.k,"onUpdate:modelValue":D[4]||(D[4]=Te=>N.value.k=Te),class:"w-[80px]","default-value":4},null,8,["model-value"])])]),_:1}),h(ft,{field:"score",label:"最小匹配度"},{default:x(()=>[_("div",Hv,[h(Nt,{"model-value":N.value.score,"onUpdate:modelValue":D[5]||(D[5]=Te=>N.value.score=Te),step:.01,min:0,max:.99},null,8,["model-value"]),h(Pt,{"model-value":N.value.score,"onUpdate:modelValue":D[6]||(D[6]=Te=>N.value.score=Te),class:"w-[80px]",min:0,max:.99,step:.01,precision:2,"default-value":.5},null,8,["model-value"])])]),_:1}),_("div",Gv,[D[16]||(D[16]=_("div",{class:""},null,-1)),h(Ne,{size:16},{default:x(()=>[h(J,{class:"rounded-lg",onClick:Ue},{default:x(()=>D[14]||(D[14]=[de("取消")])),_:1}),h(J,{loading:M(y),type:"primary","html-type":"submit",class:"rounded-lg"},{default:x(()=>D[15]||(D[15]=[de("保存")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["model"])]),_:1},8,["visible"])])}}}),Kv=()=>{const a=ae(!1),f=Xn({});return{loading:a,api_tool:f,loadApiTool:async(g,y)=>{try{a.value=!0;const v=(await I_(g,y)).data;Object.assign(f,v)}finally{a.value=!1}}}},Yv=()=>{const a=ae(!1),f=Xn([]),r={current_page:1,page_size:20,total_page:0,total_record:0},g=Xn({...r}),y=async(v=!1)=>{if(v)Object.assign(g,{...r});else if(g.current_page>g.total_page)return;try{a.value=!0;const A=(await z_(g.current_page,g.page_size,"")).data;z(A),g.current_page<=g.total_page&&(g.current_page+=1),v?f.splice(0,f.length,...A.list):f.push(...A.list)}finally{a.value=!1}},z=v=>{g.current_page=v.paginator.current_page,g.page_size=v.paginator.page_size,g.total_page=v.paginator.total_page,g.total_record=v.paginator.total_record};return{loading:a,api_tool_providers:f,paginator:g,loadApiToolProviders:y}},Zv=()=>{const a=ae(!1),f=Xn([]),r=async()=>{try{a.value=!0;const y=(await R_()).data;f.splice(0,f.length,...y)}finally{a.value=!1}};return ya(async()=>await r()),{loading:a,categories:f,loadCategories:r}},Qv=()=>{const a=ae(!1),f=Xn({});return{loading:a,builtin_tool:f,loadBuiltinTool:async(g,y)=>{try{a.value=!0;const v=(await O_(g,y)).data;Object.assign(f,v)}finally{a.value=!1}}}},Xv=()=>{const a=ae(!1),f=Xn([]);return{loading:a,builtin_tools:f,loadBuiltinTools:async()=>{try{a.value=!0;const y=(await k_()).data;f.splice(0,f.length,...y)}finally{a.value=!1}}}},Jv={class:""},jv={key:0,class:"flex flex-col gap-1"},em={class:"flex items-center gap-2"},tm={class:"flex flex-col gap-1 h-9"},nm={class:"text-gray-700 font-bold leading-[18px] line-clamp-1 break-all"},im={class:"text-gray-500 text-xs line-clamp-1 break-all"},rm={class:"hidden group-hover:flex items-center gap-1 flex-shrink-0 ml-2"},sm={key:1,class:"text-xs text-gray-500 leading-[22px]"},om={class:"flex items-center justify-between mb-6"},lm={class:"flex items-center"},am={class:"flex items-center gap-2"},um={class:"text-gray-700 font-bold max-w-[200px] line-clamp-1 break-all"},fm={class:"mx-4 text-gray-400"},cm={class:"flex items-center gap-6"},dm={key:0,class:"h-[calc(100vh-170px)] pb-4 overflow-scroll scrollbar-w-none"},pm={class:"text-gray-500 text-xs"},gm={key:0,class:""},hm={class:"flex flex-col gap-4"},_m={class:"flex items-center gap-2 text-xs"},vm={class:"text-gray-900 font-bold"},mm={class:"text-gray-500"},ym={key:0,class:"text-red-700"},xm={class:"text-xs text-gray-500"},bm={key:1,class:"h-[calc(100vh-170px)] pb-4 overflow-scroll scrollbar-w-none"},wm={class:"flex items-center gap-1"},Sm={class:"text-gray-700"},Am={key:0,class:"text-red-700"},$m={class:"flex items-center justify-between"},Cm={class:"flex w-full h-full"},Tm={class:"flex flex-col flex-shrink-0 bg-gray-50 w-[200px] h-full px-3 py-4 overflow-scroll scrollbar-w-none"},Im={class:"flex flex-col gap-1 mb-4"},zm={key:0,class:""},Rm={class:"flex flex-col gap-1"},Om=["onClick"],km=["innerHTML"],Dm={class:"flex-1 p-4"},Lm={class:"w-full flex items-center justify-between gap-2 mb-7"},Em={class:"text-lg font-bold text-gray-700"},Pm={key:0,class:"h-[calc(100vh-130px)] overflow-scroll scrollbar-w-none"},Um={class:"text-gray-900"},Mm={class:"flex flex-col gap-1"},Bm={class:"flex items-center gap-2"},Wm={class:"text-gray-900"},Fm={key:0,class:""},qm={key:1},Nm={class:"text-gray-900"},Hm={class:"flex flex-col gap-1"},Gm={class:"flex items-center gap-2"},Vm={class:"text-gray-900"},Km={key:0,class:""},Ym=ut({__name:"ToolsAbilityItem",props:{app_id:{type:String,default:"",required:!0},tools:{type:Array,default:[],required:!0}},emits:["update:tools"],setup(a,{emit:f}){const r=a,g=f,{loading:y,handleUpdateDraftAppConfig:z}=vn(),{loading:v,api_tool:I,loadApiTool:A}=Kv(),{loading:O,paginator:V,api_tool_providers:Y,loadApiToolProviders:G}=Yv(),{loading:q,builtin_tool:ie,loadBuiltinTool:N}=Qv(),{categories:U}=Zv(),{builtin_tools:pe,loadBuiltinTools:we}=Xv(),ue=ae(!1),F=ae("info"),L=ae({}),Ue=ae(-1),se=ae({}),Ce=ae(!1),Oe=ae("api_tool"),W=ae("all"),D=ma(()=>W.value==="all"?pe:pe.filter(j=>j.category===W.value)),X=async j=>{if(j===-1)return;Ue.value=j;const R=r.tools[j];R.type==="builtin_tool"?(await N(R.provider.name,R.tool.name),L.value={type:"builtin_tool",provider:{id:ie.provider.name,icon:ie.provider.icon,name:ie.provider.name,label:ie.provider.label,description:ie.provider.description},tool:{id:ie.name,name:ie.name,label:ie.label,description:ie.description,inputs:ie.inputs,params:ie.params}}):(await A(R.provider.id,R.tool.name),L.value={type:"api_tool",provider:{id:I.provider.id,icon:I.provider.icon,name:I.provider.name,label:I.provider.name,description:I.provider.description},tool:{id:I.name,name:I.name,label:I.name,description:I.description,inputs:ie.inputs,params:[]}});const _e=R.tool.params;L.value.tool.params.forEach(ee=>{se.value[ee.name]=_e[ee.name]??ee.default}),ue.value=!0},J=()=>{Ue.value=-1,ue.value=!1,F.value="info"},ze=async()=>{if(r.tools[Ue.value].type==="api_tool"){J();return}const R=[...r.tools];R[Ue.value].tool.params=se.value,await z(r.app_id,{tools:R.map(_e=>({type:_e.type,params:_e.tool.params,provider_id:_e.provider.id,tool_id:_e.tool.name}))}),g("update:tools",R),J()},Ne=async j=>{const R=[...r.tools];R.splice(j,1),await z(r.app_id,{tools:R.map(_e=>({type:_e.type,params:_e.tool.params,provider_id:_e.provider.id,tool_id:_e.tool.name}))}),g("update:tools",R)},k=async()=>{Ce.value=!0,await G(!0),await we()},me=async j=>{const{scrollTop:R,scrollHeight:_e,clientHeight:ee}=j.target;if(R+ee>=_e-10){if(O.value)return;await G()}},ke=async(j,R)=>{let _e={};if(Oe.value==="api_tool"){const ee=Y[j],ye=ee.tools[R];_e={type:"api_tool",provider:{id:ee.id,name:ee.name,label:ee.name,icon:ee.icon,description:ee.description},tool:{id:ye.name,name:ye.name,label:ye.name,description:ye.description,params:{}}}}else{const ee=D.value[j],ye=ee.tools[R],bt=ye.params;_e={type:"builtin_tool",provider:{id:ee.name,name:ee.name,label:ee.label,icon:`${da}/builtin-tools/${ee.name}/icon`,description:ee.description},tool:{id:ye.name,name:ye.name,label:ye.label,description:ye.description,params:bt.reduce((ft,Nt)=>(ft[Nt.name]=Nt.default,ft),{})}}}if(r.tools.some(ee=>ee.provider.id===_e.provider.id&&ee.tool.name===_e.tool.name)){const ee=[...r.tools].filter(ye=>ye.provider.id!==_e.provider.id&&ye.tool.name!==_e.tool.name);await z(r.app_id,{tools:ee.map(ye=>({type:ye.type,params:ye.tool.params,provider_id:ye.provider.id,tool_id:ye.tool.name}))}),g("update:tools",ee);return}else{if(r.tools.length>=5){_n.warning("一个Agent应用最多关联5个扩展插件");return}const ee=[...r.tools];ee.push(_e),await z(r.app_id,{tools:ee.map(ye=>({type:ye.type,params:ye.tool.params,provider_id:ye.provider.id,tool_id:ye.tool.name}))}),g("update:tools",ee)}},Ze=(j,R)=>r.tools.some(_e=>_e.provider.name===j.name&&_e.tool.name===R.name);return(j,R)=>{const _e=$("icon-plus"),ee=$("a-button"),ye=$("a-avatar"),bt=$("icon-settings"),ft=$("icon-delete"),Nt=$("a-collapse-item"),Pt=$("icon-oblique-line"),Ut=$("icon-close"),Te=$("icon-info-circle"),ct=$("a-tooltip"),wt=$("a-select"),zn=$("a-input"),dt=$("a-input-number"),en=$("a-radio"),_r=$("a-radio-group"),Ot=$("a-form-item"),_i=$("a-form"),vi=$("a-space"),tn=$("a-modal"),pt=$("router-link"),mn=$("icon-code"),Rn=$("icon-translate"),vr=$("icon-apps"),nn=$("a-empty"),mi=$("a-spin"),rn=$("a-col"),sn=$("a-row");return C(),E("div",Jv,[h(Nt,{key:"tools",class:"app-ability-item"},{header:x(()=>R[7]||(R[7]=[_("div",{class:"text-gray-700 font-bold"},"扩展插件",-1)])),extra:x(()=>[h(ee,{size:"mini",type:"text",class:"!text-gray-700",onClick:Qn(k,["stop"])},{icon:x(()=>[h(_e)]),_:1})]),default:x(()=>[r.tools.length>0?(C(),E("div",jv,[(C(!0),E(Ye,null,it(r.tools,(ge,je)=>(C(),E("div",{key:je,class:"flex items-center justify-between bg-white p-3 rounded-lg cursor-pointer hover:shadow-sm group"},[_("div",em,[h(ye,{size:36,shape:"square",class:"rounded flex-shrink-0","image-url":ge.provider.icon},null,8,["image-url"]),_("div",tm,[_("div",nm,ce(ge.provider.label)+" / "+ce(ge.tool.label),1),_("div",im,ce(ge.tool.description),1)])]),_("div",rm,[h(ee,{loading:M(v)||M(q),size:"mini",type:"text",class:"!text-gray-700 rounded",onClick:async()=>await X(je)},{icon:x(()=>[h(bt)]),_:2},1032,["loading","onClick"]),h(ee,{loading:M(y),size:"mini",type:"text",class:"!text-red-700 rounded",onClick:async()=>await Ne(je)},{icon:x(()=>[h(ft)]),_:2},1032,["loading","onClick"])])]))),128))])):(C(),E("div",sm," 插件能够让智能体调用外部 API，例如搜索信息、浏览网页、生成图片等，扩展智能体的能力和使用场景。 "))]),_:1}),h(tn,{visible:ue.value,"hide-title":"",footer:!1,class:"tool-setting-modal","modal-class":"h-[calc(100vh-32px)] right-4",onCancel:J},{default:x(()=>{var ge,je,Qe,Mt,On,kn,Dn,Ln,En,yi,xi,bi,Jn,jn;return[_("div",om,[_("div",lm,[_("div",am,[h(ye,{size:24,shape:"circle","image-url":(je=(ge=L.value)==null?void 0:ge.provider)==null?void 0:je.icon},null,8,["image-url"]),_("div",um,ce((Mt=(Qe=L.value)==null?void 0:Qe.tool)==null?void 0:Mt.label),1)]),_("div",fm,[h(Pt,{size:12})]),_("div",cm,[_("div",{class:xt(`text-gray-700 pt-1 cursor-pointer border-blue-700 hover:border-b-4 hover:font-bold transition-all ${F.value==="info"?"font-bold border-b-4":""}`),onClick:R[0]||(R[0]=rt=>F.value="info")}," 信息 ",2),L.value.type==="builtin_tool"&&((Dn=(kn=(On=L.value)==null?void 0:On.tool)==null?void 0:kn.params)==null?void 0:Dn.length)>0?(C(),E("div",{key:0,class:xt(`text-gray-700 pt-1 cursor-pointer border-blue-700 hover:border-b-4 hover:font-bold transition-all ${F.value==="setting"?"font-bold border-b-4":""}`),onClick:R[1]||(R[1]=rt=>F.value="setting")}," 设置 ",2)):xe("",!0)])]),h(ee,{size:"mini",type:"text",class:"!text-gray-700",onClick:J},{icon:x(()=>[h(Ut)]),_:1})]),F.value==="info"?(C(),E("div",dm,[R[9]||(R[9]=_("div",{class:"text-gray-70 font-bold mb-1"},"工具描述",-1)),_("div",pm,ce((En=(Ln=L.value)==null?void 0:Ln.tool)==null?void 0:En.description),1),((bi=(xi=(yi=L.value)==null?void 0:yi.tool)==null?void 0:xi.inputs)==null?void 0:bi.length)>0?(C(),E("div",gm,[R[8]||(R[8]=_("div",{class:"flex items-center gap-2 my-4"},[_("div",{class:"text-xs font-bold text-gray-500"},"参数"),_("hr",{class:"flex-1"})],-1)),_("div",hm,[(C(!0),E(Ye,null,it((jn=(Jn=L.value)==null?void 0:Jn.tool)==null?void 0:jn.inputs,rt=>(C(),E("div",{key:rt.name,class:"flex flex-col gap-2"},[_("div",_m,[_("div",vm,ce(rt.name),1),_("div",mm,ce(M(s_)[rt.type]),1),rt.required?(C(),E("div",ym,"必填")):xe("",!0)]),_("div",xm,ce(rt.description),1)]))),128))])])):xe("",!0)])):xe("",!0),F.value==="setting"?(C(),E("div",bm,[h(_i,{model:se.value,"onUpdate:model":R[2]||(R[2]=rt=>se.value=rt),layout:"vertical",class:""},{default:x(()=>{var rt,wi;return[(C(!0),E(Ye,null,it((wi=(rt=L.value)==null?void 0:rt.tool)==null?void 0:wi.params,De=>(C(),Ae(Ot,{field:De.name},{label:x(()=>[_("div",wm,[_("div",Sm,ce(De.label),1),De.required?(C(),E("div",Am,"*")):xe("",!0),h(ct,{content:De.label},{default:x(()=>[h(Te)]),_:2},1032,["content"])])]),default:x(()=>[De.type==="select"?(C(),Ae(wt,{key:0,"default-value":De.default,"model-value":se.value[De.name],"onUpdate:modelValue":Ht=>se.value[De.name]=Ht,placeholder:"请输入参数值",options:De.options},null,8,["default-value","model-value","onUpdate:modelValue","options"])):xe("",!0),De.type==="string"?(C(),Ae(zn,{key:1,placeholder:"请输入参数值","model-value":se.value[De.name],"onUpdate:modelValue":Ht=>se.value[De.name]=Ht,"default-value":De.default},null,8,["model-value","onUpdate:modelValue","default-value"])):xe("",!0),De.type==="number"?(C(),Ae(dt,{key:2,placeholder:"请输入参数值","model-value":se.value[De.name],"onUpdate:modelValue":Ht=>se.value[De.name]=Ht,"default-value":De.default,min:De.min,max:De.max},null,8,["model-value","onUpdate:modelValue","default-value","min","max"])):xe("",!0),De.type==="boolean"?(C(),Ae(_r,{key:3,"model-value":se.value[De.name],"onUpdate:modelValue":Ht=>se.value[De.name]=Ht,"default-value":De.default},{default:x(()=>[h(en,{value:!0},{default:x(()=>R[10]||(R[10]=[de("开启")])),_:1}),h(en,{value:!1},{default:x(()=>R[11]||(R[11]=[de("关闭")])),_:1})]),_:2},1032,["model-value","onUpdate:modelValue","default-value"])):xe("",!0)]),_:2},1032,["field"]))),256))]}),_:1},8,["model"])])):xe("",!0),_("div",$m,[R[14]||(R[14]=_("div",{class:""},null,-1)),h(vi,{size:12},{default:x(()=>[h(ee,{class:"rounded-lg",onClick:J},{default:x(()=>R[12]||(R[12]=[de("取消")])),_:1}),h(ee,{loading:M(y),type:"primary",class:"rounded-lg",onClick:ze},{default:x(()=>R[13]||(R[13]=[de(" 保存 ")])),_:1},8,["loading"])]),_:1})])]}),_:1},8,["visible"]),h(tn,{visible:Ce.value,"onUpdate:visible":R[6]||(R[6]=ge=>Ce.value=ge),"hide-title":"",footer:!1,class:"tools-modal","modal-class":"right-4 h-[calc(100vh-32px)]"},{default:x(()=>[_("div",Cm,[_("div",Tm,[R[20]||(R[20]=_("div",{class:"text-gray-900 font-bold text-lg mb-4"},"添加插件",-1)),h(pt,{to:{name:"space-tools-list"}},{default:x(()=>[h(ee,{long:"",type:"primary",class:"rounded-lg mb-5"},{default:x(()=>R[15]||(R[15]=[de("创建自定义插件")])),_:1})]),_:1}),_("div",Im,[_("div",{class:xt(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${Oe.value==="api_tool"?"text-blue-700 bg-white":"text-gray-700"}`),onClick:R[3]||(R[3]=ge=>Oe.value="api_tool")},[h(mn),R[16]||(R[16]=de(" 自定义插件 "))],2),_("div",{class:xt(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${Oe.value==="builtin_tool"?"text-blue-700 bg-white":"text-gray-700"}`),onClick:R[4]||(R[4]=ge=>Oe.value="builtin_tool")},[h(Rn),R[17]||(R[17]=de(" 内置插件 "))],2)]),Oe.value==="builtin_tool"?(C(),E("div",zm,[R[19]||(R[19]=_("div",{class:"text-xs text-gray-500 mb-3"},"类别",-1)),_("div",Rm,[_("div",{class:xt(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${W.value==="all"?"text-blue-700 bg-white":"text-gray-700"}`),onClick:R[5]||(R[5]=ge=>W.value="all")},[h(vr),R[18]||(R[18]=de(" 全部 "))],2),(C(!0),E(Ye,null,it(M(U),ge=>(C(),E("div",{key:ge.name,class:xt(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${W.value===ge.category?"text-blue-700 bg-white":" text-gray-700"}`),onClick:je=>W.value=ge.category},[_("span",{innerHTML:ge.icon},null,8,km),de(" "+ce(ge.name),1)],10,Om))),128))])])):xe("",!0)]),_("div",Dm,[_("div",Lm,[_("div",Em,ce(Oe.value==="api_tool"?"自定义插件":"内置插件"),1),h(ee,{size:"mini",type:"text",class:"!text-gray-700 ml-6"},{icon:x(()=>[h(Ut)]),_:1})]),Oe.value==="builtin_tool"?(C(),E("div",Pm,[(C(!0),E(Ye,null,it(D.value,(ge,je)=>(C(),E("div",{key:ge.name,class:"flex flex-col gap-3 mb-3"},[_("div",Um,ce(ge.label),1),_("div",Mm,[(C(!0),E(Ye,null,it(ge.tools,(Qe,Mt)=>(C(),E("div",{key:Qe.name,class:xt(`flex items-center justify-between px-2 h-8 rounded-lg cursor-pointer hover:bg-gray-50 group ${Ze(ge,Qe)?"bg-blue-50 border border-blue-700":""}`)},[_("div",Bm,[h(ye,{size:20,shape:"circle","image-url":`${M(da)}/builtin-tools/${ge.name}/icon`},null,8,["image-url"]),_("div",Wm,ce(Qe.label),1)]),h(ee,{size:"mini",class:"hidden group-hover:block rounded px-1.5 flex-shrink-0",onClick:async()=>await ke(je,Mt)},{icon:x(()=>[h(_e)]),default:x(()=>[de(" "+ce(Ze(ge,Qe)?"删除":"添加"),1)]),_:2},1032,["onClick"])],2))),128))])]))),128)),D.value.length===0?(C(),E("div",Fm,[h(nn,{description:"没有可用的内置插件",class:"h-[400px] flex flex-col items-center justify-center"})])):xe("",!0)])):xe("",!0),Oe.value==="api_tool"?(C(),E("div",qm,[h(mi,{loading:M(O),class:"block h-[calc(100vh-130px)] overflow-scroll scrollbar-w-none",onScroll:me},{default:x(()=>[(C(!0),E(Ye,null,it(M(Y),(ge,je)=>(C(),E("div",{key:ge.id,class:"flex flex-col gap-3 mb-3"},[_("div",Nm,ce(ge.name),1),_("div",Hm,[(C(!0),E(Ye,null,it(ge.tools,(Qe,Mt)=>(C(),E("div",{key:Qe.name,class:xt(`flex items-center justify-between px-2 h-8 rounded-lg cursor-pointer hover:bg-gray-50 group ${Ze(ge,Qe)?"bg-blue-50 border border-blue-700":""}`)},[_("div",Gm,[h(ye,{size:20,shape:"circle","image-url":ge.icon},null,8,["image-url"]),_("div",Vm,ce(Qe.name),1)]),h(ee,{size:"mini",class:"hidden group-hover:block rounded px-1.5 flex-shrink-0",onClick:async()=>await ke(je,Mt)},{icon:x(()=>[h(_e)]),default:x(()=>[de(" "+ce(Ze(ge,Qe)?"删除":"添加"),1)]),_:2},1032,["onClick"])],2))),128))])]))),128)),M(Y).length===0?(C(),E("div",Km,[h(nn,{description:"没有可用的API插件",class:"h-[400px] flex flex-col items-center justify-center"})])):xe("",!0),M(V).total_page>=2?(C(),Ae(sn,{key:1},{default:x(()=>[M(V).current_page<=M(V).total_page?(C(),Ae(rn,{key:0,span:24,class:"!text-center"},{default:x(()=>[h(vi,{class:"my-4"},{default:x(()=>[h(mi),R[21]||(R[21]=_("div",{class:"text-gray-400"},"加载中",-1))]),_:1})]),_:1})):(C(),Ae(rn,{key:1,span:24,class:"!text-center"},{default:x(()=>R[22]||(R[22]=[_("div",{class:"text-gray-400 my-4"},"数据已加载完成",-1)])),_:1}))]),_:1})):xe("",!0)]),_:1},8,["loading"])])):xe("",!0)])])]),_:1},8,["visible"])])}}}),Zm={class:"flex flex-col h-[calc(100vh-141px)]"},Qm={class:"flex-1 overflow-scroll scrollbar-w-none"},Xm=ut({__name:"AgentAppAbility",props:{app_id:{type:String,default:"",required:!0},draft_app_config:{type:Object,required:!0}},emits:["update:draft_app_config"],setup(a,{emit:f}){const r=["tools","datasets","long_term_memory","opening","suggested_after_answer","review_config"];return(g,y)=>{const z=$("icon-down"),v=$("icon-right"),I=$("a-collapse");return C(),E("div",Zm,[y[7]||(y[7]=_("div",{class:"p-4 text-gray-700 font-bold"},"应用能力",-1)),_("div",Qm,[h(I,{bordered:!1,"default-active-key":r},{"expand-icon":x(({active:A})=>[A?(C(),Ae(z,{key:0})):(C(),Ae(v,{key:1}))]),default:x(()=>[h(Ym,{tools:a.draft_app_config.tools,"onUpdate:tools":y[0]||(y[0]=A=>a.draft_app_config.tools=A),app_id:a.app_id},null,8,["tools","app_id"]),h(Vv,{retrieval_config:a.draft_app_config.retrieval_config,"onUpdate:retrieval_config":y[1]||(y[1]=A=>a.draft_app_config.retrieval_config=A),datasets:a.draft_app_config.datasets,"onUpdate:datasets":y[2]||(y[2]=A=>a.draft_app_config.datasets=A),app_id:a.app_id},null,8,["retrieval_config","datasets","app_id"]),h(j_,{long_term_memory:a.draft_app_config.long_term_memory,"onUpdate:long_term_memory":y[3]||(y[3]=A=>a.draft_app_config.long_term_memory=A),app_id:a.app_id},null,8,["long_term_memory","app_id"]),h(lv,{opening_questions:a.draft_app_config.opening_questions,"onUpdate:opening_questions":y[4]||(y[4]=A=>a.draft_app_config.opening_questions=A),opening_statement:a.draft_app_config.opening_statement,"onUpdate:opening_statement":y[5]||(y[5]=A=>a.draft_app_config.opening_statement=A),app_id:a.app_id},null,8,["opening_questions","opening_statement","app_id"]),h(uv,{suggested_after_answer:a.draft_app_config.suggested_after_answer,"onUpdate:suggested_after_answer":y[6]||(y[6]=A=>a.draft_app_config.suggested_after_answer=A),app_id:a.app_id},null,8,["suggested_after_answer","app_id"]),h(Av,{review_config:a.draft_app_config.review_config,app_id:a.app_id},null,8,["review_config","app_id"])]),_:1})])])}}});function Jm(){var a=window.navigator.userAgent,f=a.indexOf("MSIE ");if(f>0)return parseInt(a.substring(f+5,a.indexOf(".",f)),10);var r=a.indexOf("Trident/");if(r>0){var g=a.indexOf("rv:");return parseInt(a.substring(g+3,a.indexOf(".",g)),10)}var y=a.indexOf("Edge/");return y>0?parseInt(a.substring(y+5,a.indexOf(".",y)),10):-1}let pr;function Os(){Os.init||(Os.init=!0,pr=Jm()!==-1)}var hr={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Os(),In(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const a=document.createElement("object");this._resizeObject=a,a.setAttribute("aria-hidden","true"),a.setAttribute("tabindex",-1),a.onload=this.addResizeHandlers,a.type="text/html",pr&&this.$el.appendChild(a),a.data="about:blank",pr||this.$el.appendChild(a)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!pr&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const jm=a_();o_("data-v-b329ee4c");const e0={class:"resize-observer",tabindex:"-1"};l_();const t0=jm((a,f,r,g,y,z)=>(C(),Ae("div",e0)));hr.render=t0;hr.__scopeId="data-v-b329ee4c";hr.__file="src/components/ResizeObserver.vue";function gr(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gr=function(f){return typeof f}:gr=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},gr(a)}function n0(a,f){if(!(a instanceof f))throw new TypeError("Cannot call a class as a function")}function i0(a,f){for(var r=0;r<f.length;r++){var g=f[r];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(a,g.key,g)}}function r0(a,f,r){return i0(a.prototype,f),a}function ha(a){return s0(a)||o0(a)||l0(a)||a0()}function s0(a){if(Array.isArray(a))return ks(a)}function o0(a){if(typeof Symbol<"u"&&Symbol.iterator in Object(a))return Array.from(a)}function l0(a,f){if(a){if(typeof a=="string")return ks(a,f);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ks(a,f)}}function ks(a,f){(f==null||f>a.length)&&(f=a.length);for(var r=0,g=new Array(f);r<f;r++)g[r]=a[r];return g}function a0(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u0(a){var f;return typeof a=="function"?f={callback:a}:f=a,f}function f0(a,f){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},g,y,z,v=function(A){for(var O=arguments.length,V=new Array(O>1?O-1:0),Y=1;Y<O;Y++)V[Y-1]=arguments[Y];if(z=V,!(g&&A===y)){var G=r.leading;typeof G=="function"&&(G=G(A,y)),(!g||A!==y)&&G&&a.apply(void 0,[A].concat(ha(z))),y=A,clearTimeout(g),g=setTimeout(function(){a.apply(void 0,[A].concat(ha(z))),g=0},f)}};return v._clear=function(){clearTimeout(g),g=null},v}function wa(a,f){if(a===f)return!0;if(gr(a)==="object"){for(var r in a)if(!wa(a[r],f[r]))return!1;return!0}return!1}var c0=function(){function a(f,r,g){n0(this,a),this.el=f,this.observer=null,this.frozen=!1,this.createObserver(r,g)}return r0(a,[{key:"createObserver",value:function(r,g){var y=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=u0(r),this.callback=function(I,A){y.options.callback(I,A),I&&y.options.once&&(y.frozen=!0,y.destroyObserver())},this.callback&&this.options.throttle){var z=this.options.throttleOptions||{},v=z.leading;this.callback=f0(this.callback,this.options.throttle,{leading:function(A){return v==="both"||v==="visible"&&A||v==="hidden"&&!A}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(I){var A=I[0];if(I.length>1){var O=I.find(function(Y){return Y.isIntersecting});O&&(A=O)}if(y.callback){var V=A.isIntersecting&&A.intersectionRatio>=y.threshold;if(V===y.oldResult)return;y.oldResult=V,y.callback(V,A)}},this.options.intersection),In(function(){y.observer&&y.observer.observe(y.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),a}();function Sa(a,f,r){var g=f.value;if(g)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var y=new c0(a,g,r);a._vue_visibilityState=y}}function d0(a,f,r){var g=f.value,y=f.oldValue;if(!wa(g,y)){var z=a._vue_visibilityState;if(!g){Aa(a);return}z?z.createObserver(g,r):Sa(a,{value:g},r)}}function Aa(a){var f=a._vue_visibilityState;f&&(f.destroyObserver(),delete a._vue_visibilityState)}var p0={beforeMount:Sa,updated:d0,unmounted:Aa};function g0(a){return{all:a=a||new Map,on:function(f,r){var g=a.get(f);g&&g.push(r)||a.set(f,[r])},off:function(f,r){var g=a.get(f);g&&g.splice(g.indexOf(r)>>>0,1)},emit:function(f,r){(a.get(f)||[]).slice().map(function(g){g(r)}),(a.get("*")||[]).slice().map(function(g){g(f,r)})}}}var h0={itemsLimit:1e3},_0=/(auto|scroll)/;function $a(a,f){return a.parentNode===null?f:$a(a.parentNode,f.concat([a]))}var Rs=function(f,r){return getComputedStyle(f,null).getPropertyValue(r)},v0=function(f){return Rs(f,"overflow")+Rs(f,"overflow-y")+Rs(f,"overflow-x")},m0=function(f){return _0.test(v0(f))};function _a(a){if(a instanceof HTMLElement||a instanceof SVGElement){for(var f=$a(a.parentNode,[]),r=0;r<f.length;r+=1)if(m0(f[r]))return f[r];return document.scrollingElement||document.documentElement}}function Ds(a){"@babel/helpers - typeof";return Ds=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},Ds(a)}var Ca={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(f){return["vertical","horizontal"].includes(f)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function Ta(){return this.items.length&&Ds(this.items[0])!=="object"}var Ls=!1;if(typeof window<"u"){Ls=!1;try{var y0=Object.defineProperty({},"passive",{get:function(){Ls=!0}});window.addEventListener("test",null,y0)}catch{}}let x0=0;var Ps={name:"RecycleScroller",components:{ResizeObserver:hr},directives:{ObserveVisibility:p0},props:{...Ca,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const a={"-1":{accumulator:0}},f=this.items,r=this.sizeField,g=this.minItemSize;let y=1e4,z=0,v;for(let I=0,A=f.length;I<A;I++)v=f[I][r]||g,v<y&&(y=v),z+=v,a[I]={accumulator:z,size:v};return this.$_computedMinItemSize=y,a}return[]},simpleArray:Ta,itemIndexByKey(){const{keyField:a,items:f}=this,r={};for(let g=0,y=f.length;g<y;g++)r[f[g][a]]=g;return r}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const a=this.$_lastUpdateScrollPosition;typeof a=="number"&&this.$nextTick(()=>{this.scrollToPosition(a)})},beforeUnmount(){this.removeListeners()},methods:{addView(a,f,r,g,y){const z=u_({id:x0++,index:f,used:!0,key:g,type:y}),v=f_({item:r,position:0,nr:z});return a.push(v),v},unuseView(a,f=!1){const r=this.$_unusedViews,g=a.nr.type;let y=r.get(g);y||(y=[],r.set(g,y)),y.push(a),f||(a.nr.used=!1,a.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(a){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const f=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:r}=this.updateVisibleItems(!1,!0);r||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});f(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&f()},this.updateInterval))}},handleVisibilityChange(a,f){this.ready&&(a||f.boundingClientRect.width!==0||f.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(a,f=!1){const r=this.itemSize,g=this.gridItems||1,y=this.itemSecondarySize||r,z=this.$_computedMinItemSize,v=this.typeField,I=this.simpleArray?null:this.keyField,A=this.items,O=A.length,V=this.sizes,Y=this.$_views,G=this.$_unusedViews,q=this.pool,ie=this.itemIndexByKey;let N,U,pe,we,ue;if(!O)N=U=we=ue=pe=0;else if(this.$_prerender)N=we=0,U=ue=Math.min(this.prerender,A.length),pe=null;else{const W=this.getScroll();if(f){let J=W.start-this.$_lastUpdateScrollPosition;if(J<0&&(J=-J),r===null&&J<z||J<r)return{continuous:!0}}this.$_lastUpdateScrollPosition=W.start;const D=this.buffer;W.start-=D,W.end+=D;let X=0;if(this.$refs.before&&(X=this.$refs.before.scrollHeight,W.start-=X),this.$refs.after){const J=this.$refs.after.scrollHeight;W.end+=J}if(r===null){let J,ze=0,Ne=O-1,k=~~(O/2),me;do me=k,J=V[k].accumulator,J<W.start?ze=k:k<O-1&&V[k+1].accumulator>W.start&&(Ne=k),k=~~((ze+Ne)/2);while(k!==me);for(k<0&&(k=0),N=k,pe=V[O-1].accumulator,U=k;U<O&&V[U].accumulator<W.end;U++);for(U===-1?U=A.length-1:(U++,U>O&&(U=O)),we=N;we<O&&X+V[we].accumulator<W.start;we++);for(ue=we;ue<O&&X+V[ue].accumulator<W.end;ue++);}else{N=~~(W.start/r*g);const J=N%g;N-=J,U=Math.ceil(W.end/r*g),we=Math.max(0,Math.floor((W.start-X)/r*g)),ue=Math.floor((W.end-X)/r*g),N<0&&(N=0),U>O&&(U=O),we<0&&(we=0),ue>O&&(ue=O),pe=Math.ceil(O/g)*r}}U-N>h0.itemsLimit&&this.itemsLimitError(),this.totalSize=pe;let F;const L=N<=this.$_endIndex&&U>=this.$_startIndex;if(L)for(let W=0,D=q.length;W<D;W++)F=q[W],F.nr.used&&(a&&(F.nr.index=ie[F.item[I]]),(F.nr.index==null||F.nr.index<N||F.nr.index>=U)&&this.unuseView(F));const Ue=L?null:new Map;let se,Ce,Oe;for(let W=N;W<U;W++){se=A[W];const D=I?se[I]:se;if(D==null)throw new Error(`Key is ${D} on item (keyField is '${I}')`);if(F=Y.get(D),!r&&!V[W].size){F&&this.unuseView(F);continue}Ce=se[v];let X=G.get(Ce),J=!1;if(!F)L?X&&X.length?F=X.pop():F=this.addView(q,W,se,D,Ce):(Oe=Ue.get(Ce)||0,(!X||Oe>=X.length)&&(F=this.addView(q,W,se,D,Ce),this.unuseView(F,!0),X=G.get(Ce)),F=X[Oe],Ue.set(Ce,Oe+1)),Y.delete(F.nr.key),F.nr.used=!0,F.nr.index=W,F.nr.key=D,F.nr.type=Ce,Y.set(D,F),J=!0;else if(!F.nr.used&&(F.nr.used=!0,J=!0,X)){const ze=X.indexOf(F);ze!==-1&&X.splice(ze,1)}F.item=se,J&&(W===A.length-1&&this.$emit("scroll-end"),W===0&&this.$emit("scroll-start")),r===null?(F.position=V[W-1].accumulator,F.offset=0):(F.position=Math.floor(W/g)*r,F.offset=W%g*y)}return this.$_startIndex=N,this.$_endIndex=U,this.emitUpdate&&this.$emit("update",N,U,we,ue),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:L}},getListenerTarget(){let a=_a(this.$el);return window.document&&(a===window.document.documentElement||a===window.document.body)&&(a=window),a},getScroll(){const{$el:a,direction:f}=this,r=f==="vertical";let g;if(this.pageMode){const y=a.getBoundingClientRect(),z=r?y.height:y.width;let v=-(r?y.top:y.left),I=r?window.innerHeight:window.innerWidth;v<0&&(I+=v,v=0),v+I>z&&(I=z-v),g={start:v,end:v+I}}else r?g={start:a.scrollTop,end:a.scrollTop+a.clientHeight}:g={start:a.scrollLeft,end:a.scrollLeft+a.clientWidth};return g},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,Ls?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(a){let f;const r=this.gridItems||1;this.itemSize===null?f=a>0?this.sizes[a-1].accumulator:0:f=Math.floor(a/r)*this.itemSize,this.scrollToPosition(f)},scrollToPosition(a){const f=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let r,g,y;if(this.pageMode){const z=_a(this.$el),v=z.tagName==="HTML"?0:z[f.scroll],I=z.getBoundingClientRect(),O=this.$el.getBoundingClientRect()[f.start]-I[f.start];r=z,g=f.scroll,y=a+v+O}else r=this.$el,g=f.scroll,y=a;r[g]=y},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((a,f)=>a.nr.index-f.nr.index)}}};const b0={key:0,ref:"before",class:"vue-recycle-scroller__slot"},w0={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function S0(a,f,r,g,y,z){const v=$("ResizeObserver"),I=c_("observe-visibility");return Es((C(),E("div",{class:xt(["vue-recycle-scroller",{ready:y.ready,"page-mode":r.pageMode,[`direction-${a.direction}`]:!0}]),onScrollPassive:f[0]||(f[0]=(...A)=>z.handleScroll&&z.handleScroll(...A))},[a.$slots.before?(C(),E("div",b0,[hn(a.$slots,"before")],512)):xe("v-if",!0),(C(),Ae(pa(r.listTag),{ref:"wrapper",style:p_({[a.direction==="vertical"?"minHeight":"minWidth"]:y.totalSize+"px"}),class:xt(["vue-recycle-scroller__item-wrapper",r.listClass])},{default:x(()=>[(C(!0),E(Ye,null,it(y.pool,A=>(C(),Ae(pa(r.itemTag),xa({key:A.nr.id,style:y.ready?{transform:`translate${a.direction==="vertical"?"Y":"X"}(${A.position}px) translate${a.direction==="vertical"?"X":"Y"}(${A.offset}px)`,width:r.gridItems?`${a.direction==="vertical"&&r.itemSecondarySize||r.itemSize}px`:void 0,height:r.gridItems?`${a.direction==="horizontal"&&r.itemSecondarySize||r.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[r.itemClass,{hover:!r.skipHover&&y.hoverKey===A.nr.key}]]},d_(r.skipHover?{}:{mouseenter:()=>{y.hoverKey=A.nr.key},mouseleave:()=>{y.hoverKey=null}})),{default:x(()=>[hn(a.$slots,"default",{item:A.item,index:A.nr.index,active:A.nr.used})]),_:2},1040,["style","class"]))),128)),hn(a.$slots,"empty")]),_:3},8,["style","class"])),a.$slots.after?(C(),E("div",w0,[hn(a.$slots,"after")],512)):xe("v-if",!0),h(v,{onNotify:z.handleResize},null,8,["onNotify"])],34)),[[I,z.handleVisibilityChange]])}Ps.render=S0;Ps.__file="src/components/RecycleScroller.vue";var Us={name:"DynamicScroller",components:{RecycleScroller:Ps},provide(){return typeof ResizeObserver<"u"&&(this.$_resizeObserver=new ResizeObserver(a=>{requestAnimationFrame(()=>{if(Array.isArray(a)){for(const f of a)if(f.target&&f.target.$_vs_onResize){let r,g;if(f.borderBoxSize){const y=f.borderBoxSize[0];r=y.inlineSize,g=y.blockSize}else r=f.contentRect.width,g=f.contentRect.height;f.target.$_vs_onResize(f.target.$_vs_id,r,g)}}})})),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},inheritAttrs:!1,props:{...Ca,minItemSize:{type:[Number,String],required:!0}},emits:["resize","visible"],data(){return{vscrollData:{active:!0,sizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray:Ta,itemsWithSize(){const a=[],{items:f,keyField:r,simpleArray:g}=this,y=this.vscrollData.sizes,z=f.length;for(let v=0;v<z;v++){const I=f[v],A=g?v:I[r];let O=y[A];typeof O>"u"&&!this.$_undefinedMap[A]&&(O=0),a.push({item:I,id:A,size:O})}return a}},watch:{items(){this.forceUpdate()},simpleArray:{handler(a){this.vscrollData.simpleArray=a},immediate:!0},direction(a){this.forceUpdate(!0)},itemsWithSize(a,f){const r=this.$el.scrollTop;let g=0,y=0;const z=Math.min(a.length,f.length);for(let I=0;I<z&&!(g>=r);I++)g+=f[I].size||this.minItemSize,y+=a[I].size||this.minItemSize;const v=y-g;v!==0&&(this.$el.scrollTop+=v)}},beforeCreate(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={},this.$_events=g0()},activated(){this.vscrollData.active=!0},deactivated(){this.vscrollData.active=!1},unmounted(){this.$_events.all.clear()},methods:{onScrollerResize(){this.$refs.scroller&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible(){this.$_events.emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate(a=!1){(a||this.simpleArray)&&(this.vscrollData.sizes={}),this.$_events.emit("vscroll:update",{force:!0})},scrollToItem(a){const f=this.$refs.scroller;f&&f.scrollToItem(a)},getItemSize(a,f=void 0){const r=this.simpleArray?f??this.items.indexOf(a):a[this.keyField];return this.vscrollData.sizes[r]||0},scrollToBottom(){if(this.$_scrollingToBottom)return;this.$_scrollingToBottom=!0;const a=this.$el;this.$nextTick(()=>{a.scrollTop=a.scrollHeight+5e3;const f=()=>{a.scrollTop=a.scrollHeight+5e3,requestAnimationFrame(()=>{a.scrollTop=a.scrollHeight+5e3,this.$_undefinedSizes===0?this.$_scrollingToBottom=!1:requestAnimationFrame(f)})};requestAnimationFrame(f)})}}};function A0(a,f,r,g,y,z){const v=$("RecycleScroller");return C(),Ae(v,xa({ref:"scroller",items:z.itemsWithSize,"min-item-size":r.minItemSize,direction:a.direction,"key-field":"id","list-tag":a.listTag,"item-tag":a.itemTag},a.$attrs,{onResize:z.onScrollerResize,onVisible:z.onScrollerVisible}),{default:x(({item:I,index:A,active:O})=>[hn(a.$slots,"default",g_(h_({item:I.item,index:A,active:O,itemWithSize:I})))]),before:x(()=>[hn(a.$slots,"before")]),after:x(()=>[hn(a.$slots,"after")]),empty:x(()=>[hn(a.$slots,"empty")]),_:3},16,["items","min-item-size","direction","list-tag","item-tag","onResize","onVisible"])}Us.render=A0;Us.__file="src/components/DynamicScroller.vue";var Ia={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},emits:["resize"],computed:{id(){if(this.vscrollData.simpleArray)return this.index;if(this.vscrollData.keyField in this.item)return this.item[this.vscrollData.keyField];throw new Error(`keyField '${this.vscrollData.keyField}' not found in your item. You should set a valid keyField prop on your Scroller`)},size(){return this.vscrollData.sizes[this.id]||0},finalActive(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id(a,f){if(this.$el.$_vs_id=this.id,this.size||this.onDataUpdate(),this.$_sizeObserved){const r=this.vscrollData.sizes[f],g=this.vscrollData.sizes[a];r!=null&&r!==g&&this.applySize(r)}},finalActive(a){this.size||(a?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?a?this.observeSize():this.unobserveSize():a&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created(){if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){for(const a in this.sizeDependencies)this.$watch(()=>this.sizeDependencies[a],this.onDataUpdate);this.vscrollParent.$_events.on("vscroll:update",this.onVscrollUpdate)}},mounted(){this.finalActive&&(this.updateSize(),this.observeSize())},beforeUnmount(){this.vscrollParent.$_events.off("vscroll:update",this.onVscrollUpdate),this.unobserveSize()},methods:{updateSize(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData(){this.watchData&&!this.vscrollResizeObserver?this.$_watchData=this.$watch("item",()=>{this.onDataUpdate()},{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate({force:a}){!this.finalActive&&a&&(this.$_pendingVScrollUpdate=this.id),(this.$_forceNextVScrollUpdate===this.id||a||!this.size)&&this.updateSize()},onDataUpdate(){this.updateSize()},computeSize(a){this.$nextTick(()=>{if(this.id===a){const f=this.$el.offsetWidth,r=this.$el.offsetHeight;this.applyWidthHeight(f,r)}this.$_pendingSizeUpdate=null})},applyWidthHeight(a,f){const r=~~(this.vscrollParent.direction==="vertical"?f:a);r&&this.size!==r&&this.applySize(r)},applySize(a){this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.vscrollData.sizes[this.id]=a,this.emitResize&&this.$emit("resize",this.id)},observeSize(){this.vscrollResizeObserver&&(this.$_sizeObserved||(this.vscrollResizeObserver.observe(this.$el),this.$el.$_vs_id=this.id,this.$el.$_vs_onResize=this.onResize,this.$_sizeObserved=!0))},unobserveSize(){this.vscrollResizeObserver&&this.$_sizeObserved&&(this.vscrollResizeObserver.unobserve(this.$el),this.$el.$_vs_onResize=void 0,this.$_sizeObserved=!1)},onResize(a,f,r){this.id===a&&this.applyWidthHeight(f,r)}},render(){return __(this.tag,this.$slots.default())}};Ia.__file="src/components/DynamicScrollerItem.vue";const $0={class:"flex gap-2"},C0={class:"flex flex-col items-start gap-2"},T0={class:"text-gray-700 font-bold"},I0={class:"bg-blue-100 border border-blue-200 text-gray-700 px-4 py-3 rounded-2xl break-all"},z0=ut({__name:"HumanMessage",props:{account:{type:Object,default:{},required:!0},query:{type:String,default:"",required:!0}},setup(a){const f=a;return(r,g)=>{var z,v;const y=$("a-avatar");return C(),E("div",$0,[h(y,{size:30,shape:"circle",class:"flex-shrink-0","image-url":(z=f.account)==null?void 0:z.avatar},null,8,["image-url"]),_("div",C0,[_("div",T0,ce((v=f.account)==null?void 0:v.name),1),_("div",I0,ce(f.query),1)])])}}}),R0={},O0={class:"h-5 w-5 flex items-center justify-center"};function k0(a,f){return C(),E("div",O0,f[0]||(f[0]=[_("div",{class:"dot-flashing text"},null,-1)]))}const D0=v_(R0,[["render",k0],["__scopeId","data-v-69ca6368"]]),L0={class:"flex items-center gap-2"},E0={class:""},P0={key:0,class:"text-gray-700"},U0={key:1,class:"text-gray-700"},M0={key:2,class:"text-gray-700"},B0={key:3,class:"text-gray-700"},W0={key:4,class:"text-gray-700"},F0={class:"text-gray-500"},q0={key:0,class:"text-xs text-gray-500 line-clamp-4 break-all"},N0={key:1,class:"text-xs text-gray-500 line-clamp-4 break-all"},H0=ut({__name:"AgentThought",props:{loading:{type:Boolean,default:!1,required:!0},agent_thoughts:{type:Array,default:[],required:!0}},setup(a){const f=a,r=ae(!1);return(g,y)=>{const z=$("icon-list"),v=$("icon-loading"),I=$("icon-up"),A=$("icon-down"),O=$("icon-file"),V=$("icon-language"),Y=$("icon-storage"),G=$("icon-tool"),q=$("icon-message"),ie=$("a-collapse-item"),N=$("a-collapse");return C(),E("div",{class:xt(`flex flex-col rounded-2xl border ${r.value?"w-[320px]":"w-[180px]"}`)},[_("div",{class:xt(`flex items-center justify-between h-10 rounded-2xl bg-gray-100 px-4 text-gray-700 cursor-pointer w-auto ${r.value?"rounded-bl-none rounded-br-none":""}`),onClick:y[0]||(y[0]=U=>r.value=!r.value)},[_("div",L0,[h(z),de(" "+ce(r.value?"隐藏":"显示")+"运行流程 ",1)]),_("div",E0,[f.loading?(C(),Ae(v,{key:0})):(C(),E(Ye,{key:1},[r.value?(C(),Ae(I,{key:0})):(C(),Ae(A,{key:1}))],64))])],2),r.value?(C(),Ae(N,{key:0,class:"agent-thought","destroy-on-hide":"",bordered:!1},{default:x(()=>[(C(!0),E(Ye,null,it(f.agent_thoughts.filter(U=>[M(Ke).longTermMemoryRecall,M(Ke).agentThought,M(Ke).datasetRetrieval,M(Ke).agentAction,M(Ke).agentMessage].includes(U.event)),U=>(C(),Ae(ie,{key:U.id},{"expand-icon":x(()=>[U.event===M(Ke).longTermMemoryRecall?(C(),Ae(O,{key:0})):U.event===M(Ke).agentThought?(C(),Ae(V,{key:1})):U.event===M(Ke).datasetRetrieval?(C(),Ae(Y,{key:2})):U.event===M(Ke).agentAction?(C(),Ae(G,{key:3})):U.event===M(Ke).agentMessage?(C(),Ae(q,{key:4})):xe("",!0)]),header:x(()=>[U.event===M(Ke).longTermMemoryRecall?(C(),E("div",P0," 长期记忆召回 ")):xe("",!0),U.event===M(Ke).agentThought?(C(),E("div",U0," 智能体推理 ")):xe("",!0),U.event===M(Ke).datasetRetrieval?(C(),E("div",M0," 搜索知识库 ")):xe("",!0),U.event===M(Ke).agentAction?(C(),E("div",B0," 调用工具 ")):xe("",!0),U.event===M(Ke).agentMessage?(C(),E("div",W0," 智能体消息 ")):xe("",!0)]),extra:x(()=>[_("div",F0,ce(U.latency.toFixed(2))+"s",1)]),default:x(()=>[["agent_thought","agent_message"].includes(U.event)?(C(),E("div",q0,ce(U.thought||"-"),1)):(C(),E("div",N0,ce(U.observation||"-"),1))]),_:2},1024))),128))]),_:1})):xe("",!0)],2)}}}),G0={class:"flex gap-2"},V0={class:"flex flex-col items-start gap-2"},K0={class:"text-gray-700 font-bold"},Y0={class:"bg-gray-100 border border-gray-200 text-gray-700 px-4 py-3 rounded-2xl break-all"},Z0={key:0,class:"flex flex-col gap-2"},Q0=["onClick"],X0=ut({__name:"AiMessage",props:{app:{type:Object,default:{},required:!0},answer:{type:String,default:"",required:!0},loading:{type:Boolean,default:!1,required:!1},agent_thoughts:{type:Array,default:[],required:!0},suggested_questions:{type:Array,default:[],required:!1}},emits:["selectSuggestedQuestion"],setup(a,{emit:f}){const r=a,g=f;return(y,z)=>{var I,A;const v=$("a-avatar");return C(),E("div",G0,[h(v,{size:30,shape:"circle",class:"flex-shrink-0","image-url":(I=r.app)==null?void 0:I.icon},null,8,["image-url"]),_("div",V0,[_("div",K0,ce((A=r.app)==null?void 0:A.name),1),h(H0,{agent_thoughts:r.agent_thoughts,loading:r.loading},null,8,["agent_thoughts","loading"]),_("div",Y0,[r.loading&&r.answer.trim()===""?(C(),Ae(D0,{key:0})):(C(),E(Ye,{key:1},[de(ce(r.answer),1)],64))]),r.suggested_questions.length>0?(C(),E("div",Z0,[(C(!0),E(Ye,null,it(r.suggested_questions,(O,V)=>(C(),E("div",{key:V,class:"px-4 py-1.5 border rounded-lg text-gray-700 cursor-pointer hover:bg-gray-50",onClick:()=>g("selectSuggestedQuestion",O)},ce(O),9,Q0))),128))])):xe("",!0)])])}}}),J0={class:""},j0={key:0,class:"flex flex-col px-6 h-[calc(100vh-238px)]"},e1={class:"flex flex-col gap-6 py-6"},t1={key:0,class:"h-[50px] flex items-center justify-center"},n1={key:1,class:"flex flex-col p-6 gap-2 items-center justify-center h-[calc(100vh-238px)]"},i1={class:"flex flex-col items-center gap-2"},r1={class:"text-lg text-gray-700"},s1={key:0,class:"bg-gray-100 w-full px-4 py-3 rounded-lg text-gray-700"},o1={class:"flex items-center flex-wrap gap-2 w-full"},l1=["onClick"],a1={class:"w-full flex flex-col flex-shrink-0"},u1={class:"px-6 flex items-center gap-4"},f1={class:"h-[50px] flex items-center gap-2 px-4 flex-1 border border-gray-200 rounded-full"},c1=ut({__name:"PreviewDebugChat",props:{app:{type:Object,default:{},required:!0},opening_statement:{type:String,default:"",required:!0},opening_questions:{type:Array,default:[],required:!0}},setup(a){const f=ba(),r=a,g=ae(""),y=ae(""),z=ae(""),v=ae(null),I=ae(0),A=m_(),{loading:O,handleDeleteDebugConversation:V}=w_(),{loading:Y,messages:G,paginator:q,loadDebugConversationMessages:ie}=S_(),{loading:N,handleDebugChat:U}=A_(),{loading:pe,handleStopDebugChat:we}=$_(),{suggested_questions:ue,handleGenerateSuggestedQuestions:F}=E_(),L=()=>{I.value=v.value.$el.scrollHeight},Ue=()=>{v.value.$el.scrollTop=v.value.$el.scrollHeight-I.value},se=async D=>{var J;const{scrollTop:X}=D.target;X<=0&&!Y.value&&(L(),await ie((J=f.params)==null?void 0:J.app_id,!1),Ue())},Ce=async()=>{var J;if(g.value.trim()===""){_n.warning("用户提问不能为空");return}if(N.value){_n.warning("上一次提问还未结束，请稍等");return}ue.value=[],y.value="",z.value="",G.value.unshift({id:"",conversation_id:"",query:g.value,answer:"",total_token_count:0,latency:0,agent_thoughts:[],created_at:0});let D=0;const X=g.value;g.value="",await U((J=r.app)==null?void 0:J.id,X,ze=>{var Ze;const Ne=ze==null?void 0:ze.event,k=ze==null?void 0:ze.data,me=k==null?void 0:k.id,ke=G.value[0].agent_thoughts;if(y.value===""&&(k!=null&&k.message_id)&&(z.value=k==null?void 0:k.task_id,y.value=k==null?void 0:k.message_id,G.value[0].id=k==null?void 0:k.message_id,G.value[0].conversation_id=k==null?void 0:k.conversation_id),Ne!==Ke.ping){if(Ne===Ke.agentMessage){const j=ke.findIndex(R=>(R==null?void 0:R.id)===me);j===-1?(D+=1,ke.push({id:me,position:D,event:k==null?void 0:k.event,thought:k==null?void 0:k.thought,observation:k==null?void 0:k.observation,tool:k==null?void 0:k.tool,tool_input:k==null?void 0:k.tool_input,latency:k==null?void 0:k.latency,created_at:0})):ke[j]={...ke[j],thought:((Ze=ke[j])==null?void 0:Ze.thought)+(k==null?void 0:k.thought),latency:k==null?void 0:k.latency},G.value[0].answer+=k==null?void 0:k.thought}else D+=1,ke.push({id:me,position:D,event:k==null?void 0:k.event,thought:k==null?void 0:k.thought,observation:k==null?void 0:k.observation,tool:k==null?void 0:k.tool,tool_input:k==null?void 0:k.tool_input,latency:k==null?void 0:k.latency,created_at:0});G.value[0].agent_thoughts=ke,v.value.scrollToBottom()}})},Oe=async()=>{var D;z.value===""||!N.value||await we((D=r.app)==null?void 0:D.id,z.value)},W=async D=>{g.value=D,await Ce()};return ya(async()=>{var D;await ie((D=f.params)==null?void 0:D.app_id,!0),await In(()=>{v.value&&v.value.scrollToBottom()})}),(D,X)=>{var ke,Ze;const J=$("icon-poweroff"),ze=$("a-button"),Ne=$("a-avatar"),k=$("icon-empty"),me=$("icon-send");return C(),E("div",J0,[M(G).length>0?(C(),E("div",j0,[h(M(Us),{ref_key:"scroller",ref:v,items:M(G).slice().reverse(),"min-item-size":1,onScroll:se,class:"h-full scrollbar-w-none"},{default:x(({item:j,index:R,active:_e})=>[h(M(Ia),{item:j,active:_e,"data-index":j.id},{default:x(()=>[_("div",e1,[h(z0,{query:j.query,account:M(A).account},null,8,["query","account"]),h(X0,{agent_thoughts:j.agent_thoughts,answer:j.answer,app:r.app,suggested_questions:j.id===y.value?M(ue):[],loading:j.id===y.value&&M(N),onSelectSuggestedQuestion:W},null,8,["agent_thoughts","answer","app","suggested_questions","loading"])])]),_:2},1032,["item","active","data-index"])]),_:1},8,["items"]),z.value&&M(N)?(C(),E("div",t1,[h(ze,{loading:M(pe),class:"rounded-lg px-2",onClick:Oe},{icon:x(()=>[h(J)]),default:x(()=>[X[2]||(X[2]=de(" 停止响应 "))]),_:1},8,["loading"])])):xe("",!0)])):(C(),E("div",n1,[_("div",i1,[h(Ne,{size:48,shape:"square",class:"rounded-lg","image-url":(ke=r.app)==null?void 0:ke.icon},null,8,["image-url"]),_("div",r1,ce((Ze=r.app)==null?void 0:Ze.name),1)]),r.opening_statement?(C(),E("div",s1,ce(r.opening_statement),1)):xe("",!0),_("div",o1,[(C(!0),E(Ye,null,it(r.opening_questions.filter(j=>j.trim()!==""),(j,R)=>(C(),E("div",{key:R,class:"px-4 py-1.5 border rounded-lg text-gray-700 cursor-pointer hover:bg-gray-50",onClick:async()=>{g.value=j,await Ce()}},ce(j),9,l1))),128))])])),_("div",a1,[_("div",u1,[h(ze,{loading:M(O),class:"flex-shrink-0 !text-gray-700",type:"text",shape:"circle",onClick:X[0]||(X[0]=async()=>{var j,R;await Oe(),await M(V)((j=r.app)==null?void 0:j.id),await M(ie)((R=r.app)==null?void 0:R.id,!0)})},{icon:x(()=>[h(k,{size:16})]),_:1},8,["loading"]),_("div",f1,[Es(_("input",{"onUpdate:modelValue":X[1]||(X[1]=j=>g.value=j),type:"text",class:"flex-1 outline-0",onKeyup:y_(Ce,["enter"])},null,544),[[va,g.value]]),h(ze,{loading:M(N),type:"text",shape:"circle",class:"!text-gray-700",onClick:Ce},{icon:x(()=>[h(me,{size:16})]),_:1},8,["loading"])])]),X[3]||(X[3]=_("div",{class:"text-center text-gray-500 text-xs py-4"}," 内容由AI生成，无法确保真实准确，仅供参考 ",-1))])])}}}),d1={class:"flex-1 w-full min-h-0 bg-white"},p1={class:"flex-1 grid grid-cols-[26fr_14fr] h-full w-full"},g1={class:"bg-gray-50 flex flex-col h-full"},h1={class:"grid grid-cols-[13fr_13fr] overflow-hidden h-[calc(100vh-141px)]"},_1={class:"border-r py-4"},v1={class:"min-w-[404px]"},A1=ut({__name:"DetailView",props:{app:{type:Object,default:{},required:!0}},setup(a){var z;const f=ba(),r=a,{draftAppConfigForm:g,loadDraftAppConfig:y}=C_(String((z=f.params)==null?void 0:z.app_id));return vn(),(v,I)=>{var A,O,V,Y;return C(),E("div",d1,[_("div",p1,[_("div",g1,[I[1]||(I[1]=_("div",{class:"flex items-center h-16 border-b p-4"},[_("div",{class:"text-lg text-gray-700"},"应用编排")],-1)),_("div",h1,[_("div",_1,[h(G_,{preset_prompt:M(g).preset_prompt,"onUpdate:preset_prompt":I[0]||(I[0]=G=>M(g).preset_prompt=G),app_id:String((A=M(f).params)==null?void 0:A.app_id)},null,8,["preset_prompt","app_id"])]),h(Xm,{draft_app_config:M(g),app_id:String((O=M(f).params)==null?void 0:O.app_id)},null,8,["draft_app_config","app_id"])])]),_("div",v1,[h(X_,{app_id:String((V=M(f).params)==null?void 0:V.app_id),long_term_memory:M(g).long_term_memory},null,8,["app_id","long_term_memory"]),h(c1,{suggested_after_answer:M(g).suggested_after_answer,opening_questions:M(g).opening_questions,opening_statement:M(g).opening_statement,app:r.app,app_id:(Y=r.app)==null?void 0:Y.id},null,8,["suggested_after_answer","opening_questions","opening_statement","app","app_id"])])])])}}});export{A1 as default};
