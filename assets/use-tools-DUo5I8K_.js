import{g as c,p as n,r as s,M as i,P as d}from"./index-C3nWTMc_.js";const v=(e=1,o=20,t="")=>c("/api-tools",{params:{current_page:e,page_size:o,search_word:t}}),g=e=>n("/api-tools/validate-openapi-schema",{body:{openapi_schema:e}}),f=e=>n("/api-tools",{body:e}),A=(e,o)=>n(`/api-tools/${e}`,{body:o}),P=e=>n(`/api-tools/${e}/delete`),y=e=>c(`/api-tools/${e}`),T=(e,o)=>c(`/api-tools/${e}/tools/${o}`),m=()=>{const e=s(!1),o=s({});return{loading:e,api_tool_provider:o,loadApiToolProvider:async a=>{try{e.value=!0;const l=await y(a);o.value=l.data}finally{e.value=!1}}}},w=()=>{const e=s(!1),o=s({});return{loading:e,api_tool:o,loadApiTool:async(a,l)=>{try{e.value=!0;const r=await T(a,l);o.value=r.data}finally{e.value=!1}}}},O=()=>{const e=s(!1),o=s([]),t={current_page:1,page_size:20,total_page:0,total_record:0},a=s(t);return{loading:e,api_tool_providers:o,paginator:a,loadApiToolProviders:async(r=!1,u="")=>{if(r)a.value=t,Object.assign(a,{...t});else if(a.value.current_page>a.value.total_page)return;try{e.value=!0;const p=(await v(a.value.current_page,a.value.page_size,u)).data;a.value=p.paginator,a.value.current_page<=a.value.total_page&&(a.value.current_page+=1),r?o.value=p.list:o.value.push(...p.list)}finally{e.value=!1}}}},I=()=>({handleDelete:(o,t)=>{d.warning({title:"删除这个工具?",content:"删除工具是不可逆的。AI应用将无法再访问您的工具",hideCancel:!1,onOk:async()=>{try{const a=await P(o);i.success(a.message)}finally{t&&t()}}})}}),$=()=>{const e=s(!1);return{loading:e,handleUpdateApiToolProvider:async(t,a)=>{try{e.value=!0;const l=await A(t,a);i.success(l.message)}finally{e.value=!1}}}},b=()=>{const e=s(!1);return{loading:e,handleCreateApiToolProvider:async t=>{try{e.value=!0;const a=await f(t);i.success(a.message)}finally{e.value=!1}}}},C=()=>{const e=s(!1);return{loading:e,handleValidateOpenAPISchema:async t=>{try{e.value=!0;const a=await g(t);i.success(a.message)}finally{e.value=!1}}}};export{O as a,$ as b,b as c,C as d,I as e,w as f,m as u};
