import{I as n_,D as i_,b as ae,d as ut,o as T,f as U,g as _,h,w as x,t as ge,u as B,c as $e,a as fe,i as we,J as Es,K as va,s as _n,r as A,L as r_,N as Xn,n as ma,F as Je,q as at,O as In,P as cr,e as dr,y as xt,m as Qn,p as ya,v as s_,Q as da,R as o_,S as l_,T as a_,U as u_,V as f_,W as c_,B as gn,X as pa,Y as xa,Z as d_,A as p_,$ as h_,a0 as g_,a1 as __,_ as v_,a2 as Ye,a3 as m_,a4 as y_,j as ba}from"./index-DCl4em1w.js";import{e as vn,f as x_,g as b_,h as w_,i as S_,j as A_,k as $_,l as T_}from"./use-app-DuU6Et68.js";import{u as C_}from"./use-dataset-agdhluhL.js";import{b as I_,a as z_}from"./api-tools-BL1UWpCY.js";import{g as R_,b as O_,a as k_}from"./builtin-tool-DY4iuM8G.js";import"./dataset-zBMZp8RC.js";const D_=(a,f)=>n_("/ai/optimize-prompt",{body:{prompt:a}},f),L_=a=>i_("/ai/suggested-questions",{body:a}),E_=()=>{const a=ae(!1),f=ae([]);return{loading:a,suggested_questions:f,handleGenerateSuggestedQuestions:async g=>{try{a.value=!0;const y=await L_(g);f.value=y.data}finally{a.value=!1}}}},P_=()=>{const a=ae(!1),f=ae("");return{loading:a,optimize_prompt:f,handleOptimizePrompt:async g=>{try{a.value=!0,f.value="",await D_(g,y=>{const I=y.data;f.value+=I==null?void 0:I.optimize_prompt})}finally{a.value=!1}}}},U_={class:"flex flex-col h-[calc(100vh-173px)]"},M_={class:"flex items-center justify-between px-4 mb-4"},B_={class:"flex flex-col"},W_={key:0,class:"mb-4 flex flex-col"},F_={class:"max-h-[321px] overflow-scroll scrollbar-w-none mb-2 text-gray-700 whitespace-pre-line"},q_={class:""},N_={class:"h-[50px] flex items-center gap-2 px-4 flex-1 border border-gray-200 rounded-full"},H_={class:"flex-1"},G_=ut({__name:"PresetPromptTextarea",props:{app_id:{type:String,required:!0},preset_prompt:{type:String,required:!0}},emits:["update:preset_prompt"],setup(a,{emit:f}){const r=a,g=f,y=ae(!1),I=ae(""),{handleUpdateDraftAppConfig:v}=vn(),{loading:z,optimize_prompt:$,handleOptimizePrompt:R}=P_(),K=()=>{if($.value.trim()===""){_n.warning("优化prompt为空，请重新生成");return}g("update:preset_prompt",$.value),v(r.app_id,{preset_prompt:$.value}),y.value=!1},Q=async()=>{if(I.value.trim()===""){_n.warning("原始prompt不能为空");return}await R($.value)};return(G,q)=>{const ne=A("icon-sync"),N=A("a-button"),M=A("a-space"),ce=A("icon-send"),Se=A("a-card"),de=A("a-trigger"),F=A("a-textarea");return T(),U("div",U_,[_("div",M_,[q[8]||(q[8]=_("div",{class:"text-gray-700 font-bold"},"人设与回复逻辑",-1)),h(de,{"popup-visible":y.value,"onUpdate:popupVisible":q[2]||(q[2]=k=>y.value=k),trigger:["click"],position:"bl","popup-translate":[0,8]},{content:x(()=>[h(Se,{class:"rounded-lg w-[422px]"},{default:x(()=>[_("div",B_,[I.value?(T(),U("div",W_,[_("div",F_,ge(B($)),1),B(z)?we("",!0):(T(),$e(M,{key:0},{default:x(()=>[h(N,{size:"small",type:"primary",class:"rounded-lg",onClick:K},{default:x(()=>q[6]||(q[6]=[fe(" 替换 ")])),_:1}),h(N,{size:"small",class:"rounded-lg",onClick:q[0]||(q[0]=k=>y.value=!1)},{default:x(()=>q[7]||(q[7]=[fe("退出")])),_:1})]),_:1}))])):we("",!0),_("div",q_,[_("div",N_,[Es(_("input",{"onUpdate:modelValue":q[1]||(q[1]=k=>I.value=k),type:"text",class:"flex-1 outline-0",placeholder:"你希望如何编写或优化提示词"},null,512),[[va,I.value]]),h(N,{loading:B(z),type:"text",shape:"circle",onClick:Q},{icon:x(()=>[h(ce,{size:16,class:"!text-blue-700"})]),_:1},8,["loading"])])])])]),_:1})]),default:x(()=>[h(N,{size:"mini",class:"rounded-lg px-2"},{icon:x(()=>[h(ne)]),default:x(()=>[q[5]||(q[5]=fe(" 优化 "))]),_:1})]),_:1},8,["popup-visible"])]),_("div",H_,[h(F,{class:"h-full resize-none !bg-transparent !border-0 text-gray-700 px-1 preset-prompt-textarea",placeholder:"请在这里输入Agent的人设与回复逻辑(预设prompt)","max-length":2e3,"show-word-limit":"","model-value":r.preset_prompt,"onUpdate:modelValue":q[3]||(q[3]=k=>g("update:preset_prompt",k)),onBlur:q[4]||(q[4]=async()=>{await B(v)(r.app_id,{preset_prompt:r.preset_prompt})})},null,8,["model-value"])])])}}}),V_={class:""},K_={class:"flex items-center justify-between border-b h-[64px] px-4"},Y_={class:"flex items-center justify-between"},Z_={class:"pt-6"},X_={class:"flex items-center justify-between"},Q_=ut({__name:"PreviewDebugHeader",props:{app_id:{type:String,required:!0},long_term_memory:{type:Object,required:!0}},setup(a){const f=a,{debug_conversation_summary:r,loadDebugConversationSummary:g}=x_(),{loading:y,handleUpdateDebugConversationSummary:I}=b_(),v=ae(!1),z=async()=>{await g(f.app_id),v.value=!0};return($,R)=>{var M;const K=A("icon-save"),Q=A("a-button"),G=A("icon-close"),q=A("a-textarea"),ne=A("a-space"),N=A("a-modal");return T(),U("div",V_,[_("div",K_,[R[6]||(R[6]=_("div",{class:"text-lg text-gray-700"},"预览与调试",-1)),h(Q,{disabled:!((M=f.long_term_memory)!=null&&M.enable),size:"mini",type:"text",class:"rounded-lg px-1 !text-blue-700",onClick:z},{icon:x(()=>[h(K)]),default:x(()=>[R[5]||(R[5]=fe(" 长期记忆 "))]),_:1},8,["disabled"])]),h(N,{width:520,visible:v.value,"onUpdate:visible":R[4]||(R[4]=ce=>v.value=ce),"hide-title":"",footer:!1,"modal-class":"rounded-xl"},{default:x(()=>[_("div",Y_,[R[7]||(R[7]=_("div",{class:"text-lg font-bold text-gray-700"},"长期记忆",-1)),h(Q,{type:"text",class:"!text-gray-700",size:"small",onClick:R[0]||(R[0]=ce=>v.value=!1)},{icon:x(()=>[h(G)]),_:1})]),_("div",Z_,[h(q,{"model-value":B(r),"onUpdate:modelValue":R[1]||(R[1]=ce=>r_(r)?r.value=ce:null),placeholder:"请输入当前调试会话长期记忆","show-word-limit":"","max-length":2e3,"auto-size":{minRows:8,maxRows:8}},null,8,["model-value"]),_("div",X_,[R[10]||(R[10]=_("div",{class:""},null,-1)),h(ne,{size:16},{default:x(()=>[h(Q,{class:"rounded-lg",onClick:R[2]||(R[2]=ce=>v.value=!1)},{default:x(()=>R[8]||(R[8]=[fe("取消")])),_:1}),h(Q,{loading:B(y),type:"primary",class:"rounded-lg",onClick:R[3]||(R[3]=async()=>{await B(I)(f.app_id,B(r)),v.value=!1})},{default:x(()=>R[9]||(R[9]=[fe(" 保存 ")])),_:1},8,["loading"])]),_:1})])])]),_:1},8,["visible"])])}}}),J_={class:""},j_=ut({__name:"LongTermMemoryAbilityItem",props:{app_id:{type:String,default:"",required:!0},long_term_memory:{type:Object,default:{enable:!1},required:!0}},emits:["update:long_term_memory"],setup(a,{emit:f}){const r=a,g=f,{handleUpdateDraftAppConfig:y}=vn();return(I,v)=>{const z=A("icon-down"),$=A("a-button"),R=A("a-doption"),K=A("a-dropdown"),Q=A("a-collapse-item");return T(),U("div",J_,[h(Q,{key:"long_term_memory",class:"app-ability-item"},{header:x(()=>v[2]||(v[2]=[_("div",{class:"text-gray-700 font-bold"},"长期记忆",-1)])),extra:x(()=>[h(K,{onSelect:v[1]||(v[1]=async G=>{var q;!!G!==((q=r.long_term_memory)==null?void 0:q.enable)&&(g("update:long_term_memory",{enable:!!G}),await B(y)(r.app_id,{long_term_memory:{enable:!!G}}))})},{content:x(()=>[h(R,{value:1,class:"text-xs py-1.5 text-gray-700"},{default:x(()=>v[3]||(v[3]=[fe("开启")])),_:1}),h(R,{value:0,class:"text-xs py-1.5 text-red-700"},{default:x(()=>v[4]||(v[4]=[fe("关闭")])),_:1})]),default:x(()=>[h($,{size:"mini",class:"rounded-lg flex items-center gap-1 px-1",onClick:v[0]||(v[0]=Xn(()=>{},["stop"]))},{default:x(()=>{var G;return[fe(ge((G=r.long_term_memory)!=null&&G.enable?"开启":"关闭")+" ",1),h(z)]}),_:1})]),_:1})]),default:x(()=>[v[5]||(v[5]=_("div",{class:"text-xs text-gray-500 leading-[22px]"}," 总结聊天对话内容，并用于更好的响应用户的信息 ",-1))]),_:1})])}}}),ev={class:""},tv={class:"text-xs text-gray-500"},nv={class:"flex flex-col gap-2 mb-2"},iv={class:"flex items-center gap-2"},rv={class:"flex flex-col gap-2 mb-2"},sv={class:"flex items-center gap-2"},ov={class:"flex flex-col gap-2"},lv=ut({__name:"OpeningAbilityItem",props:{app_id:{type:String,default:"",required:!0},opening_statement:{type:String,default:"",required:!0},opening_questions:{type:Array,default:[],required:!0}},emits:["update:opening_statement","update:opening_questions"],setup(a,{emit:f}){const r=a,g=f,{handleUpdateDraftAppConfig:y}=vn(),I=ma({get(){const z=[...r.opening_questions];return z.length<3&&z[z.length-1]!==""&&z.push(""),z},set(z){g("update:opening_questions",z)}}),v=async()=>{await y(r.app_id,{opening_questions:I.value.filter(z=>z.trim()!=="")})};return(z,$)=>{const R=A("icon-exclamation-circle"),K=A("a-tooltip"),Q=A("a-textarea"),G=A("a-input"),q=A("icon-delete"),ne=A("a-button"),N=A("a-collapse-item");return T(),U("div",ev,[h(N,{key:"opening",class:"app-ability-item"},{header:x(()=>$[3]||($[3]=[_("div",{class:"text-gray-700 font-bold"},"对话开场白",-1)])),default:x(()=>[_("div",tv,[_("div",nv,[_("div",iv,[$[4]||($[4]=_("div",{class:"text-gray-700"},"开场白文案",-1)),h(K,{content:"开场白是与Agent应用对话时，Agent默认展示的对话。"},{default:x(()=>[h(R)]),_:1})]),h(Q,{"model-value":r.opening_statement,"onUpdate:modelValue":$[0]||($[0]=M=>g("update:opening_statement",M)),placeholder:"在此处填写 AI 应用的开场白",class:"bg-white text-gray-700 rounded-lg border border-gray-200","auto-size":{minRows:4,maxRows:4},onBlur:$[1]||($[1]=async()=>{await B(y)(r.app_id,{opening_statement:r.opening_statement})})},null,8,["model-value"])]),_("div",rv,[_("div",sv,[$[5]||($[5]=_("div",{class:"text-gray-700"},"开场白预设问题",-1)),h(K,{content:"开场白预设问题是与Agent对话时，初始化提供的建议问题，最多不超过3个"},{default:x(()=>[h(R)]),_:1})]),_("div",ov,[(T(!0),U(Je,null,at(I.value,(M,ce)=>(T(),U("div",{key:ce,class:"flex items-center gap-2"},[h(G,{"model-value":M,"onUpdate:modelValue":Se=>{const de=[...I.value];de[ce]=Se,I.value=de},class:"rounded-lg bg-white",placeholder:"输入开场白引导问题",onBlur:$[2]||($[2]=async()=>await v())},null,8,["model-value","onUpdate:modelValue"]),h(ne,{class:"rounded-lg",onClick:async()=>{const Se=[...I.value];Se.splice(ce,1),g("update:opening_questions",Se),await In(),await v()}},{icon:x(()=>[h(q)]),_:2},1032,["onClick"])]))),128))])])])]),_:1})])}}}),av={class:""},uv=ut({__name:"SuggestedAfterAnswerAbilityItem",props:{app_id:{type:String,default:"",required:!0},suggested_after_answer:{type:Object,default:{enable:!1},required:!0}},emits:["update:suggested_after_answer"],setup(a,{emit:f}){const r=a,g=f,{handleUpdateDraftAppConfig:y}=vn();return(I,v)=>{const z=A("icon-down"),$=A("a-button"),R=A("a-doption"),K=A("a-dropdown"),Q=A("a-collapse-item");return T(),U("div",av,[h(Q,{key:"suggested_after_answer",class:"app-ability-item"},{header:x(()=>v[2]||(v[2]=[_("div",{class:"text-gray-700 font-bold"},"用户问题建议",-1)])),extra:x(()=>[h(K,{onSelect:v[1]||(v[1]=async G=>{var q;!!G!==((q=r.suggested_after_answer)==null?void 0:q.enable)&&(g("update:suggested_after_answer",{enable:!!G}),await B(y)(r.app_id,{suggested_after_answer:{enable:!!G}}))})},{content:x(()=>[h(R,{value:1,class:"text-xs py-1.5 text-gray-700"},{default:x(()=>v[3]||(v[3]=[fe("开启")])),_:1}),h(R,{value:0,class:"text-xs py-1.5 text-red-700"},{default:x(()=>v[4]||(v[4]=[fe("关闭")])),_:1})]),default:x(()=>[h($,{size:"mini",class:"rounded-lg flex items-center gap-1 px-1",onClick:v[0]||(v[0]=Xn(()=>{},["stop"]))},{default:x(()=>{var G;return[fe(ge((G=r.suggested_after_answer)!=null&&G.enable?"开启":"关闭")+" ",1),h(z)]}),_:1})]),_:1})]),default:x(()=>[v[5]||(v[5]=_("div",{class:"text-xs text-gray-500 leading-[22px]"}," 在应用回复后，自动根据对话内容提供 3 条用户提问建议 ",-1))]),_:1})])}}});var gi={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var fv=gi.exports,ha;function cv(){return ha||(ha=1,function(a,f){(function(){var r,g="4.17.21",y=200,I="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",v="Expected a function",z="Invalid `variable` option passed into `_.template`",$="__lodash_hash_undefined__",R=500,K="__lodash_placeholder__",Q=1,G=2,q=4,ne=1,N=2,M=1,ce=2,Se=4,de=8,F=16,k=32,Ue=64,re=128,Ie=256,ke=512,E=30,D="...",J=800,Y=16,Fe=1,L=2,ze=3,oe=1/0,qe=9007199254740991,xe=17976931348623157e292,ve=NaN,O=4294967295,me=O-1,j=O>>>1,ye=[["ary",re],["bind",M],["bindKey",ce],["curry",de],["curryRight",F],["flip",ke],["partial",k],["partialRight",Ue],["rearg",Ie]],bt="[object Arguments]",ft="[object Array]",Nt="[object AsyncFunction]",Pt="[object Boolean]",Ut="[object Date]",Ce="[object DOMException]",ct="[object Error]",wt="[object Function]",zn="[object GeneratorFunction]",dt="[object Map]",en="[object Number]",_r="[object Null]",Ot="[object Object]",_i="[object Promise]",vi="[object Proxy]",tn="[object RegExp]",pt="[object Set]",mn="[object String]",Rn="[object Symbol]",vr="[object Undefined]",nn="[object WeakMap]",mi="[object WeakSet]",rn="[object ArrayBuffer]",sn="[object DataView]",pe="[object Float32Array]",je="[object Float64Array]",Ze="[object Int8Array]",Mt="[object Int16Array]",On="[object Int32Array]",kn="[object Uint8Array]",Dn="[object Uint8ClampedArray]",Ln="[object Uint16Array]",En="[object Uint32Array]",yi=/\b__p \+= '';/g,xi=/\b(__p \+=) '' \+/g,bi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Jn=/&(?:amp|lt|gt|quot|#39);/g,jn=/[&<>"']/g,it=RegExp(Jn.source),wi=RegExp(jn.source),De=/<%-([\s\S]+?)%>/g,Ht=/<%([\s\S]+?)%>/g,Ms=/<%=([\s\S]+?)%>/g,za=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ra=/^\w*$/,Oa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mr=/[\\^$.*+?()[\]{}|]/g,ka=RegExp(mr.source),yr=/^\s+/,Da=/\s/,La=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ea=/\{\n\/\* \[wrapped with (.+)\] \*/,Pa=/,? & /,Ua=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ma=/[()=,{}\[\]\/\s]/,Ba=/\\(\\)?/g,Wa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Bs=/\w*$/,Fa=/^[-+]0x[0-9a-f]+$/i,qa=/^0b[01]+$/i,Na=/^\[object .+?Constructor\]$/,Ha=/^0o[0-7]+$/i,Ga=/^(?:0|[1-9]\d*)$/,Va=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Si=/($^)/,Ka=/['\n\r\u2028\u2029\\]/g,Ai="\\ud800-\\udfff",Ya="\\u0300-\\u036f",Za="\\ufe20-\\ufe2f",Xa="\\u20d0-\\u20ff",Ws=Ya+Za+Xa,Fs="\\u2700-\\u27bf",qs="a-z\\xdf-\\xf6\\xf8-\\xff",Qa="\\xac\\xb1\\xd7\\xf7",Ja="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ja="\\u2000-\\u206f",eu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ns="A-Z\\xc0-\\xd6\\xd8-\\xde",Hs="\\ufe0e\\ufe0f",Gs=Qa+Ja+ja+eu,xr="['’]",tu="["+Ai+"]",Vs="["+Gs+"]",$i="["+Ws+"]",Ks="\\d+",nu="["+Fs+"]",Ys="["+qs+"]",Zs="[^"+Ai+Gs+Ks+Fs+qs+Ns+"]",br="\\ud83c[\\udffb-\\udfff]",iu="(?:"+$i+"|"+br+")",Xs="[^"+Ai+"]",wr="(?:\\ud83c[\\udde6-\\uddff]){2}",Sr="[\\ud800-\\udbff][\\udc00-\\udfff]",Pn="["+Ns+"]",Qs="\\u200d",Js="(?:"+Ys+"|"+Zs+")",ru="(?:"+Pn+"|"+Zs+")",js="(?:"+xr+"(?:d|ll|m|re|s|t|ve))?",eo="(?:"+xr+"(?:D|LL|M|RE|S|T|VE))?",to=iu+"?",no="["+Hs+"]?",su="(?:"+Qs+"(?:"+[Xs,wr,Sr].join("|")+")"+no+to+")*",ou="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",lu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",io=no+to+su,au="(?:"+[nu,wr,Sr].join("|")+")"+io,uu="(?:"+[Xs+$i+"?",$i,wr,Sr,tu].join("|")+")",fu=RegExp(xr,"g"),cu=RegExp($i,"g"),Ar=RegExp(br+"(?="+br+")|"+uu+io,"g"),du=RegExp([Pn+"?"+Ys+"+"+js+"(?="+[Vs,Pn,"$"].join("|")+")",ru+"+"+eo+"(?="+[Vs,Pn+Js,"$"].join("|")+")",Pn+"?"+Js+"+"+js,Pn+"+"+eo,lu,ou,Ks,au].join("|"),"g"),pu=RegExp("["+Qs+Ai+Ws+Hs+"]"),hu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,gu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_u=-1,Le={};Le[pe]=Le[je]=Le[Ze]=Le[Mt]=Le[On]=Le[kn]=Le[Dn]=Le[Ln]=Le[En]=!0,Le[bt]=Le[ft]=Le[rn]=Le[Pt]=Le[sn]=Le[Ut]=Le[ct]=Le[wt]=Le[dt]=Le[en]=Le[Ot]=Le[tn]=Le[pt]=Le[mn]=Le[nn]=!1;var Oe={};Oe[bt]=Oe[ft]=Oe[rn]=Oe[sn]=Oe[Pt]=Oe[Ut]=Oe[pe]=Oe[je]=Oe[Ze]=Oe[Mt]=Oe[On]=Oe[dt]=Oe[en]=Oe[Ot]=Oe[tn]=Oe[pt]=Oe[mn]=Oe[Rn]=Oe[kn]=Oe[Dn]=Oe[Ln]=Oe[En]=!0,Oe[ct]=Oe[wt]=Oe[nn]=!1;var vu={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},mu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},xu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},bu=parseFloat,wu=parseInt,ro=typeof cr=="object"&&cr&&cr.Object===Object&&cr,Su=typeof self=="object"&&self&&self.Object===Object&&self,Ve=ro||Su||Function("return this")(),$r=f&&!f.nodeType&&f,yn=$r&&!0&&a&&!a.nodeType&&a,so=yn&&yn.exports===$r,Tr=so&&ro.process,St=function(){try{var d=yn&&yn.require&&yn.require("util").types;return d||Tr&&Tr.binding&&Tr.binding("util")}catch{}}(),oo=St&&St.isArrayBuffer,lo=St&&St.isDate,ao=St&&St.isMap,uo=St&&St.isRegExp,fo=St&&St.isSet,co=St&&St.isTypedArray;function ht(d,b,m){switch(m.length){case 0:return d.call(b);case 1:return d.call(b,m[0]);case 2:return d.call(b,m[0],m[1]);case 3:return d.call(b,m[0],m[1],m[2])}return d.apply(b,m)}function Au(d,b,m,W){for(var ee=-1,be=d==null?0:d.length;++ee<be;){var Ne=d[ee];b(W,Ne,m(Ne),d)}return W}function At(d,b){for(var m=-1,W=d==null?0:d.length;++m<W&&b(d[m],m,d)!==!1;);return d}function $u(d,b){for(var m=d==null?0:d.length;m--&&b(d[m],m,d)!==!1;);return d}function po(d,b){for(var m=-1,W=d==null?0:d.length;++m<W;)if(!b(d[m],m,d))return!1;return!0}function on(d,b){for(var m=-1,W=d==null?0:d.length,ee=0,be=[];++m<W;){var Ne=d[m];b(Ne,m,d)&&(be[ee++]=Ne)}return be}function Ti(d,b){var m=d==null?0:d.length;return!!m&&Un(d,b,0)>-1}function Cr(d,b,m){for(var W=-1,ee=d==null?0:d.length;++W<ee;)if(m(b,d[W]))return!0;return!1}function Ee(d,b){for(var m=-1,W=d==null?0:d.length,ee=Array(W);++m<W;)ee[m]=b(d[m],m,d);return ee}function ln(d,b){for(var m=-1,W=b.length,ee=d.length;++m<W;)d[ee+m]=b[m];return d}function Ir(d,b,m,W){var ee=-1,be=d==null?0:d.length;for(W&&be&&(m=d[++ee]);++ee<be;)m=b(m,d[ee],ee,d);return m}function Tu(d,b,m,W){var ee=d==null?0:d.length;for(W&&ee&&(m=d[--ee]);ee--;)m=b(m,d[ee],ee,d);return m}function zr(d,b){for(var m=-1,W=d==null?0:d.length;++m<W;)if(b(d[m],m,d))return!0;return!1}var Cu=Rr("length");function Iu(d){return d.split("")}function zu(d){return d.match(Ua)||[]}function ho(d,b,m){var W;return m(d,function(ee,be,Ne){if(b(ee,be,Ne))return W=be,!1}),W}function Ci(d,b,m,W){for(var ee=d.length,be=m+(W?1:-1);W?be--:++be<ee;)if(b(d[be],be,d))return be;return-1}function Un(d,b,m){return b===b?Fu(d,b,m):Ci(d,go,m)}function Ru(d,b,m,W){for(var ee=m-1,be=d.length;++ee<be;)if(W(d[ee],b))return ee;return-1}function go(d){return d!==d}function _o(d,b){var m=d==null?0:d.length;return m?kr(d,b)/m:ve}function Rr(d){return function(b){return b==null?r:b[d]}}function Or(d){return function(b){return d==null?r:d[b]}}function vo(d,b,m,W,ee){return ee(d,function(be,Ne,Re){m=W?(W=!1,be):b(m,be,Ne,Re)}),m}function Ou(d,b){var m=d.length;for(d.sort(b);m--;)d[m]=d[m].value;return d}function kr(d,b){for(var m,W=-1,ee=d.length;++W<ee;){var be=b(d[W]);be!==r&&(m=m===r?be:m+be)}return m}function Dr(d,b){for(var m=-1,W=Array(d);++m<d;)W[m]=b(m);return W}function ku(d,b){return Ee(b,function(m){return[m,d[m]]})}function mo(d){return d&&d.slice(0,wo(d)+1).replace(yr,"")}function gt(d){return function(b){return d(b)}}function Lr(d,b){return Ee(b,function(m){return d[m]})}function ei(d,b){return d.has(b)}function yo(d,b){for(var m=-1,W=d.length;++m<W&&Un(b,d[m],0)>-1;);return m}function xo(d,b){for(var m=d.length;m--&&Un(b,d[m],0)>-1;);return m}function Du(d,b){for(var m=d.length,W=0;m--;)d[m]===b&&++W;return W}var Lu=Or(vu),Eu=Or(mu);function Pu(d){return"\\"+xu[d]}function Uu(d,b){return d==null?r:d[b]}function Mn(d){return pu.test(d)}function Mu(d){return hu.test(d)}function Bu(d){for(var b,m=[];!(b=d.next()).done;)m.push(b.value);return m}function Er(d){var b=-1,m=Array(d.size);return d.forEach(function(W,ee){m[++b]=[ee,W]}),m}function bo(d,b){return function(m){return d(b(m))}}function an(d,b){for(var m=-1,W=d.length,ee=0,be=[];++m<W;){var Ne=d[m];(Ne===b||Ne===K)&&(d[m]=K,be[ee++]=m)}return be}function Ii(d){var b=-1,m=Array(d.size);return d.forEach(function(W){m[++b]=W}),m}function Wu(d){var b=-1,m=Array(d.size);return d.forEach(function(W){m[++b]=[W,W]}),m}function Fu(d,b,m){for(var W=m-1,ee=d.length;++W<ee;)if(d[W]===b)return W;return-1}function qu(d,b,m){for(var W=m+1;W--;)if(d[W]===b)return W;return W}function Bn(d){return Mn(d)?Hu(d):Cu(d)}function kt(d){return Mn(d)?Gu(d):Iu(d)}function wo(d){for(var b=d.length;b--&&Da.test(d.charAt(b)););return b}var Nu=Or(yu);function Hu(d){for(var b=Ar.lastIndex=0;Ar.test(d);)++b;return b}function Gu(d){return d.match(Ar)||[]}function Vu(d){return d.match(du)||[]}var Ku=function d(b){b=b==null?Ve:Wn.defaults(Ve.Object(),b,Wn.pick(Ve,gu));var m=b.Array,W=b.Date,ee=b.Error,be=b.Function,Ne=b.Math,Re=b.Object,Pr=b.RegExp,Yu=b.String,$t=b.TypeError,zi=m.prototype,Zu=be.prototype,Fn=Re.prototype,Ri=b["__core-js_shared__"],Oi=Zu.toString,Te=Fn.hasOwnProperty,Xu=0,So=function(){var e=/[^.]+$/.exec(Ri&&Ri.keys&&Ri.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ki=Fn.toString,Qu=Oi.call(Re),Ju=Ve._,ju=Pr("^"+Oi.call(Te).replace(mr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Di=so?b.Buffer:r,un=b.Symbol,Li=b.Uint8Array,Ao=Di?Di.allocUnsafe:r,Ei=bo(Re.getPrototypeOf,Re),$o=Re.create,To=Fn.propertyIsEnumerable,Pi=zi.splice,Co=un?un.isConcatSpreadable:r,ti=un?un.iterator:r,xn=un?un.toStringTag:r,Ui=function(){try{var e=$n(Re,"defineProperty");return e({},"",{}),e}catch{}}(),ef=b.clearTimeout!==Ve.clearTimeout&&b.clearTimeout,tf=W&&W.now!==Ve.Date.now&&W.now,nf=b.setTimeout!==Ve.setTimeout&&b.setTimeout,Mi=Ne.ceil,Bi=Ne.floor,Ur=Re.getOwnPropertySymbols,rf=Di?Di.isBuffer:r,Io=b.isFinite,sf=zi.join,of=bo(Re.keys,Re),He=Ne.max,Xe=Ne.min,lf=W.now,af=b.parseInt,zo=Ne.random,uf=zi.reverse,Mr=$n(b,"DataView"),ni=$n(b,"Map"),Br=$n(b,"Promise"),qn=$n(b,"Set"),ii=$n(b,"WeakMap"),ri=$n(Re,"create"),Wi=ii&&new ii,Nn={},ff=Tn(Mr),cf=Tn(ni),df=Tn(Br),pf=Tn(qn),hf=Tn(ii),Fi=un?un.prototype:r,si=Fi?Fi.valueOf:r,Ro=Fi?Fi.toString:r;function o(e){if(Me(e)&&!te(e)&&!(e instanceof he)){if(e instanceof Tt)return e;if(Te.call(e,"__wrapped__"))return Ol(e)}return new Tt(e)}var Hn=function(){function e(){}return function(t){if(!Pe(t))return{};if($o)return $o(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function qi(){}function Tt(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}o.templateSettings={escape:De,evaluate:Ht,interpolate:Ms,variable:"",imports:{_:o}},o.prototype=qi.prototype,o.prototype.constructor=o,Tt.prototype=Hn(qi.prototype),Tt.prototype.constructor=Tt;function he(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=O,this.__views__=[]}function gf(){var e=new he(this.__wrapped__);return e.__actions__=rt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=rt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=rt(this.__views__),e}function _f(){if(this.__filtered__){var e=new he(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function vf(){var e=this.__wrapped__.value(),t=this.__dir__,n=te(e),i=t<0,s=n?e.length:0,l=zc(0,s,this.__views__),u=l.start,c=l.end,p=c-u,w=i?c:u-1,S=this.__iteratees__,C=S.length,P=0,H=Xe(p,this.__takeCount__);if(!n||!i&&s==p&&H==p)return el(e,this.__actions__);var Z=[];e:for(;p--&&P<H;){w+=t;for(var se=-1,X=e[w];++se<C;){var ue=S[se],_e=ue.iteratee,mt=ue.type,nt=_e(X);if(mt==L)X=nt;else if(!nt){if(mt==Fe)continue e;break e}}Z[P++]=X}return Z}he.prototype=Hn(qi.prototype),he.prototype.constructor=he;function bn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function mf(){this.__data__=ri?ri(null):{},this.size=0}function yf(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function xf(e){var t=this.__data__;if(ri){var n=t[e];return n===$?r:n}return Te.call(t,e)?t[e]:r}function bf(e){var t=this.__data__;return ri?t[e]!==r:Te.call(t,e)}function wf(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ri&&t===r?$:t,this}bn.prototype.clear=mf,bn.prototype.delete=yf,bn.prototype.get=xf,bn.prototype.has=bf,bn.prototype.set=wf;function Gt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Sf(){this.__data__=[],this.size=0}function Af(e){var t=this.__data__,n=Ni(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():Pi.call(t,n,1),--this.size,!0}function $f(e){var t=this.__data__,n=Ni(t,e);return n<0?r:t[n][1]}function Tf(e){return Ni(this.__data__,e)>-1}function Cf(e,t){var n=this.__data__,i=Ni(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}Gt.prototype.clear=Sf,Gt.prototype.delete=Af,Gt.prototype.get=$f,Gt.prototype.has=Tf,Gt.prototype.set=Cf;function Vt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function If(){this.size=0,this.__data__={hash:new bn,map:new(ni||Gt),string:new bn}}function zf(e){var t=tr(this,e).delete(e);return this.size-=t?1:0,t}function Rf(e){return tr(this,e).get(e)}function Of(e){return tr(this,e).has(e)}function kf(e,t){var n=tr(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}Vt.prototype.clear=If,Vt.prototype.delete=zf,Vt.prototype.get=Rf,Vt.prototype.has=Of,Vt.prototype.set=kf;function wn(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Vt;++t<n;)this.add(e[t])}function Df(e){return this.__data__.set(e,$),this}function Lf(e){return this.__data__.has(e)}wn.prototype.add=wn.prototype.push=Df,wn.prototype.has=Lf;function Dt(e){var t=this.__data__=new Gt(e);this.size=t.size}function Ef(){this.__data__=new Gt,this.size=0}function Pf(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Uf(e){return this.__data__.get(e)}function Mf(e){return this.__data__.has(e)}function Bf(e,t){var n=this.__data__;if(n instanceof Gt){var i=n.__data__;if(!ni||i.length<y-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Vt(i)}return n.set(e,t),this.size=n.size,this}Dt.prototype.clear=Ef,Dt.prototype.delete=Pf,Dt.prototype.get=Uf,Dt.prototype.has=Mf,Dt.prototype.set=Bf;function Oo(e,t){var n=te(e),i=!n&&Cn(e),s=!n&&!i&&hn(e),l=!n&&!i&&!s&&Yn(e),u=n||i||s||l,c=u?Dr(e.length,Yu):[],p=c.length;for(var w in e)(t||Te.call(e,w))&&!(u&&(w=="length"||s&&(w=="offset"||w=="parent")||l&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||Xt(w,p)))&&c.push(w);return c}function ko(e){var t=e.length;return t?e[Xr(0,t-1)]:r}function Wf(e,t){return nr(rt(e),Sn(t,0,e.length))}function Ff(e){return nr(rt(e))}function Wr(e,t,n){(n!==r&&!Lt(e[t],n)||n===r&&!(t in e))&&Kt(e,t,n)}function oi(e,t,n){var i=e[t];(!(Te.call(e,t)&&Lt(i,n))||n===r&&!(t in e))&&Kt(e,t,n)}function Ni(e,t){for(var n=e.length;n--;)if(Lt(e[n][0],t))return n;return-1}function qf(e,t,n,i){return fn(e,function(s,l,u){t(i,s,n(s),u)}),i}function Do(e,t){return e&&Wt(t,Ge(t),e)}function Nf(e,t){return e&&Wt(t,ot(t),e)}function Kt(e,t,n){t=="__proto__"&&Ui?Ui(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Fr(e,t){for(var n=-1,i=t.length,s=m(i),l=e==null;++n<i;)s[n]=l?r:bs(e,t[n]);return s}function Sn(e,t,n){return e===e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function Ct(e,t,n,i,s,l){var u,c=t&Q,p=t&G,w=t&q;if(n&&(u=s?n(e,i,s,l):n(e)),u!==r)return u;if(!Pe(e))return e;var S=te(e);if(S){if(u=Oc(e),!c)return rt(e,u)}else{var C=Qe(e),P=C==wt||C==zn;if(hn(e))return il(e,c);if(C==Ot||C==bt||P&&!s){if(u=p||P?{}:wl(e),!c)return p?xc(e,Nf(u,e)):yc(e,Do(u,e))}else{if(!Oe[C])return s?e:{};u=kc(e,C,c)}}l||(l=new Dt);var H=l.get(e);if(H)return H;l.set(e,u),Ql(e)?e.forEach(function(X){u.add(Ct(X,t,n,X,e,l))}):Zl(e)&&e.forEach(function(X,ue){u.set(ue,Ct(X,t,n,ue,e,l))});var Z=w?p?ls:os:p?ot:Ge,se=S?r:Z(e);return At(se||e,function(X,ue){se&&(ue=X,X=e[ue]),oi(u,ue,Ct(X,t,n,ue,e,l))}),u}function Hf(e){var t=Ge(e);return function(n){return Lo(n,e,t)}}function Lo(e,t,n){var i=n.length;if(e==null)return!i;for(e=Re(e);i--;){var s=n[i],l=t[s],u=e[s];if(u===r&&!(s in e)||!l(u))return!1}return!0}function Eo(e,t,n){if(typeof e!="function")throw new $t(v);return pi(function(){e.apply(r,n)},t)}function li(e,t,n,i){var s=-1,l=Ti,u=!0,c=e.length,p=[],w=t.length;if(!c)return p;n&&(t=Ee(t,gt(n))),i?(l=Cr,u=!1):t.length>=y&&(l=ei,u=!1,t=new wn(t));e:for(;++s<c;){var S=e[s],C=n==null?S:n(S);if(S=i||S!==0?S:0,u&&C===C){for(var P=w;P--;)if(t[P]===C)continue e;p.push(S)}else l(t,C,i)||p.push(S)}return p}var fn=al(Bt),Po=al(Nr,!0);function Gf(e,t){var n=!0;return fn(e,function(i,s,l){return n=!!t(i,s,l),n}),n}function Hi(e,t,n){for(var i=-1,s=e.length;++i<s;){var l=e[i],u=t(l);if(u!=null&&(c===r?u===u&&!vt(u):n(u,c)))var c=u,p=l}return p}function Vf(e,t,n,i){var s=e.length;for(n=ie(n),n<0&&(n=-n>s?0:s+n),i=i===r||i>s?s:ie(i),i<0&&(i+=s),i=n>i?0:jl(i);n<i;)e[n++]=t;return e}function Uo(e,t){var n=[];return fn(e,function(i,s,l){t(i,s,l)&&n.push(i)}),n}function Ke(e,t,n,i,s){var l=-1,u=e.length;for(n||(n=Lc),s||(s=[]);++l<u;){var c=e[l];t>0&&n(c)?t>1?Ke(c,t-1,n,i,s):ln(s,c):i||(s[s.length]=c)}return s}var qr=ul(),Mo=ul(!0);function Bt(e,t){return e&&qr(e,t,Ge)}function Nr(e,t){return e&&Mo(e,t,Ge)}function Gi(e,t){return on(t,function(n){return Qt(e[n])})}function An(e,t){t=dn(t,e);for(var n=0,i=t.length;e!=null&&n<i;)e=e[Ft(t[n++])];return n&&n==i?e:r}function Bo(e,t,n){var i=t(e);return te(e)?i:ln(i,n(e))}function et(e){return e==null?e===r?vr:_r:xn&&xn in Re(e)?Ic(e):Fc(e)}function Hr(e,t){return e>t}function Kf(e,t){return e!=null&&Te.call(e,t)}function Yf(e,t){return e!=null&&t in Re(e)}function Zf(e,t,n){return e>=Xe(t,n)&&e<He(t,n)}function Gr(e,t,n){for(var i=n?Cr:Ti,s=e[0].length,l=e.length,u=l,c=m(l),p=1/0,w=[];u--;){var S=e[u];u&&t&&(S=Ee(S,gt(t))),p=Xe(S.length,p),c[u]=!n&&(t||s>=120&&S.length>=120)?new wn(u&&S):r}S=e[0];var C=-1,P=c[0];e:for(;++C<s&&w.length<p;){var H=S[C],Z=t?t(H):H;if(H=n||H!==0?H:0,!(P?ei(P,Z):i(w,Z,n))){for(u=l;--u;){var se=c[u];if(!(se?ei(se,Z):i(e[u],Z,n)))continue e}P&&P.push(Z),w.push(H)}}return w}function Xf(e,t,n,i){return Bt(e,function(s,l,u){t(i,n(s),l,u)}),i}function ai(e,t,n){t=dn(t,e),e=Tl(e,t);var i=e==null?e:e[Ft(zt(t))];return i==null?r:ht(i,e,n)}function Wo(e){return Me(e)&&et(e)==bt}function Qf(e){return Me(e)&&et(e)==rn}function Jf(e){return Me(e)&&et(e)==Ut}function ui(e,t,n,i,s){return e===t?!0:e==null||t==null||!Me(e)&&!Me(t)?e!==e&&t!==t:jf(e,t,n,i,ui,s)}function jf(e,t,n,i,s,l){var u=te(e),c=te(t),p=u?ft:Qe(e),w=c?ft:Qe(t);p=p==bt?Ot:p,w=w==bt?Ot:w;var S=p==Ot,C=w==Ot,P=p==w;if(P&&hn(e)){if(!hn(t))return!1;u=!0,S=!1}if(P&&!S)return l||(l=new Dt),u||Yn(e)?yl(e,t,n,i,s,l):Tc(e,t,p,n,i,s,l);if(!(n&ne)){var H=S&&Te.call(e,"__wrapped__"),Z=C&&Te.call(t,"__wrapped__");if(H||Z){var se=H?e.value():e,X=Z?t.value():t;return l||(l=new Dt),s(se,X,n,i,l)}}return P?(l||(l=new Dt),Cc(e,t,n,i,s,l)):!1}function ec(e){return Me(e)&&Qe(e)==dt}function Vr(e,t,n,i){var s=n.length,l=s,u=!i;if(e==null)return!l;for(e=Re(e);s--;){var c=n[s];if(u&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++s<l;){c=n[s];var p=c[0],w=e[p],S=c[1];if(u&&c[2]){if(w===r&&!(p in e))return!1}else{var C=new Dt;if(i)var P=i(w,S,p,e,t,C);if(!(P===r?ui(S,w,ne|N,i,C):P))return!1}}return!0}function Fo(e){if(!Pe(e)||Pc(e))return!1;var t=Qt(e)?ju:Na;return t.test(Tn(e))}function tc(e){return Me(e)&&et(e)==tn}function nc(e){return Me(e)&&Qe(e)==pt}function ic(e){return Me(e)&&ar(e.length)&&!!Le[et(e)]}function qo(e){return typeof e=="function"?e:e==null?lt:typeof e=="object"?te(e)?Go(e[0],e[1]):Ho(e):fa(e)}function Kr(e){if(!di(e))return of(e);var t=[];for(var n in Re(e))Te.call(e,n)&&n!="constructor"&&t.push(n);return t}function rc(e){if(!Pe(e))return Wc(e);var t=di(e),n=[];for(var i in e)i=="constructor"&&(t||!Te.call(e,i))||n.push(i);return n}function Yr(e,t){return e<t}function No(e,t){var n=-1,i=st(e)?m(e.length):[];return fn(e,function(s,l,u){i[++n]=t(s,l,u)}),i}function Ho(e){var t=us(e);return t.length==1&&t[0][2]?Al(t[0][0],t[0][1]):function(n){return n===e||Vr(n,e,t)}}function Go(e,t){return cs(e)&&Sl(t)?Al(Ft(e),t):function(n){var i=bs(n,e);return i===r&&i===t?ws(n,e):ui(t,i,ne|N)}}function Vi(e,t,n,i,s){e!==t&&qr(t,function(l,u){if(s||(s=new Dt),Pe(l))sc(e,t,u,n,Vi,i,s);else{var c=i?i(ps(e,u),l,u+"",e,t,s):r;c===r&&(c=l),Wr(e,u,c)}},ot)}function sc(e,t,n,i,s,l,u){var c=ps(e,n),p=ps(t,n),w=u.get(p);if(w){Wr(e,n,w);return}var S=l?l(c,p,n+"",e,t,u):r,C=S===r;if(C){var P=te(p),H=!P&&hn(p),Z=!P&&!H&&Yn(p);S=p,P||H||Z?te(c)?S=c:Be(c)?S=rt(c):H?(C=!1,S=il(p,!0)):Z?(C=!1,S=rl(p,!0)):S=[]:hi(p)||Cn(p)?(S=c,Cn(c)?S=ea(c):(!Pe(c)||Qt(c))&&(S=wl(p))):C=!1}C&&(u.set(p,S),s(S,p,i,l,u),u.delete(p)),Wr(e,n,S)}function Vo(e,t){var n=e.length;if(n)return t+=t<0?n:0,Xt(t,n)?e[t]:r}function Ko(e,t,n){t.length?t=Ee(t,function(l){return te(l)?function(u){return An(u,l.length===1?l[0]:l)}:l}):t=[lt];var i=-1;t=Ee(t,gt(V()));var s=No(e,function(l,u,c){var p=Ee(t,function(w){return w(l)});return{criteria:p,index:++i,value:l}});return Ou(s,function(l,u){return mc(l,u,n)})}function oc(e,t){return Yo(e,t,function(n,i){return ws(e,i)})}function Yo(e,t,n){for(var i=-1,s=t.length,l={};++i<s;){var u=t[i],c=An(e,u);n(c,u)&&fi(l,dn(u,e),c)}return l}function lc(e){return function(t){return An(t,e)}}function Zr(e,t,n,i){var s=i?Ru:Un,l=-1,u=t.length,c=e;for(e===t&&(t=rt(t)),n&&(c=Ee(e,gt(n)));++l<u;)for(var p=0,w=t[l],S=n?n(w):w;(p=s(c,S,p,i))>-1;)c!==e&&Pi.call(c,p,1),Pi.call(e,p,1);return e}function Zo(e,t){for(var n=e?t.length:0,i=n-1;n--;){var s=t[n];if(n==i||s!==l){var l=s;Xt(s)?Pi.call(e,s,1):jr(e,s)}}return e}function Xr(e,t){return e+Bi(zo()*(t-e+1))}function ac(e,t,n,i){for(var s=-1,l=He(Mi((t-e)/(n||1)),0),u=m(l);l--;)u[i?l:++s]=e,e+=n;return u}function Qr(e,t){var n="";if(!e||t<1||t>qe)return n;do t%2&&(n+=e),t=Bi(t/2),t&&(e+=e);while(t);return n}function le(e,t){return hs($l(e,t,lt),e+"")}function uc(e){return ko(Zn(e))}function fc(e,t){var n=Zn(e);return nr(n,Sn(t,0,n.length))}function fi(e,t,n,i){if(!Pe(e))return e;t=dn(t,e);for(var s=-1,l=t.length,u=l-1,c=e;c!=null&&++s<l;){var p=Ft(t[s]),w=n;if(p==="__proto__"||p==="constructor"||p==="prototype")return e;if(s!=u){var S=c[p];w=i?i(S,p,c):r,w===r&&(w=Pe(S)?S:Xt(t[s+1])?[]:{})}oi(c,p,w),c=c[p]}return e}var Xo=Wi?function(e,t){return Wi.set(e,t),e}:lt,cc=Ui?function(e,t){return Ui(e,"toString",{configurable:!0,enumerable:!1,value:As(t),writable:!0})}:lt;function dc(e){return nr(Zn(e))}function It(e,t,n){var i=-1,s=e.length;t<0&&(t=-t>s?0:s+t),n=n>s?s:n,n<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var l=m(s);++i<s;)l[i]=e[i+t];return l}function pc(e,t){var n;return fn(e,function(i,s,l){return n=t(i,s,l),!n}),!!n}function Ki(e,t,n){var i=0,s=e==null?i:e.length;if(typeof t=="number"&&t===t&&s<=j){for(;i<s;){var l=i+s>>>1,u=e[l];u!==null&&!vt(u)&&(n?u<=t:u<t)?i=l+1:s=l}return s}return Jr(e,t,lt,n)}function Jr(e,t,n,i){var s=0,l=e==null?0:e.length;if(l===0)return 0;t=n(t);for(var u=t!==t,c=t===null,p=vt(t),w=t===r;s<l;){var S=Bi((s+l)/2),C=n(e[S]),P=C!==r,H=C===null,Z=C===C,se=vt(C);if(u)var X=i||Z;else w?X=Z&&(i||P):c?X=Z&&P&&(i||!H):p?X=Z&&P&&!H&&(i||!se):H||se?X=!1:X=i?C<=t:C<t;X?s=S+1:l=S}return Xe(l,me)}function Qo(e,t){for(var n=-1,i=e.length,s=0,l=[];++n<i;){var u=e[n],c=t?t(u):u;if(!n||!Lt(c,p)){var p=c;l[s++]=u===0?0:u}}return l}function Jo(e){return typeof e=="number"?e:vt(e)?ve:+e}function _t(e){if(typeof e=="string")return e;if(te(e))return Ee(e,_t)+"";if(vt(e))return Ro?Ro.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function cn(e,t,n){var i=-1,s=Ti,l=e.length,u=!0,c=[],p=c;if(n)u=!1,s=Cr;else if(l>=y){var w=t?null:Ac(e);if(w)return Ii(w);u=!1,s=ei,p=new wn}else p=t?[]:c;e:for(;++i<l;){var S=e[i],C=t?t(S):S;if(S=n||S!==0?S:0,u&&C===C){for(var P=p.length;P--;)if(p[P]===C)continue e;t&&p.push(C),c.push(S)}else s(p,C,n)||(p!==c&&p.push(C),c.push(S))}return c}function jr(e,t){return t=dn(t,e),e=Tl(e,t),e==null||delete e[Ft(zt(t))]}function jo(e,t,n,i){return fi(e,t,n(An(e,t)),i)}function Yi(e,t,n,i){for(var s=e.length,l=i?s:-1;(i?l--:++l<s)&&t(e[l],l,e););return n?It(e,i?0:l,i?l+1:s):It(e,i?l+1:0,i?s:l)}function el(e,t){var n=e;return n instanceof he&&(n=n.value()),Ir(t,function(i,s){return s.func.apply(s.thisArg,ln([i],s.args))},n)}function es(e,t,n){var i=e.length;if(i<2)return i?cn(e[0]):[];for(var s=-1,l=m(i);++s<i;)for(var u=e[s],c=-1;++c<i;)c!=s&&(l[s]=li(l[s]||u,e[c],t,n));return cn(Ke(l,1),t,n)}function tl(e,t,n){for(var i=-1,s=e.length,l=t.length,u={};++i<s;){var c=i<l?t[i]:r;n(u,e[i],c)}return u}function ts(e){return Be(e)?e:[]}function ns(e){return typeof e=="function"?e:lt}function dn(e,t){return te(e)?e:cs(e,t)?[e]:Rl(Ae(e))}var hc=le;function pn(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:It(e,t,n)}var nl=ef||function(e){return Ve.clearTimeout(e)};function il(e,t){if(t)return e.slice();var n=e.length,i=Ao?Ao(n):new e.constructor(n);return e.copy(i),i}function is(e){var t=new e.constructor(e.byteLength);return new Li(t).set(new Li(e)),t}function gc(e,t){var n=t?is(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function _c(e){var t=new e.constructor(e.source,Bs.exec(e));return t.lastIndex=e.lastIndex,t}function vc(e){return si?Re(si.call(e)):{}}function rl(e,t){var n=t?is(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function sl(e,t){if(e!==t){var n=e!==r,i=e===null,s=e===e,l=vt(e),u=t!==r,c=t===null,p=t===t,w=vt(t);if(!c&&!w&&!l&&e>t||l&&u&&p&&!c&&!w||i&&u&&p||!n&&p||!s)return 1;if(!i&&!l&&!w&&e<t||w&&n&&s&&!i&&!l||c&&n&&s||!u&&s||!p)return-1}return 0}function mc(e,t,n){for(var i=-1,s=e.criteria,l=t.criteria,u=s.length,c=n.length;++i<u;){var p=sl(s[i],l[i]);if(p){if(i>=c)return p;var w=n[i];return p*(w=="desc"?-1:1)}}return e.index-t.index}function ol(e,t,n,i){for(var s=-1,l=e.length,u=n.length,c=-1,p=t.length,w=He(l-u,0),S=m(p+w),C=!i;++c<p;)S[c]=t[c];for(;++s<u;)(C||s<l)&&(S[n[s]]=e[s]);for(;w--;)S[c++]=e[s++];return S}function ll(e,t,n,i){for(var s=-1,l=e.length,u=-1,c=n.length,p=-1,w=t.length,S=He(l-c,0),C=m(S+w),P=!i;++s<S;)C[s]=e[s];for(var H=s;++p<w;)C[H+p]=t[p];for(;++u<c;)(P||s<l)&&(C[H+n[u]]=e[s++]);return C}function rt(e,t){var n=-1,i=e.length;for(t||(t=m(i));++n<i;)t[n]=e[n];return t}function Wt(e,t,n,i){var s=!n;n||(n={});for(var l=-1,u=t.length;++l<u;){var c=t[l],p=i?i(n[c],e[c],c,n,e):r;p===r&&(p=e[c]),s?Kt(n,c,p):oi(n,c,p)}return n}function yc(e,t){return Wt(e,fs(e),t)}function xc(e,t){return Wt(e,xl(e),t)}function Zi(e,t){return function(n,i){var s=te(n)?Au:qf,l=t?t():{};return s(n,e,V(i,2),l)}}function Gn(e){return le(function(t,n){var i=-1,s=n.length,l=s>1?n[s-1]:r,u=s>2?n[2]:r;for(l=e.length>3&&typeof l=="function"?(s--,l):r,u&&tt(n[0],n[1],u)&&(l=s<3?r:l,s=1),t=Re(t);++i<s;){var c=n[i];c&&e(t,c,i,l)}return t})}function al(e,t){return function(n,i){if(n==null)return n;if(!st(n))return e(n,i);for(var s=n.length,l=t?s:-1,u=Re(n);(t?l--:++l<s)&&i(u[l],l,u)!==!1;);return n}}function ul(e){return function(t,n,i){for(var s=-1,l=Re(t),u=i(t),c=u.length;c--;){var p=u[e?c:++s];if(n(l[p],p,l)===!1)break}return t}}function bc(e,t,n){var i=t&M,s=ci(e);function l(){var u=this&&this!==Ve&&this instanceof l?s:e;return u.apply(i?n:this,arguments)}return l}function fl(e){return function(t){t=Ae(t);var n=Mn(t)?kt(t):r,i=n?n[0]:t.charAt(0),s=n?pn(n,1).join(""):t.slice(1);return i[e]()+s}}function Vn(e){return function(t){return Ir(aa(la(t).replace(fu,"")),e,"")}}function ci(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Hn(e.prototype),i=e.apply(n,t);return Pe(i)?i:n}}function wc(e,t,n){var i=ci(e);function s(){for(var l=arguments.length,u=m(l),c=l,p=Kn(s);c--;)u[c]=arguments[c];var w=l<3&&u[0]!==p&&u[l-1]!==p?[]:an(u,p);if(l-=w.length,l<n)return gl(e,t,Xi,s.placeholder,r,u,w,r,r,n-l);var S=this&&this!==Ve&&this instanceof s?i:e;return ht(S,this,u)}return s}function cl(e){return function(t,n,i){var s=Re(t);if(!st(t)){var l=V(n,3);t=Ge(t),n=function(c){return l(s[c],c,s)}}var u=e(t,n,i);return u>-1?s[l?t[u]:u]:r}}function dl(e){return Zt(function(t){var n=t.length,i=n,s=Tt.prototype.thru;for(e&&t.reverse();i--;){var l=t[i];if(typeof l!="function")throw new $t(v);if(s&&!u&&er(l)=="wrapper")var u=new Tt([],!0)}for(i=u?i:n;++i<n;){l=t[i];var c=er(l),p=c=="wrapper"?as(l):r;p&&ds(p[0])&&p[1]==(re|de|k|Ie)&&!p[4].length&&p[9]==1?u=u[er(p[0])].apply(u,p[3]):u=l.length==1&&ds(l)?u[c]():u.thru(l)}return function(){var w=arguments,S=w[0];if(u&&w.length==1&&te(S))return u.plant(S).value();for(var C=0,P=n?t[C].apply(this,w):S;++C<n;)P=t[C].call(this,P);return P}})}function Xi(e,t,n,i,s,l,u,c,p,w){var S=t&re,C=t&M,P=t&ce,H=t&(de|F),Z=t&ke,se=P?r:ci(e);function X(){for(var ue=arguments.length,_e=m(ue),mt=ue;mt--;)_e[mt]=arguments[mt];if(H)var nt=Kn(X),yt=Du(_e,nt);if(i&&(_e=ol(_e,i,s,H)),l&&(_e=ll(_e,l,u,H)),ue-=yt,H&&ue<w){var We=an(_e,nt);return gl(e,t,Xi,X.placeholder,n,_e,We,c,p,w-ue)}var Et=C?n:this,jt=P?Et[e]:e;return ue=_e.length,c?_e=qc(_e,c):Z&&ue>1&&_e.reverse(),S&&p<ue&&(_e.length=p),this&&this!==Ve&&this instanceof X&&(jt=se||ci(jt)),jt.apply(Et,_e)}return X}function pl(e,t){return function(n,i){return Xf(n,e,t(i),{})}}function Qi(e,t){return function(n,i){var s;if(n===r&&i===r)return t;if(n!==r&&(s=n),i!==r){if(s===r)return i;typeof n=="string"||typeof i=="string"?(n=_t(n),i=_t(i)):(n=Jo(n),i=Jo(i)),s=e(n,i)}return s}}function rs(e){return Zt(function(t){return t=Ee(t,gt(V())),le(function(n){var i=this;return e(t,function(s){return ht(s,i,n)})})})}function Ji(e,t){t=t===r?" ":_t(t);var n=t.length;if(n<2)return n?Qr(t,e):t;var i=Qr(t,Mi(e/Bn(t)));return Mn(t)?pn(kt(i),0,e).join(""):i.slice(0,e)}function Sc(e,t,n,i){var s=t&M,l=ci(e);function u(){for(var c=-1,p=arguments.length,w=-1,S=i.length,C=m(S+p),P=this&&this!==Ve&&this instanceof u?l:e;++w<S;)C[w]=i[w];for(;p--;)C[w++]=arguments[++c];return ht(P,s?n:this,C)}return u}function hl(e){return function(t,n,i){return i&&typeof i!="number"&&tt(t,n,i)&&(n=i=r),t=Jt(t),n===r?(n=t,t=0):n=Jt(n),i=i===r?t<n?1:-1:Jt(i),ac(t,n,i,e)}}function ji(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Rt(t),n=Rt(n)),e(t,n)}}function gl(e,t,n,i,s,l,u,c,p,w){var S=t&de,C=S?u:r,P=S?r:u,H=S?l:r,Z=S?r:l;t|=S?k:Ue,t&=~(S?Ue:k),t&Se||(t&=-4);var se=[e,t,s,H,C,Z,P,c,p,w],X=n.apply(r,se);return ds(e)&&Cl(X,se),X.placeholder=i,Il(X,e,t)}function ss(e){var t=Ne[e];return function(n,i){if(n=Rt(n),i=i==null?0:Xe(ie(i),292),i&&Io(n)){var s=(Ae(n)+"e").split("e"),l=t(s[0]+"e"+(+s[1]+i));return s=(Ae(l)+"e").split("e"),+(s[0]+"e"+(+s[1]-i))}return t(n)}}var Ac=qn&&1/Ii(new qn([,-0]))[1]==oe?function(e){return new qn(e)}:Cs;function _l(e){return function(t){var n=Qe(t);return n==dt?Er(t):n==pt?Wu(t):ku(t,e(t))}}function Yt(e,t,n,i,s,l,u,c){var p=t&ce;if(!p&&typeof e!="function")throw new $t(v);var w=i?i.length:0;if(w||(t&=-97,i=s=r),u=u===r?u:He(ie(u),0),c=c===r?c:ie(c),w-=s?s.length:0,t&Ue){var S=i,C=s;i=s=r}var P=p?r:as(e),H=[e,t,n,i,s,S,C,l,u,c];if(P&&Bc(H,P),e=H[0],t=H[1],n=H[2],i=H[3],s=H[4],c=H[9]=H[9]===r?p?0:e.length:He(H[9]-w,0),!c&&t&(de|F)&&(t&=-25),!t||t==M)var Z=bc(e,t,n);else t==de||t==F?Z=wc(e,t,c):(t==k||t==(M|k))&&!s.length?Z=Sc(e,t,n,i):Z=Xi.apply(r,H);var se=P?Xo:Cl;return Il(se(Z,H),e,t)}function vl(e,t,n,i){return e===r||Lt(e,Fn[n])&&!Te.call(i,n)?t:e}function ml(e,t,n,i,s,l){return Pe(e)&&Pe(t)&&(l.set(t,e),Vi(e,t,r,ml,l),l.delete(t)),e}function $c(e){return hi(e)?r:e}function yl(e,t,n,i,s,l){var u=n&ne,c=e.length,p=t.length;if(c!=p&&!(u&&p>c))return!1;var w=l.get(e),S=l.get(t);if(w&&S)return w==t&&S==e;var C=-1,P=!0,H=n&N?new wn:r;for(l.set(e,t),l.set(t,e);++C<c;){var Z=e[C],se=t[C];if(i)var X=u?i(se,Z,C,t,e,l):i(Z,se,C,e,t,l);if(X!==r){if(X)continue;P=!1;break}if(H){if(!zr(t,function(ue,_e){if(!ei(H,_e)&&(Z===ue||s(Z,ue,n,i,l)))return H.push(_e)})){P=!1;break}}else if(!(Z===se||s(Z,se,n,i,l))){P=!1;break}}return l.delete(e),l.delete(t),P}function Tc(e,t,n,i,s,l,u){switch(n){case sn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case rn:return!(e.byteLength!=t.byteLength||!l(new Li(e),new Li(t)));case Pt:case Ut:case en:return Lt(+e,+t);case ct:return e.name==t.name&&e.message==t.message;case tn:case mn:return e==t+"";case dt:var c=Er;case pt:var p=i&ne;if(c||(c=Ii),e.size!=t.size&&!p)return!1;var w=u.get(e);if(w)return w==t;i|=N,u.set(e,t);var S=yl(c(e),c(t),i,s,l,u);return u.delete(e),S;case Rn:if(si)return si.call(e)==si.call(t)}return!1}function Cc(e,t,n,i,s,l){var u=n&ne,c=os(e),p=c.length,w=os(t),S=w.length;if(p!=S&&!u)return!1;for(var C=p;C--;){var P=c[C];if(!(u?P in t:Te.call(t,P)))return!1}var H=l.get(e),Z=l.get(t);if(H&&Z)return H==t&&Z==e;var se=!0;l.set(e,t),l.set(t,e);for(var X=u;++C<p;){P=c[C];var ue=e[P],_e=t[P];if(i)var mt=u?i(_e,ue,P,t,e,l):i(ue,_e,P,e,t,l);if(!(mt===r?ue===_e||s(ue,_e,n,i,l):mt)){se=!1;break}X||(X=P=="constructor")}if(se&&!X){var nt=e.constructor,yt=t.constructor;nt!=yt&&"constructor"in e&&"constructor"in t&&!(typeof nt=="function"&&nt instanceof nt&&typeof yt=="function"&&yt instanceof yt)&&(se=!1)}return l.delete(e),l.delete(t),se}function Zt(e){return hs($l(e,r,Ll),e+"")}function os(e){return Bo(e,Ge,fs)}function ls(e){return Bo(e,ot,xl)}var as=Wi?function(e){return Wi.get(e)}:Cs;function er(e){for(var t=e.name+"",n=Nn[t],i=Te.call(Nn,t)?n.length:0;i--;){var s=n[i],l=s.func;if(l==null||l==e)return s.name}return t}function Kn(e){var t=Te.call(o,"placeholder")?o:e;return t.placeholder}function V(){var e=o.iteratee||$s;return e=e===$s?qo:e,arguments.length?e(arguments[0],arguments[1]):e}function tr(e,t){var n=e.__data__;return Ec(t)?n[typeof t=="string"?"string":"hash"]:n.map}function us(e){for(var t=Ge(e),n=t.length;n--;){var i=t[n],s=e[i];t[n]=[i,s,Sl(s)]}return t}function $n(e,t){var n=Uu(e,t);return Fo(n)?n:r}function Ic(e){var t=Te.call(e,xn),n=e[xn];try{e[xn]=r;var i=!0}catch{}var s=ki.call(e);return i&&(t?e[xn]=n:delete e[xn]),s}var fs=Ur?function(e){return e==null?[]:(e=Re(e),on(Ur(e),function(t){return To.call(e,t)}))}:Is,xl=Ur?function(e){for(var t=[];e;)ln(t,fs(e)),e=Ei(e);return t}:Is,Qe=et;(Mr&&Qe(new Mr(new ArrayBuffer(1)))!=sn||ni&&Qe(new ni)!=dt||Br&&Qe(Br.resolve())!=_i||qn&&Qe(new qn)!=pt||ii&&Qe(new ii)!=nn)&&(Qe=function(e){var t=et(e),n=t==Ot?e.constructor:r,i=n?Tn(n):"";if(i)switch(i){case ff:return sn;case cf:return dt;case df:return _i;case pf:return pt;case hf:return nn}return t});function zc(e,t,n){for(var i=-1,s=n.length;++i<s;){var l=n[i],u=l.size;switch(l.type){case"drop":e+=u;break;case"dropRight":t-=u;break;case"take":t=Xe(t,e+u);break;case"takeRight":e=He(e,t-u);break}}return{start:e,end:t}}function Rc(e){var t=e.match(Ea);return t?t[1].split(Pa):[]}function bl(e,t,n){t=dn(t,e);for(var i=-1,s=t.length,l=!1;++i<s;){var u=Ft(t[i]);if(!(l=e!=null&&n(e,u)))break;e=e[u]}return l||++i!=s?l:(s=e==null?0:e.length,!!s&&ar(s)&&Xt(u,s)&&(te(e)||Cn(e)))}function Oc(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Te.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function wl(e){return typeof e.constructor=="function"&&!di(e)?Hn(Ei(e)):{}}function kc(e,t,n){var i=e.constructor;switch(t){case rn:return is(e);case Pt:case Ut:return new i(+e);case sn:return gc(e,n);case pe:case je:case Ze:case Mt:case On:case kn:case Dn:case Ln:case En:return rl(e,n);case dt:return new i;case en:case mn:return new i(e);case tn:return _c(e);case pt:return new i;case Rn:return vc(e)}}function Dc(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(La,`{
/* [wrapped with `+t+`] */
`)}function Lc(e){return te(e)||Cn(e)||!!(Co&&e&&e[Co])}function Xt(e,t){var n=typeof e;return t=t??qe,!!t&&(n=="number"||n!="symbol"&&Ga.test(e))&&e>-1&&e%1==0&&e<t}function tt(e,t,n){if(!Pe(n))return!1;var i=typeof t;return(i=="number"?st(n)&&Xt(t,n.length):i=="string"&&t in n)?Lt(n[t],e):!1}function cs(e,t){if(te(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||vt(e)?!0:Ra.test(e)||!za.test(e)||t!=null&&e in Re(t)}function Ec(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ds(e){var t=er(e),n=o[t];if(typeof n!="function"||!(t in he.prototype))return!1;if(e===n)return!0;var i=as(n);return!!i&&e===i[0]}function Pc(e){return!!So&&So in e}var Uc=Ri?Qt:zs;function di(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Fn;return e===n}function Sl(e){return e===e&&!Pe(e)}function Al(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==r||e in Re(n))}}function Mc(e){var t=or(e,function(i){return n.size===R&&n.clear(),i}),n=t.cache;return t}function Bc(e,t){var n=e[1],i=t[1],s=n|i,l=s<(M|ce|re),u=i==re&&n==de||i==re&&n==Ie&&e[7].length<=t[8]||i==(re|Ie)&&t[7].length<=t[8]&&n==de;if(!(l||u))return e;i&M&&(e[2]=t[2],s|=n&M?0:Se);var c=t[3];if(c){var p=e[3];e[3]=p?ol(p,c,t[4]):c,e[4]=p?an(e[3],K):t[4]}return c=t[5],c&&(p=e[5],e[5]=p?ll(p,c,t[6]):c,e[6]=p?an(e[5],K):t[6]),c=t[7],c&&(e[7]=c),i&re&&(e[8]=e[8]==null?t[8]:Xe(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=s,e}function Wc(e){var t=[];if(e!=null)for(var n in Re(e))t.push(n);return t}function Fc(e){return ki.call(e)}function $l(e,t,n){return t=He(t===r?e.length-1:t,0),function(){for(var i=arguments,s=-1,l=He(i.length-t,0),u=m(l);++s<l;)u[s]=i[t+s];s=-1;for(var c=m(t+1);++s<t;)c[s]=i[s];return c[t]=n(u),ht(e,this,c)}}function Tl(e,t){return t.length<2?e:An(e,It(t,0,-1))}function qc(e,t){for(var n=e.length,i=Xe(t.length,n),s=rt(e);i--;){var l=t[i];e[i]=Xt(l,n)?s[l]:r}return e}function ps(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Cl=zl(Xo),pi=nf||function(e,t){return Ve.setTimeout(e,t)},hs=zl(cc);function Il(e,t,n){var i=t+"";return hs(e,Dc(i,Nc(Rc(i),n)))}function zl(e){var t=0,n=0;return function(){var i=lf(),s=Y-(i-n);if(n=i,s>0){if(++t>=J)return arguments[0]}else t=0;return e.apply(r,arguments)}}function nr(e,t){var n=-1,i=e.length,s=i-1;for(t=t===r?i:t;++n<t;){var l=Xr(n,s),u=e[l];e[l]=e[n],e[n]=u}return e.length=t,e}var Rl=Mc(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Oa,function(n,i,s,l){t.push(s?l.replace(Ba,"$1"):i||n)}),t});function Ft(e){if(typeof e=="string"||vt(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Tn(e){if(e!=null){try{return Oi.call(e)}catch{}try{return e+""}catch{}}return""}function Nc(e,t){return At(ye,function(n){var i="_."+n[0];t&n[1]&&!Ti(e,i)&&e.push(i)}),e.sort()}function Ol(e){if(e instanceof he)return e.clone();var t=new Tt(e.__wrapped__,e.__chain__);return t.__actions__=rt(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Hc(e,t,n){(n?tt(e,t,n):t===r)?t=1:t=He(ie(t),0);var i=e==null?0:e.length;if(!i||t<1)return[];for(var s=0,l=0,u=m(Mi(i/t));s<i;)u[l++]=It(e,s,s+=t);return u}function Gc(e){for(var t=-1,n=e==null?0:e.length,i=0,s=[];++t<n;){var l=e[t];l&&(s[i++]=l)}return s}function Vc(){var e=arguments.length;if(!e)return[];for(var t=m(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return ln(te(n)?rt(n):[n],Ke(t,1))}var Kc=le(function(e,t){return Be(e)?li(e,Ke(t,1,Be,!0)):[]}),Yc=le(function(e,t){var n=zt(t);return Be(n)&&(n=r),Be(e)?li(e,Ke(t,1,Be,!0),V(n,2)):[]}),Zc=le(function(e,t){var n=zt(t);return Be(n)&&(n=r),Be(e)?li(e,Ke(t,1,Be,!0),r,n):[]});function Xc(e,t,n){var i=e==null?0:e.length;return i?(t=n||t===r?1:ie(t),It(e,t<0?0:t,i)):[]}function Qc(e,t,n){var i=e==null?0:e.length;return i?(t=n||t===r?1:ie(t),t=i-t,It(e,0,t<0?0:t)):[]}function Jc(e,t){return e&&e.length?Yi(e,V(t,3),!0,!0):[]}function jc(e,t){return e&&e.length?Yi(e,V(t,3),!0):[]}function ed(e,t,n,i){var s=e==null?0:e.length;return s?(n&&typeof n!="number"&&tt(e,t,n)&&(n=0,i=s),Vf(e,t,n,i)):[]}function kl(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var s=n==null?0:ie(n);return s<0&&(s=He(i+s,0)),Ci(e,V(t,3),s)}function Dl(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var s=i-1;return n!==r&&(s=ie(n),s=n<0?He(i+s,0):Xe(s,i-1)),Ci(e,V(t,3),s,!0)}function Ll(e){var t=e==null?0:e.length;return t?Ke(e,1):[]}function td(e){var t=e==null?0:e.length;return t?Ke(e,oe):[]}function nd(e,t){var n=e==null?0:e.length;return n?(t=t===r?1:ie(t),Ke(e,t)):[]}function id(e){for(var t=-1,n=e==null?0:e.length,i={};++t<n;){var s=e[t];i[s[0]]=s[1]}return i}function El(e){return e&&e.length?e[0]:r}function rd(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var s=n==null?0:ie(n);return s<0&&(s=He(i+s,0)),Un(e,t,s)}function sd(e){var t=e==null?0:e.length;return t?It(e,0,-1):[]}var od=le(function(e){var t=Ee(e,ts);return t.length&&t[0]===e[0]?Gr(t):[]}),ld=le(function(e){var t=zt(e),n=Ee(e,ts);return t===zt(n)?t=r:n.pop(),n.length&&n[0]===e[0]?Gr(n,V(t,2)):[]}),ad=le(function(e){var t=zt(e),n=Ee(e,ts);return t=typeof t=="function"?t:r,t&&n.pop(),n.length&&n[0]===e[0]?Gr(n,r,t):[]});function ud(e,t){return e==null?"":sf.call(e,t)}function zt(e){var t=e==null?0:e.length;return t?e[t-1]:r}function fd(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var s=i;return n!==r&&(s=ie(n),s=s<0?He(i+s,0):Xe(s,i-1)),t===t?qu(e,t,s):Ci(e,go,s,!0)}function cd(e,t){return e&&e.length?Vo(e,ie(t)):r}var dd=le(Pl);function Pl(e,t){return e&&e.length&&t&&t.length?Zr(e,t):e}function pd(e,t,n){return e&&e.length&&t&&t.length?Zr(e,t,V(n,2)):e}function hd(e,t,n){return e&&e.length&&t&&t.length?Zr(e,t,r,n):e}var gd=Zt(function(e,t){var n=e==null?0:e.length,i=Fr(e,t);return Zo(e,Ee(t,function(s){return Xt(s,n)?+s:s}).sort(sl)),i});function _d(e,t){var n=[];if(!(e&&e.length))return n;var i=-1,s=[],l=e.length;for(t=V(t,3);++i<l;){var u=e[i];t(u,i,e)&&(n.push(u),s.push(i))}return Zo(e,s),n}function gs(e){return e==null?e:uf.call(e)}function vd(e,t,n){var i=e==null?0:e.length;return i?(n&&typeof n!="number"&&tt(e,t,n)?(t=0,n=i):(t=t==null?0:ie(t),n=n===r?i:ie(n)),It(e,t,n)):[]}function md(e,t){return Ki(e,t)}function yd(e,t,n){return Jr(e,t,V(n,2))}function xd(e,t){var n=e==null?0:e.length;if(n){var i=Ki(e,t);if(i<n&&Lt(e[i],t))return i}return-1}function bd(e,t){return Ki(e,t,!0)}function wd(e,t,n){return Jr(e,t,V(n,2),!0)}function Sd(e,t){var n=e==null?0:e.length;if(n){var i=Ki(e,t,!0)-1;if(Lt(e[i],t))return i}return-1}function Ad(e){return e&&e.length?Qo(e):[]}function $d(e,t){return e&&e.length?Qo(e,V(t,2)):[]}function Td(e){var t=e==null?0:e.length;return t?It(e,1,t):[]}function Cd(e,t,n){return e&&e.length?(t=n||t===r?1:ie(t),It(e,0,t<0?0:t)):[]}function Id(e,t,n){var i=e==null?0:e.length;return i?(t=n||t===r?1:ie(t),t=i-t,It(e,t<0?0:t,i)):[]}function zd(e,t){return e&&e.length?Yi(e,V(t,3),!1,!0):[]}function Rd(e,t){return e&&e.length?Yi(e,V(t,3)):[]}var Od=le(function(e){return cn(Ke(e,1,Be,!0))}),kd=le(function(e){var t=zt(e);return Be(t)&&(t=r),cn(Ke(e,1,Be,!0),V(t,2))}),Dd=le(function(e){var t=zt(e);return t=typeof t=="function"?t:r,cn(Ke(e,1,Be,!0),r,t)});function Ld(e){return e&&e.length?cn(e):[]}function Ed(e,t){return e&&e.length?cn(e,V(t,2)):[]}function Pd(e,t){return t=typeof t=="function"?t:r,e&&e.length?cn(e,r,t):[]}function _s(e){if(!(e&&e.length))return[];var t=0;return e=on(e,function(n){if(Be(n))return t=He(n.length,t),!0}),Dr(t,function(n){return Ee(e,Rr(n))})}function Ul(e,t){if(!(e&&e.length))return[];var n=_s(e);return t==null?n:Ee(n,function(i){return ht(t,r,i)})}var Ud=le(function(e,t){return Be(e)?li(e,t):[]}),Md=le(function(e){return es(on(e,Be))}),Bd=le(function(e){var t=zt(e);return Be(t)&&(t=r),es(on(e,Be),V(t,2))}),Wd=le(function(e){var t=zt(e);return t=typeof t=="function"?t:r,es(on(e,Be),r,t)}),Fd=le(_s);function qd(e,t){return tl(e||[],t||[],oi)}function Nd(e,t){return tl(e||[],t||[],fi)}var Hd=le(function(e){var t=e.length,n=t>1?e[t-1]:r;return n=typeof n=="function"?(e.pop(),n):r,Ul(e,n)});function Ml(e){var t=o(e);return t.__chain__=!0,t}function Gd(e,t){return t(e),e}function ir(e,t){return t(e)}var Vd=Zt(function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,s=function(l){return Fr(l,e)};return t>1||this.__actions__.length||!(i instanceof he)||!Xt(n)?this.thru(s):(i=i.slice(n,+n+(t?1:0)),i.__actions__.push({func:ir,args:[s],thisArg:r}),new Tt(i,this.__chain__).thru(function(l){return t&&!l.length&&l.push(r),l}))});function Kd(){return Ml(this)}function Yd(){return new Tt(this.value(),this.__chain__)}function Zd(){this.__values__===r&&(this.__values__=Jl(this.value()));var e=this.__index__>=this.__values__.length,t=e?r:this.__values__[this.__index__++];return{done:e,value:t}}function Xd(){return this}function Qd(e){for(var t,n=this;n instanceof qi;){var i=Ol(n);i.__index__=0,i.__values__=r,t?s.__wrapped__=i:t=i;var s=i;n=n.__wrapped__}return s.__wrapped__=e,t}function Jd(){var e=this.__wrapped__;if(e instanceof he){var t=e;return this.__actions__.length&&(t=new he(this)),t=t.reverse(),t.__actions__.push({func:ir,args:[gs],thisArg:r}),new Tt(t,this.__chain__)}return this.thru(gs)}function jd(){return el(this.__wrapped__,this.__actions__)}var ep=Zi(function(e,t,n){Te.call(e,n)?++e[n]:Kt(e,n,1)});function tp(e,t,n){var i=te(e)?po:Gf;return n&&tt(e,t,n)&&(t=r),i(e,V(t,3))}function np(e,t){var n=te(e)?on:Uo;return n(e,V(t,3))}var ip=cl(kl),rp=cl(Dl);function sp(e,t){return Ke(rr(e,t),1)}function op(e,t){return Ke(rr(e,t),oe)}function lp(e,t,n){return n=n===r?1:ie(n),Ke(rr(e,t),n)}function Bl(e,t){var n=te(e)?At:fn;return n(e,V(t,3))}function Wl(e,t){var n=te(e)?$u:Po;return n(e,V(t,3))}var ap=Zi(function(e,t,n){Te.call(e,n)?e[n].push(t):Kt(e,n,[t])});function up(e,t,n,i){e=st(e)?e:Zn(e),n=n&&!i?ie(n):0;var s=e.length;return n<0&&(n=He(s+n,0)),ur(e)?n<=s&&e.indexOf(t,n)>-1:!!s&&Un(e,t,n)>-1}var fp=le(function(e,t,n){var i=-1,s=typeof t=="function",l=st(e)?m(e.length):[];return fn(e,function(u){l[++i]=s?ht(t,u,n):ai(u,t,n)}),l}),cp=Zi(function(e,t,n){Kt(e,n,t)});function rr(e,t){var n=te(e)?Ee:No;return n(e,V(t,3))}function dp(e,t,n,i){return e==null?[]:(te(t)||(t=t==null?[]:[t]),n=i?r:n,te(n)||(n=n==null?[]:[n]),Ko(e,t,n))}var pp=Zi(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function hp(e,t,n){var i=te(e)?Ir:vo,s=arguments.length<3;return i(e,V(t,4),n,s,fn)}function gp(e,t,n){var i=te(e)?Tu:vo,s=arguments.length<3;return i(e,V(t,4),n,s,Po)}function _p(e,t){var n=te(e)?on:Uo;return n(e,lr(V(t,3)))}function vp(e){var t=te(e)?ko:uc;return t(e)}function mp(e,t,n){(n?tt(e,t,n):t===r)?t=1:t=ie(t);var i=te(e)?Wf:fc;return i(e,t)}function yp(e){var t=te(e)?Ff:dc;return t(e)}function xp(e){if(e==null)return 0;if(st(e))return ur(e)?Bn(e):e.length;var t=Qe(e);return t==dt||t==pt?e.size:Kr(e).length}function bp(e,t,n){var i=te(e)?zr:pc;return n&&tt(e,t,n)&&(t=r),i(e,V(t,3))}var wp=le(function(e,t){if(e==null)return[];var n=t.length;return n>1&&tt(e,t[0],t[1])?t=[]:n>2&&tt(t[0],t[1],t[2])&&(t=[t[0]]),Ko(e,Ke(t,1),[])}),sr=tf||function(){return Ve.Date.now()};function Sp(e,t){if(typeof t!="function")throw new $t(v);return e=ie(e),function(){if(--e<1)return t.apply(this,arguments)}}function Fl(e,t,n){return t=n?r:t,t=e&&t==null?e.length:t,Yt(e,re,r,r,r,r,t)}function ql(e,t){var n;if(typeof t!="function")throw new $t(v);return e=ie(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var vs=le(function(e,t,n){var i=M;if(n.length){var s=an(n,Kn(vs));i|=k}return Yt(e,i,t,n,s)}),Nl=le(function(e,t,n){var i=M|ce;if(n.length){var s=an(n,Kn(Nl));i|=k}return Yt(t,i,e,n,s)});function Hl(e,t,n){t=n?r:t;var i=Yt(e,de,r,r,r,r,r,t);return i.placeholder=Hl.placeholder,i}function Gl(e,t,n){t=n?r:t;var i=Yt(e,F,r,r,r,r,r,t);return i.placeholder=Gl.placeholder,i}function Vl(e,t,n){var i,s,l,u,c,p,w=0,S=!1,C=!1,P=!0;if(typeof e!="function")throw new $t(v);t=Rt(t)||0,Pe(n)&&(S=!!n.leading,C="maxWait"in n,l=C?He(Rt(n.maxWait)||0,t):l,P="trailing"in n?!!n.trailing:P);function H(We){var Et=i,jt=s;return i=s=r,w=We,u=e.apply(jt,Et),u}function Z(We){return w=We,c=pi(ue,t),S?H(We):u}function se(We){var Et=We-p,jt=We-w,ca=t-Et;return C?Xe(ca,l-jt):ca}function X(We){var Et=We-p,jt=We-w;return p===r||Et>=t||Et<0||C&&jt>=l}function ue(){var We=sr();if(X(We))return _e(We);c=pi(ue,se(We))}function _e(We){return c=r,P&&i?H(We):(i=s=r,u)}function mt(){c!==r&&nl(c),w=0,i=p=s=c=r}function nt(){return c===r?u:_e(sr())}function yt(){var We=sr(),Et=X(We);if(i=arguments,s=this,p=We,Et){if(c===r)return Z(p);if(C)return nl(c),c=pi(ue,t),H(p)}return c===r&&(c=pi(ue,t)),u}return yt.cancel=mt,yt.flush=nt,yt}var Ap=le(function(e,t){return Eo(e,1,t)}),$p=le(function(e,t,n){return Eo(e,Rt(t)||0,n)});function Tp(e){return Yt(e,ke)}function or(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new $t(v);var n=function(){var i=arguments,s=t?t.apply(this,i):i[0],l=n.cache;if(l.has(s))return l.get(s);var u=e.apply(this,i);return n.cache=l.set(s,u)||l,u};return n.cache=new(or.Cache||Vt),n}or.Cache=Vt;function lr(e){if(typeof e!="function")throw new $t(v);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Cp(e){return ql(2,e)}var Ip=hc(function(e,t){t=t.length==1&&te(t[0])?Ee(t[0],gt(V())):Ee(Ke(t,1),gt(V()));var n=t.length;return le(function(i){for(var s=-1,l=Xe(i.length,n);++s<l;)i[s]=t[s].call(this,i[s]);return ht(e,this,i)})}),ms=le(function(e,t){var n=an(t,Kn(ms));return Yt(e,k,r,t,n)}),Kl=le(function(e,t){var n=an(t,Kn(Kl));return Yt(e,Ue,r,t,n)}),zp=Zt(function(e,t){return Yt(e,Ie,r,r,r,t)});function Rp(e,t){if(typeof e!="function")throw new $t(v);return t=t===r?t:ie(t),le(e,t)}function Op(e,t){if(typeof e!="function")throw new $t(v);return t=t==null?0:He(ie(t),0),le(function(n){var i=n[t],s=pn(n,0,t);return i&&ln(s,i),ht(e,this,s)})}function kp(e,t,n){var i=!0,s=!0;if(typeof e!="function")throw new $t(v);return Pe(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),Vl(e,t,{leading:i,maxWait:t,trailing:s})}function Dp(e){return Fl(e,1)}function Lp(e,t){return ms(ns(t),e)}function Ep(){if(!arguments.length)return[];var e=arguments[0];return te(e)?e:[e]}function Pp(e){return Ct(e,q)}function Up(e,t){return t=typeof t=="function"?t:r,Ct(e,q,t)}function Mp(e){return Ct(e,Q|q)}function Bp(e,t){return t=typeof t=="function"?t:r,Ct(e,Q|q,t)}function Wp(e,t){return t==null||Lo(e,t,Ge(t))}function Lt(e,t){return e===t||e!==e&&t!==t}var Fp=ji(Hr),qp=ji(function(e,t){return e>=t}),Cn=Wo(function(){return arguments}())?Wo:function(e){return Me(e)&&Te.call(e,"callee")&&!To.call(e,"callee")},te=m.isArray,Np=oo?gt(oo):Qf;function st(e){return e!=null&&ar(e.length)&&!Qt(e)}function Be(e){return Me(e)&&st(e)}function Hp(e){return e===!0||e===!1||Me(e)&&et(e)==Pt}var hn=rf||zs,Gp=lo?gt(lo):Jf;function Vp(e){return Me(e)&&e.nodeType===1&&!hi(e)}function Kp(e){if(e==null)return!0;if(st(e)&&(te(e)||typeof e=="string"||typeof e.splice=="function"||hn(e)||Yn(e)||Cn(e)))return!e.length;var t=Qe(e);if(t==dt||t==pt)return!e.size;if(di(e))return!Kr(e).length;for(var n in e)if(Te.call(e,n))return!1;return!0}function Yp(e,t){return ui(e,t)}function Zp(e,t,n){n=typeof n=="function"?n:r;var i=n?n(e,t):r;return i===r?ui(e,t,r,n):!!i}function ys(e){if(!Me(e))return!1;var t=et(e);return t==ct||t==Ce||typeof e.message=="string"&&typeof e.name=="string"&&!hi(e)}function Xp(e){return typeof e=="number"&&Io(e)}function Qt(e){if(!Pe(e))return!1;var t=et(e);return t==wt||t==zn||t==Nt||t==vi}function Yl(e){return typeof e=="number"&&e==ie(e)}function ar(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=qe}function Pe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Me(e){return e!=null&&typeof e=="object"}var Zl=ao?gt(ao):ec;function Qp(e,t){return e===t||Vr(e,t,us(t))}function Jp(e,t,n){return n=typeof n=="function"?n:r,Vr(e,t,us(t),n)}function jp(e){return Xl(e)&&e!=+e}function eh(e){if(Uc(e))throw new ee(I);return Fo(e)}function th(e){return e===null}function nh(e){return e==null}function Xl(e){return typeof e=="number"||Me(e)&&et(e)==en}function hi(e){if(!Me(e)||et(e)!=Ot)return!1;var t=Ei(e);if(t===null)return!0;var n=Te.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Oi.call(n)==Qu}var xs=uo?gt(uo):tc;function ih(e){return Yl(e)&&e>=-9007199254740991&&e<=qe}var Ql=fo?gt(fo):nc;function ur(e){return typeof e=="string"||!te(e)&&Me(e)&&et(e)==mn}function vt(e){return typeof e=="symbol"||Me(e)&&et(e)==Rn}var Yn=co?gt(co):ic;function rh(e){return e===r}function sh(e){return Me(e)&&Qe(e)==nn}function oh(e){return Me(e)&&et(e)==mi}var lh=ji(Yr),ah=ji(function(e,t){return e<=t});function Jl(e){if(!e)return[];if(st(e))return ur(e)?kt(e):rt(e);if(ti&&e[ti])return Bu(e[ti]());var t=Qe(e),n=t==dt?Er:t==pt?Ii:Zn;return n(e)}function Jt(e){if(!e)return e===0?e:0;if(e=Rt(e),e===oe||e===-1/0){var t=e<0?-1:1;return t*xe}return e===e?e:0}function ie(e){var t=Jt(e),n=t%1;return t===t?n?t-n:t:0}function jl(e){return e?Sn(ie(e),0,O):0}function Rt(e){if(typeof e=="number")return e;if(vt(e))return ve;if(Pe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Pe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=mo(e);var n=qa.test(e);return n||Ha.test(e)?wu(e.slice(2),n?2:8):Fa.test(e)?ve:+e}function ea(e){return Wt(e,ot(e))}function uh(e){return e?Sn(ie(e),-9007199254740991,qe):e===0?e:0}function Ae(e){return e==null?"":_t(e)}var fh=Gn(function(e,t){if(di(t)||st(t)){Wt(t,Ge(t),e);return}for(var n in t)Te.call(t,n)&&oi(e,n,t[n])}),ta=Gn(function(e,t){Wt(t,ot(t),e)}),fr=Gn(function(e,t,n,i){Wt(t,ot(t),e,i)}),ch=Gn(function(e,t,n,i){Wt(t,Ge(t),e,i)}),dh=Zt(Fr);function ph(e,t){var n=Hn(e);return t==null?n:Do(n,t)}var hh=le(function(e,t){e=Re(e);var n=-1,i=t.length,s=i>2?t[2]:r;for(s&&tt(t[0],t[1],s)&&(i=1);++n<i;)for(var l=t[n],u=ot(l),c=-1,p=u.length;++c<p;){var w=u[c],S=e[w];(S===r||Lt(S,Fn[w])&&!Te.call(e,w))&&(e[w]=l[w])}return e}),gh=le(function(e){return e.push(r,ml),ht(na,r,e)});function _h(e,t){return ho(e,V(t,3),Bt)}function vh(e,t){return ho(e,V(t,3),Nr)}function mh(e,t){return e==null?e:qr(e,V(t,3),ot)}function yh(e,t){return e==null?e:Mo(e,V(t,3),ot)}function xh(e,t){return e&&Bt(e,V(t,3))}function bh(e,t){return e&&Nr(e,V(t,3))}function wh(e){return e==null?[]:Gi(e,Ge(e))}function Sh(e){return e==null?[]:Gi(e,ot(e))}function bs(e,t,n){var i=e==null?r:An(e,t);return i===r?n:i}function Ah(e,t){return e!=null&&bl(e,t,Kf)}function ws(e,t){return e!=null&&bl(e,t,Yf)}var $h=pl(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=ki.call(t)),e[t]=n},As(lt)),Th=pl(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=ki.call(t)),Te.call(e,t)?e[t].push(n):e[t]=[n]},V),Ch=le(ai);function Ge(e){return st(e)?Oo(e):Kr(e)}function ot(e){return st(e)?Oo(e,!0):rc(e)}function Ih(e,t){var n={};return t=V(t,3),Bt(e,function(i,s,l){Kt(n,t(i,s,l),i)}),n}function zh(e,t){var n={};return t=V(t,3),Bt(e,function(i,s,l){Kt(n,s,t(i,s,l))}),n}var Rh=Gn(function(e,t,n){Vi(e,t,n)}),na=Gn(function(e,t,n,i){Vi(e,t,n,i)}),Oh=Zt(function(e,t){var n={};if(e==null)return n;var i=!1;t=Ee(t,function(l){return l=dn(l,e),i||(i=l.length>1),l}),Wt(e,ls(e),n),i&&(n=Ct(n,Q|G|q,$c));for(var s=t.length;s--;)jr(n,t[s]);return n});function kh(e,t){return ia(e,lr(V(t)))}var Dh=Zt(function(e,t){return e==null?{}:oc(e,t)});function ia(e,t){if(e==null)return{};var n=Ee(ls(e),function(i){return[i]});return t=V(t),Yo(e,n,function(i,s){return t(i,s[0])})}function Lh(e,t,n){t=dn(t,e);var i=-1,s=t.length;for(s||(s=1,e=r);++i<s;){var l=e==null?r:e[Ft(t[i])];l===r&&(i=s,l=n),e=Qt(l)?l.call(e):l}return e}function Eh(e,t,n){return e==null?e:fi(e,t,n)}function Ph(e,t,n,i){return i=typeof i=="function"?i:r,e==null?e:fi(e,t,n,i)}var ra=_l(Ge),sa=_l(ot);function Uh(e,t,n){var i=te(e),s=i||hn(e)||Yn(e);if(t=V(t,4),n==null){var l=e&&e.constructor;s?n=i?new l:[]:Pe(e)?n=Qt(l)?Hn(Ei(e)):{}:n={}}return(s?At:Bt)(e,function(u,c,p){return t(n,u,c,p)}),n}function Mh(e,t){return e==null?!0:jr(e,t)}function Bh(e,t,n){return e==null?e:jo(e,t,ns(n))}function Wh(e,t,n,i){return i=typeof i=="function"?i:r,e==null?e:jo(e,t,ns(n),i)}function Zn(e){return e==null?[]:Lr(e,Ge(e))}function Fh(e){return e==null?[]:Lr(e,ot(e))}function qh(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=Rt(n),n=n===n?n:0),t!==r&&(t=Rt(t),t=t===t?t:0),Sn(Rt(e),t,n)}function Nh(e,t,n){return t=Jt(t),n===r?(n=t,t=0):n=Jt(n),e=Rt(e),Zf(e,t,n)}function Hh(e,t,n){if(n&&typeof n!="boolean"&&tt(e,t,n)&&(t=n=r),n===r&&(typeof t=="boolean"?(n=t,t=r):typeof e=="boolean"&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=Jt(e),t===r?(t=e,e=0):t=Jt(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var s=zo();return Xe(e+s*(t-e+bu("1e-"+((s+"").length-1))),t)}return Xr(e,t)}var Gh=Vn(function(e,t,n){return t=t.toLowerCase(),e+(n?oa(t):t)});function oa(e){return Ss(Ae(e).toLowerCase())}function la(e){return e=Ae(e),e&&e.replace(Va,Lu).replace(cu,"")}function Vh(e,t,n){e=Ae(e),t=_t(t);var i=e.length;n=n===r?i:Sn(ie(n),0,i);var s=n;return n-=t.length,n>=0&&e.slice(n,s)==t}function Kh(e){return e=Ae(e),e&&wi.test(e)?e.replace(jn,Eu):e}function Yh(e){return e=Ae(e),e&&ka.test(e)?e.replace(mr,"\\$&"):e}var Zh=Vn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Xh=Vn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Qh=fl("toLowerCase");function Jh(e,t,n){e=Ae(e),t=ie(t);var i=t?Bn(e):0;if(!t||i>=t)return e;var s=(t-i)/2;return Ji(Bi(s),n)+e+Ji(Mi(s),n)}function jh(e,t,n){e=Ae(e),t=ie(t);var i=t?Bn(e):0;return t&&i<t?e+Ji(t-i,n):e}function eg(e,t,n){e=Ae(e),t=ie(t);var i=t?Bn(e):0;return t&&i<t?Ji(t-i,n)+e:e}function tg(e,t,n){return n||t==null?t=0:t&&(t=+t),af(Ae(e).replace(yr,""),t||0)}function ng(e,t,n){return(n?tt(e,t,n):t===r)?t=1:t=ie(t),Qr(Ae(e),t)}function ig(){var e=arguments,t=Ae(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var rg=Vn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function sg(e,t,n){return n&&typeof n!="number"&&tt(e,t,n)&&(t=n=r),n=n===r?O:n>>>0,n?(e=Ae(e),e&&(typeof t=="string"||t!=null&&!xs(t))&&(t=_t(t),!t&&Mn(e))?pn(kt(e),0,n):e.split(t,n)):[]}var og=Vn(function(e,t,n){return e+(n?" ":"")+Ss(t)});function lg(e,t,n){return e=Ae(e),n=n==null?0:Sn(ie(n),0,e.length),t=_t(t),e.slice(n,n+t.length)==t}function ag(e,t,n){var i=o.templateSettings;n&&tt(e,t,n)&&(t=r),e=Ae(e),t=fr({},t,i,vl);var s=fr({},t.imports,i.imports,vl),l=Ge(s),u=Lr(s,l),c,p,w=0,S=t.interpolate||Si,C="__p += '",P=Pr((t.escape||Si).source+"|"+S.source+"|"+(S===Ms?Wa:Si).source+"|"+(t.evaluate||Si).source+"|$","g"),H="//# sourceURL="+(Te.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_u+"]")+`
`;e.replace(P,function(X,ue,_e,mt,nt,yt){return _e||(_e=mt),C+=e.slice(w,yt).replace(Ka,Pu),ue&&(c=!0,C+=`' +
__e(`+ue+`) +
'`),nt&&(p=!0,C+=`';
`+nt+`;
__p += '`),_e&&(C+=`' +
((__t = (`+_e+`)) == null ? '' : __t) +
'`),w=yt+X.length,X}),C+=`';
`;var Z=Te.call(t,"variable")&&t.variable;if(!Z)C=`with (obj) {
`+C+`
}
`;else if(Ma.test(Z))throw new ee(z);C=(p?C.replace(yi,""):C).replace(xi,"$1").replace(bi,"$1;"),C="function("+(Z||"obj")+`) {
`+(Z?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(c?", __e = _.escape":"")+(p?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+C+`return __p
}`;var se=ua(function(){return be(l,H+"return "+C).apply(r,u)});if(se.source=C,ys(se))throw se;return se}function ug(e){return Ae(e).toLowerCase()}function fg(e){return Ae(e).toUpperCase()}function cg(e,t,n){if(e=Ae(e),e&&(n||t===r))return mo(e);if(!e||!(t=_t(t)))return e;var i=kt(e),s=kt(t),l=yo(i,s),u=xo(i,s)+1;return pn(i,l,u).join("")}function dg(e,t,n){if(e=Ae(e),e&&(n||t===r))return e.slice(0,wo(e)+1);if(!e||!(t=_t(t)))return e;var i=kt(e),s=xo(i,kt(t))+1;return pn(i,0,s).join("")}function pg(e,t,n){if(e=Ae(e),e&&(n||t===r))return e.replace(yr,"");if(!e||!(t=_t(t)))return e;var i=kt(e),s=yo(i,kt(t));return pn(i,s).join("")}function hg(e,t){var n=E,i=D;if(Pe(t)){var s="separator"in t?t.separator:s;n="length"in t?ie(t.length):n,i="omission"in t?_t(t.omission):i}e=Ae(e);var l=e.length;if(Mn(e)){var u=kt(e);l=u.length}if(n>=l)return e;var c=n-Bn(i);if(c<1)return i;var p=u?pn(u,0,c).join(""):e.slice(0,c);if(s===r)return p+i;if(u&&(c+=p.length-c),xs(s)){if(e.slice(c).search(s)){var w,S=p;for(s.global||(s=Pr(s.source,Ae(Bs.exec(s))+"g")),s.lastIndex=0;w=s.exec(S);)var C=w.index;p=p.slice(0,C===r?c:C)}}else if(e.indexOf(_t(s),c)!=c){var P=p.lastIndexOf(s);P>-1&&(p=p.slice(0,P))}return p+i}function gg(e){return e=Ae(e),e&&it.test(e)?e.replace(Jn,Nu):e}var _g=Vn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Ss=fl("toUpperCase");function aa(e,t,n){return e=Ae(e),t=n?r:t,t===r?Mu(e)?Vu(e):zu(e):e.match(t)||[]}var ua=le(function(e,t){try{return ht(e,r,t)}catch(n){return ys(n)?n:new ee(n)}}),vg=Zt(function(e,t){return At(t,function(n){n=Ft(n),Kt(e,n,vs(e[n],e))}),e});function mg(e){var t=e==null?0:e.length,n=V();return e=t?Ee(e,function(i){if(typeof i[1]!="function")throw new $t(v);return[n(i[0]),i[1]]}):[],le(function(i){for(var s=-1;++s<t;){var l=e[s];if(ht(l[0],this,i))return ht(l[1],this,i)}})}function yg(e){return Hf(Ct(e,Q))}function As(e){return function(){return e}}function xg(e,t){return e==null||e!==e?t:e}var bg=dl(),wg=dl(!0);function lt(e){return e}function $s(e){return qo(typeof e=="function"?e:Ct(e,Q))}function Sg(e){return Ho(Ct(e,Q))}function Ag(e,t){return Go(e,Ct(t,Q))}var $g=le(function(e,t){return function(n){return ai(n,e,t)}}),Tg=le(function(e,t){return function(n){return ai(e,n,t)}});function Ts(e,t,n){var i=Ge(t),s=Gi(t,i);n==null&&!(Pe(t)&&(s.length||!i.length))&&(n=t,t=e,e=this,s=Gi(t,Ge(t)));var l=!(Pe(n)&&"chain"in n)||!!n.chain,u=Qt(e);return At(s,function(c){var p=t[c];e[c]=p,u&&(e.prototype[c]=function(){var w=this.__chain__;if(l||w){var S=e(this.__wrapped__),C=S.__actions__=rt(this.__actions__);return C.push({func:p,args:arguments,thisArg:e}),S.__chain__=w,S}return p.apply(e,ln([this.value()],arguments))})}),e}function Cg(){return Ve._===this&&(Ve._=Ju),this}function Cs(){}function Ig(e){return e=ie(e),le(function(t){return Vo(t,e)})}var zg=rs(Ee),Rg=rs(po),Og=rs(zr);function fa(e){return cs(e)?Rr(Ft(e)):lc(e)}function kg(e){return function(t){return e==null?r:An(e,t)}}var Dg=hl(),Lg=hl(!0);function Is(){return[]}function zs(){return!1}function Eg(){return{}}function Pg(){return""}function Ug(){return!0}function Mg(e,t){if(e=ie(e),e<1||e>qe)return[];var n=O,i=Xe(e,O);t=V(t),e-=O;for(var s=Dr(i,t);++n<e;)t(n);return s}function Bg(e){return te(e)?Ee(e,Ft):vt(e)?[e]:rt(Rl(Ae(e)))}function Wg(e){var t=++Xu;return Ae(e)+t}var Fg=Qi(function(e,t){return e+t},0),qg=ss("ceil"),Ng=Qi(function(e,t){return e/t},1),Hg=ss("floor");function Gg(e){return e&&e.length?Hi(e,lt,Hr):r}function Vg(e,t){return e&&e.length?Hi(e,V(t,2),Hr):r}function Kg(e){return _o(e,lt)}function Yg(e,t){return _o(e,V(t,2))}function Zg(e){return e&&e.length?Hi(e,lt,Yr):r}function Xg(e,t){return e&&e.length?Hi(e,V(t,2),Yr):r}var Qg=Qi(function(e,t){return e*t},1),Jg=ss("round"),jg=Qi(function(e,t){return e-t},0);function e_(e){return e&&e.length?kr(e,lt):0}function t_(e,t){return e&&e.length?kr(e,V(t,2)):0}return o.after=Sp,o.ary=Fl,o.assign=fh,o.assignIn=ta,o.assignInWith=fr,o.assignWith=ch,o.at=dh,o.before=ql,o.bind=vs,o.bindAll=vg,o.bindKey=Nl,o.castArray=Ep,o.chain=Ml,o.chunk=Hc,o.compact=Gc,o.concat=Vc,o.cond=mg,o.conforms=yg,o.constant=As,o.countBy=ep,o.create=ph,o.curry=Hl,o.curryRight=Gl,o.debounce=Vl,o.defaults=hh,o.defaultsDeep=gh,o.defer=Ap,o.delay=$p,o.difference=Kc,o.differenceBy=Yc,o.differenceWith=Zc,o.drop=Xc,o.dropRight=Qc,o.dropRightWhile=Jc,o.dropWhile=jc,o.fill=ed,o.filter=np,o.flatMap=sp,o.flatMapDeep=op,o.flatMapDepth=lp,o.flatten=Ll,o.flattenDeep=td,o.flattenDepth=nd,o.flip=Tp,o.flow=bg,o.flowRight=wg,o.fromPairs=id,o.functions=wh,o.functionsIn=Sh,o.groupBy=ap,o.initial=sd,o.intersection=od,o.intersectionBy=ld,o.intersectionWith=ad,o.invert=$h,o.invertBy=Th,o.invokeMap=fp,o.iteratee=$s,o.keyBy=cp,o.keys=Ge,o.keysIn=ot,o.map=rr,o.mapKeys=Ih,o.mapValues=zh,o.matches=Sg,o.matchesProperty=Ag,o.memoize=or,o.merge=Rh,o.mergeWith=na,o.method=$g,o.methodOf=Tg,o.mixin=Ts,o.negate=lr,o.nthArg=Ig,o.omit=Oh,o.omitBy=kh,o.once=Cp,o.orderBy=dp,o.over=zg,o.overArgs=Ip,o.overEvery=Rg,o.overSome=Og,o.partial=ms,o.partialRight=Kl,o.partition=pp,o.pick=Dh,o.pickBy=ia,o.property=fa,o.propertyOf=kg,o.pull=dd,o.pullAll=Pl,o.pullAllBy=pd,o.pullAllWith=hd,o.pullAt=gd,o.range=Dg,o.rangeRight=Lg,o.rearg=zp,o.reject=_p,o.remove=_d,o.rest=Rp,o.reverse=gs,o.sampleSize=mp,o.set=Eh,o.setWith=Ph,o.shuffle=yp,o.slice=vd,o.sortBy=wp,o.sortedUniq=Ad,o.sortedUniqBy=$d,o.split=sg,o.spread=Op,o.tail=Td,o.take=Cd,o.takeRight=Id,o.takeRightWhile=zd,o.takeWhile=Rd,o.tap=Gd,o.throttle=kp,o.thru=ir,o.toArray=Jl,o.toPairs=ra,o.toPairsIn=sa,o.toPath=Bg,o.toPlainObject=ea,o.transform=Uh,o.unary=Dp,o.union=Od,o.unionBy=kd,o.unionWith=Dd,o.uniq=Ld,o.uniqBy=Ed,o.uniqWith=Pd,o.unset=Mh,o.unzip=_s,o.unzipWith=Ul,o.update=Bh,o.updateWith=Wh,o.values=Zn,o.valuesIn=Fh,o.without=Ud,o.words=aa,o.wrap=Lp,o.xor=Md,o.xorBy=Bd,o.xorWith=Wd,o.zip=Fd,o.zipObject=qd,o.zipObjectDeep=Nd,o.zipWith=Hd,o.entries=ra,o.entriesIn=sa,o.extend=ta,o.extendWith=fr,Ts(o,o),o.add=Fg,o.attempt=ua,o.camelCase=Gh,o.capitalize=oa,o.ceil=qg,o.clamp=qh,o.clone=Pp,o.cloneDeep=Mp,o.cloneDeepWith=Bp,o.cloneWith=Up,o.conformsTo=Wp,o.deburr=la,o.defaultTo=xg,o.divide=Ng,o.endsWith=Vh,o.eq=Lt,o.escape=Kh,o.escapeRegExp=Yh,o.every=tp,o.find=ip,o.findIndex=kl,o.findKey=_h,o.findLast=rp,o.findLastIndex=Dl,o.findLastKey=vh,o.floor=Hg,o.forEach=Bl,o.forEachRight=Wl,o.forIn=mh,o.forInRight=yh,o.forOwn=xh,o.forOwnRight=bh,o.get=bs,o.gt=Fp,o.gte=qp,o.has=Ah,o.hasIn=ws,o.head=El,o.identity=lt,o.includes=up,o.indexOf=rd,o.inRange=Nh,o.invoke=Ch,o.isArguments=Cn,o.isArray=te,o.isArrayBuffer=Np,o.isArrayLike=st,o.isArrayLikeObject=Be,o.isBoolean=Hp,o.isBuffer=hn,o.isDate=Gp,o.isElement=Vp,o.isEmpty=Kp,o.isEqual=Yp,o.isEqualWith=Zp,o.isError=ys,o.isFinite=Xp,o.isFunction=Qt,o.isInteger=Yl,o.isLength=ar,o.isMap=Zl,o.isMatch=Qp,o.isMatchWith=Jp,o.isNaN=jp,o.isNative=eh,o.isNil=nh,o.isNull=th,o.isNumber=Xl,o.isObject=Pe,o.isObjectLike=Me,o.isPlainObject=hi,o.isRegExp=xs,o.isSafeInteger=ih,o.isSet=Ql,o.isString=ur,o.isSymbol=vt,o.isTypedArray=Yn,o.isUndefined=rh,o.isWeakMap=sh,o.isWeakSet=oh,o.join=ud,o.kebabCase=Zh,o.last=zt,o.lastIndexOf=fd,o.lowerCase=Xh,o.lowerFirst=Qh,o.lt=lh,o.lte=ah,o.max=Gg,o.maxBy=Vg,o.mean=Kg,o.meanBy=Yg,o.min=Zg,o.minBy=Xg,o.stubArray=Is,o.stubFalse=zs,o.stubObject=Eg,o.stubString=Pg,o.stubTrue=Ug,o.multiply=Qg,o.nth=cd,o.noConflict=Cg,o.noop=Cs,o.now=sr,o.pad=Jh,o.padEnd=jh,o.padStart=eg,o.parseInt=tg,o.random=Hh,o.reduce=hp,o.reduceRight=gp,o.repeat=ng,o.replace=ig,o.result=Lh,o.round=Jg,o.runInContext=d,o.sample=vp,o.size=xp,o.snakeCase=rg,o.some=bp,o.sortedIndex=md,o.sortedIndexBy=yd,o.sortedIndexOf=xd,o.sortedLastIndex=bd,o.sortedLastIndexBy=wd,o.sortedLastIndexOf=Sd,o.startCase=og,o.startsWith=lg,o.subtract=jg,o.sum=e_,o.sumBy=t_,o.template=ag,o.times=Mg,o.toFinite=Jt,o.toInteger=ie,o.toLength=jl,o.toLower=ug,o.toNumber=Rt,o.toSafeInteger=uh,o.toString=Ae,o.toUpper=fg,o.trim=cg,o.trimEnd=dg,o.trimStart=pg,o.truncate=hg,o.unescape=gg,o.uniqueId=Wg,o.upperCase=_g,o.upperFirst=Ss,o.each=Bl,o.eachRight=Wl,o.first=El,Ts(o,function(){var e={};return Bt(o,function(t,n){Te.call(o.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),o.VERSION=g,At(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){o[e].placeholder=o}),At(["drop","take"],function(e,t){he.prototype[e]=function(n){n=n===r?1:He(ie(n),0);var i=this.__filtered__&&!t?new he(this):this.clone();return i.__filtered__?i.__takeCount__=Xe(n,i.__takeCount__):i.__views__.push({size:Xe(n,O),type:e+(i.__dir__<0?"Right":"")}),i},he.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),At(["filter","map","takeWhile"],function(e,t){var n=t+1,i=n==Fe||n==ze;he.prototype[e]=function(s){var l=this.clone();return l.__iteratees__.push({iteratee:V(s,3),type:n}),l.__filtered__=l.__filtered__||i,l}}),At(["head","last"],function(e,t){var n="take"+(t?"Right":"");he.prototype[e]=function(){return this[n](1).value()[0]}}),At(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");he.prototype[e]=function(){return this.__filtered__?new he(this):this[n](1)}}),he.prototype.compact=function(){return this.filter(lt)},he.prototype.find=function(e){return this.filter(e).head()},he.prototype.findLast=function(e){return this.reverse().find(e)},he.prototype.invokeMap=le(function(e,t){return typeof e=="function"?new he(this):this.map(function(n){return ai(n,e,t)})}),he.prototype.reject=function(e){return this.filter(lr(V(e)))},he.prototype.slice=function(e,t){e=ie(e);var n=this;return n.__filtered__&&(e>0||t<0)?new he(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(t=ie(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},he.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},he.prototype.toArray=function(){return this.take(O)},Bt(he.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),s=o[i?"take"+(t=="last"?"Right":""):t],l=i||/^find/.test(t);s&&(o.prototype[t]=function(){var u=this.__wrapped__,c=i?[1]:arguments,p=u instanceof he,w=c[0],S=p||te(u),C=function(ue){var _e=s.apply(o,ln([ue],c));return i&&P?_e[0]:_e};S&&n&&typeof w=="function"&&w.length!=1&&(p=S=!1);var P=this.__chain__,H=!!this.__actions__.length,Z=l&&!P,se=p&&!H;if(!l&&S){u=se?u:new he(this);var X=e.apply(u,c);return X.__actions__.push({func:ir,args:[C],thisArg:r}),new Tt(X,P)}return Z&&se?e.apply(this,c):(X=this.thru(C),Z?i?X.value()[0]:X.value():X)})}),At(["pop","push","shift","sort","splice","unshift"],function(e){var t=zi[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);o.prototype[e]=function(){var s=arguments;if(i&&!this.__chain__){var l=this.value();return t.apply(te(l)?l:[],s)}return this[n](function(u){return t.apply(te(u)?u:[],s)})}}),Bt(he.prototype,function(e,t){var n=o[t];if(n){var i=n.name+"";Te.call(Nn,i)||(Nn[i]=[]),Nn[i].push({name:t,func:n})}}),Nn[Xi(r,ce).name]=[{name:"wrapper",func:r}],he.prototype.clone=gf,he.prototype.reverse=_f,he.prototype.value=vf,o.prototype.at=Vd,o.prototype.chain=Kd,o.prototype.commit=Yd,o.prototype.next=Zd,o.prototype.plant=Qd,o.prototype.reverse=Jd,o.prototype.toJSON=o.prototype.valueOf=o.prototype.value=jd,o.prototype.first=o.prototype.head,ti&&(o.prototype[ti]=Xd),o},Wn=Ku();yn?((yn.exports=Wn)._=Wn,$r._=Wn):Ve._=Wn}).call(fv)}(gi,gi.exports)),gi.exports}var qt=cv();const dv={class:""},pv={class:"group py-2"},hv={class:"flex items-center justify-between"},gv={class:"py-4"},_v={class:"flex flex-col gap-5"},vv={class:"flex flex-col gap-2"},mv={class:"flex flex-col gap-2 p-3 bg-gray-50 border border-gray-200 rounded-lg"},yv={class:"flex items-center justify-between"},xv={class:"flex flex-col gap-2"},bv={class:"flex flex-col p-3 bg-gray-50 border border-gray-200 rounded-lg"},wv={class:"flex items-center justify-between"},Sv={class:"flex items-center justify-between"},Av=ut({__name:"ReviewConfigAbilityItem",props:{app_id:{type:String,default:"",required:!0},review_config:{type:Object,default:{},required:!0}},setup(a){var Q,G,q,ne,N,M,ce,Se,de;const f=a,{loading:r,handleUpdateDraftAppConfig:g}=vn(),y=ae(!1),I=ae(!1),v=ae({enable:(Q=f.review_config)==null?void 0:Q.enable,keywords:(q=(G=f.review_config)==null?void 0:G.keywords)==null?void 0:q.join(`
`),inputs_config:{enable:(N=(ne=f.review_config)==null?void 0:ne.inputs_config)==null?void 0:N.enable,preset_response:(ce=(M=f.review_config)==null?void 0:M.inputs_config)==null?void 0:ce.preset_response},outputs_config:{enable:(de=(Se=f.review_config)==null?void 0:Se.outputs_config)==null?void 0:de.enable}}),z=ae({...qt.cloneDeep(v.value)}),$=()=>qt.isEqual(z.value,v.value),R=()=>{I.value=!1,v.value=qt.cloneDeep(z.value)},K=async()=>{try{await g(f.app_id,{review_config:{enable:v.value.enable,keywords:v.value.keywords.split(/\r?\n/).filter(F=>F.trim()!==""),inputs_config:v.value.inputs_config,outputs_config:v.value.outputs_config}}),z.value=qt.cloneDeep(v.value),await In(),R()}catch{}};return dr(()=>f.review_config,F=>{(!y.value||!$())&&F&&Object.keys(F).length>0&&(v.value=qt.cloneDeep({...F,keywords:F==null?void 0:F.keywords.join(`
`)}),z.value=qt.cloneDeep({...F,keywords:F==null?void 0:F.keywords.join(`
`)}),y.value=!0)},{immediate:!0,deep:!0}),(F,k)=>{const Ue=A("icon-down"),re=A("a-button"),Ie=A("a-doption"),ke=A("a-dropdown"),E=A("icon-settings"),D=A("a-collapse-item"),J=A("icon-close"),Y=A("a-textarea"),Fe=A("a-switch"),L=A("a-space"),ze=A("a-modal");return T(),U("div",dv,[h(D,{key:"review_config",class:"app-ability-item review-config-ability-item"},{header:x(()=>k[7]||(k[7]=[_("div",{class:"text-gray-700 font-bold"},"内容审查",-1)])),extra:x(()=>[h(ke,{onSelect:k[1]||(k[1]=async oe=>{if(!!oe!==v.value.enable)try{v.value.enable=!!oe,await In(),await K()}catch{}})},{content:x(()=>[h(Ie,{value:1,class:"text-xs py-1.5 text-gray-700"},{default:x(()=>k[8]||(k[8]=[fe("开启")])),_:1}),h(Ie,{value:0,class:"text-xs py-1.5 text-red-700"},{default:x(()=>k[9]||(k[9]=[fe("关闭")])),_:1})]),default:x(()=>[h(re,{size:"mini",class:"rounded-lg flex items-center gap-1 px-1",onClick:k[0]||(k[0]=Xn(()=>{},["stop"]))},{default:x(()=>[fe(ge(v.value.enable?"开启":"关闭")+" ",1),h(Ue)]),_:1})]),_:1})]),default:x(()=>[_("div",pv,[k[11]||(k[11]=_("div",{class:"text-xs text-gray-500 leading-[22px] group-hover:hidden"}," 对用户输入以及大语言模型输出内容进行审查。 ",-1)),h(re,{size:"small",long:"",class:"hidden group-hover:block rounded-lg transition-all",onClick:k[2]||(k[2]=oe=>I.value=!0)},{icon:x(()=>[h(E)]),default:x(()=>[k[10]||(k[10]=fe(" 设置 "))]),_:1})])]),_:1}),h(ze,{visible:I.value,"hide-title":"",footer:!1,"modal-class":"rounded-xl",onCancel:R},{default:x(()=>[_("div",hv,[k[12]||(k[12]=_("div",{class:"text-lg font-bold text-gray-700"},"内容审核",-1)),h(re,{type:"text",class:"!text-gray-700",size:"small",onClick:R},{icon:x(()=>[h(J)]),_:1})]),_("div",gv,[_("div",_v,[_("div",vv,[k[13]||(k[13]=_("div",{class:"flex flex-col"},[_("div",{class:"flex items-center gap-1 text-gray-700"},[fe(" 关键词 "),_("div",{class:"text-red-700"},"*")]),_("div",{class:"text-gray-500 text-xs"},"每行一个，用换行符分割，最多填写100个关键词")],-1)),h(Y,{"model-value":v.value.keywords,"onUpdate:modelValue":k[3]||(k[3]=oe=>v.value.keywords=oe),class:"bg-white rounded-lg border border-gray-200",placeholder:"每行一个，用换行符分隔。","max-length":100,"show-word-limit":"","auto-size":{minRows:4,maxRows:4},"word-length":oe=>oe.trim()===""?0:oe.split(/\r?\n/).length,"word-slice":(oe,qe)=>oe.split(/\r?\n/).slice(0,qe).join(`
`)},null,8,["model-value","word-length","word-slice"])]),_("div",mv,[_("div",yv,[k[14]||(k[14]=_("div",{class:"text-gray-700"},"输入审查内容",-1)),h(Fe,{"model-value":v.value.inputs_config.enable,"onUpdate:modelValue":k[4]||(k[4]=oe=>v.value.inputs_config.enable=oe),size:"small",type:"round","checked-color":"#10b981","unchecked-color":"#556581"},null,8,["model-value"])]),_("div",xv,[k[15]||(k[15]=_("div",{class:"text-gray-700 text-xs"},"预设回复",-1)),h(Y,{"model-value":v.value.inputs_config.preset_response,"onUpdate:modelValue":k[5]||(k[5]=oe=>v.value.inputs_config.preset_response=oe),placeholder:"这里是预设回复内容",class:"bg-white rounded-lg border border-gray-200","auto-size":{minRows:3,maxRows:3}},null,8,["model-value"])])]),_("div",bv,[_("div",wv,[k[16]||(k[16]=_("div",{class:"text-gray-700"},"输出审查内容",-1)),h(Fe,{"model-value":v.value.outputs_config.enable,"onUpdate:modelValue":k[6]||(k[6]=oe=>v.value.outputs_config.enable=oe),size:"small",type:"round","checked-color":"#10b981","unchecked-color":"#556581"},null,8,["model-value"])])])])]),_("div",Sv,[k[19]||(k[19]=_("div",{class:""},null,-1)),h(L,{size:16},{default:x(()=>[h(re,{class:"rounded-lg",onClick:R},{default:x(()=>k[17]||(k[17]=[fe("取消")])),_:1}),h(re,{loading:B(r),type:"primary",class:"rounded-lg",onClick:K},{default:x(()=>k[18]||(k[18]=[fe(" 保存 ")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["visible"])])}}}),$v={class:""},Tv={key:0,class:""},Cv={key:1,class:""},Iv={key:2,class:""},zv={key:0,class:"flex flex-col gap-1"},Rv={class:"flex items-center gap-2"},Ov={class:"flex flex-col flex-1 gap-1 h-9"},kv={class:"text-gray-700 font-bold leading-[18px] line-clamp-1 break-all"},Dv={class:"text-gray-500 text-xs line-clamp-1 break-all"},Lv={key:1,class:"text-xs text-gray-500 leading-[22px]"},Ev={class:"flex items-center justify-between mb-6"},Pv={class:"h-[calc(100vh-180px)] mb-4 overflow-scroll scrollbar-w-none"},Uv={class:"flex flex-col gap-2"},Mv=["onClick"],Bv={class:"line-clamp-1 text-gray-500 flex-1"},Wv={class:"flex items-center justify-between"},Fv={class:""},qv={class:"flex items-center justify-between"},Nv={class:"flex items-center gap-4 w-full pl-3"},Hv={class:"flex items-center gap-4 w-full pl-3"},Gv={class:"flex items-center justify-between"},Vv=ut({__name:"DatasetsAbilityItem",props:{app_id:{type:String,default:"",required:!0},retrieval_config:{type:Object,default:{},required:!0},datasets:{type:Array,default:[],required:!0}},emits:["update:datasets","update:retrieval_config"],setup(a,{emit:f}){const r=a,g=f,{loading:y,handleUpdateDraftAppConfig:I}=vn(),{loading:v,paginator:z,datasets:$,loadDatasets:R}=C_(),K=ae(!1),Q=ae(!1),G=ae(!1),q=ae([]),ne=ae([]),N=ae({}),M=ae({}),ce=ae(!1),Se=async E=>{const{scrollTop:D,scrollHeight:J,clientHeight:Y}=E.target;if(D+Y>=J-10){if(v.value)return;await R()}},de=()=>qt.isEqual(q.value,ne.value),F=()=>qt.isEqual(N.value,M.value),k=()=>{K.value=!1,q.value=ne.value,G.value=!1},Ue=()=>{Q.value=!1,N.value=M.value,ce.value=!1},re=E=>{const D=$[E];if(q.value.some(J=>J.id===D.id))q.value=q.value.filter(J=>J.id!==D.id);else{if(q.value.length>=5){_n.warning("关联知识库已超过5个，无法继续关联");return}q.value.push({id:D.id,name:D.name,icon:D.icon,description:D.description})}},Ie=async()=>{try{await I(r.app_id,{datasets:q.value.map(E=>E.id)}),ne.value=q.value,await In(),g("update:datasets",q.value),k()}catch(E){_n.error(E.message)}},ke=async()=>{try{await I(r.app_id,{retrieval_config:N.value}),M.value=N.value,g("update:retrieval_config",N.value),Ue()}catch(E){_n.error(E.message)}};return dr(()=>r.datasets,E=>{if((!G.value||!de())&&E&&E.length>0){const D=r.datasets.map(J=>({id:J.id,name:J.name,icon:J.icon,description:J.description}));q.value=qt.cloneDeep(D),ne.value=qt.cloneDeep(D),G.value=!0}},{immediate:!0,deep:!0}),dr(()=>r.retrieval_config,E=>{(!ce.value||!F())&&E&&Object.keys(E).length>0&&(N.value={...E},M.value={...E},ce.value=!0)},{immediate:!0,deep:!0}),dr(()=>K.value,async E=>{E?await R(!0):$.splice(0,$.length)}),(E,D)=>{const J=A("icon-language"),Y=A("a-button"),Fe=A("icon-plus"),L=A("a-space"),ze=A("a-avatar"),oe=A("icon-delete"),qe=A("a-collapse-item"),xe=A("icon-close"),ve=A("a-empty"),O=A("a-spin"),me=A("a-col"),j=A("a-row"),ye=A("a-modal"),bt=A("a-radio-group"),ft=A("a-form-item"),Nt=A("a-slider"),Pt=A("a-input-number"),Ut=A("a-form");return T(),U("div",$v,[h(qe,{key:"datasets",class:"app-ability-item"},{header:x(()=>D[7]||(D[7]=[_("div",{class:"text-gray-700 font-bold"},"知识库",-1)])),extra:x(()=>[h(L,null,{default:x(()=>[h(Y,{size:"mini",class:"rounded-lg px-2",onClick:D[0]||(D[0]=Xn(Ce=>Q.value=!0,["stop"]))},{icon:x(()=>[h(J)]),default:x(()=>{var Ce,ct;return[((Ce=a.retrieval_config)==null?void 0:Ce.retrieval_strategy)==="semantic"?(T(),U("div",Tv," 相似度检索 ")):((ct=a.retrieval_config)==null?void 0:ct.retrieval_strategy)==="full_text"?(T(),U("div",Cv," 全文检索 ")):(T(),U("div",Iv,"混合检索"))]}),_:1}),h(Y,{size:"mini",type:"text",class:"!text-gray-700",onClick:D[1]||(D[1]=Xn(Ce=>K.value=!0,["stop"]))},{icon:x(()=>[h(Fe)]),_:1})]),_:1})]),default:x(()=>[r.datasets.length>0?(T(),U("div",zv,[(T(!0),U(Je,null,at(r.datasets,(Ce,ct)=>(T(),U("div",{key:Ce.id,class:"flex items-center justify-between bg-white p-3 rounded-lg cursor-pointer hover:shadow-sm group"},[_("div",Rv,[h(ze,{size:36,shape:"square",class:"rounded flex-shrink-0","image-url":Ce.icon},null,8,["image-url"]),_("div",Ov,[_("div",kv,ge(Ce.name),1),_("div",Dv,ge(Ce.description),1)])]),h(Y,{size:"mini",type:"text",class:"hidden group-hover:block flex-shrink-0 ml-2 !text-red-700 rounded",onClick:async()=>{const wt=[...r.datasets];wt.splice(ct,1),await B(I)(r.app_id,{datasets:wt.map(zn=>zn.id)}),G.value=!1,g("update:datasets",wt)}},{icon:x(()=>[h(oe)]),_:2},1032,["onClick"])]))),128))])):(T(),U("div",Lv," 引用文本类型的数据，实现知识问答，应用最多支持关联 5 个知识库。 "))]),_:1}),h(ye,{visible:K.value,"hide-title":"",footer:!1,width:400,class:"datasets-modal","modal-class":"h-[calc(100vh-32px)] right-4",onCancel:k},{default:x(()=>[_("div",Ev,[D[8]||(D[8]=_("div",{class:"text-lg font-bold text-gray-700"},"选择引用知识库",-1)),h(Y,{type:"text",class:"!text-gray-700",size:"small",onClick:k},{icon:x(()=>[h(xe)]),_:1})]),_("div",Pv,[h(O,{loading:B(v),class:"block h-full scrollbar-w-none overflow-scroll",onScroll:Se},{default:x(()=>[_("div",Uv,[(T(!0),U(Je,null,at(B($),(Ce,ct)=>(T(),U("div",{key:Ce.id,class:xt(`flex items-center gap-2 border px-3 py-2 rounded-lg cursor-pointer hover:bg-blue-50 hover:border-blue-700 ${q.value.some(wt=>wt.id===Ce.id)?"bg-blue-50 border-blue-700":""}`),onClick:()=>re(ct)},[h(ze,{size:24,shape:"square",class:"flex-shrink-0 rounded","image-url":Ce.icon},null,8,["image-url"]),_("div",Bv,ge(Ce.name),1)],10,Mv))),128)),B($).length===0?(T(),$e(ve,{key:0,description:"没有可用知识库",class:"h-[400px] flex flex-col items-center justify-center"})):we("",!0)]),B(z).total_page>=2?(T(),$e(j,{key:0},{default:x(()=>[B(z).current_page<=B(z).total_page?(T(),$e(me,{key:0,span:24,class:"!text-center"},{default:x(()=>[h(L,{class:"my-4"},{default:x(()=>[h(O),D[9]||(D[9]=_("div",{class:"text-gray-400"},"加载中",-1))]),_:1})]),_:1})):(T(),$e(me,{key:1,span:24,class:"!text-center"},{default:x(()=>D[10]||(D[10]=[_("div",{class:"text-gray-400 my-4"},"数据已加载完成",-1)])),_:1}))]),_:1})):we("",!0)]),_:1},8,["loading"])]),_("div",Wv,[_("div",Fv,ge(q.value.length)+"个知识库被选中",1),h(L,{size:12},{default:x(()=>[h(Y,{class:"rounded-lg",onClick:k},{default:x(()=>D[11]||(D[11]=[fe("取消")])),_:1}),h(Y,{loading:B(y),type:"primary",class:"rounded-lg",onClick:Ie},{default:x(()=>D[12]||(D[12]=[fe(" 添加 ")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["visible"]),h(ye,{visible:Q.value,"hide-title":"",footer:!1,"modal-class":"rounded-xl",onCancel:Ue},{default:x(()=>[_("div",qv,[D[13]||(D[13]=_("div",{class:"text-lg font-bold text-gray-700"},"检索设置",-1)),h(Y,{type:"text",class:"!text-gray-700",size:"small",onClick:Ue},{icon:x(()=>[h(xe)]),_:1})]),h(Ut,{model:N.value,onSubmit:ke,class:"pt-6"},{default:x(()=>[h(ft,{field:"retrieval_strategy",label:"检索策略","label-align":"left"},{default:x(()=>[h(bt,{"model-value":N.value.retrieval_strategy,"onUpdate:modelValue":D[2]||(D[2]=Ce=>N.value.retrieval_strategy=Ce),"default-value":"semantic",options:[{label:"混合策略",value:"hybrid"},{label:"全文检索",value:"full_text"},{label:"相似性检索",value:"semantic"}]},null,8,["model-value"])]),_:1}),h(ft,{field:"k",label:"最大召回数量"},{default:x(()=>[_("div",Nv,[h(Nt,{"model-value":N.value.k,"onUpdate:modelValue":D[3]||(D[3]=Ce=>N.value.k=Ce),step:1,min:1,max:10},null,8,["model-value"]),h(Pt,{"model-value":N.value.k,"onUpdate:modelValue":D[4]||(D[4]=Ce=>N.value.k=Ce),class:"w-[80px]","default-value":4},null,8,["model-value"])])]),_:1}),h(ft,{field:"score",label:"最小匹配度"},{default:x(()=>[_("div",Hv,[h(Nt,{"model-value":N.value.score,"onUpdate:modelValue":D[5]||(D[5]=Ce=>N.value.score=Ce),step:.01,min:0,max:.99},null,8,["model-value"]),h(Pt,{"model-value":N.value.score,"onUpdate:modelValue":D[6]||(D[6]=Ce=>N.value.score=Ce),class:"w-[80px]",min:0,max:.99,step:.01,precision:2,"default-value":.5},null,8,["model-value"])])]),_:1}),_("div",Gv,[D[16]||(D[16]=_("div",{class:""},null,-1)),h(L,{size:16},{default:x(()=>[h(Y,{class:"rounded-lg",onClick:Ue},{default:x(()=>D[14]||(D[14]=[fe("取消")])),_:1}),h(Y,{loading:B(y),type:"primary","html-type":"submit",class:"rounded-lg"},{default:x(()=>D[15]||(D[15]=[fe("保存")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["model"])]),_:1},8,["visible"])])}}}),Kv=()=>{const a=ae(!1),f=Qn({});return{loading:a,api_tool:f,loadApiTool:async(g,y)=>{try{a.value=!0;const v=(await I_(g,y)).data;Object.assign(f,v)}finally{a.value=!1}}}},Yv=()=>{const a=ae(!1),f=Qn([]),r={current_page:1,page_size:20,total_page:0,total_record:0},g=Qn({...r}),y=async(v=!1)=>{if(v)Object.assign(g,{...r});else if(g.current_page>g.total_page)return;try{a.value=!0;const $=(await z_(g.current_page,g.page_size,"")).data;I($),g.current_page<=g.total_page&&(g.current_page+=1),v?f.splice(0,f.length,...$.list):f.push(...$.list)}finally{a.value=!1}},I=v=>{g.current_page=v.paginator.current_page,g.page_size=v.paginator.page_size,g.total_page=v.paginator.total_page,g.total_record=v.paginator.total_record};return{loading:a,api_tool_providers:f,paginator:g,loadApiToolProviders:y}},Zv=()=>{const a=ae(!1),f=Qn([]),r=async()=>{try{a.value=!0;const y=(await R_()).data;f.splice(0,f.length,...y)}finally{a.value=!1}};return ya(async()=>await r()),{loading:a,categories:f,loadCategories:r}},Xv=()=>{const a=ae(!1),f=Qn({});return{loading:a,builtin_tool:f,loadBuiltinTool:async(g,y)=>{try{a.value=!0;const v=(await O_(g,y)).data;Object.assign(f,v)}finally{a.value=!1}}}},Qv=()=>{const a=ae(!1),f=Qn([]);return{loading:a,builtin_tools:f,loadBuiltinTools:async()=>{try{a.value=!0;const y=(await k_()).data;f.splice(0,f.length,...y)}finally{a.value=!1}}}},Jv={class:""},jv={key:0,class:"flex flex-col gap-1"},em={class:"flex items-center gap-2"},tm={class:"flex flex-col gap-1 h-9"},nm={class:"text-gray-700 font-bold leading-[18px] line-clamp-1 break-all"},im={class:"text-gray-500 text-xs line-clamp-1 break-all"},rm={class:"hidden group-hover:flex items-center gap-1 flex-shrink-0 ml-2"},sm={key:1,class:"text-xs text-gray-500 leading-[22px]"},om={class:"flex items-center justify-between mb-6"},lm={class:"flex items-center"},am={class:"flex items-center gap-2"},um={class:"text-gray-700 font-bold max-w-[200px] line-clamp-1 break-all"},fm={class:"mx-4 text-gray-400"},cm={class:"flex items-center gap-6"},dm={key:0,class:"h-[calc(100vh-170px)] pb-4 overflow-scroll scrollbar-w-none"},pm={class:"text-gray-500 text-xs"},hm={key:0,class:""},gm={class:"flex flex-col gap-4"},_m={class:"flex items-center gap-2 text-xs"},vm={class:"text-gray-900 font-bold"},mm={class:"text-gray-500"},ym={key:0,class:"text-red-700"},xm={class:"text-xs text-gray-500"},bm={key:1,class:"h-[calc(100vh-170px)] pb-4 overflow-scroll scrollbar-w-none"},wm={class:"flex items-center gap-1"},Sm={class:"text-gray-700"},Am={key:0,class:"text-red-700"},$m={class:"flex items-center justify-between"},Tm={class:"flex w-full h-full"},Cm={class:"flex flex-col flex-shrink-0 bg-gray-50 w-[200px] h-full px-3 py-4 overflow-scroll scrollbar-w-none"},Im={class:"flex flex-col gap-1 mb-4"},zm={key:0,class:""},Rm={class:"flex flex-col gap-1"},Om=["onClick"],km=["innerHTML"],Dm={class:"flex-1 p-4"},Lm={class:"w-full flex items-center justify-between gap-2 mb-7"},Em={class:"text-lg font-bold text-gray-700"},Pm={key:0,class:"h-[calc(100vh-130px)] overflow-scroll scrollbar-w-none"},Um={class:"text-gray-900"},Mm={class:"flex flex-col gap-1"},Bm={class:"flex items-center gap-2"},Wm={class:"text-gray-900"},Fm={key:0,class:""},qm={key:1},Nm={class:"text-gray-900"},Hm={class:"flex flex-col gap-1"},Gm={class:"flex items-center gap-2"},Vm={class:"text-gray-900"},Km={key:0,class:""},Ym=ut({__name:"ToolsAbilityItem",props:{app_id:{type:String,default:"",required:!0},tools:{type:Array,default:[],required:!0}},emits:["update:tools"],setup(a,{emit:f}){const r=a,g=f,{loading:y,handleUpdateDraftAppConfig:I}=vn(),{loading:v,api_tool:z,loadApiTool:$}=Kv(),{loading:R,paginator:K,api_tool_providers:Q,loadApiToolProviders:G}=Yv(),{loading:q,builtin_tool:ne,loadBuiltinTool:N}=Xv(),{categories:M}=Zv(),{builtin_tools:ce,loadBuiltinTools:Se}=Qv(),de=ae(!1),F=ae("info"),k=ae({}),Ue=ae(-1),re=ae({}),Ie=ae(!1),ke=ae("api_tool"),E=ae("all"),D=ma(()=>E.value==="all"?ce:ce.filter(ve=>ve.category===E.value)),J=async ve=>{if(ve===-1)return;Ue.value=ve;const O=r.tools[ve];O.type==="builtin_tool"?(await N(O.provider.name,O.tool.name),k.value={type:"builtin_tool",provider:{id:ne.provider.name,icon:ne.provider.icon,name:ne.provider.name,label:ne.provider.label,description:ne.provider.description},tool:{id:ne.name,name:ne.name,label:ne.label,description:ne.description,inputs:ne.inputs,params:ne.params}}):(await $(O.provider.id,O.tool.name),k.value={type:"api_tool",provider:{id:z.provider.id,icon:z.provider.icon,name:z.provider.name,label:z.provider.name,description:z.provider.description},tool:{id:z.name,name:z.name,label:z.name,description:z.description,inputs:ne.inputs,params:[]}});const me=O.tool.params;k.value.tool.params.forEach(j=>{re.value[j.name]=me[j.name]??j.default}),de.value=!0},Y=()=>{Ue.value=-1,de.value=!1,F.value="info"},Fe=async()=>{if(r.tools[Ue.value].type==="api_tool"){Y();return}const O=[...r.tools];O[Ue.value].tool.params=re.value,await I(r.app_id,{tools:O.map(me=>({type:me.type,params:me.tool.params,provider_id:me.provider.id,tool_id:me.tool.name}))}),g("update:tools",O),Y()},L=async ve=>{const O=[...r.tools];O.splice(ve,1),await I(r.app_id,{tools:O.map(me=>({type:me.type,params:me.tool.params,provider_id:me.provider.id,tool_id:me.tool.name}))}),g("update:tools",O)},ze=async()=>{Ie.value=!0,await G(!0),await Se()},oe=async ve=>{const{scrollTop:O,scrollHeight:me,clientHeight:j}=ve.target;if(O+j>=me-10){if(R.value)return;await G()}},qe=async(ve,O)=>{let me={};if(ke.value==="api_tool"){const j=Q[ve],ye=j.tools[O];me={type:"api_tool",provider:{id:j.id,name:j.name,label:j.name,icon:j.icon,description:j.description},tool:{id:ye.name,name:ye.name,label:ye.name,description:ye.description,params:{}}}}else{const j=D.value[ve],ye=j.tools[O],bt=ye.params;me={type:"builtin_tool",provider:{id:j.name,name:j.name,label:j.label,icon:`${da}/builtin-tools/${j.name}/icon`,description:j.description},tool:{id:ye.name,name:ye.name,label:ye.label,description:ye.description,params:bt.reduce((ft,Nt)=>(ft[Nt.name]=Nt.default,ft),{})}}}if(r.tools.some(j=>j.provider.id===me.provider.id&&j.tool.name===me.tool.name)){const j=[...r.tools].filter(ye=>ye.provider.id!==me.provider.id&&ye.tool.name!==me.tool.name);await I(r.app_id,{tools:j.map(ye=>({type:ye.type,params:ye.tool.params,provider_id:ye.provider.id,tool_id:ye.tool.name}))}),g("update:tools",j);return}else{if(r.tools.length>=5){_n.warning("一个Agent应用最多关联5个扩展插件");return}const j=[...r.tools];j.push(me),await I(r.app_id,{tools:j.map(ye=>({type:ye.type,params:ye.tool.params,provider_id:ye.provider.id,tool_id:ye.tool.name}))}),g("update:tools",j)}},xe=(ve,O)=>r.tools.some(me=>me.provider.name===ve.name&&me.tool.name===O.name);return(ve,O)=>{const me=A("icon-plus"),j=A("a-button"),ye=A("a-avatar"),bt=A("icon-settings"),ft=A("icon-delete"),Nt=A("a-collapse-item"),Pt=A("icon-oblique-line"),Ut=A("icon-close"),Ce=A("icon-info-circle"),ct=A("a-tooltip"),wt=A("a-select"),zn=A("a-input"),dt=A("a-input-number"),en=A("a-radio"),_r=A("a-radio-group"),Ot=A("a-form-item"),_i=A("a-form"),vi=A("a-space"),tn=A("a-modal"),pt=A("router-link"),mn=A("icon-code"),Rn=A("icon-translate"),vr=A("icon-apps"),nn=A("a-empty"),mi=A("a-spin"),rn=A("a-col"),sn=A("a-row");return T(),U("div",Jv,[h(Nt,{key:"tools",class:"app-ability-item"},{header:x(()=>O[7]||(O[7]=[_("div",{class:"text-gray-700 font-bold"},"扩展插件",-1)])),extra:x(()=>[h(j,{size:"mini",type:"text",class:"!text-gray-700",onClick:Xn(ze,["stop"])},{icon:x(()=>[h(me)]),_:1})]),default:x(()=>[r.tools.length>0?(T(),U("div",jv,[(T(!0),U(Je,null,at(r.tools,(pe,je)=>(T(),U("div",{key:je,class:"flex items-center justify-between bg-white p-3 rounded-lg cursor-pointer hover:shadow-sm group"},[_("div",em,[h(ye,{size:36,shape:"square",class:"rounded flex-shrink-0","image-url":pe.provider.icon},null,8,["image-url"]),_("div",tm,[_("div",nm,ge(pe.provider.label)+" / "+ge(pe.tool.label),1),_("div",im,ge(pe.tool.description),1)])]),_("div",rm,[h(j,{loading:B(v)||B(q),size:"mini",type:"text",class:"!text-gray-700 rounded",onClick:async()=>await J(je)},{icon:x(()=>[h(bt)]),_:2},1032,["loading","onClick"]),h(j,{loading:B(y),size:"mini",type:"text",class:"!text-red-700 rounded",onClick:async()=>await L(je)},{icon:x(()=>[h(ft)]),_:2},1032,["loading","onClick"])])]))),128))])):(T(),U("div",sm," 插件能够让智能体调用外部 API，例如搜索信息、浏览网页、生成图片等，扩展智能体的能力和使用场景。 "))]),_:1}),h(tn,{visible:de.value,"hide-title":"",footer:!1,class:"tool-setting-modal","modal-class":"h-[calc(100vh-32px)] right-4",onCancel:Y},{default:x(()=>{var pe,je,Ze,Mt,On,kn,Dn,Ln,En,yi,xi,bi,Jn,jn;return[_("div",om,[_("div",lm,[_("div",am,[h(ye,{size:24,shape:"circle","image-url":(je=(pe=k.value)==null?void 0:pe.provider)==null?void 0:je.icon},null,8,["image-url"]),_("div",um,ge((Mt=(Ze=k.value)==null?void 0:Ze.tool)==null?void 0:Mt.label),1)]),_("div",fm,[h(Pt,{size:12})]),_("div",cm,[_("div",{class:xt(`text-gray-700 pt-1 cursor-pointer border-blue-700 hover:border-b-4 hover:font-bold transition-all ${F.value==="info"?"font-bold border-b-4":""}`),onClick:O[0]||(O[0]=it=>F.value="info")}," 信息 ",2),k.value.type==="builtin_tool"&&((Dn=(kn=(On=k.value)==null?void 0:On.tool)==null?void 0:kn.params)==null?void 0:Dn.length)>0?(T(),U("div",{key:0,class:xt(`text-gray-700 pt-1 cursor-pointer border-blue-700 hover:border-b-4 hover:font-bold transition-all ${F.value==="setting"?"font-bold border-b-4":""}`),onClick:O[1]||(O[1]=it=>F.value="setting")}," 设置 ",2)):we("",!0)])]),h(j,{size:"mini",type:"text",class:"!text-gray-700",onClick:Y},{icon:x(()=>[h(Ut)]),_:1})]),F.value==="info"?(T(),U("div",dm,[O[9]||(O[9]=_("div",{class:"text-gray-70 font-bold mb-1"},"工具描述",-1)),_("div",pm,ge((En=(Ln=k.value)==null?void 0:Ln.tool)==null?void 0:En.description),1),((bi=(xi=(yi=k.value)==null?void 0:yi.tool)==null?void 0:xi.inputs)==null?void 0:bi.length)>0?(T(),U("div",hm,[O[8]||(O[8]=_("div",{class:"flex items-center gap-2 my-4"},[_("div",{class:"text-xs font-bold text-gray-500"},"参数"),_("hr",{class:"flex-1"})],-1)),_("div",gm,[(T(!0),U(Je,null,at((jn=(Jn=k.value)==null?void 0:Jn.tool)==null?void 0:jn.inputs,it=>(T(),U("div",{key:it.name,class:"flex flex-col gap-2"},[_("div",_m,[_("div",vm,ge(it.name),1),_("div",mm,ge(B(s_)[it.type]),1),it.required?(T(),U("div",ym,"必填")):we("",!0)]),_("div",xm,ge(it.description),1)]))),128))])])):we("",!0)])):we("",!0),F.value==="setting"?(T(),U("div",bm,[h(_i,{model:re.value,"onUpdate:model":O[2]||(O[2]=it=>re.value=it),layout:"vertical",class:""},{default:x(()=>{var it,wi;return[(T(!0),U(Je,null,at((wi=(it=k.value)==null?void 0:it.tool)==null?void 0:wi.params,De=>(T(),$e(Ot,{field:De.name},{label:x(()=>[_("div",wm,[_("div",Sm,ge(De.label),1),De.required?(T(),U("div",Am,"*")):we("",!0),h(ct,{content:De.label},{default:x(()=>[h(Ce)]),_:2},1032,["content"])])]),default:x(()=>[De.type==="select"?(T(),$e(wt,{key:0,"default-value":De.default,"model-value":re.value[De.name],"onUpdate:modelValue":Ht=>re.value[De.name]=Ht,placeholder:"请输入参数值",options:De.options},null,8,["default-value","model-value","onUpdate:modelValue","options"])):we("",!0),De.type==="string"?(T(),$e(zn,{key:1,placeholder:"请输入参数值","model-value":re.value[De.name],"onUpdate:modelValue":Ht=>re.value[De.name]=Ht,"default-value":De.default},null,8,["model-value","onUpdate:modelValue","default-value"])):we("",!0),De.type==="number"?(T(),$e(dt,{key:2,placeholder:"请输入参数值","model-value":re.value[De.name],"onUpdate:modelValue":Ht=>re.value[De.name]=Ht,"default-value":De.default,min:De.min,max:De.max},null,8,["model-value","onUpdate:modelValue","default-value","min","max"])):we("",!0),De.type==="boolean"?(T(),$e(_r,{key:3,"model-value":re.value[De.name],"onUpdate:modelValue":Ht=>re.value[De.name]=Ht,"default-value":De.default},{default:x(()=>[h(en,{value:!0},{default:x(()=>O[10]||(O[10]=[fe("开启")])),_:1}),h(en,{value:!1},{default:x(()=>O[11]||(O[11]=[fe("关闭")])),_:1})]),_:2},1032,["model-value","onUpdate:modelValue","default-value"])):we("",!0)]),_:2},1032,["field"]))),256))]}),_:1},8,["model"])])):we("",!0),_("div",$m,[O[14]||(O[14]=_("div",{class:""},null,-1)),h(vi,{size:12},{default:x(()=>[h(j,{class:"rounded-lg",onClick:Y},{default:x(()=>O[12]||(O[12]=[fe("取消")])),_:1}),h(j,{loading:B(y),type:"primary",class:"rounded-lg",onClick:Fe},{default:x(()=>O[13]||(O[13]=[fe(" 保存 ")])),_:1},8,["loading"])]),_:1})])]}),_:1},8,["visible"]),h(tn,{visible:Ie.value,"onUpdate:visible":O[6]||(O[6]=pe=>Ie.value=pe),"hide-title":"",footer:!1,class:"tools-modal","modal-class":"right-4 h-[calc(100vh-32px)]"},{default:x(()=>[_("div",Tm,[_("div",Cm,[O[20]||(O[20]=_("div",{class:"text-gray-900 font-bold text-lg mb-4"},"添加插件",-1)),h(pt,{to:{name:"space-tools-list"}},{default:x(()=>[h(j,{long:"",type:"primary",class:"rounded-lg mb-5"},{default:x(()=>O[15]||(O[15]=[fe("创建自定义插件")])),_:1})]),_:1}),_("div",Im,[_("div",{class:xt(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${ke.value==="api_tool"?"text-blue-700 bg-white":"text-gray-700"}`),onClick:O[3]||(O[3]=pe=>ke.value="api_tool")},[h(mn),O[16]||(O[16]=fe(" 自定义插件 "))],2),_("div",{class:xt(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${ke.value==="builtin_tool"?"text-blue-700 bg-white":"text-gray-700"}`),onClick:O[4]||(O[4]=pe=>ke.value="builtin_tool")},[h(Rn),O[17]||(O[17]=fe(" 内置插件 "))],2)]),ke.value==="builtin_tool"?(T(),U("div",zm,[O[19]||(O[19]=_("div",{class:"text-xs text-gray-500 mb-3"},"类别",-1)),_("div",Rm,[_("div",{class:xt(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${E.value==="all"?"text-blue-700 bg-white":"text-gray-700"}`),onClick:O[5]||(O[5]=pe=>E.value="all")},[h(vr),O[18]||(O[18]=fe(" 全部 "))],2),(T(!0),U(Je,null,at(B(M),pe=>(T(),U("div",{key:pe.name,class:xt(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${E.value===pe.category?"text-blue-700 bg-white":" text-gray-700"}`),onClick:je=>E.value=pe.category},[_("span",{innerHTML:pe.icon},null,8,km),fe(" "+ge(pe.name),1)],10,Om))),128))])])):we("",!0)]),_("div",Dm,[_("div",Lm,[_("div",Em,ge(ke.value==="api_tool"?"自定义插件":"内置插件"),1),h(j,{size:"mini",type:"text",class:"!text-gray-700 ml-6"},{icon:x(()=>[h(Ut)]),_:1})]),ke.value==="builtin_tool"?(T(),U("div",Pm,[(T(!0),U(Je,null,at(D.value,(pe,je)=>(T(),U("div",{key:pe.name,class:"flex flex-col gap-3 mb-3"},[_("div",Um,ge(pe.label),1),_("div",Mm,[(T(!0),U(Je,null,at(pe.tools,(Ze,Mt)=>(T(),U("div",{key:Ze.name,class:xt(`flex items-center justify-between px-2 h-8 rounded-lg cursor-pointer hover:bg-gray-50 group ${xe(pe,Ze)?"bg-blue-50 border border-blue-700":""}`)},[_("div",Bm,[h(ye,{size:20,shape:"circle","image-url":`${B(da)}/builtin-tools/${pe.name}/icon`},null,8,["image-url"]),_("div",Wm,ge(Ze.label),1)]),h(j,{size:"mini",class:"hidden group-hover:block rounded px-1.5 flex-shrink-0",onClick:async()=>await qe(je,Mt)},{icon:x(()=>[h(me)]),default:x(()=>[fe(" "+ge(xe(pe,Ze)?"删除":"添加"),1)]),_:2},1032,["onClick"])],2))),128))])]))),128)),D.value.length===0?(T(),U("div",Fm,[h(nn,{description:"没有可用的内置插件",class:"h-[400px] flex flex-col items-center justify-center"})])):we("",!0)])):we("",!0),ke.value==="api_tool"?(T(),U("div",qm,[h(mi,{loading:B(R),class:"block h-[calc(100vh-130px)] overflow-scroll scrollbar-w-none",onScroll:oe},{default:x(()=>[(T(!0),U(Je,null,at(B(Q),(pe,je)=>(T(),U("div",{key:pe.id,class:"flex flex-col gap-3 mb-3"},[_("div",Nm,ge(pe.name),1),_("div",Hm,[(T(!0),U(Je,null,at(pe.tools,(Ze,Mt)=>(T(),U("div",{key:Ze.name,class:xt(`flex items-center justify-between px-2 h-8 rounded-lg cursor-pointer hover:bg-gray-50 group ${xe(pe,Ze)?"bg-blue-50 border border-blue-700":""}`)},[_("div",Gm,[h(ye,{size:20,shape:"circle","image-url":pe.icon},null,8,["image-url"]),_("div",Vm,ge(Ze.name),1)]),h(j,{size:"mini",class:"hidden group-hover:block rounded px-1.5 flex-shrink-0",onClick:async()=>await qe(je,Mt)},{icon:x(()=>[h(me)]),default:x(()=>[fe(" "+ge(xe(pe,Ze)?"删除":"添加"),1)]),_:2},1032,["onClick"])],2))),128))])]))),128)),B(Q).length===0?(T(),U("div",Km,[h(nn,{description:"没有可用的API插件",class:"h-[400px] flex flex-col items-center justify-center"})])):we("",!0),B(K).total_page>=2?(T(),$e(sn,{key:1},{default:x(()=>[B(K).current_page<=B(K).total_page?(T(),$e(rn,{key:0,span:24,class:"!text-center"},{default:x(()=>[h(vi,{class:"my-4"},{default:x(()=>[h(mi),O[21]||(O[21]=_("div",{class:"text-gray-400"},"加载中",-1))]),_:1})]),_:1})):(T(),$e(rn,{key:1,span:24,class:"!text-center"},{default:x(()=>O[22]||(O[22]=[_("div",{class:"text-gray-400 my-4"},"数据已加载完成",-1)])),_:1}))]),_:1})):we("",!0)]),_:1},8,["loading"])])):we("",!0)])])]),_:1},8,["visible"])])}}}),Zm={class:"flex flex-col h-[calc(100vh-141px)]"},Xm={class:"flex-1 overflow-scroll scrollbar-w-none"},Qm=ut({__name:"AgentAppAbility",props:{app_id:{type:String,default:"",required:!0},draft_app_config:{type:Object,required:!0}},emits:["update:draft_app_config"],setup(a,{emit:f}){const r=["tools","datasets","long_term_memory","opening","suggested_after_answer","review_config"];return(g,y)=>{const I=A("icon-down"),v=A("icon-right"),z=A("a-collapse");return T(),U("div",Zm,[y[7]||(y[7]=_("div",{class:"p-4 text-gray-700 font-bold"},"应用能力",-1)),_("div",Xm,[h(z,{bordered:!1,"default-active-key":r},{"expand-icon":x(({active:$})=>[$?(T(),$e(I,{key:0})):(T(),$e(v,{key:1}))]),default:x(()=>[h(Ym,{tools:a.draft_app_config.tools,"onUpdate:tools":y[0]||(y[0]=$=>a.draft_app_config.tools=$),app_id:a.app_id},null,8,["tools","app_id"]),h(Vv,{retrieval_config:a.draft_app_config.retrieval_config,"onUpdate:retrieval_config":y[1]||(y[1]=$=>a.draft_app_config.retrieval_config=$),datasets:a.draft_app_config.datasets,"onUpdate:datasets":y[2]||(y[2]=$=>a.draft_app_config.datasets=$),app_id:a.app_id},null,8,["retrieval_config","datasets","app_id"]),h(j_,{long_term_memory:a.draft_app_config.long_term_memory,"onUpdate:long_term_memory":y[3]||(y[3]=$=>a.draft_app_config.long_term_memory=$),app_id:a.app_id},null,8,["long_term_memory","app_id"]),h(lv,{opening_questions:a.draft_app_config.opening_questions,"onUpdate:opening_questions":y[4]||(y[4]=$=>a.draft_app_config.opening_questions=$),opening_statement:a.draft_app_config.opening_statement,"onUpdate:opening_statement":y[5]||(y[5]=$=>a.draft_app_config.opening_statement=$),app_id:a.app_id},null,8,["opening_questions","opening_statement","app_id"]),h(uv,{suggested_after_answer:a.draft_app_config.suggested_after_answer,"onUpdate:suggested_after_answer":y[6]||(y[6]=$=>a.draft_app_config.suggested_after_answer=$),app_id:a.app_id},null,8,["suggested_after_answer","app_id"]),h(Av,{review_config:a.draft_app_config.review_config,app_id:a.app_id},null,8,["review_config","app_id"])]),_:1})])])}}});function Jm(){var a=window.navigator.userAgent,f=a.indexOf("MSIE ");if(f>0)return parseInt(a.substring(f+5,a.indexOf(".",f)),10);var r=a.indexOf("Trident/");if(r>0){var g=a.indexOf("rv:");return parseInt(a.substring(g+3,a.indexOf(".",g)),10)}var y=a.indexOf("Edge/");return y>0?parseInt(a.substring(y+5,a.indexOf(".",y)),10):-1}let pr;function Os(){Os.init||(Os.init=!0,pr=Jm()!==-1)}var gr={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Os(),In(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const a=document.createElement("object");this._resizeObject=a,a.setAttribute("aria-hidden","true"),a.setAttribute("tabindex",-1),a.onload=this.addResizeHandlers,a.type="text/html",pr&&this.$el.appendChild(a),a.data="about:blank",pr||this.$el.appendChild(a)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!pr&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const jm=a_();o_("data-v-b329ee4c");const e0={class:"resize-observer",tabindex:"-1"};l_();const t0=jm((a,f,r,g,y,I)=>(T(),$e("div",e0)));gr.render=t0;gr.__scopeId="data-v-b329ee4c";gr.__file="src/components/ResizeObserver.vue";function hr(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hr=function(f){return typeof f}:hr=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},hr(a)}function n0(a,f){if(!(a instanceof f))throw new TypeError("Cannot call a class as a function")}function i0(a,f){for(var r=0;r<f.length;r++){var g=f[r];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(a,g.key,g)}}function r0(a,f,r){return i0(a.prototype,f),a}function ga(a){return s0(a)||o0(a)||l0(a)||a0()}function s0(a){if(Array.isArray(a))return ks(a)}function o0(a){if(typeof Symbol<"u"&&Symbol.iterator in Object(a))return Array.from(a)}function l0(a,f){if(a){if(typeof a=="string")return ks(a,f);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ks(a,f)}}function ks(a,f){(f==null||f>a.length)&&(f=a.length);for(var r=0,g=new Array(f);r<f;r++)g[r]=a[r];return g}function a0(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u0(a){var f;return typeof a=="function"?f={callback:a}:f=a,f}function f0(a,f){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},g,y,I,v=function($){for(var R=arguments.length,K=new Array(R>1?R-1:0),Q=1;Q<R;Q++)K[Q-1]=arguments[Q];if(I=K,!(g&&$===y)){var G=r.leading;typeof G=="function"&&(G=G($,y)),(!g||$!==y)&&G&&a.apply(void 0,[$].concat(ga(I))),y=$,clearTimeout(g),g=setTimeout(function(){a.apply(void 0,[$].concat(ga(I))),g=0},f)}};return v._clear=function(){clearTimeout(g),g=null},v}function wa(a,f){if(a===f)return!0;if(hr(a)==="object"){for(var r in a)if(!wa(a[r],f[r]))return!1;return!0}return!1}var c0=function(){function a(f,r,g){n0(this,a),this.el=f,this.observer=null,this.frozen=!1,this.createObserver(r,g)}return r0(a,[{key:"createObserver",value:function(r,g){var y=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=u0(r),this.callback=function(z,$){y.options.callback(z,$),z&&y.options.once&&(y.frozen=!0,y.destroyObserver())},this.callback&&this.options.throttle){var I=this.options.throttleOptions||{},v=I.leading;this.callback=f0(this.callback,this.options.throttle,{leading:function($){return v==="both"||v==="visible"&&$||v==="hidden"&&!$}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(z){var $=z[0];if(z.length>1){var R=z.find(function(Q){return Q.isIntersecting});R&&($=R)}if(y.callback){var K=$.isIntersecting&&$.intersectionRatio>=y.threshold;if(K===y.oldResult)return;y.oldResult=K,y.callback(K,$)}},this.options.intersection),In(function(){y.observer&&y.observer.observe(y.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),a}();function Sa(a,f,r){var g=f.value;if(g)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var y=new c0(a,g,r);a._vue_visibilityState=y}}function d0(a,f,r){var g=f.value,y=f.oldValue;if(!wa(g,y)){var I=a._vue_visibilityState;if(!g){Aa(a);return}I?I.createObserver(g,r):Sa(a,{value:g},r)}}function Aa(a){var f=a._vue_visibilityState;f&&(f.destroyObserver(),delete a._vue_visibilityState)}var p0={beforeMount:Sa,updated:d0,unmounted:Aa};function h0(a){return{all:a=a||new Map,on:function(f,r){var g=a.get(f);g&&g.push(r)||a.set(f,[r])},off:function(f,r){var g=a.get(f);g&&g.splice(g.indexOf(r)>>>0,1)},emit:function(f,r){(a.get(f)||[]).slice().map(function(g){g(r)}),(a.get("*")||[]).slice().map(function(g){g(f,r)})}}}var g0={itemsLimit:1e3},_0=/(auto|scroll)/;function $a(a,f){return a.parentNode===null?f:$a(a.parentNode,f.concat([a]))}var Rs=function(f,r){return getComputedStyle(f,null).getPropertyValue(r)},v0=function(f){return Rs(f,"overflow")+Rs(f,"overflow-y")+Rs(f,"overflow-x")},m0=function(f){return _0.test(v0(f))};function _a(a){if(a instanceof HTMLElement||a instanceof SVGElement){for(var f=$a(a.parentNode,[]),r=0;r<f.length;r+=1)if(m0(f[r]))return f[r];return document.scrollingElement||document.documentElement}}function Ds(a){"@babel/helpers - typeof";return Ds=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},Ds(a)}var Ta={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(f){return["vertical","horizontal"].includes(f)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function Ca(){return this.items.length&&Ds(this.items[0])!=="object"}var Ls=!1;if(typeof window<"u"){Ls=!1;try{var y0=Object.defineProperty({},"passive",{get:function(){Ls=!0}});window.addEventListener("test",null,y0)}catch{}}let x0=0;var Ps={name:"RecycleScroller",components:{ResizeObserver:gr},directives:{ObserveVisibility:p0},props:{...Ta,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const a={"-1":{accumulator:0}},f=this.items,r=this.sizeField,g=this.minItemSize;let y=1e4,I=0,v;for(let z=0,$=f.length;z<$;z++)v=f[z][r]||g,v<y&&(y=v),I+=v,a[z]={accumulator:I,size:v};return this.$_computedMinItemSize=y,a}return[]},simpleArray:Ca,itemIndexByKey(){const{keyField:a,items:f}=this,r={};for(let g=0,y=f.length;g<y;g++)r[f[g][a]]=g;return r}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const a=this.$_lastUpdateScrollPosition;typeof a=="number"&&this.$nextTick(()=>{this.scrollToPosition(a)})},beforeUnmount(){this.removeListeners()},methods:{addView(a,f,r,g,y){const I=u_({id:x0++,index:f,used:!0,key:g,type:y}),v=f_({item:r,position:0,nr:I});return a.push(v),v},unuseView(a,f=!1){const r=this.$_unusedViews,g=a.nr.type;let y=r.get(g);y||(y=[],r.set(g,y)),y.push(a),f||(a.nr.used=!1,a.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(a){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const f=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:r}=this.updateVisibleItems(!1,!0);r||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});f(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&f()},this.updateInterval))}},handleVisibilityChange(a,f){this.ready&&(a||f.boundingClientRect.width!==0||f.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(a,f=!1){const r=this.itemSize,g=this.gridItems||1,y=this.itemSecondarySize||r,I=this.$_computedMinItemSize,v=this.typeField,z=this.simpleArray?null:this.keyField,$=this.items,R=$.length,K=this.sizes,Q=this.$_views,G=this.$_unusedViews,q=this.pool,ne=this.itemIndexByKey;let N,M,ce,Se,de;if(!R)N=M=Se=de=ce=0;else if(this.$_prerender)N=Se=0,M=de=Math.min(this.prerender,$.length),ce=null;else{const E=this.getScroll();if(f){let Y=E.start-this.$_lastUpdateScrollPosition;if(Y<0&&(Y=-Y),r===null&&Y<I||Y<r)return{continuous:!0}}this.$_lastUpdateScrollPosition=E.start;const D=this.buffer;E.start-=D,E.end+=D;let J=0;if(this.$refs.before&&(J=this.$refs.before.scrollHeight,E.start-=J),this.$refs.after){const Y=this.$refs.after.scrollHeight;E.end+=Y}if(r===null){let Y,Fe=0,L=R-1,ze=~~(R/2),oe;do oe=ze,Y=K[ze].accumulator,Y<E.start?Fe=ze:ze<R-1&&K[ze+1].accumulator>E.start&&(L=ze),ze=~~((Fe+L)/2);while(ze!==oe);for(ze<0&&(ze=0),N=ze,ce=K[R-1].accumulator,M=ze;M<R&&K[M].accumulator<E.end;M++);for(M===-1?M=$.length-1:(M++,M>R&&(M=R)),Se=N;Se<R&&J+K[Se].accumulator<E.start;Se++);for(de=Se;de<R&&J+K[de].accumulator<E.end;de++);}else{N=~~(E.start/r*g);const Y=N%g;N-=Y,M=Math.ceil(E.end/r*g),Se=Math.max(0,Math.floor((E.start-J)/r*g)),de=Math.floor((E.end-J)/r*g),N<0&&(N=0),M>R&&(M=R),Se<0&&(Se=0),de>R&&(de=R),ce=Math.ceil(R/g)*r}}M-N>g0.itemsLimit&&this.itemsLimitError(),this.totalSize=ce;let F;const k=N<=this.$_endIndex&&M>=this.$_startIndex;if(k)for(let E=0,D=q.length;E<D;E++)F=q[E],F.nr.used&&(a&&(F.nr.index=ne[F.item[z]]),(F.nr.index==null||F.nr.index<N||F.nr.index>=M)&&this.unuseView(F));const Ue=k?null:new Map;let re,Ie,ke;for(let E=N;E<M;E++){re=$[E];const D=z?re[z]:re;if(D==null)throw new Error(`Key is ${D} on item (keyField is '${z}')`);if(F=Q.get(D),!r&&!K[E].size){F&&this.unuseView(F);continue}Ie=re[v];let J=G.get(Ie),Y=!1;if(!F)k?J&&J.length?F=J.pop():F=this.addView(q,E,re,D,Ie):(ke=Ue.get(Ie)||0,(!J||ke>=J.length)&&(F=this.addView(q,E,re,D,Ie),this.unuseView(F,!0),J=G.get(Ie)),F=J[ke],Ue.set(Ie,ke+1)),Q.delete(F.nr.key),F.nr.used=!0,F.nr.index=E,F.nr.key=D,F.nr.type=Ie,Q.set(D,F),Y=!0;else if(!F.nr.used&&(F.nr.used=!0,Y=!0,J)){const Fe=J.indexOf(F);Fe!==-1&&J.splice(Fe,1)}F.item=re,Y&&(E===$.length-1&&this.$emit("scroll-end"),E===0&&this.$emit("scroll-start")),r===null?(F.position=K[E-1].accumulator,F.offset=0):(F.position=Math.floor(E/g)*r,F.offset=E%g*y)}return this.$_startIndex=N,this.$_endIndex=M,this.emitUpdate&&this.$emit("update",N,M,Se,de),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:k}},getListenerTarget(){let a=_a(this.$el);return window.document&&(a===window.document.documentElement||a===window.document.body)&&(a=window),a},getScroll(){const{$el:a,direction:f}=this,r=f==="vertical";let g;if(this.pageMode){const y=a.getBoundingClientRect(),I=r?y.height:y.width;let v=-(r?y.top:y.left),z=r?window.innerHeight:window.innerWidth;v<0&&(z+=v,v=0),v+z>I&&(z=I-v),g={start:v,end:v+z}}else r?g={start:a.scrollTop,end:a.scrollTop+a.clientHeight}:g={start:a.scrollLeft,end:a.scrollLeft+a.clientWidth};return g},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,Ls?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(a){let f;const r=this.gridItems||1;this.itemSize===null?f=a>0?this.sizes[a-1].accumulator:0:f=Math.floor(a/r)*this.itemSize,this.scrollToPosition(f)},scrollToPosition(a){const f=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let r,g,y;if(this.pageMode){const I=_a(this.$el),v=I.tagName==="HTML"?0:I[f.scroll],z=I.getBoundingClientRect(),R=this.$el.getBoundingClientRect()[f.start]-z[f.start];r=I,g=f.scroll,y=a+v+R}else r=this.$el,g=f.scroll,y=a;r[g]=y},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((a,f)=>a.nr.index-f.nr.index)}}};const b0={key:0,ref:"before",class:"vue-recycle-scroller__slot"},w0={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function S0(a,f,r,g,y,I){const v=A("ResizeObserver"),z=c_("observe-visibility");return Es((T(),U("div",{class:xt(["vue-recycle-scroller",{ready:y.ready,"page-mode":r.pageMode,[`direction-${a.direction}`]:!0}]),onScrollPassive:f[0]||(f[0]=(...$)=>I.handleScroll&&I.handleScroll(...$))},[a.$slots.before?(T(),U("div",b0,[gn(a.$slots,"before")],512)):we("v-if",!0),(T(),$e(pa(r.listTag),{ref:"wrapper",style:p_({[a.direction==="vertical"?"minHeight":"minWidth"]:y.totalSize+"px"}),class:xt(["vue-recycle-scroller__item-wrapper",r.listClass])},{default:x(()=>[(T(!0),U(Je,null,at(y.pool,$=>(T(),$e(pa(r.itemTag),xa({key:$.nr.id,style:y.ready?{transform:`translate${a.direction==="vertical"?"Y":"X"}(${$.position}px) translate${a.direction==="vertical"?"X":"Y"}(${$.offset}px)`,width:r.gridItems?`${a.direction==="vertical"&&r.itemSecondarySize||r.itemSize}px`:void 0,height:r.gridItems?`${a.direction==="horizontal"&&r.itemSecondarySize||r.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[r.itemClass,{hover:!r.skipHover&&y.hoverKey===$.nr.key}]]},d_(r.skipHover?{}:{mouseenter:()=>{y.hoverKey=$.nr.key},mouseleave:()=>{y.hoverKey=null}})),{default:x(()=>[gn(a.$slots,"default",{item:$.item,index:$.nr.index,active:$.nr.used})]),_:2},1040,["style","class"]))),128)),gn(a.$slots,"empty")]),_:3},8,["style","class"])),a.$slots.after?(T(),U("div",w0,[gn(a.$slots,"after")],512)):we("v-if",!0),h(v,{onNotify:I.handleResize},null,8,["onNotify"])],34)),[[z,I.handleVisibilityChange]])}Ps.render=S0;Ps.__file="src/components/RecycleScroller.vue";var Us={name:"DynamicScroller",components:{RecycleScroller:Ps},provide(){return typeof ResizeObserver<"u"&&(this.$_resizeObserver=new ResizeObserver(a=>{requestAnimationFrame(()=>{if(Array.isArray(a)){for(const f of a)if(f.target&&f.target.$_vs_onResize){let r,g;if(f.borderBoxSize){const y=f.borderBoxSize[0];r=y.inlineSize,g=y.blockSize}else r=f.contentRect.width,g=f.contentRect.height;f.target.$_vs_onResize(f.target.$_vs_id,r,g)}}})})),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},inheritAttrs:!1,props:{...Ta,minItemSize:{type:[Number,String],required:!0}},emits:["resize","visible"],data(){return{vscrollData:{active:!0,sizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray:Ca,itemsWithSize(){const a=[],{items:f,keyField:r,simpleArray:g}=this,y=this.vscrollData.sizes,I=f.length;for(let v=0;v<I;v++){const z=f[v],$=g?v:z[r];let R=y[$];typeof R>"u"&&!this.$_undefinedMap[$]&&(R=0),a.push({item:z,id:$,size:R})}return a}},watch:{items(){this.forceUpdate()},simpleArray:{handler(a){this.vscrollData.simpleArray=a},immediate:!0},direction(a){this.forceUpdate(!0)},itemsWithSize(a,f){const r=this.$el.scrollTop;let g=0,y=0;const I=Math.min(a.length,f.length);for(let z=0;z<I&&!(g>=r);z++)g+=f[z].size||this.minItemSize,y+=a[z].size||this.minItemSize;const v=y-g;v!==0&&(this.$el.scrollTop+=v)}},beforeCreate(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={},this.$_events=h0()},activated(){this.vscrollData.active=!0},deactivated(){this.vscrollData.active=!1},unmounted(){this.$_events.all.clear()},methods:{onScrollerResize(){this.$refs.scroller&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible(){this.$_events.emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate(a=!1){(a||this.simpleArray)&&(this.vscrollData.sizes={}),this.$_events.emit("vscroll:update",{force:!0})},scrollToItem(a){const f=this.$refs.scroller;f&&f.scrollToItem(a)},getItemSize(a,f=void 0){const r=this.simpleArray?f??this.items.indexOf(a):a[this.keyField];return this.vscrollData.sizes[r]||0},scrollToBottom(){if(this.$_scrollingToBottom)return;this.$_scrollingToBottom=!0;const a=this.$el;this.$nextTick(()=>{a.scrollTop=a.scrollHeight+5e3;const f=()=>{a.scrollTop=a.scrollHeight+5e3,requestAnimationFrame(()=>{a.scrollTop=a.scrollHeight+5e3,this.$_undefinedSizes===0?this.$_scrollingToBottom=!1:requestAnimationFrame(f)})};requestAnimationFrame(f)})}}};function A0(a,f,r,g,y,I){const v=A("RecycleScroller");return T(),$e(v,xa({ref:"scroller",items:I.itemsWithSize,"min-item-size":r.minItemSize,direction:a.direction,"key-field":"id","list-tag":a.listTag,"item-tag":a.itemTag},a.$attrs,{onResize:I.onScrollerResize,onVisible:I.onScrollerVisible}),{default:x(({item:z,index:$,active:R})=>[gn(a.$slots,"default",h_(g_({item:z.item,index:$,active:R,itemWithSize:z})))]),before:x(()=>[gn(a.$slots,"before")]),after:x(()=>[gn(a.$slots,"after")]),empty:x(()=>[gn(a.$slots,"empty")]),_:3},16,["items","min-item-size","direction","list-tag","item-tag","onResize","onVisible"])}Us.render=A0;Us.__file="src/components/DynamicScroller.vue";var Ia={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},emits:["resize"],computed:{id(){if(this.vscrollData.simpleArray)return this.index;if(this.vscrollData.keyField in this.item)return this.item[this.vscrollData.keyField];throw new Error(`keyField '${this.vscrollData.keyField}' not found in your item. You should set a valid keyField prop on your Scroller`)},size(){return this.vscrollData.sizes[this.id]||0},finalActive(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id(a,f){if(this.$el.$_vs_id=this.id,this.size||this.onDataUpdate(),this.$_sizeObserved){const r=this.vscrollData.sizes[f],g=this.vscrollData.sizes[a];r!=null&&r!==g&&this.applySize(r)}},finalActive(a){this.size||(a?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?a?this.observeSize():this.unobserveSize():a&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created(){if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){for(const a in this.sizeDependencies)this.$watch(()=>this.sizeDependencies[a],this.onDataUpdate);this.vscrollParent.$_events.on("vscroll:update",this.onVscrollUpdate)}},mounted(){this.finalActive&&(this.updateSize(),this.observeSize())},beforeUnmount(){this.vscrollParent.$_events.off("vscroll:update",this.onVscrollUpdate),this.unobserveSize()},methods:{updateSize(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData(){this.watchData&&!this.vscrollResizeObserver?this.$_watchData=this.$watch("item",()=>{this.onDataUpdate()},{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate({force:a}){!this.finalActive&&a&&(this.$_pendingVScrollUpdate=this.id),(this.$_forceNextVScrollUpdate===this.id||a||!this.size)&&this.updateSize()},onDataUpdate(){this.updateSize()},computeSize(a){this.$nextTick(()=>{if(this.id===a){const f=this.$el.offsetWidth,r=this.$el.offsetHeight;this.applyWidthHeight(f,r)}this.$_pendingSizeUpdate=null})},applyWidthHeight(a,f){const r=~~(this.vscrollParent.direction==="vertical"?f:a);r&&this.size!==r&&this.applySize(r)},applySize(a){this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.vscrollData.sizes[this.id]=a,this.emitResize&&this.$emit("resize",this.id)},observeSize(){this.vscrollResizeObserver&&(this.$_sizeObserved||(this.vscrollResizeObserver.observe(this.$el),this.$el.$_vs_id=this.id,this.$el.$_vs_onResize=this.onResize,this.$_sizeObserved=!0))},unobserveSize(){this.vscrollResizeObserver&&this.$_sizeObserved&&(this.vscrollResizeObserver.unobserve(this.$el),this.$el.$_vs_onResize=void 0,this.$_sizeObserved=!1)},onResize(a,f,r){this.id===a&&this.applyWidthHeight(f,r)}},render(){return __(this.tag,this.$slots.default())}};Ia.__file="src/components/DynamicScrollerItem.vue";const $0={class:"flex gap-2"},T0={class:"flex flex-col items-start gap-2"},C0={class:"text-gray-700 font-bold"},I0={class:"bg-blue-100 border border-blue-200 text-gray-700 px-4 py-3 rounded-2xl break-all"},z0=ut({__name:"HumanMessage",props:{account:{type:Object,default:{},required:!0},query:{type:String,default:"",required:!0}},setup(a){const f=a;return(r,g)=>{var I,v;const y=A("a-avatar");return T(),U("div",$0,[h(y,{size:30,shape:"circle",class:"flex-shrink-0","image-url":(I=f.account)==null?void 0:I.avatar},null,8,["image-url"]),_("div",T0,[_("div",C0,ge((v=f.account)==null?void 0:v.name),1),_("div",I0,ge(f.query),1)])])}}}),R0={},O0={class:"h-5 w-5 flex items-center justify-center"};function k0(a,f){return T(),U("div",O0,f[0]||(f[0]=[_("div",{class:"dot-flashing text"},null,-1)]))}const D0=v_(R0,[["render",k0],["__scopeId","data-v-69ca6368"]]),L0={class:"flex items-center gap-2"},E0={class:""},P0={key:0,class:"text-gray-700"},U0={key:1,class:"text-gray-700"},M0={key:2,class:"text-gray-700"},B0={key:3,class:"text-gray-700"},W0={key:4,class:"text-gray-700"},F0={class:"text-gray-500"},q0={key:0,class:"text-xs text-gray-500 line-clamp-4 break-all"},N0={key:1,class:"text-xs text-gray-500 line-clamp-4 break-all"},H0=ut({__name:"AgentThought",props:{loading:{type:Boolean,default:!1,required:!0},agent_thoughts:{type:Array,default:[],required:!0}},setup(a){const f=a,r=ae(!1);return(g,y)=>{const I=A("icon-list"),v=A("icon-loading"),z=A("icon-up"),$=A("icon-down"),R=A("icon-file"),K=A("icon-language"),Q=A("icon-storage"),G=A("icon-tool"),q=A("icon-message"),ne=A("a-collapse-item"),N=A("a-collapse");return T(),U("div",{class:xt(`flex flex-col rounded-2xl border ${r.value?"w-[320px]":"w-[180px]"}`)},[_("div",{class:xt(`flex items-center justify-between h-10 rounded-2xl bg-gray-100 px-4 text-gray-700 cursor-pointer w-auto ${r.value?"rounded-bl-none rounded-br-none":""}`),onClick:y[0]||(y[0]=M=>r.value=!r.value)},[_("div",L0,[h(I),fe(" "+ge(r.value?"隐藏":"显示")+"运行流程 ",1)]),_("div",E0,[f.loading?(T(),$e(v,{key:0})):(T(),U(Je,{key:1},[r.value?(T(),$e(z,{key:0})):(T(),$e($,{key:1}))],64))])],2),r.value?(T(),$e(N,{key:0,class:"agent-thought","destroy-on-hide":"",bordered:!1},{default:x(()=>[(T(!0),U(Je,null,at(f.agent_thoughts.filter(M=>[B(Ye).longTermMemoryRecall,B(Ye).agentThought,B(Ye).datasetRetrieval,B(Ye).agentAction,B(Ye).agentMessage].includes(M.event)),M=>(T(),$e(ne,{key:M.id},{"expand-icon":x(()=>[M.event===B(Ye).longTermMemoryRecall?(T(),$e(R,{key:0})):M.event===B(Ye).agentThought?(T(),$e(K,{key:1})):M.event===B(Ye).datasetRetrieval?(T(),$e(Q,{key:2})):M.event===B(Ye).agentAction?(T(),$e(G,{key:3})):M.event===B(Ye).agentMessage?(T(),$e(q,{key:4})):we("",!0)]),header:x(()=>[M.event===B(Ye).longTermMemoryRecall?(T(),U("div",P0," 长期记忆召回 ")):we("",!0),M.event===B(Ye).agentThought?(T(),U("div",U0," 智能体推理 ")):we("",!0),M.event===B(Ye).datasetRetrieval?(T(),U("div",M0," 搜索知识库 ")):we("",!0),M.event===B(Ye).agentAction?(T(),U("div",B0," 调用工具 ")):we("",!0),M.event===B(Ye).agentMessage?(T(),U("div",W0," 智能体消息 ")):we("",!0)]),extra:x(()=>[_("div",F0,ge(M.latency.toFixed(2))+"s",1)]),default:x(()=>[["agent_thought","agent_message"].includes(M.event)?(T(),U("div",q0,ge(M.thought||"-"),1)):(T(),U("div",N0,ge(M.observation||"-"),1))]),_:2},1024))),128))]),_:1})):we("",!0)],2)}}}),G0={class:"flex gap-2"},V0={class:"flex flex-col items-start gap-2"},K0={class:"text-gray-700 font-bold"},Y0={class:"bg-gray-100 border border-gray-200 text-gray-700 px-4 py-3 rounded-2xl break-all"},Z0=ut({__name:"AiMessage",props:{app:{type:Object,default:{},required:!0},answer:{type:String,default:"",required:!0},loading:{type:Boolean,default:!1,required:!1},agent_thoughts:{type:Array,default:[],required:!0}},setup(a){const f=a;return(r,g)=>{var I,v;const y=A("a-avatar");return T(),U("div",G0,[h(y,{size:30,shape:"circle",class:"flex-shrink-0","image-url":(I=f.app)==null?void 0:I.icon},null,8,["image-url"]),_("div",V0,[_("div",K0,ge((v=f.app)==null?void 0:v.name),1),h(H0,{agent_thoughts:f.agent_thoughts,loading:f.loading},null,8,["agent_thoughts","loading"]),_("div",Y0,[f.loading&&f.answer.trim()===""?(T(),$e(D0,{key:0})):(T(),U(Je,{key:1},[fe(ge(f.answer),1)],64))])])])}}}),X0={class:""},Q0={key:0,class:"flex flex-col px-6 h-[calc(100vh-238px)]"},J0={class:"flex flex-col gap-6 py-6"},j0={key:0,class:"h-[50px] flex items-center justify-center"},e1={key:1,class:"flex flex-col p-6 gap-2 items-center justify-center h-[calc(100vh-238px)]"},t1={class:"flex flex-col items-center gap-2"},n1={class:"text-lg text-gray-700"},i1={key:0,class:"bg-gray-100 w-full px-4 py-3 rounded-lg text-gray-700"},r1={class:"flex items-center flex-wrap gap-2 w-full"},s1=["onClick"],o1={class:"w-full flex flex-col flex-shrink-0"},l1={class:"px-6 flex items-center gap-4"},a1={class:"h-[50px] flex items-center gap-2 px-4 flex-1 border border-gray-200 rounded-full"},u1=ut({__name:"PreviewDebugChat",props:{app:{type:Object,default:{},required:!0},opening_statement:{type:String,default:"",required:!0},opening_questions:{type:Array,default:[],required:!0}},setup(a){const f=ba(),r=a,g=ae(""),y=ae(""),I=ae(""),v=ae(null),z=ae(0),$=m_(),{loading:R,handleDeleteDebugConversation:K}=w_(),{loading:Q,messages:G,paginator:q,loadDebugConversationMessages:ne}=S_(),{loading:N,handleDebugChat:M}=A_(),{loading:ce,handleStopDebugChat:Se}=$_(),{suggested_questions:de,handleGenerateSuggestedQuestions:F}=E_(),k=()=>{z.value=v.value.$el.scrollHeight},Ue=()=>{v.value.$el.scrollTop=v.value.$el.scrollHeight-z.value},re=async E=>{var J;const{scrollTop:D}=E.target;D<=0&&!Q.value&&(k(),await ne((J=f.params)==null?void 0:J.app_id,!1),Ue())},Ie=async()=>{var J;if(g.value.trim()===""){_n.warning("用户提问不能为空");return}if(N.value){_n.warning("上一次提问还未结束，请稍等");return}de.value=[],y.value="",I.value="",G.value.unshift({id:"",conversation_id:"",query:g.value,answer:"",total_token_count:0,latency:0,agent_thoughts:[],created_at:0});let E=0;const D=g.value;g.value="",await M((J=r.app)==null?void 0:J.id,D,Y=>{var qe;const Fe=Y==null?void 0:Y.event,L=Y==null?void 0:Y.data,ze=L==null?void 0:L.id,oe=G.value[0].agent_thoughts;if(y.value===""&&(L!=null&&L.message_id)&&(I.value=L==null?void 0:L.task_id,y.value=L==null?void 0:L.message_id,G.value[0].id=L==null?void 0:L.message_id,G.value[0].conversation_id=L==null?void 0:L.conversation_id),Fe!==Ye.ping){if(Fe===Ye.agentMessage){const xe=oe.findIndex(ve=>(ve==null?void 0:ve.id)===ze);xe===-1?(E+=1,oe.push({id:ze,position:E,event:L==null?void 0:L.event,thought:L==null?void 0:L.thought,observation:L==null?void 0:L.observation,tool:L==null?void 0:L.tool,tool_input:L==null?void 0:L.tool_input,latency:L==null?void 0:L.latency,created_at:0})):oe[xe]={...oe[xe],thought:((qe=oe[xe])==null?void 0:qe.thought)+(L==null?void 0:L.thought),latency:L==null?void 0:L.latency},G.value[0].answer+=L==null?void 0:L.thought}else E+=1,oe.push({id:ze,position:E,event:L==null?void 0:L.event,thought:L==null?void 0:L.thought,observation:L==null?void 0:L.observation,tool:L==null?void 0:L.tool,tool_input:L==null?void 0:L.tool_input,latency:L==null?void 0:L.latency,created_at:0});G.value[0].agent_thoughts=oe,v.value.scrollToBottom()}})},ke=async()=>{var E;I.value===""||!N.value||await Se((E=r.app)==null?void 0:E.id,I.value)};return ya(async()=>{var E;await ne((E=f.params)==null?void 0:E.app_id,!0),await In(()=>{v.value&&v.value.scrollToBottom()})}),(E,D)=>{var oe,qe;const J=A("icon-poweroff"),Y=A("a-button"),Fe=A("a-avatar"),L=A("icon-empty"),ze=A("icon-send");return T(),U("div",X0,[B(G).length>0?(T(),U("div",Q0,[h(B(Us),{ref_key:"scroller",ref:v,items:B(G).slice().reverse(),"min-item-size":1,onScroll:re,class:"h-full scrollbar-w-none"},{default:x(({item:xe,index:ve,active:O})=>[h(B(Ia),{item:xe,active:O,"data-index":xe.id},{default:x(()=>[_("div",J0,[h(z0,{query:xe.query,account:B($).account},null,8,["query","account"]),h(Z0,{agent_thoughts:xe.agent_thoughts,answer:xe.answer,app:r.app,loading:xe.id===y.value&&B(N)},null,8,["agent_thoughts","answer","app","loading"])])]),_:2},1032,["item","active","data-index"])]),_:1},8,["items"]),I.value&&B(N)?(T(),U("div",j0,[h(Y,{loading:B(ce),class:"rounded-lg px-2",onClick:ke},{icon:x(()=>[h(J)]),default:x(()=>[D[2]||(D[2]=fe(" 停止响应 "))]),_:1},8,["loading"])])):we("",!0)])):(T(),U("div",e1,[_("div",t1,[h(Fe,{size:48,shape:"square",class:"rounded-lg","image-url":(oe=r.app)==null?void 0:oe.icon},null,8,["image-url"]),_("div",n1,ge((qe=r.app)==null?void 0:qe.name),1)]),r.opening_statement?(T(),U("div",i1,ge(r.opening_statement),1)):we("",!0),_("div",r1,[(T(!0),U(Je,null,at(r.opening_questions.filter(xe=>xe.trim()!==""),(xe,ve)=>(T(),U("div",{key:ve,class:"px-4 py-1.5 border rounded-lg text-gray-700 cursor-pointer hover:bg-gray-50",onClick:async()=>{g.value=xe,await Ie()}},ge(xe),9,s1))),128))])])),_("div",o1,[_("div",l1,[h(Y,{loading:B(R),class:"flex-shrink-0 !text-gray-700",type:"text",shape:"circle",onClick:D[0]||(D[0]=async()=>{var xe,ve;await ke(),await B(K)((xe=r.app)==null?void 0:xe.id),await B(ne)((ve=r.app)==null?void 0:ve.id,!0)})},{icon:x(()=>[h(L,{size:16})]),_:1},8,["loading"]),_("div",a1,[Es(_("input",{"onUpdate:modelValue":D[1]||(D[1]=xe=>g.value=xe),type:"text",class:"flex-1 outline-0",onKeyup:y_(Ie,["enter"])},null,544),[[va,g.value]]),h(Y,{loading:B(N),type:"text",shape:"circle",class:"!text-gray-700",onClick:Ie},{icon:x(()=>[h(ze,{size:16})]),_:1},8,["loading"])])]),D[3]||(D[3]=_("div",{class:"text-center text-gray-500 text-xs py-4"}," 内容由AI生成，无法确保真实准确，仅供参考 ",-1))])])}}}),f1={class:"flex-1 w-full min-h-0 bg-white"},c1={class:"flex-1 grid grid-cols-[26fr_14fr] h-full w-full"},d1={class:"bg-gray-50 flex flex-col h-full"},p1={class:"grid grid-cols-[13fr_13fr] overflow-hidden h-[calc(100vh-141px)]"},h1={class:"border-r py-4"},g1={class:"min-w-[404px]"},w1=ut({__name:"DetailView",props:{app:{type:Object,default:{},required:!0}},setup(a){var I;const f=ba(),r=a,{draftAppConfigForm:g,loadDraftAppConfig:y}=T_((I=f.params)==null?void 0:I.app_id);return vn(),(v,z)=>{var $,R,K;return T(),U("div",f1,[_("div",c1,[_("div",d1,[z[1]||(z[1]=_("div",{class:"flex items-center h-16 border-b p-4"},[_("div",{class:"text-lg text-gray-700"},"应用编排")],-1)),_("div",p1,[_("div",h1,[h(G_,{preset_prompt:B(g).preset_prompt,"onUpdate:preset_prompt":z[0]||(z[0]=Q=>B(g).preset_prompt=Q),app_id:($=B(f).params)==null?void 0:$.app_id},null,8,["preset_prompt","app_id"])]),h(Qm,{draft_app_config:B(g),app_id:(R=B(f).params)==null?void 0:R.app_id},null,8,["draft_app_config","app_id"])])]),_("div",g1,[h(Q_,{app_id:(K=B(f).params)==null?void 0:K.app_id,long_term_memory:B(g).long_term_memory},null,8,["app_id","long_term_memory"]),h(u1,{opening_questions:B(g).opening_questions,opening_statement:B(g).opening_statement,app:r.app},null,8,["opening_questions","opening_statement","app"])])])])}}});export{w1 as default};
