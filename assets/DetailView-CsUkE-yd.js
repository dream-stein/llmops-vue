import{I as e_,D as t_,b as oe,d as vt,o as R,f as M,g as _,h,w as b,t as _e,u as N,c as Be,a as de,i as Le,J as ga,K as n_,s as Yn,r as C,L as i_,N as Zn,n as _a,F as st,q as _t,O as Cn,P as fr,e as cr,y as Lt,m as Xn,p as va,v as r_,Q as fa,R as s_,S as o_,T as l_,U as a_,V as u_,W as f_,B as hn,X as ca,Y as ma,Z as c_,A as d_,$ as p_,a0 as h_,a1 as g_,_ as __,a2 as v_,j as ya}from"./index-Dskj8Wgr.js";import{e as gn,f as m_,g as y_,h as x_,i as b_,j as w_,k as S_,l as A_}from"./use-app-vMp1hffM.js";import{u as $_}from"./use-dataset-g9NYFMs4.js";import{b as C_,a as T_}from"./api-tools-X0YIgoWE.js";import{g as I_,b as z_,a as R_}from"./builtin-tool-6PjaXNsx.js";import"./dataset-D2QEjQKL.js";const O_=(a,f)=>e_("/ai/optimize-prompt",{body:{prompt:a}},f),D_=a=>t_("/ai/suggested-questions",{body:a}),L_=()=>{const a=oe(!1),f=oe([]);return{loading:a,suggested_questions:f,handleGenerateSuggestedQuestions:async g=>{try{a.value=!0;const y=await D_(g);f.value=y.data}finally{a.value=!1}}}},E_=()=>{const a=oe(!1),f=oe("");return{loading:a,optimize_prompt:f,handleOptimizePrompt:async g=>{try{a.value=!0,f.value="",await O_(g,y=>{const T=y.data;f.value+=T==null?void 0:T.optimize_prompt})}finally{a.value=!1}}}},k_={class:"flex flex-col h-[calc(100vh-173px)]"},P_={class:"flex items-center justify-between px-4 mb-4"},U_={class:"flex flex-col"},M_={key:0,class:"mb-4 flex flex-col"},B_={class:"max-h-[321px] overflow-scroll scrollbar-w-none mb-2 text-gray-700 whitespace-pre-line"},W_={class:""},F_={class:"h-[50px] flex items-center gap-2 px-4 flex-1 border border-gray-200 rounded-full"},q_={class:"flex-1"},N_=vt({__name:"PresetPromptTextarea",props:{app_id:{type:String,required:!0},preset_prompt:{type:String,required:!0}},emits:["update:preset_prompt"],setup(a,{emit:f}){const r=a,g=f,y=oe(!1),T=oe(""),{handleUpdateDraftAppConfig:m}=gn(),{loading:I,optimize_prompt:A,handleOptimizePrompt:O}=E_(),K=()=>{if(A.value.trim()===""){Yn.warning("优化prompt为空，请重新生成");return}g("update:preset_prompt",A.value),m(r.app_id,{preset_prompt:A.value}),y.value=!1},Y=async()=>{if(T.value.trim()===""){Yn.warning("原始prompt不能为空");return}await O(A.value)};return(Z,B)=>{const le=C("icon-sync"),F=C("a-button"),q=C("a-space"),ae=C("icon-send"),ye=C("a-card"),ue=C("a-trigger"),k=C("a-textarea");return R(),M("div",k_,[_("div",P_,[B[8]||(B[8]=_("div",{class:"text-gray-700 font-bold"},"人设与回复逻辑",-1)),h(ue,{"popup-visible":y.value,"onUpdate:popupVisible":B[2]||(B[2]=z=>y.value=z),trigger:["click"],position:"bl","popup-translate":[0,8]},{content:b(()=>[h(ye,{class:"rounded-lg w-[422px]"},{default:b(()=>[_("div",U_,[T.value?(R(),M("div",M_,[_("div",B_,_e(N(A)),1),N(I)?Le("",!0):(R(),Be(q,{key:0},{default:b(()=>[h(F,{size:"small",type:"primary",class:"rounded-lg",onClick:K},{default:b(()=>B[6]||(B[6]=[de(" 替换 ")])),_:1}),h(F,{size:"small",class:"rounded-lg",onClick:B[0]||(B[0]=z=>y.value=!1)},{default:b(()=>B[7]||(B[7]=[de("退出")])),_:1})]),_:1}))])):Le("",!0),_("div",W_,[_("div",F_,[ga(_("input",{"onUpdate:modelValue":B[1]||(B[1]=z=>T.value=z),type:"text",class:"flex-1 outline-0",placeholder:"你希望如何编写或优化提示词"},null,512),[[n_,T.value]]),h(F,{loading:N(I),type:"text",shape:"circle",onClick:Y},{icon:b(()=>[h(ae,{size:16,class:"!text-blue-700"})]),_:1},8,["loading"])])])])]),_:1})]),default:b(()=>[h(F,{size:"mini",class:"rounded-lg px-2"},{icon:b(()=>[h(le)]),default:b(()=>[B[5]||(B[5]=de(" 优化 "))]),_:1})]),_:1},8,["popup-visible"])]),_("div",q_,[h(k,{class:"h-full resize-none !bg-transparent !border-0 text-gray-700 px-1 preset-prompt-textarea",placeholder:"请在这里输入Agent的人设与回复逻辑(预设prompt)","max-length":2e3,"show-word-limit":"","model-value":r.preset_prompt,"onUpdate:modelValue":B[3]||(B[3]=z=>g("update:preset_prompt",z)),onBlur:B[4]||(B[4]=async()=>{await N(m)(r.app_id,{preset_prompt:r.preset_prompt})})},null,8,["model-value"])])])}}}),H_={class:""},G_={class:"flex items-center justify-between border-b h-[64px] px-4"},V_={class:"flex items-center justify-between"},K_={class:"pt-6"},Y_={class:"flex items-center justify-between"},Z_=vt({__name:"PreviewDebugHeader",props:{app_id:{type:String,required:!0},long_term_memory:{type:Object,required:!0}},setup(a){const f=a,{debug_conversation_summary:r,loadDebugConversationSummary:g}=m_(),{loading:y,handleUpdateDebugConversationSummary:T}=y_(),m=oe(!1),I=async()=>{await g(f.app_id),m.value=!0};return(A,O)=>{var q;const K=C("icon-save"),Y=C("a-button"),Z=C("icon-close"),B=C("a-textarea"),le=C("a-space"),F=C("a-modal");return R(),M("div",H_,[_("div",G_,[O[6]||(O[6]=_("div",{class:"text-lg text-gray-700"},"预览与调试",-1)),h(Y,{disabled:!((q=f.long_term_memory)!=null&&q.enable),size:"mini",type:"text",class:"rounded-lg px-1 !text-blue-700",onClick:I},{icon:b(()=>[h(K)]),default:b(()=>[O[5]||(O[5]=de(" 长期记忆 "))]),_:1},8,["disabled"])]),h(F,{width:520,visible:m.value,"onUpdate:visible":O[4]||(O[4]=ae=>m.value=ae),"hide-title":"",footer:!1,"modal-class":"rounded-xl"},{default:b(()=>[_("div",V_,[O[7]||(O[7]=_("div",{class:"text-lg font-bold text-gray-700"},"长期记忆",-1)),h(Y,{type:"text",class:"!text-gray-700",size:"small",onClick:O[0]||(O[0]=ae=>m.value=!1)},{icon:b(()=>[h(Z)]),_:1})]),_("div",K_,[h(B,{"model-value":N(r),"onUpdate:modelValue":O[1]||(O[1]=ae=>i_(r)?r.value=ae:null),placeholder:"请输入当前调试会话长期记忆","show-word-limit":"","max-length":2e3,"auto-size":{minRows:8,maxRows:8}},null,8,["model-value"]),_("div",Y_,[O[10]||(O[10]=_("div",{class:""},null,-1)),h(le,{size:16},{default:b(()=>[h(Y,{class:"rounded-lg",onClick:O[2]||(O[2]=ae=>m.value=!1)},{default:b(()=>O[8]||(O[8]=[de("取消")])),_:1}),h(Y,{loading:N(y),type:"primary",class:"rounded-lg",onClick:O[3]||(O[3]=async()=>{await N(T)(f.app_id,N(r)),m.value=!1})},{default:b(()=>O[9]||(O[9]=[de(" 保存 ")])),_:1},8,["loading"])]),_:1})])])]),_:1},8,["visible"])])}}}),X_={class:""},J_=vt({__name:"LongTermMemoryAbilityItem",props:{app_id:{type:String,default:"",required:!0},long_term_memory:{type:Object,default:{enable:!1},required:!0}},emits:["update:long_term_memory"],setup(a,{emit:f}){const r=a,g=f,{handleUpdateDraftAppConfig:y}=gn();return(T,m)=>{const I=C("icon-down"),A=C("a-button"),O=C("a-doption"),K=C("a-dropdown"),Y=C("a-collapse-item");return R(),M("div",X_,[h(Y,{key:"long_term_memory",class:"app-ability-item"},{header:b(()=>m[2]||(m[2]=[_("div",{class:"text-gray-700 font-bold"},"长期记忆",-1)])),extra:b(()=>[h(K,{onSelect:m[1]||(m[1]=async Z=>{var B;!!Z!==((B=r.long_term_memory)==null?void 0:B.enable)&&(g("update:long_term_memory",{enable:!!Z}),await N(y)(r.app_id,{long_term_memory:{enable:!!Z}}))})},{content:b(()=>[h(O,{value:1,class:"text-xs py-1.5 text-gray-700"},{default:b(()=>m[3]||(m[3]=[de("开启")])),_:1}),h(O,{value:0,class:"text-xs py-1.5 text-red-700"},{default:b(()=>m[4]||(m[4]=[de("关闭")])),_:1})]),default:b(()=>[h(A,{size:"mini",class:"rounded-lg flex items-center gap-1 px-1",onClick:m[0]||(m[0]=Zn(()=>{},["stop"]))},{default:b(()=>{var Z;return[de(_e((Z=r.long_term_memory)!=null&&Z.enable?"开启":"关闭")+" ",1),h(I)]}),_:1})]),_:1})]),default:b(()=>[m[5]||(m[5]=_("div",{class:"text-xs text-gray-500 leading-[22px]"}," 总结聊天对话内容，并用于更好的响应用户的信息 ",-1))]),_:1})])}}}),Q_={class:""},j_={class:"text-xs text-gray-500"},ev={class:"flex flex-col gap-2 mb-2"},tv={class:"flex items-center gap-2"},nv={class:"flex flex-col gap-2 mb-2"},iv={class:"flex items-center gap-2"},rv={class:"flex flex-col gap-2"},sv=vt({__name:"OpeningAbilityItem",props:{app_id:{type:String,default:"",required:!0},opening_statement:{type:String,default:"",required:!0},opening_questions:{type:Array,default:[],required:!0}},emits:["update:opening_statement","update:opening_questions"],setup(a,{emit:f}){const r=a,g=f,{handleUpdateDraftAppConfig:y}=gn(),T=_a({get(){const I=[...r.opening_questions];return I.length<3&&I[I.length-1]!==""&&I.push(""),I},set(I){g("update:opening_questions",I)}}),m=async()=>{await y(r.app_id,{opening_questions:T.value.filter(I=>I.trim()!=="")})};return(I,A)=>{const O=C("icon-exclamation-circle"),K=C("a-tooltip"),Y=C("a-textarea"),Z=C("a-input"),B=C("icon-delete"),le=C("a-button"),F=C("a-collapse-item");return R(),M("div",Q_,[h(F,{key:"opening",class:"app-ability-item"},{header:b(()=>A[3]||(A[3]=[_("div",{class:"text-gray-700 font-bold"},"对话开场白",-1)])),default:b(()=>[_("div",j_,[_("div",ev,[_("div",tv,[A[4]||(A[4]=_("div",{class:"text-gray-700"},"开场白文案",-1)),h(K,{content:"开场白是与Agent应用对话时，Agent默认展示的对话。"},{default:b(()=>[h(O)]),_:1})]),h(Y,{"model-value":r.opening_statement,"onUpdate:modelValue":A[0]||(A[0]=q=>g("update:opening_statement",q)),placeholder:"在此处填写 AI 应用的开场白",class:"bg-white text-gray-700 rounded-lg border border-gray-200","auto-size":{minRows:4,maxRows:4},onBlur:A[1]||(A[1]=async()=>{await N(y)(r.app_id,{opening_statement:r.opening_statement})})},null,8,["model-value"])]),_("div",nv,[_("div",iv,[A[5]||(A[5]=_("div",{class:"text-gray-700"},"开场白预设问题",-1)),h(K,{content:"开场白预设问题是与Agent对话时，初始化提供的建议问题，最多不超过3个"},{default:b(()=>[h(O)]),_:1})]),_("div",rv,[(R(!0),M(st,null,_t(T.value,(q,ae)=>(R(),M("div",{key:ae,class:"flex items-center gap-2"},[h(Z,{"model-value":q,"onUpdate:modelValue":ye=>{const ue=[...T.value];ue[ae]=ye,T.value=ue},class:"rounded-lg bg-white",placeholder:"输入开场白引导问题",onBlur:A[2]||(A[2]=async()=>await m())},null,8,["model-value","onUpdate:modelValue"]),h(le,{class:"rounded-lg",onClick:async()=>{const ye=[...T.value];ye.splice(ae,1),g("update:opening_questions",ye),await Cn(),await m()}},{icon:b(()=>[h(B)]),_:2},1032,["onClick"])]))),128))])])])]),_:1})])}}}),ov={class:""},lv=vt({__name:"SuggestedAfterAnswerAbilityItem",props:{app_id:{type:String,default:"",required:!0},suggested_after_answer:{type:Object,default:{enable:!1},required:!0}},emits:["update:suggested_after_answer"],setup(a,{emit:f}){const r=a,g=f,{handleUpdateDraftAppConfig:y}=gn();return(T,m)=>{const I=C("icon-down"),A=C("a-button"),O=C("a-doption"),K=C("a-dropdown"),Y=C("a-collapse-item");return R(),M("div",ov,[h(Y,{key:"suggested_after_answer",class:"app-ability-item"},{header:b(()=>m[2]||(m[2]=[_("div",{class:"text-gray-700 font-bold"},"用户问题建议",-1)])),extra:b(()=>[h(K,{onSelect:m[1]||(m[1]=async Z=>{var B;!!Z!==((B=r.suggested_after_answer)==null?void 0:B.enable)&&(g("update:suggested_after_answer",{enable:!!Z}),await N(y)(r.app_id,{suggested_after_answer:{enable:!!Z}}))})},{content:b(()=>[h(O,{value:1,class:"text-xs py-1.5 text-gray-700"},{default:b(()=>m[3]||(m[3]=[de("开启")])),_:1}),h(O,{value:0,class:"text-xs py-1.5 text-red-700"},{default:b(()=>m[4]||(m[4]=[de("关闭")])),_:1})]),default:b(()=>[h(A,{size:"mini",class:"rounded-lg flex items-center gap-1 px-1",onClick:m[0]||(m[0]=Zn(()=>{},["stop"]))},{default:b(()=>{var Z;return[de(_e((Z=r.suggested_after_answer)!=null&&Z.enable?"开启":"关闭")+" ",1),h(I)]}),_:1})]),_:1})]),default:b(()=>[m[5]||(m[5]=_("div",{class:"text-xs text-gray-500 leading-[22px]"}," 在应用回复后，自动根据对话内容提供 3 条用户提问建议 ",-1))]),_:1})])}}});var hi={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var av=hi.exports,da;function uv(){return da||(da=1,function(a,f){(function(){var r,g="4.17.21",y=200,T="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",m="Expected a function",I="Invalid `variable` option passed into `_.template`",A="__lodash_hash_undefined__",O=500,K="__lodash_placeholder__",Y=1,Z=2,B=4,le=1,F=2,q=1,ae=2,ye=4,ue=8,k=16,z=32,ve=64,Q=128,$e=256,Re=512,U=30,E="...",ie=800,ee=16,we=1,We=2,Ee=3,Se=1/0,je=9007199254740991,Et=17976931348623157e292,Oe=NaN,D=4294967295,he=D-1,X=D>>>1,ge=[["ary",Q],["bind",q],["bindKey",ae],["curry",ue],["curryRight",k],["flip",Re],["partial",z],["partialRight",ve],["rearg",$e]],mt="[object Arguments]",ot="[object Array]",qt="[object AsyncFunction]",kt="[object Boolean]",Pt="[object Date]",Ae="[object DOMException]",lt="[object Error]",yt="[object Function]",Tn="[object GeneratorFunction]",at="[object Map]",jt="[object Number]",gr="[object Null]",It="[object Object]",gi="[object Promise]",_i="[object Proxy]",en="[object RegExp]",ut="[object Set]",_n="[object String]",In="[object Symbol]",_r="[object Undefined]",tn="[object WeakMap]",vi="[object WeakSet]",nn="[object ArrayBuffer]",rn="[object DataView]",fe="[object Float32Array]",Ze="[object Float64Array]",Ve="[object Int8Array]",Ut="[object Int16Array]",zn="[object Int32Array]",Rn="[object Uint8Array]",On="[object Uint8ClampedArray]",Dn="[object Uint16Array]",Ln="[object Uint32Array]",mi=/\b__p \+= '';/g,yi=/\b(__p \+=) '' \+/g,xi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Jn=/&(?:amp|lt|gt|quot|#39);/g,Qn=/[&<>"']/g,et=RegExp(Jn.source),bi=RegExp(Qn.source),Ie=/<%-([\s\S]+?)%>/g,Nt=/<%([\s\S]+?)%>/g,Ps=/<%=([\s\S]+?)%>/g,Ta=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ia=/^\w*$/,za=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vr=/[\\^$.*+?()[\]{}|]/g,Ra=RegExp(vr.source),mr=/^\s+/,Oa=/\s/,Da=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,La=/\{\n\/\* \[wrapped with (.+)\] \*/,Ea=/,? & /,ka=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pa=/[()=,{}\[\]\/\s]/,Ua=/\\(\\)?/g,Ma=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Us=/\w*$/,Ba=/^[-+]0x[0-9a-f]+$/i,Wa=/^0b[01]+$/i,Fa=/^\[object .+?Constructor\]$/,qa=/^0o[0-7]+$/i,Na=/^(?:0|[1-9]\d*)$/,Ha=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wi=/($^)/,Ga=/['\n\r\u2028\u2029\\]/g,Si="\\ud800-\\udfff",Va="\\u0300-\\u036f",Ka="\\ufe20-\\ufe2f",Ya="\\u20d0-\\u20ff",Ms=Va+Ka+Ya,Bs="\\u2700-\\u27bf",Ws="a-z\\xdf-\\xf6\\xf8-\\xff",Za="\\xac\\xb1\\xd7\\xf7",Xa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ja="\\u2000-\\u206f",Qa=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Fs="A-Z\\xc0-\\xd6\\xd8-\\xde",qs="\\ufe0e\\ufe0f",Ns=Za+Xa+Ja+Qa,yr="['’]",ja="["+Si+"]",Hs="["+Ns+"]",Ai="["+Ms+"]",Gs="\\d+",eu="["+Bs+"]",Vs="["+Ws+"]",Ks="[^"+Si+Ns+Gs+Bs+Ws+Fs+"]",xr="\\ud83c[\\udffb-\\udfff]",tu="(?:"+Ai+"|"+xr+")",Ys="[^"+Si+"]",br="(?:\\ud83c[\\udde6-\\uddff]){2}",wr="[\\ud800-\\udbff][\\udc00-\\udfff]",En="["+Fs+"]",Zs="\\u200d",Xs="(?:"+Vs+"|"+Ks+")",nu="(?:"+En+"|"+Ks+")",Js="(?:"+yr+"(?:d|ll|m|re|s|t|ve))?",Qs="(?:"+yr+"(?:D|LL|M|RE|S|T|VE))?",js=tu+"?",eo="["+qs+"]?",iu="(?:"+Zs+"(?:"+[Ys,br,wr].join("|")+")"+eo+js+")*",ru="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",su="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",to=eo+js+iu,ou="(?:"+[eu,br,wr].join("|")+")"+to,lu="(?:"+[Ys+Ai+"?",Ai,br,wr,ja].join("|")+")",au=RegExp(yr,"g"),uu=RegExp(Ai,"g"),Sr=RegExp(xr+"(?="+xr+")|"+lu+to,"g"),fu=RegExp([En+"?"+Vs+"+"+Js+"(?="+[Hs,En,"$"].join("|")+")",nu+"+"+Qs+"(?="+[Hs,En+Xs,"$"].join("|")+")",En+"?"+Xs+"+"+Js,En+"+"+Qs,su,ru,Gs,ou].join("|"),"g"),cu=RegExp("["+Zs+Si+Ms+qs+"]"),du=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],hu=-1,ze={};ze[fe]=ze[Ze]=ze[Ve]=ze[Ut]=ze[zn]=ze[Rn]=ze[On]=ze[Dn]=ze[Ln]=!0,ze[mt]=ze[ot]=ze[nn]=ze[kt]=ze[rn]=ze[Pt]=ze[lt]=ze[yt]=ze[at]=ze[jt]=ze[It]=ze[en]=ze[ut]=ze[_n]=ze[tn]=!1;var Te={};Te[mt]=Te[ot]=Te[nn]=Te[rn]=Te[kt]=Te[Pt]=Te[fe]=Te[Ze]=Te[Ve]=Te[Ut]=Te[zn]=Te[at]=Te[jt]=Te[It]=Te[en]=Te[ut]=Te[_n]=Te[In]=Te[Rn]=Te[On]=Te[Dn]=Te[Ln]=!0,Te[lt]=Te[yt]=Te[tn]=!1;var gu={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},_u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},mu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},yu=parseFloat,xu=parseInt,no=typeof fr=="object"&&fr&&fr.Object===Object&&fr,bu=typeof self=="object"&&self&&self.Object===Object&&self,He=no||bu||Function("return this")(),Ar=f&&!f.nodeType&&f,vn=Ar&&!0&&a&&!a.nodeType&&a,io=vn&&vn.exports===Ar,$r=io&&no.process,xt=function(){try{var d=vn&&vn.require&&vn.require("util").types;return d||$r&&$r.binding&&$r.binding("util")}catch{}}(),ro=xt&&xt.isArrayBuffer,so=xt&&xt.isDate,oo=xt&&xt.isMap,lo=xt&&xt.isRegExp,ao=xt&&xt.isSet,uo=xt&&xt.isTypedArray;function ft(d,x,v){switch(v.length){case 0:return d.call(x);case 1:return d.call(x,v[0]);case 2:return d.call(x,v[0],v[1]);case 3:return d.call(x,v[0],v[1],v[2])}return d.apply(x,v)}function wu(d,x,v,P){for(var J=-1,me=d==null?0:d.length;++J<me;){var Fe=d[J];x(P,Fe,v(Fe),d)}return P}function bt(d,x){for(var v=-1,P=d==null?0:d.length;++v<P&&x(d[v],v,d)!==!1;);return d}function Su(d,x){for(var v=d==null?0:d.length;v--&&x(d[v],v,d)!==!1;);return d}function fo(d,x){for(var v=-1,P=d==null?0:d.length;++v<P;)if(!x(d[v],v,d))return!1;return!0}function sn(d,x){for(var v=-1,P=d==null?0:d.length,J=0,me=[];++v<P;){var Fe=d[v];x(Fe,v,d)&&(me[J++]=Fe)}return me}function $i(d,x){var v=d==null?0:d.length;return!!v&&kn(d,x,0)>-1}function Cr(d,x,v){for(var P=-1,J=d==null?0:d.length;++P<J;)if(v(x,d[P]))return!0;return!1}function De(d,x){for(var v=-1,P=d==null?0:d.length,J=Array(P);++v<P;)J[v]=x(d[v],v,d);return J}function on(d,x){for(var v=-1,P=x.length,J=d.length;++v<P;)d[J+v]=x[v];return d}function Tr(d,x,v,P){var J=-1,me=d==null?0:d.length;for(P&&me&&(v=d[++J]);++J<me;)v=x(v,d[J],J,d);return v}function Au(d,x,v,P){var J=d==null?0:d.length;for(P&&J&&(v=d[--J]);J--;)v=x(v,d[J],J,d);return v}function Ir(d,x){for(var v=-1,P=d==null?0:d.length;++v<P;)if(x(d[v],v,d))return!0;return!1}var $u=zr("length");function Cu(d){return d.split("")}function Tu(d){return d.match(ka)||[]}function co(d,x,v){var P;return v(d,function(J,me,Fe){if(x(J,me,Fe))return P=me,!1}),P}function Ci(d,x,v,P){for(var J=d.length,me=v+(P?1:-1);P?me--:++me<J;)if(x(d[me],me,d))return me;return-1}function kn(d,x,v){return x===x?Bu(d,x,v):Ci(d,po,v)}function Iu(d,x,v,P){for(var J=v-1,me=d.length;++J<me;)if(P(d[J],x))return J;return-1}function po(d){return d!==d}function ho(d,x){var v=d==null?0:d.length;return v?Or(d,x)/v:Oe}function zr(d){return function(x){return x==null?r:x[d]}}function Rr(d){return function(x){return d==null?r:d[x]}}function go(d,x,v,P,J){return J(d,function(me,Fe,Ce){v=P?(P=!1,me):x(v,me,Fe,Ce)}),v}function zu(d,x){var v=d.length;for(d.sort(x);v--;)d[v]=d[v].value;return d}function Or(d,x){for(var v,P=-1,J=d.length;++P<J;){var me=x(d[P]);me!==r&&(v=v===r?me:v+me)}return v}function Dr(d,x){for(var v=-1,P=Array(d);++v<d;)P[v]=x(v);return P}function Ru(d,x){return De(x,function(v){return[v,d[v]]})}function _o(d){return d&&d.slice(0,xo(d)+1).replace(mr,"")}function ct(d){return function(x){return d(x)}}function Lr(d,x){return De(x,function(v){return d[v]})}function jn(d,x){return d.has(x)}function vo(d,x){for(var v=-1,P=d.length;++v<P&&kn(x,d[v],0)>-1;);return v}function mo(d,x){for(var v=d.length;v--&&kn(x,d[v],0)>-1;);return v}function Ou(d,x){for(var v=d.length,P=0;v--;)d[v]===x&&++P;return P}var Du=Rr(gu),Lu=Rr(_u);function Eu(d){return"\\"+mu[d]}function ku(d,x){return d==null?r:d[x]}function Pn(d){return cu.test(d)}function Pu(d){return du.test(d)}function Uu(d){for(var x,v=[];!(x=d.next()).done;)v.push(x.value);return v}function Er(d){var x=-1,v=Array(d.size);return d.forEach(function(P,J){v[++x]=[J,P]}),v}function yo(d,x){return function(v){return d(x(v))}}function ln(d,x){for(var v=-1,P=d.length,J=0,me=[];++v<P;){var Fe=d[v];(Fe===x||Fe===K)&&(d[v]=K,me[J++]=v)}return me}function Ti(d){var x=-1,v=Array(d.size);return d.forEach(function(P){v[++x]=P}),v}function Mu(d){var x=-1,v=Array(d.size);return d.forEach(function(P){v[++x]=[P,P]}),v}function Bu(d,x,v){for(var P=v-1,J=d.length;++P<J;)if(d[P]===x)return P;return-1}function Wu(d,x,v){for(var P=v+1;P--;)if(d[P]===x)return P;return P}function Un(d){return Pn(d)?qu(d):$u(d)}function zt(d){return Pn(d)?Nu(d):Cu(d)}function xo(d){for(var x=d.length;x--&&Oa.test(d.charAt(x)););return x}var Fu=Rr(vu);function qu(d){for(var x=Sr.lastIndex=0;Sr.test(d);)++x;return x}function Nu(d){return d.match(Sr)||[]}function Hu(d){return d.match(fu)||[]}var Gu=function d(x){x=x==null?He:Mn.defaults(He.Object(),x,Mn.pick(He,pu));var v=x.Array,P=x.Date,J=x.Error,me=x.Function,Fe=x.Math,Ce=x.Object,kr=x.RegExp,Vu=x.String,wt=x.TypeError,Ii=v.prototype,Ku=me.prototype,Bn=Ce.prototype,zi=x["__core-js_shared__"],Ri=Ku.toString,be=Bn.hasOwnProperty,Yu=0,bo=function(){var e=/[^.]+$/.exec(zi&&zi.keys&&zi.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Oi=Bn.toString,Zu=Ri.call(Ce),Xu=He._,Ju=kr("^"+Ri.call(be).replace(vr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Di=io?x.Buffer:r,an=x.Symbol,Li=x.Uint8Array,wo=Di?Di.allocUnsafe:r,Ei=yo(Ce.getPrototypeOf,Ce),So=Ce.create,Ao=Bn.propertyIsEnumerable,ki=Ii.splice,$o=an?an.isConcatSpreadable:r,ei=an?an.iterator:r,mn=an?an.toStringTag:r,Pi=function(){try{var e=Sn(Ce,"defineProperty");return e({},"",{}),e}catch{}}(),Qu=x.clearTimeout!==He.clearTimeout&&x.clearTimeout,ju=P&&P.now!==He.Date.now&&P.now,ef=x.setTimeout!==He.setTimeout&&x.setTimeout,Ui=Fe.ceil,Mi=Fe.floor,Pr=Ce.getOwnPropertySymbols,tf=Di?Di.isBuffer:r,Co=x.isFinite,nf=Ii.join,rf=yo(Ce.keys,Ce),qe=Fe.max,Ke=Fe.min,sf=P.now,of=x.parseInt,To=Fe.random,lf=Ii.reverse,Ur=Sn(x,"DataView"),ti=Sn(x,"Map"),Mr=Sn(x,"Promise"),Wn=Sn(x,"Set"),ni=Sn(x,"WeakMap"),ii=Sn(Ce,"create"),Bi=ni&&new ni,Fn={},af=An(Ur),uf=An(ti),ff=An(Mr),cf=An(Wn),df=An(ni),Wi=an?an.prototype:r,ri=Wi?Wi.valueOf:r,Io=Wi?Wi.toString:r;function o(e){if(Pe(e)&&!j(e)&&!(e instanceof ce)){if(e instanceof St)return e;if(be.call(e,"__wrapped__"))return zl(e)}return new St(e)}var qn=function(){function e(){}return function(t){if(!ke(t))return{};if(So)return So(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function Fi(){}function St(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}o.templateSettings={escape:Ie,evaluate:Nt,interpolate:Ps,variable:"",imports:{_:o}},o.prototype=Fi.prototype,o.prototype.constructor=o,St.prototype=qn(Fi.prototype),St.prototype.constructor=St;function ce(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=D,this.__views__=[]}function pf(){var e=new ce(this.__wrapped__);return e.__actions__=tt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=tt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=tt(this.__views__),e}function hf(){if(this.__filtered__){var e=new ce(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function gf(){var e=this.__wrapped__.value(),t=this.__dir__,n=j(e),i=t<0,s=n?e.length:0,l=Tc(0,s,this.__views__),u=l.start,c=l.end,p=c-u,w=i?c:u-1,S=this.__iteratees__,$=S.length,L=0,W=Ke(p,this.__takeCount__);if(!n||!i&&s==p&&W==p)return Qo(e,this.__actions__);var G=[];e:for(;p--&&L<W;){w+=t;for(var ne=-1,V=e[w];++ne<$;){var se=S[ne],pe=se.iteratee,ht=se.type,Qe=pe(V);if(ht==We)V=Qe;else if(!Qe){if(ht==we)continue e;break e}}G[L++]=V}return G}ce.prototype=qn(Fi.prototype),ce.prototype.constructor=ce;function yn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function _f(){this.__data__=ii?ii(null):{},this.size=0}function vf(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function mf(e){var t=this.__data__;if(ii){var n=t[e];return n===A?r:n}return be.call(t,e)?t[e]:r}function yf(e){var t=this.__data__;return ii?t[e]!==r:be.call(t,e)}function xf(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ii&&t===r?A:t,this}yn.prototype.clear=_f,yn.prototype.delete=vf,yn.prototype.get=mf,yn.prototype.has=yf,yn.prototype.set=xf;function Ht(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function bf(){this.__data__=[],this.size=0}function wf(e){var t=this.__data__,n=qi(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():ki.call(t,n,1),--this.size,!0}function Sf(e){var t=this.__data__,n=qi(t,e);return n<0?r:t[n][1]}function Af(e){return qi(this.__data__,e)>-1}function $f(e,t){var n=this.__data__,i=qi(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}Ht.prototype.clear=bf,Ht.prototype.delete=wf,Ht.prototype.get=Sf,Ht.prototype.has=Af,Ht.prototype.set=$f;function Gt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Cf(){this.size=0,this.__data__={hash:new yn,map:new(ti||Ht),string:new yn}}function Tf(e){var t=er(this,e).delete(e);return this.size-=t?1:0,t}function If(e){return er(this,e).get(e)}function zf(e){return er(this,e).has(e)}function Rf(e,t){var n=er(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}Gt.prototype.clear=Cf,Gt.prototype.delete=Tf,Gt.prototype.get=If,Gt.prototype.has=zf,Gt.prototype.set=Rf;function xn(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Gt;++t<n;)this.add(e[t])}function Of(e){return this.__data__.set(e,A),this}function Df(e){return this.__data__.has(e)}xn.prototype.add=xn.prototype.push=Of,xn.prototype.has=Df;function Rt(e){var t=this.__data__=new Ht(e);this.size=t.size}function Lf(){this.__data__=new Ht,this.size=0}function Ef(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function kf(e){return this.__data__.get(e)}function Pf(e){return this.__data__.has(e)}function Uf(e,t){var n=this.__data__;if(n instanceof Ht){var i=n.__data__;if(!ti||i.length<y-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Gt(i)}return n.set(e,t),this.size=n.size,this}Rt.prototype.clear=Lf,Rt.prototype.delete=Ef,Rt.prototype.get=kf,Rt.prototype.has=Pf,Rt.prototype.set=Uf;function zo(e,t){var n=j(e),i=!n&&$n(e),s=!n&&!i&&pn(e),l=!n&&!i&&!s&&Vn(e),u=n||i||s||l,c=u?Dr(e.length,Vu):[],p=c.length;for(var w in e)(t||be.call(e,w))&&!(u&&(w=="length"||s&&(w=="offset"||w=="parent")||l&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||Zt(w,p)))&&c.push(w);return c}function Ro(e){var t=e.length;return t?e[Zr(0,t-1)]:r}function Mf(e,t){return tr(tt(e),bn(t,0,e.length))}function Bf(e){return tr(tt(e))}function Br(e,t,n){(n!==r&&!Ot(e[t],n)||n===r&&!(t in e))&&Vt(e,t,n)}function si(e,t,n){var i=e[t];(!(be.call(e,t)&&Ot(i,n))||n===r&&!(t in e))&&Vt(e,t,n)}function qi(e,t){for(var n=e.length;n--;)if(Ot(e[n][0],t))return n;return-1}function Wf(e,t,n,i){return un(e,function(s,l,u){t(i,s,n(s),u)}),i}function Oo(e,t){return e&&Bt(t,Ne(t),e)}function Ff(e,t){return e&&Bt(t,it(t),e)}function Vt(e,t,n){t=="__proto__"&&Pi?Pi(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Wr(e,t){for(var n=-1,i=t.length,s=v(i),l=e==null;++n<i;)s[n]=l?r:xs(e,t[n]);return s}function bn(e,t,n){return e===e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function At(e,t,n,i,s,l){var u,c=t&Y,p=t&Z,w=t&B;if(n&&(u=s?n(e,i,s,l):n(e)),u!==r)return u;if(!ke(e))return e;var S=j(e);if(S){if(u=zc(e),!c)return tt(e,u)}else{var $=Ye(e),L=$==yt||$==Tn;if(pn(e))return tl(e,c);if($==It||$==mt||L&&!s){if(u=p||L?{}:xl(e),!c)return p?mc(e,Ff(u,e)):vc(e,Oo(u,e))}else{if(!Te[$])return s?e:{};u=Rc(e,$,c)}}l||(l=new Rt);var W=l.get(e);if(W)return W;l.set(e,u),Zl(e)?e.forEach(function(V){u.add(At(V,t,n,V,e,l))}):Kl(e)&&e.forEach(function(V,se){u.set(se,At(V,t,n,se,e,l))});var G=w?p?os:ss:p?it:Ne,ne=S?r:G(e);return bt(ne||e,function(V,se){ne&&(se=V,V=e[se]),si(u,se,At(V,t,n,se,e,l))}),u}function qf(e){var t=Ne(e);return function(n){return Do(n,e,t)}}function Do(e,t,n){var i=n.length;if(e==null)return!i;for(e=Ce(e);i--;){var s=n[i],l=t[s],u=e[s];if(u===r&&!(s in e)||!l(u))return!1}return!0}function Lo(e,t,n){if(typeof e!="function")throw new wt(m);return di(function(){e.apply(r,n)},t)}function oi(e,t,n,i){var s=-1,l=$i,u=!0,c=e.length,p=[],w=t.length;if(!c)return p;n&&(t=De(t,ct(n))),i?(l=Cr,u=!1):t.length>=y&&(l=jn,u=!1,t=new xn(t));e:for(;++s<c;){var S=e[s],$=n==null?S:n(S);if(S=i||S!==0?S:0,u&&$===$){for(var L=w;L--;)if(t[L]===$)continue e;p.push(S)}else l(t,$,i)||p.push(S)}return p}var un=ol(Mt),Eo=ol(qr,!0);function Nf(e,t){var n=!0;return un(e,function(i,s,l){return n=!!t(i,s,l),n}),n}function Ni(e,t,n){for(var i=-1,s=e.length;++i<s;){var l=e[i],u=t(l);if(u!=null&&(c===r?u===u&&!pt(u):n(u,c)))var c=u,p=l}return p}function Hf(e,t,n,i){var s=e.length;for(n=te(n),n<0&&(n=-n>s?0:s+n),i=i===r||i>s?s:te(i),i<0&&(i+=s),i=n>i?0:Jl(i);n<i;)e[n++]=t;return e}function ko(e,t){var n=[];return un(e,function(i,s,l){t(i,s,l)&&n.push(i)}),n}function Ge(e,t,n,i,s){var l=-1,u=e.length;for(n||(n=Dc),s||(s=[]);++l<u;){var c=e[l];t>0&&n(c)?t>1?Ge(c,t-1,n,i,s):on(s,c):i||(s[s.length]=c)}return s}var Fr=ll(),Po=ll(!0);function Mt(e,t){return e&&Fr(e,t,Ne)}function qr(e,t){return e&&Po(e,t,Ne)}function Hi(e,t){return sn(t,function(n){return Xt(e[n])})}function wn(e,t){t=cn(t,e);for(var n=0,i=t.length;e!=null&&n<i;)e=e[Wt(t[n++])];return n&&n==i?e:r}function Uo(e,t,n){var i=t(e);return j(e)?i:on(i,n(e))}function Xe(e){return e==null?e===r?_r:gr:mn&&mn in Ce(e)?Cc(e):Bc(e)}function Nr(e,t){return e>t}function Gf(e,t){return e!=null&&be.call(e,t)}function Vf(e,t){return e!=null&&t in Ce(e)}function Kf(e,t,n){return e>=Ke(t,n)&&e<qe(t,n)}function Hr(e,t,n){for(var i=n?Cr:$i,s=e[0].length,l=e.length,u=l,c=v(l),p=1/0,w=[];u--;){var S=e[u];u&&t&&(S=De(S,ct(t))),p=Ke(S.length,p),c[u]=!n&&(t||s>=120&&S.length>=120)?new xn(u&&S):r}S=e[0];var $=-1,L=c[0];e:for(;++$<s&&w.length<p;){var W=S[$],G=t?t(W):W;if(W=n||W!==0?W:0,!(L?jn(L,G):i(w,G,n))){for(u=l;--u;){var ne=c[u];if(!(ne?jn(ne,G):i(e[u],G,n)))continue e}L&&L.push(G),w.push(W)}}return w}function Yf(e,t,n,i){return Mt(e,function(s,l,u){t(i,n(s),l,u)}),i}function li(e,t,n){t=cn(t,e),e=Al(e,t);var i=e==null?e:e[Wt(Ct(t))];return i==null?r:ft(i,e,n)}function Mo(e){return Pe(e)&&Xe(e)==mt}function Zf(e){return Pe(e)&&Xe(e)==nn}function Xf(e){return Pe(e)&&Xe(e)==Pt}function ai(e,t,n,i,s){return e===t?!0:e==null||t==null||!Pe(e)&&!Pe(t)?e!==e&&t!==t:Jf(e,t,n,i,ai,s)}function Jf(e,t,n,i,s,l){var u=j(e),c=j(t),p=u?ot:Ye(e),w=c?ot:Ye(t);p=p==mt?It:p,w=w==mt?It:w;var S=p==It,$=w==It,L=p==w;if(L&&pn(e)){if(!pn(t))return!1;u=!0,S=!1}if(L&&!S)return l||(l=new Rt),u||Vn(e)?vl(e,t,n,i,s,l):Ac(e,t,p,n,i,s,l);if(!(n&le)){var W=S&&be.call(e,"__wrapped__"),G=$&&be.call(t,"__wrapped__");if(W||G){var ne=W?e.value():e,V=G?t.value():t;return l||(l=new Rt),s(ne,V,n,i,l)}}return L?(l||(l=new Rt),$c(e,t,n,i,s,l)):!1}function Qf(e){return Pe(e)&&Ye(e)==at}function Gr(e,t,n,i){var s=n.length,l=s,u=!i;if(e==null)return!l;for(e=Ce(e);s--;){var c=n[s];if(u&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++s<l;){c=n[s];var p=c[0],w=e[p],S=c[1];if(u&&c[2]){if(w===r&&!(p in e))return!1}else{var $=new Rt;if(i)var L=i(w,S,p,e,t,$);if(!(L===r?ai(S,w,le|F,i,$):L))return!1}}return!0}function Bo(e){if(!ke(e)||Ec(e))return!1;var t=Xt(e)?Ju:Fa;return t.test(An(e))}function jf(e){return Pe(e)&&Xe(e)==en}function ec(e){return Pe(e)&&Ye(e)==ut}function tc(e){return Pe(e)&&lr(e.length)&&!!ze[Xe(e)]}function Wo(e){return typeof e=="function"?e:e==null?rt:typeof e=="object"?j(e)?No(e[0],e[1]):qo(e):aa(e)}function Vr(e){if(!ci(e))return rf(e);var t=[];for(var n in Ce(e))be.call(e,n)&&n!="constructor"&&t.push(n);return t}function nc(e){if(!ke(e))return Mc(e);var t=ci(e),n=[];for(var i in e)i=="constructor"&&(t||!be.call(e,i))||n.push(i);return n}function Kr(e,t){return e<t}function Fo(e,t){var n=-1,i=nt(e)?v(e.length):[];return un(e,function(s,l,u){i[++n]=t(s,l,u)}),i}function qo(e){var t=as(e);return t.length==1&&t[0][2]?wl(t[0][0],t[0][1]):function(n){return n===e||Gr(n,e,t)}}function No(e,t){return fs(e)&&bl(t)?wl(Wt(e),t):function(n){var i=xs(n,e);return i===r&&i===t?bs(n,e):ai(t,i,le|F)}}function Gi(e,t,n,i,s){e!==t&&Fr(t,function(l,u){if(s||(s=new Rt),ke(l))ic(e,t,u,n,Gi,i,s);else{var c=i?i(ds(e,u),l,u+"",e,t,s):r;c===r&&(c=l),Br(e,u,c)}},it)}function ic(e,t,n,i,s,l,u){var c=ds(e,n),p=ds(t,n),w=u.get(p);if(w){Br(e,n,w);return}var S=l?l(c,p,n+"",e,t,u):r,$=S===r;if($){var L=j(p),W=!L&&pn(p),G=!L&&!W&&Vn(p);S=p,L||W||G?j(c)?S=c:Ue(c)?S=tt(c):W?($=!1,S=tl(p,!0)):G?($=!1,S=nl(p,!0)):S=[]:pi(p)||$n(p)?(S=c,$n(c)?S=Ql(c):(!ke(c)||Xt(c))&&(S=xl(p))):$=!1}$&&(u.set(p,S),s(S,p,i,l,u),u.delete(p)),Br(e,n,S)}function Ho(e,t){var n=e.length;if(n)return t+=t<0?n:0,Zt(t,n)?e[t]:r}function Go(e,t,n){t.length?t=De(t,function(l){return j(l)?function(u){return wn(u,l.length===1?l[0]:l)}:l}):t=[rt];var i=-1;t=De(t,ct(H()));var s=Fo(e,function(l,u,c){var p=De(t,function(w){return w(l)});return{criteria:p,index:++i,value:l}});return zu(s,function(l,u){return _c(l,u,n)})}function rc(e,t){return Vo(e,t,function(n,i){return bs(e,i)})}function Vo(e,t,n){for(var i=-1,s=t.length,l={};++i<s;){var u=t[i],c=wn(e,u);n(c,u)&&ui(l,cn(u,e),c)}return l}function sc(e){return function(t){return wn(t,e)}}function Yr(e,t,n,i){var s=i?Iu:kn,l=-1,u=t.length,c=e;for(e===t&&(t=tt(t)),n&&(c=De(e,ct(n)));++l<u;)for(var p=0,w=t[l],S=n?n(w):w;(p=s(c,S,p,i))>-1;)c!==e&&ki.call(c,p,1),ki.call(e,p,1);return e}function Ko(e,t){for(var n=e?t.length:0,i=n-1;n--;){var s=t[n];if(n==i||s!==l){var l=s;Zt(s)?ki.call(e,s,1):Qr(e,s)}}return e}function Zr(e,t){return e+Mi(To()*(t-e+1))}function oc(e,t,n,i){for(var s=-1,l=qe(Ui((t-e)/(n||1)),0),u=v(l);l--;)u[i?l:++s]=e,e+=n;return u}function Xr(e,t){var n="";if(!e||t<1||t>je)return n;do t%2&&(n+=e),t=Mi(t/2),t&&(e+=e);while(t);return n}function re(e,t){return ps(Sl(e,t,rt),e+"")}function lc(e){return Ro(Kn(e))}function ac(e,t){var n=Kn(e);return tr(n,bn(t,0,n.length))}function ui(e,t,n,i){if(!ke(e))return e;t=cn(t,e);for(var s=-1,l=t.length,u=l-1,c=e;c!=null&&++s<l;){var p=Wt(t[s]),w=n;if(p==="__proto__"||p==="constructor"||p==="prototype")return e;if(s!=u){var S=c[p];w=i?i(S,p,c):r,w===r&&(w=ke(S)?S:Zt(t[s+1])?[]:{})}si(c,p,w),c=c[p]}return e}var Yo=Bi?function(e,t){return Bi.set(e,t),e}:rt,uc=Pi?function(e,t){return Pi(e,"toString",{configurable:!0,enumerable:!1,value:Ss(t),writable:!0})}:rt;function fc(e){return tr(Kn(e))}function $t(e,t,n){var i=-1,s=e.length;t<0&&(t=-t>s?0:s+t),n=n>s?s:n,n<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var l=v(s);++i<s;)l[i]=e[i+t];return l}function cc(e,t){var n;return un(e,function(i,s,l){return n=t(i,s,l),!n}),!!n}function Vi(e,t,n){var i=0,s=e==null?i:e.length;if(typeof t=="number"&&t===t&&s<=X){for(;i<s;){var l=i+s>>>1,u=e[l];u!==null&&!pt(u)&&(n?u<=t:u<t)?i=l+1:s=l}return s}return Jr(e,t,rt,n)}function Jr(e,t,n,i){var s=0,l=e==null?0:e.length;if(l===0)return 0;t=n(t);for(var u=t!==t,c=t===null,p=pt(t),w=t===r;s<l;){var S=Mi((s+l)/2),$=n(e[S]),L=$!==r,W=$===null,G=$===$,ne=pt($);if(u)var V=i||G;else w?V=G&&(i||L):c?V=G&&L&&(i||!W):p?V=G&&L&&!W&&(i||!ne):W||ne?V=!1:V=i?$<=t:$<t;V?s=S+1:l=S}return Ke(l,he)}function Zo(e,t){for(var n=-1,i=e.length,s=0,l=[];++n<i;){var u=e[n],c=t?t(u):u;if(!n||!Ot(c,p)){var p=c;l[s++]=u===0?0:u}}return l}function Xo(e){return typeof e=="number"?e:pt(e)?Oe:+e}function dt(e){if(typeof e=="string")return e;if(j(e))return De(e,dt)+"";if(pt(e))return Io?Io.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function fn(e,t,n){var i=-1,s=$i,l=e.length,u=!0,c=[],p=c;if(n)u=!1,s=Cr;else if(l>=y){var w=t?null:wc(e);if(w)return Ti(w);u=!1,s=jn,p=new xn}else p=t?[]:c;e:for(;++i<l;){var S=e[i],$=t?t(S):S;if(S=n||S!==0?S:0,u&&$===$){for(var L=p.length;L--;)if(p[L]===$)continue e;t&&p.push($),c.push(S)}else s(p,$,n)||(p!==c&&p.push($),c.push(S))}return c}function Qr(e,t){return t=cn(t,e),e=Al(e,t),e==null||delete e[Wt(Ct(t))]}function Jo(e,t,n,i){return ui(e,t,n(wn(e,t)),i)}function Ki(e,t,n,i){for(var s=e.length,l=i?s:-1;(i?l--:++l<s)&&t(e[l],l,e););return n?$t(e,i?0:l,i?l+1:s):$t(e,i?l+1:0,i?s:l)}function Qo(e,t){var n=e;return n instanceof ce&&(n=n.value()),Tr(t,function(i,s){return s.func.apply(s.thisArg,on([i],s.args))},n)}function jr(e,t,n){var i=e.length;if(i<2)return i?fn(e[0]):[];for(var s=-1,l=v(i);++s<i;)for(var u=e[s],c=-1;++c<i;)c!=s&&(l[s]=oi(l[s]||u,e[c],t,n));return fn(Ge(l,1),t,n)}function jo(e,t,n){for(var i=-1,s=e.length,l=t.length,u={};++i<s;){var c=i<l?t[i]:r;n(u,e[i],c)}return u}function es(e){return Ue(e)?e:[]}function ts(e){return typeof e=="function"?e:rt}function cn(e,t){return j(e)?e:fs(e,t)?[e]:Il(xe(e))}var dc=re;function dn(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:$t(e,t,n)}var el=Qu||function(e){return He.clearTimeout(e)};function tl(e,t){if(t)return e.slice();var n=e.length,i=wo?wo(n):new e.constructor(n);return e.copy(i),i}function ns(e){var t=new e.constructor(e.byteLength);return new Li(t).set(new Li(e)),t}function pc(e,t){var n=t?ns(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function hc(e){var t=new e.constructor(e.source,Us.exec(e));return t.lastIndex=e.lastIndex,t}function gc(e){return ri?Ce(ri.call(e)):{}}function nl(e,t){var n=t?ns(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function il(e,t){if(e!==t){var n=e!==r,i=e===null,s=e===e,l=pt(e),u=t!==r,c=t===null,p=t===t,w=pt(t);if(!c&&!w&&!l&&e>t||l&&u&&p&&!c&&!w||i&&u&&p||!n&&p||!s)return 1;if(!i&&!l&&!w&&e<t||w&&n&&s&&!i&&!l||c&&n&&s||!u&&s||!p)return-1}return 0}function _c(e,t,n){for(var i=-1,s=e.criteria,l=t.criteria,u=s.length,c=n.length;++i<u;){var p=il(s[i],l[i]);if(p){if(i>=c)return p;var w=n[i];return p*(w=="desc"?-1:1)}}return e.index-t.index}function rl(e,t,n,i){for(var s=-1,l=e.length,u=n.length,c=-1,p=t.length,w=qe(l-u,0),S=v(p+w),$=!i;++c<p;)S[c]=t[c];for(;++s<u;)($||s<l)&&(S[n[s]]=e[s]);for(;w--;)S[c++]=e[s++];return S}function sl(e,t,n,i){for(var s=-1,l=e.length,u=-1,c=n.length,p=-1,w=t.length,S=qe(l-c,0),$=v(S+w),L=!i;++s<S;)$[s]=e[s];for(var W=s;++p<w;)$[W+p]=t[p];for(;++u<c;)(L||s<l)&&($[W+n[u]]=e[s++]);return $}function tt(e,t){var n=-1,i=e.length;for(t||(t=v(i));++n<i;)t[n]=e[n];return t}function Bt(e,t,n,i){var s=!n;n||(n={});for(var l=-1,u=t.length;++l<u;){var c=t[l],p=i?i(n[c],e[c],c,n,e):r;p===r&&(p=e[c]),s?Vt(n,c,p):si(n,c,p)}return n}function vc(e,t){return Bt(e,us(e),t)}function mc(e,t){return Bt(e,ml(e),t)}function Yi(e,t){return function(n,i){var s=j(n)?wu:Wf,l=t?t():{};return s(n,e,H(i,2),l)}}function Nn(e){return re(function(t,n){var i=-1,s=n.length,l=s>1?n[s-1]:r,u=s>2?n[2]:r;for(l=e.length>3&&typeof l=="function"?(s--,l):r,u&&Je(n[0],n[1],u)&&(l=s<3?r:l,s=1),t=Ce(t);++i<s;){var c=n[i];c&&e(t,c,i,l)}return t})}function ol(e,t){return function(n,i){if(n==null)return n;if(!nt(n))return e(n,i);for(var s=n.length,l=t?s:-1,u=Ce(n);(t?l--:++l<s)&&i(u[l],l,u)!==!1;);return n}}function ll(e){return function(t,n,i){for(var s=-1,l=Ce(t),u=i(t),c=u.length;c--;){var p=u[e?c:++s];if(n(l[p],p,l)===!1)break}return t}}function yc(e,t,n){var i=t&q,s=fi(e);function l(){var u=this&&this!==He&&this instanceof l?s:e;return u.apply(i?n:this,arguments)}return l}function al(e){return function(t){t=xe(t);var n=Pn(t)?zt(t):r,i=n?n[0]:t.charAt(0),s=n?dn(n,1).join(""):t.slice(1);return i[e]()+s}}function Hn(e){return function(t){return Tr(oa(sa(t).replace(au,"")),e,"")}}function fi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=qn(e.prototype),i=e.apply(n,t);return ke(i)?i:n}}function xc(e,t,n){var i=fi(e);function s(){for(var l=arguments.length,u=v(l),c=l,p=Gn(s);c--;)u[c]=arguments[c];var w=l<3&&u[0]!==p&&u[l-1]!==p?[]:ln(u,p);if(l-=w.length,l<n)return pl(e,t,Zi,s.placeholder,r,u,w,r,r,n-l);var S=this&&this!==He&&this instanceof s?i:e;return ft(S,this,u)}return s}function ul(e){return function(t,n,i){var s=Ce(t);if(!nt(t)){var l=H(n,3);t=Ne(t),n=function(c){return l(s[c],c,s)}}var u=e(t,n,i);return u>-1?s[l?t[u]:u]:r}}function fl(e){return Yt(function(t){var n=t.length,i=n,s=St.prototype.thru;for(e&&t.reverse();i--;){var l=t[i];if(typeof l!="function")throw new wt(m);if(s&&!u&&ji(l)=="wrapper")var u=new St([],!0)}for(i=u?i:n;++i<n;){l=t[i];var c=ji(l),p=c=="wrapper"?ls(l):r;p&&cs(p[0])&&p[1]==(Q|ue|z|$e)&&!p[4].length&&p[9]==1?u=u[ji(p[0])].apply(u,p[3]):u=l.length==1&&cs(l)?u[c]():u.thru(l)}return function(){var w=arguments,S=w[0];if(u&&w.length==1&&j(S))return u.plant(S).value();for(var $=0,L=n?t[$].apply(this,w):S;++$<n;)L=t[$].call(this,L);return L}})}function Zi(e,t,n,i,s,l,u,c,p,w){var S=t&Q,$=t&q,L=t&ae,W=t&(ue|k),G=t&Re,ne=L?r:fi(e);function V(){for(var se=arguments.length,pe=v(se),ht=se;ht--;)pe[ht]=arguments[ht];if(W)var Qe=Gn(V),gt=Ou(pe,Qe);if(i&&(pe=rl(pe,i,s,W)),l&&(pe=sl(pe,l,u,W)),se-=gt,W&&se<w){var Me=ln(pe,Qe);return pl(e,t,Zi,V.placeholder,n,pe,Me,c,p,w-se)}var Dt=$?n:this,Qt=L?Dt[e]:e;return se=pe.length,c?pe=Wc(pe,c):G&&se>1&&pe.reverse(),S&&p<se&&(pe.length=p),this&&this!==He&&this instanceof V&&(Qt=ne||fi(Qt)),Qt.apply(Dt,pe)}return V}function cl(e,t){return function(n,i){return Yf(n,e,t(i),{})}}function Xi(e,t){return function(n,i){var s;if(n===r&&i===r)return t;if(n!==r&&(s=n),i!==r){if(s===r)return i;typeof n=="string"||typeof i=="string"?(n=dt(n),i=dt(i)):(n=Xo(n),i=Xo(i)),s=e(n,i)}return s}}function is(e){return Yt(function(t){return t=De(t,ct(H())),re(function(n){var i=this;return e(t,function(s){return ft(s,i,n)})})})}function Ji(e,t){t=t===r?" ":dt(t);var n=t.length;if(n<2)return n?Xr(t,e):t;var i=Xr(t,Ui(e/Un(t)));return Pn(t)?dn(zt(i),0,e).join(""):i.slice(0,e)}function bc(e,t,n,i){var s=t&q,l=fi(e);function u(){for(var c=-1,p=arguments.length,w=-1,S=i.length,$=v(S+p),L=this&&this!==He&&this instanceof u?l:e;++w<S;)$[w]=i[w];for(;p--;)$[w++]=arguments[++c];return ft(L,s?n:this,$)}return u}function dl(e){return function(t,n,i){return i&&typeof i!="number"&&Je(t,n,i)&&(n=i=r),t=Jt(t),n===r?(n=t,t=0):n=Jt(n),i=i===r?t<n?1:-1:Jt(i),oc(t,n,i,e)}}function Qi(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Tt(t),n=Tt(n)),e(t,n)}}function pl(e,t,n,i,s,l,u,c,p,w){var S=t&ue,$=S?u:r,L=S?r:u,W=S?l:r,G=S?r:l;t|=S?z:ve,t&=~(S?ve:z),t&ye||(t&=-4);var ne=[e,t,s,W,$,G,L,c,p,w],V=n.apply(r,ne);return cs(e)&&$l(V,ne),V.placeholder=i,Cl(V,e,t)}function rs(e){var t=Fe[e];return function(n,i){if(n=Tt(n),i=i==null?0:Ke(te(i),292),i&&Co(n)){var s=(xe(n)+"e").split("e"),l=t(s[0]+"e"+(+s[1]+i));return s=(xe(l)+"e").split("e"),+(s[0]+"e"+(+s[1]-i))}return t(n)}}var wc=Wn&&1/Ti(new Wn([,-0]))[1]==Se?function(e){return new Wn(e)}:Cs;function hl(e){return function(t){var n=Ye(t);return n==at?Er(t):n==ut?Mu(t):Ru(t,e(t))}}function Kt(e,t,n,i,s,l,u,c){var p=t&ae;if(!p&&typeof e!="function")throw new wt(m);var w=i?i.length:0;if(w||(t&=-97,i=s=r),u=u===r?u:qe(te(u),0),c=c===r?c:te(c),w-=s?s.length:0,t&ve){var S=i,$=s;i=s=r}var L=p?r:ls(e),W=[e,t,n,i,s,S,$,l,u,c];if(L&&Uc(W,L),e=W[0],t=W[1],n=W[2],i=W[3],s=W[4],c=W[9]=W[9]===r?p?0:e.length:qe(W[9]-w,0),!c&&t&(ue|k)&&(t&=-25),!t||t==q)var G=yc(e,t,n);else t==ue||t==k?G=xc(e,t,c):(t==z||t==(q|z))&&!s.length?G=bc(e,t,n,i):G=Zi.apply(r,W);var ne=L?Yo:$l;return Cl(ne(G,W),e,t)}function gl(e,t,n,i){return e===r||Ot(e,Bn[n])&&!be.call(i,n)?t:e}function _l(e,t,n,i,s,l){return ke(e)&&ke(t)&&(l.set(t,e),Gi(e,t,r,_l,l),l.delete(t)),e}function Sc(e){return pi(e)?r:e}function vl(e,t,n,i,s,l){var u=n&le,c=e.length,p=t.length;if(c!=p&&!(u&&p>c))return!1;var w=l.get(e),S=l.get(t);if(w&&S)return w==t&&S==e;var $=-1,L=!0,W=n&F?new xn:r;for(l.set(e,t),l.set(t,e);++$<c;){var G=e[$],ne=t[$];if(i)var V=u?i(ne,G,$,t,e,l):i(G,ne,$,e,t,l);if(V!==r){if(V)continue;L=!1;break}if(W){if(!Ir(t,function(se,pe){if(!jn(W,pe)&&(G===se||s(G,se,n,i,l)))return W.push(pe)})){L=!1;break}}else if(!(G===ne||s(G,ne,n,i,l))){L=!1;break}}return l.delete(e),l.delete(t),L}function Ac(e,t,n,i,s,l,u){switch(n){case rn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case nn:return!(e.byteLength!=t.byteLength||!l(new Li(e),new Li(t)));case kt:case Pt:case jt:return Ot(+e,+t);case lt:return e.name==t.name&&e.message==t.message;case en:case _n:return e==t+"";case at:var c=Er;case ut:var p=i&le;if(c||(c=Ti),e.size!=t.size&&!p)return!1;var w=u.get(e);if(w)return w==t;i|=F,u.set(e,t);var S=vl(c(e),c(t),i,s,l,u);return u.delete(e),S;case In:if(ri)return ri.call(e)==ri.call(t)}return!1}function $c(e,t,n,i,s,l){var u=n&le,c=ss(e),p=c.length,w=ss(t),S=w.length;if(p!=S&&!u)return!1;for(var $=p;$--;){var L=c[$];if(!(u?L in t:be.call(t,L)))return!1}var W=l.get(e),G=l.get(t);if(W&&G)return W==t&&G==e;var ne=!0;l.set(e,t),l.set(t,e);for(var V=u;++$<p;){L=c[$];var se=e[L],pe=t[L];if(i)var ht=u?i(pe,se,L,t,e,l):i(se,pe,L,e,t,l);if(!(ht===r?se===pe||s(se,pe,n,i,l):ht)){ne=!1;break}V||(V=L=="constructor")}if(ne&&!V){var Qe=e.constructor,gt=t.constructor;Qe!=gt&&"constructor"in e&&"constructor"in t&&!(typeof Qe=="function"&&Qe instanceof Qe&&typeof gt=="function"&&gt instanceof gt)&&(ne=!1)}return l.delete(e),l.delete(t),ne}function Yt(e){return ps(Sl(e,r,Dl),e+"")}function ss(e){return Uo(e,Ne,us)}function os(e){return Uo(e,it,ml)}var ls=Bi?function(e){return Bi.get(e)}:Cs;function ji(e){for(var t=e.name+"",n=Fn[t],i=be.call(Fn,t)?n.length:0;i--;){var s=n[i],l=s.func;if(l==null||l==e)return s.name}return t}function Gn(e){var t=be.call(o,"placeholder")?o:e;return t.placeholder}function H(){var e=o.iteratee||As;return e=e===As?Wo:e,arguments.length?e(arguments[0],arguments[1]):e}function er(e,t){var n=e.__data__;return Lc(t)?n[typeof t=="string"?"string":"hash"]:n.map}function as(e){for(var t=Ne(e),n=t.length;n--;){var i=t[n],s=e[i];t[n]=[i,s,bl(s)]}return t}function Sn(e,t){var n=ku(e,t);return Bo(n)?n:r}function Cc(e){var t=be.call(e,mn),n=e[mn];try{e[mn]=r;var i=!0}catch{}var s=Oi.call(e);return i&&(t?e[mn]=n:delete e[mn]),s}var us=Pr?function(e){return e==null?[]:(e=Ce(e),sn(Pr(e),function(t){return Ao.call(e,t)}))}:Ts,ml=Pr?function(e){for(var t=[];e;)on(t,us(e)),e=Ei(e);return t}:Ts,Ye=Xe;(Ur&&Ye(new Ur(new ArrayBuffer(1)))!=rn||ti&&Ye(new ti)!=at||Mr&&Ye(Mr.resolve())!=gi||Wn&&Ye(new Wn)!=ut||ni&&Ye(new ni)!=tn)&&(Ye=function(e){var t=Xe(e),n=t==It?e.constructor:r,i=n?An(n):"";if(i)switch(i){case af:return rn;case uf:return at;case ff:return gi;case cf:return ut;case df:return tn}return t});function Tc(e,t,n){for(var i=-1,s=n.length;++i<s;){var l=n[i],u=l.size;switch(l.type){case"drop":e+=u;break;case"dropRight":t-=u;break;case"take":t=Ke(t,e+u);break;case"takeRight":e=qe(e,t-u);break}}return{start:e,end:t}}function Ic(e){var t=e.match(La);return t?t[1].split(Ea):[]}function yl(e,t,n){t=cn(t,e);for(var i=-1,s=t.length,l=!1;++i<s;){var u=Wt(t[i]);if(!(l=e!=null&&n(e,u)))break;e=e[u]}return l||++i!=s?l:(s=e==null?0:e.length,!!s&&lr(s)&&Zt(u,s)&&(j(e)||$n(e)))}function zc(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&be.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function xl(e){return typeof e.constructor=="function"&&!ci(e)?qn(Ei(e)):{}}function Rc(e,t,n){var i=e.constructor;switch(t){case nn:return ns(e);case kt:case Pt:return new i(+e);case rn:return pc(e,n);case fe:case Ze:case Ve:case Ut:case zn:case Rn:case On:case Dn:case Ln:return nl(e,n);case at:return new i;case jt:case _n:return new i(e);case en:return hc(e);case ut:return new i;case In:return gc(e)}}function Oc(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(Da,`{
/* [wrapped with `+t+`] */
`)}function Dc(e){return j(e)||$n(e)||!!($o&&e&&e[$o])}function Zt(e,t){var n=typeof e;return t=t??je,!!t&&(n=="number"||n!="symbol"&&Na.test(e))&&e>-1&&e%1==0&&e<t}function Je(e,t,n){if(!ke(n))return!1;var i=typeof t;return(i=="number"?nt(n)&&Zt(t,n.length):i=="string"&&t in n)?Ot(n[t],e):!1}function fs(e,t){if(j(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||pt(e)?!0:Ia.test(e)||!Ta.test(e)||t!=null&&e in Ce(t)}function Lc(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function cs(e){var t=ji(e),n=o[t];if(typeof n!="function"||!(t in ce.prototype))return!1;if(e===n)return!0;var i=ls(n);return!!i&&e===i[0]}function Ec(e){return!!bo&&bo in e}var kc=zi?Xt:Is;function ci(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Bn;return e===n}function bl(e){return e===e&&!ke(e)}function wl(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==r||e in Ce(n))}}function Pc(e){var t=sr(e,function(i){return n.size===O&&n.clear(),i}),n=t.cache;return t}function Uc(e,t){var n=e[1],i=t[1],s=n|i,l=s<(q|ae|Q),u=i==Q&&n==ue||i==Q&&n==$e&&e[7].length<=t[8]||i==(Q|$e)&&t[7].length<=t[8]&&n==ue;if(!(l||u))return e;i&q&&(e[2]=t[2],s|=n&q?0:ye);var c=t[3];if(c){var p=e[3];e[3]=p?rl(p,c,t[4]):c,e[4]=p?ln(e[3],K):t[4]}return c=t[5],c&&(p=e[5],e[5]=p?sl(p,c,t[6]):c,e[6]=p?ln(e[5],K):t[6]),c=t[7],c&&(e[7]=c),i&Q&&(e[8]=e[8]==null?t[8]:Ke(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=s,e}function Mc(e){var t=[];if(e!=null)for(var n in Ce(e))t.push(n);return t}function Bc(e){return Oi.call(e)}function Sl(e,t,n){return t=qe(t===r?e.length-1:t,0),function(){for(var i=arguments,s=-1,l=qe(i.length-t,0),u=v(l);++s<l;)u[s]=i[t+s];s=-1;for(var c=v(t+1);++s<t;)c[s]=i[s];return c[t]=n(u),ft(e,this,c)}}function Al(e,t){return t.length<2?e:wn(e,$t(t,0,-1))}function Wc(e,t){for(var n=e.length,i=Ke(t.length,n),s=tt(e);i--;){var l=t[i];e[i]=Zt(l,n)?s[l]:r}return e}function ds(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var $l=Tl(Yo),di=ef||function(e,t){return He.setTimeout(e,t)},ps=Tl(uc);function Cl(e,t,n){var i=t+"";return ps(e,Oc(i,Fc(Ic(i),n)))}function Tl(e){var t=0,n=0;return function(){var i=sf(),s=ee-(i-n);if(n=i,s>0){if(++t>=ie)return arguments[0]}else t=0;return e.apply(r,arguments)}}function tr(e,t){var n=-1,i=e.length,s=i-1;for(t=t===r?i:t;++n<t;){var l=Zr(n,s),u=e[l];e[l]=e[n],e[n]=u}return e.length=t,e}var Il=Pc(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(za,function(n,i,s,l){t.push(s?l.replace(Ua,"$1"):i||n)}),t});function Wt(e){if(typeof e=="string"||pt(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function An(e){if(e!=null){try{return Ri.call(e)}catch{}try{return e+""}catch{}}return""}function Fc(e,t){return bt(ge,function(n){var i="_."+n[0];t&n[1]&&!$i(e,i)&&e.push(i)}),e.sort()}function zl(e){if(e instanceof ce)return e.clone();var t=new St(e.__wrapped__,e.__chain__);return t.__actions__=tt(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function qc(e,t,n){(n?Je(e,t,n):t===r)?t=1:t=qe(te(t),0);var i=e==null?0:e.length;if(!i||t<1)return[];for(var s=0,l=0,u=v(Ui(i/t));s<i;)u[l++]=$t(e,s,s+=t);return u}function Nc(e){for(var t=-1,n=e==null?0:e.length,i=0,s=[];++t<n;){var l=e[t];l&&(s[i++]=l)}return s}function Hc(){var e=arguments.length;if(!e)return[];for(var t=v(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return on(j(n)?tt(n):[n],Ge(t,1))}var Gc=re(function(e,t){return Ue(e)?oi(e,Ge(t,1,Ue,!0)):[]}),Vc=re(function(e,t){var n=Ct(t);return Ue(n)&&(n=r),Ue(e)?oi(e,Ge(t,1,Ue,!0),H(n,2)):[]}),Kc=re(function(e,t){var n=Ct(t);return Ue(n)&&(n=r),Ue(e)?oi(e,Ge(t,1,Ue,!0),r,n):[]});function Yc(e,t,n){var i=e==null?0:e.length;return i?(t=n||t===r?1:te(t),$t(e,t<0?0:t,i)):[]}function Zc(e,t,n){var i=e==null?0:e.length;return i?(t=n||t===r?1:te(t),t=i-t,$t(e,0,t<0?0:t)):[]}function Xc(e,t){return e&&e.length?Ki(e,H(t,3),!0,!0):[]}function Jc(e,t){return e&&e.length?Ki(e,H(t,3),!0):[]}function Qc(e,t,n,i){var s=e==null?0:e.length;return s?(n&&typeof n!="number"&&Je(e,t,n)&&(n=0,i=s),Hf(e,t,n,i)):[]}function Rl(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var s=n==null?0:te(n);return s<0&&(s=qe(i+s,0)),Ci(e,H(t,3),s)}function Ol(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var s=i-1;return n!==r&&(s=te(n),s=n<0?qe(i+s,0):Ke(s,i-1)),Ci(e,H(t,3),s,!0)}function Dl(e){var t=e==null?0:e.length;return t?Ge(e,1):[]}function jc(e){var t=e==null?0:e.length;return t?Ge(e,Se):[]}function ed(e,t){var n=e==null?0:e.length;return n?(t=t===r?1:te(t),Ge(e,t)):[]}function td(e){for(var t=-1,n=e==null?0:e.length,i={};++t<n;){var s=e[t];i[s[0]]=s[1]}return i}function Ll(e){return e&&e.length?e[0]:r}function nd(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var s=n==null?0:te(n);return s<0&&(s=qe(i+s,0)),kn(e,t,s)}function id(e){var t=e==null?0:e.length;return t?$t(e,0,-1):[]}var rd=re(function(e){var t=De(e,es);return t.length&&t[0]===e[0]?Hr(t):[]}),sd=re(function(e){var t=Ct(e),n=De(e,es);return t===Ct(n)?t=r:n.pop(),n.length&&n[0]===e[0]?Hr(n,H(t,2)):[]}),od=re(function(e){var t=Ct(e),n=De(e,es);return t=typeof t=="function"?t:r,t&&n.pop(),n.length&&n[0]===e[0]?Hr(n,r,t):[]});function ld(e,t){return e==null?"":nf.call(e,t)}function Ct(e){var t=e==null?0:e.length;return t?e[t-1]:r}function ad(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var s=i;return n!==r&&(s=te(n),s=s<0?qe(i+s,0):Ke(s,i-1)),t===t?Wu(e,t,s):Ci(e,po,s,!0)}function ud(e,t){return e&&e.length?Ho(e,te(t)):r}var fd=re(El);function El(e,t){return e&&e.length&&t&&t.length?Yr(e,t):e}function cd(e,t,n){return e&&e.length&&t&&t.length?Yr(e,t,H(n,2)):e}function dd(e,t,n){return e&&e.length&&t&&t.length?Yr(e,t,r,n):e}var pd=Yt(function(e,t){var n=e==null?0:e.length,i=Wr(e,t);return Ko(e,De(t,function(s){return Zt(s,n)?+s:s}).sort(il)),i});function hd(e,t){var n=[];if(!(e&&e.length))return n;var i=-1,s=[],l=e.length;for(t=H(t,3);++i<l;){var u=e[i];t(u,i,e)&&(n.push(u),s.push(i))}return Ko(e,s),n}function hs(e){return e==null?e:lf.call(e)}function gd(e,t,n){var i=e==null?0:e.length;return i?(n&&typeof n!="number"&&Je(e,t,n)?(t=0,n=i):(t=t==null?0:te(t),n=n===r?i:te(n)),$t(e,t,n)):[]}function _d(e,t){return Vi(e,t)}function vd(e,t,n){return Jr(e,t,H(n,2))}function md(e,t){var n=e==null?0:e.length;if(n){var i=Vi(e,t);if(i<n&&Ot(e[i],t))return i}return-1}function yd(e,t){return Vi(e,t,!0)}function xd(e,t,n){return Jr(e,t,H(n,2),!0)}function bd(e,t){var n=e==null?0:e.length;if(n){var i=Vi(e,t,!0)-1;if(Ot(e[i],t))return i}return-1}function wd(e){return e&&e.length?Zo(e):[]}function Sd(e,t){return e&&e.length?Zo(e,H(t,2)):[]}function Ad(e){var t=e==null?0:e.length;return t?$t(e,1,t):[]}function $d(e,t,n){return e&&e.length?(t=n||t===r?1:te(t),$t(e,0,t<0?0:t)):[]}function Cd(e,t,n){var i=e==null?0:e.length;return i?(t=n||t===r?1:te(t),t=i-t,$t(e,t<0?0:t,i)):[]}function Td(e,t){return e&&e.length?Ki(e,H(t,3),!1,!0):[]}function Id(e,t){return e&&e.length?Ki(e,H(t,3)):[]}var zd=re(function(e){return fn(Ge(e,1,Ue,!0))}),Rd=re(function(e){var t=Ct(e);return Ue(t)&&(t=r),fn(Ge(e,1,Ue,!0),H(t,2))}),Od=re(function(e){var t=Ct(e);return t=typeof t=="function"?t:r,fn(Ge(e,1,Ue,!0),r,t)});function Dd(e){return e&&e.length?fn(e):[]}function Ld(e,t){return e&&e.length?fn(e,H(t,2)):[]}function Ed(e,t){return t=typeof t=="function"?t:r,e&&e.length?fn(e,r,t):[]}function gs(e){if(!(e&&e.length))return[];var t=0;return e=sn(e,function(n){if(Ue(n))return t=qe(n.length,t),!0}),Dr(t,function(n){return De(e,zr(n))})}function kl(e,t){if(!(e&&e.length))return[];var n=gs(e);return t==null?n:De(n,function(i){return ft(t,r,i)})}var kd=re(function(e,t){return Ue(e)?oi(e,t):[]}),Pd=re(function(e){return jr(sn(e,Ue))}),Ud=re(function(e){var t=Ct(e);return Ue(t)&&(t=r),jr(sn(e,Ue),H(t,2))}),Md=re(function(e){var t=Ct(e);return t=typeof t=="function"?t:r,jr(sn(e,Ue),r,t)}),Bd=re(gs);function Wd(e,t){return jo(e||[],t||[],si)}function Fd(e,t){return jo(e||[],t||[],ui)}var qd=re(function(e){var t=e.length,n=t>1?e[t-1]:r;return n=typeof n=="function"?(e.pop(),n):r,kl(e,n)});function Pl(e){var t=o(e);return t.__chain__=!0,t}function Nd(e,t){return t(e),e}function nr(e,t){return t(e)}var Hd=Yt(function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,s=function(l){return Wr(l,e)};return t>1||this.__actions__.length||!(i instanceof ce)||!Zt(n)?this.thru(s):(i=i.slice(n,+n+(t?1:0)),i.__actions__.push({func:nr,args:[s],thisArg:r}),new St(i,this.__chain__).thru(function(l){return t&&!l.length&&l.push(r),l}))});function Gd(){return Pl(this)}function Vd(){return new St(this.value(),this.__chain__)}function Kd(){this.__values__===r&&(this.__values__=Xl(this.value()));var e=this.__index__>=this.__values__.length,t=e?r:this.__values__[this.__index__++];return{done:e,value:t}}function Yd(){return this}function Zd(e){for(var t,n=this;n instanceof Fi;){var i=zl(n);i.__index__=0,i.__values__=r,t?s.__wrapped__=i:t=i;var s=i;n=n.__wrapped__}return s.__wrapped__=e,t}function Xd(){var e=this.__wrapped__;if(e instanceof ce){var t=e;return this.__actions__.length&&(t=new ce(this)),t=t.reverse(),t.__actions__.push({func:nr,args:[hs],thisArg:r}),new St(t,this.__chain__)}return this.thru(hs)}function Jd(){return Qo(this.__wrapped__,this.__actions__)}var Qd=Yi(function(e,t,n){be.call(e,n)?++e[n]:Vt(e,n,1)});function jd(e,t,n){var i=j(e)?fo:Nf;return n&&Je(e,t,n)&&(t=r),i(e,H(t,3))}function ep(e,t){var n=j(e)?sn:ko;return n(e,H(t,3))}var tp=ul(Rl),np=ul(Ol);function ip(e,t){return Ge(ir(e,t),1)}function rp(e,t){return Ge(ir(e,t),Se)}function sp(e,t,n){return n=n===r?1:te(n),Ge(ir(e,t),n)}function Ul(e,t){var n=j(e)?bt:un;return n(e,H(t,3))}function Ml(e,t){var n=j(e)?Su:Eo;return n(e,H(t,3))}var op=Yi(function(e,t,n){be.call(e,n)?e[n].push(t):Vt(e,n,[t])});function lp(e,t,n,i){e=nt(e)?e:Kn(e),n=n&&!i?te(n):0;var s=e.length;return n<0&&(n=qe(s+n,0)),ar(e)?n<=s&&e.indexOf(t,n)>-1:!!s&&kn(e,t,n)>-1}var ap=re(function(e,t,n){var i=-1,s=typeof t=="function",l=nt(e)?v(e.length):[];return un(e,function(u){l[++i]=s?ft(t,u,n):li(u,t,n)}),l}),up=Yi(function(e,t,n){Vt(e,n,t)});function ir(e,t){var n=j(e)?De:Fo;return n(e,H(t,3))}function fp(e,t,n,i){return e==null?[]:(j(t)||(t=t==null?[]:[t]),n=i?r:n,j(n)||(n=n==null?[]:[n]),Go(e,t,n))}var cp=Yi(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function dp(e,t,n){var i=j(e)?Tr:go,s=arguments.length<3;return i(e,H(t,4),n,s,un)}function pp(e,t,n){var i=j(e)?Au:go,s=arguments.length<3;return i(e,H(t,4),n,s,Eo)}function hp(e,t){var n=j(e)?sn:ko;return n(e,or(H(t,3)))}function gp(e){var t=j(e)?Ro:lc;return t(e)}function _p(e,t,n){(n?Je(e,t,n):t===r)?t=1:t=te(t);var i=j(e)?Mf:ac;return i(e,t)}function vp(e){var t=j(e)?Bf:fc;return t(e)}function mp(e){if(e==null)return 0;if(nt(e))return ar(e)?Un(e):e.length;var t=Ye(e);return t==at||t==ut?e.size:Vr(e).length}function yp(e,t,n){var i=j(e)?Ir:cc;return n&&Je(e,t,n)&&(t=r),i(e,H(t,3))}var xp=re(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Je(e,t[0],t[1])?t=[]:n>2&&Je(t[0],t[1],t[2])&&(t=[t[0]]),Go(e,Ge(t,1),[])}),rr=ju||function(){return He.Date.now()};function bp(e,t){if(typeof t!="function")throw new wt(m);return e=te(e),function(){if(--e<1)return t.apply(this,arguments)}}function Bl(e,t,n){return t=n?r:t,t=e&&t==null?e.length:t,Kt(e,Q,r,r,r,r,t)}function Wl(e,t){var n;if(typeof t!="function")throw new wt(m);return e=te(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var _s=re(function(e,t,n){var i=q;if(n.length){var s=ln(n,Gn(_s));i|=z}return Kt(e,i,t,n,s)}),Fl=re(function(e,t,n){var i=q|ae;if(n.length){var s=ln(n,Gn(Fl));i|=z}return Kt(t,i,e,n,s)});function ql(e,t,n){t=n?r:t;var i=Kt(e,ue,r,r,r,r,r,t);return i.placeholder=ql.placeholder,i}function Nl(e,t,n){t=n?r:t;var i=Kt(e,k,r,r,r,r,r,t);return i.placeholder=Nl.placeholder,i}function Hl(e,t,n){var i,s,l,u,c,p,w=0,S=!1,$=!1,L=!0;if(typeof e!="function")throw new wt(m);t=Tt(t)||0,ke(n)&&(S=!!n.leading,$="maxWait"in n,l=$?qe(Tt(n.maxWait)||0,t):l,L="trailing"in n?!!n.trailing:L);function W(Me){var Dt=i,Qt=s;return i=s=r,w=Me,u=e.apply(Qt,Dt),u}function G(Me){return w=Me,c=di(se,t),S?W(Me):u}function ne(Me){var Dt=Me-p,Qt=Me-w,ua=t-Dt;return $?Ke(ua,l-Qt):ua}function V(Me){var Dt=Me-p,Qt=Me-w;return p===r||Dt>=t||Dt<0||$&&Qt>=l}function se(){var Me=rr();if(V(Me))return pe(Me);c=di(se,ne(Me))}function pe(Me){return c=r,L&&i?W(Me):(i=s=r,u)}function ht(){c!==r&&el(c),w=0,i=p=s=c=r}function Qe(){return c===r?u:pe(rr())}function gt(){var Me=rr(),Dt=V(Me);if(i=arguments,s=this,p=Me,Dt){if(c===r)return G(p);if($)return el(c),c=di(se,t),W(p)}return c===r&&(c=di(se,t)),u}return gt.cancel=ht,gt.flush=Qe,gt}var wp=re(function(e,t){return Lo(e,1,t)}),Sp=re(function(e,t,n){return Lo(e,Tt(t)||0,n)});function Ap(e){return Kt(e,Re)}function sr(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new wt(m);var n=function(){var i=arguments,s=t?t.apply(this,i):i[0],l=n.cache;if(l.has(s))return l.get(s);var u=e.apply(this,i);return n.cache=l.set(s,u)||l,u};return n.cache=new(sr.Cache||Gt),n}sr.Cache=Gt;function or(e){if(typeof e!="function")throw new wt(m);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function $p(e){return Wl(2,e)}var Cp=dc(function(e,t){t=t.length==1&&j(t[0])?De(t[0],ct(H())):De(Ge(t,1),ct(H()));var n=t.length;return re(function(i){for(var s=-1,l=Ke(i.length,n);++s<l;)i[s]=t[s].call(this,i[s]);return ft(e,this,i)})}),vs=re(function(e,t){var n=ln(t,Gn(vs));return Kt(e,z,r,t,n)}),Gl=re(function(e,t){var n=ln(t,Gn(Gl));return Kt(e,ve,r,t,n)}),Tp=Yt(function(e,t){return Kt(e,$e,r,r,r,t)});function Ip(e,t){if(typeof e!="function")throw new wt(m);return t=t===r?t:te(t),re(e,t)}function zp(e,t){if(typeof e!="function")throw new wt(m);return t=t==null?0:qe(te(t),0),re(function(n){var i=n[t],s=dn(n,0,t);return i&&on(s,i),ft(e,this,s)})}function Rp(e,t,n){var i=!0,s=!0;if(typeof e!="function")throw new wt(m);return ke(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),Hl(e,t,{leading:i,maxWait:t,trailing:s})}function Op(e){return Bl(e,1)}function Dp(e,t){return vs(ts(t),e)}function Lp(){if(!arguments.length)return[];var e=arguments[0];return j(e)?e:[e]}function Ep(e){return At(e,B)}function kp(e,t){return t=typeof t=="function"?t:r,At(e,B,t)}function Pp(e){return At(e,Y|B)}function Up(e,t){return t=typeof t=="function"?t:r,At(e,Y|B,t)}function Mp(e,t){return t==null||Do(e,t,Ne(t))}function Ot(e,t){return e===t||e!==e&&t!==t}var Bp=Qi(Nr),Wp=Qi(function(e,t){return e>=t}),$n=Mo(function(){return arguments}())?Mo:function(e){return Pe(e)&&be.call(e,"callee")&&!Ao.call(e,"callee")},j=v.isArray,Fp=ro?ct(ro):Zf;function nt(e){return e!=null&&lr(e.length)&&!Xt(e)}function Ue(e){return Pe(e)&&nt(e)}function qp(e){return e===!0||e===!1||Pe(e)&&Xe(e)==kt}var pn=tf||Is,Np=so?ct(so):Xf;function Hp(e){return Pe(e)&&e.nodeType===1&&!pi(e)}function Gp(e){if(e==null)return!0;if(nt(e)&&(j(e)||typeof e=="string"||typeof e.splice=="function"||pn(e)||Vn(e)||$n(e)))return!e.length;var t=Ye(e);if(t==at||t==ut)return!e.size;if(ci(e))return!Vr(e).length;for(var n in e)if(be.call(e,n))return!1;return!0}function Vp(e,t){return ai(e,t)}function Kp(e,t,n){n=typeof n=="function"?n:r;var i=n?n(e,t):r;return i===r?ai(e,t,r,n):!!i}function ms(e){if(!Pe(e))return!1;var t=Xe(e);return t==lt||t==Ae||typeof e.message=="string"&&typeof e.name=="string"&&!pi(e)}function Yp(e){return typeof e=="number"&&Co(e)}function Xt(e){if(!ke(e))return!1;var t=Xe(e);return t==yt||t==Tn||t==qt||t==_i}function Vl(e){return typeof e=="number"&&e==te(e)}function lr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=je}function ke(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Pe(e){return e!=null&&typeof e=="object"}var Kl=oo?ct(oo):Qf;function Zp(e,t){return e===t||Gr(e,t,as(t))}function Xp(e,t,n){return n=typeof n=="function"?n:r,Gr(e,t,as(t),n)}function Jp(e){return Yl(e)&&e!=+e}function Qp(e){if(kc(e))throw new J(T);return Bo(e)}function jp(e){return e===null}function eh(e){return e==null}function Yl(e){return typeof e=="number"||Pe(e)&&Xe(e)==jt}function pi(e){if(!Pe(e)||Xe(e)!=It)return!1;var t=Ei(e);if(t===null)return!0;var n=be.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Ri.call(n)==Zu}var ys=lo?ct(lo):jf;function th(e){return Vl(e)&&e>=-9007199254740991&&e<=je}var Zl=ao?ct(ao):ec;function ar(e){return typeof e=="string"||!j(e)&&Pe(e)&&Xe(e)==_n}function pt(e){return typeof e=="symbol"||Pe(e)&&Xe(e)==In}var Vn=uo?ct(uo):tc;function nh(e){return e===r}function ih(e){return Pe(e)&&Ye(e)==tn}function rh(e){return Pe(e)&&Xe(e)==vi}var sh=Qi(Kr),oh=Qi(function(e,t){return e<=t});function Xl(e){if(!e)return[];if(nt(e))return ar(e)?zt(e):tt(e);if(ei&&e[ei])return Uu(e[ei]());var t=Ye(e),n=t==at?Er:t==ut?Ti:Kn;return n(e)}function Jt(e){if(!e)return e===0?e:0;if(e=Tt(e),e===Se||e===-1/0){var t=e<0?-1:1;return t*Et}return e===e?e:0}function te(e){var t=Jt(e),n=t%1;return t===t?n?t-n:t:0}function Jl(e){return e?bn(te(e),0,D):0}function Tt(e){if(typeof e=="number")return e;if(pt(e))return Oe;if(ke(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ke(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=_o(e);var n=Wa.test(e);return n||qa.test(e)?xu(e.slice(2),n?2:8):Ba.test(e)?Oe:+e}function Ql(e){return Bt(e,it(e))}function lh(e){return e?bn(te(e),-9007199254740991,je):e===0?e:0}function xe(e){return e==null?"":dt(e)}var ah=Nn(function(e,t){if(ci(t)||nt(t)){Bt(t,Ne(t),e);return}for(var n in t)be.call(t,n)&&si(e,n,t[n])}),jl=Nn(function(e,t){Bt(t,it(t),e)}),ur=Nn(function(e,t,n,i){Bt(t,it(t),e,i)}),uh=Nn(function(e,t,n,i){Bt(t,Ne(t),e,i)}),fh=Yt(Wr);function ch(e,t){var n=qn(e);return t==null?n:Oo(n,t)}var dh=re(function(e,t){e=Ce(e);var n=-1,i=t.length,s=i>2?t[2]:r;for(s&&Je(t[0],t[1],s)&&(i=1);++n<i;)for(var l=t[n],u=it(l),c=-1,p=u.length;++c<p;){var w=u[c],S=e[w];(S===r||Ot(S,Bn[w])&&!be.call(e,w))&&(e[w]=l[w])}return e}),ph=re(function(e){return e.push(r,_l),ft(ea,r,e)});function hh(e,t){return co(e,H(t,3),Mt)}function gh(e,t){return co(e,H(t,3),qr)}function _h(e,t){return e==null?e:Fr(e,H(t,3),it)}function vh(e,t){return e==null?e:Po(e,H(t,3),it)}function mh(e,t){return e&&Mt(e,H(t,3))}function yh(e,t){return e&&qr(e,H(t,3))}function xh(e){return e==null?[]:Hi(e,Ne(e))}function bh(e){return e==null?[]:Hi(e,it(e))}function xs(e,t,n){var i=e==null?r:wn(e,t);return i===r?n:i}function wh(e,t){return e!=null&&yl(e,t,Gf)}function bs(e,t){return e!=null&&yl(e,t,Vf)}var Sh=cl(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=Oi.call(t)),e[t]=n},Ss(rt)),Ah=cl(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=Oi.call(t)),be.call(e,t)?e[t].push(n):e[t]=[n]},H),$h=re(li);function Ne(e){return nt(e)?zo(e):Vr(e)}function it(e){return nt(e)?zo(e,!0):nc(e)}function Ch(e,t){var n={};return t=H(t,3),Mt(e,function(i,s,l){Vt(n,t(i,s,l),i)}),n}function Th(e,t){var n={};return t=H(t,3),Mt(e,function(i,s,l){Vt(n,s,t(i,s,l))}),n}var Ih=Nn(function(e,t,n){Gi(e,t,n)}),ea=Nn(function(e,t,n,i){Gi(e,t,n,i)}),zh=Yt(function(e,t){var n={};if(e==null)return n;var i=!1;t=De(t,function(l){return l=cn(l,e),i||(i=l.length>1),l}),Bt(e,os(e),n),i&&(n=At(n,Y|Z|B,Sc));for(var s=t.length;s--;)Qr(n,t[s]);return n});function Rh(e,t){return ta(e,or(H(t)))}var Oh=Yt(function(e,t){return e==null?{}:rc(e,t)});function ta(e,t){if(e==null)return{};var n=De(os(e),function(i){return[i]});return t=H(t),Vo(e,n,function(i,s){return t(i,s[0])})}function Dh(e,t,n){t=cn(t,e);var i=-1,s=t.length;for(s||(s=1,e=r);++i<s;){var l=e==null?r:e[Wt(t[i])];l===r&&(i=s,l=n),e=Xt(l)?l.call(e):l}return e}function Lh(e,t,n){return e==null?e:ui(e,t,n)}function Eh(e,t,n,i){return i=typeof i=="function"?i:r,e==null?e:ui(e,t,n,i)}var na=hl(Ne),ia=hl(it);function kh(e,t,n){var i=j(e),s=i||pn(e)||Vn(e);if(t=H(t,4),n==null){var l=e&&e.constructor;s?n=i?new l:[]:ke(e)?n=Xt(l)?qn(Ei(e)):{}:n={}}return(s?bt:Mt)(e,function(u,c,p){return t(n,u,c,p)}),n}function Ph(e,t){return e==null?!0:Qr(e,t)}function Uh(e,t,n){return e==null?e:Jo(e,t,ts(n))}function Mh(e,t,n,i){return i=typeof i=="function"?i:r,e==null?e:Jo(e,t,ts(n),i)}function Kn(e){return e==null?[]:Lr(e,Ne(e))}function Bh(e){return e==null?[]:Lr(e,it(e))}function Wh(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=Tt(n),n=n===n?n:0),t!==r&&(t=Tt(t),t=t===t?t:0),bn(Tt(e),t,n)}function Fh(e,t,n){return t=Jt(t),n===r?(n=t,t=0):n=Jt(n),e=Tt(e),Kf(e,t,n)}function qh(e,t,n){if(n&&typeof n!="boolean"&&Je(e,t,n)&&(t=n=r),n===r&&(typeof t=="boolean"?(n=t,t=r):typeof e=="boolean"&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=Jt(e),t===r?(t=e,e=0):t=Jt(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var s=To();return Ke(e+s*(t-e+yu("1e-"+((s+"").length-1))),t)}return Zr(e,t)}var Nh=Hn(function(e,t,n){return t=t.toLowerCase(),e+(n?ra(t):t)});function ra(e){return ws(xe(e).toLowerCase())}function sa(e){return e=xe(e),e&&e.replace(Ha,Du).replace(uu,"")}function Hh(e,t,n){e=xe(e),t=dt(t);var i=e.length;n=n===r?i:bn(te(n),0,i);var s=n;return n-=t.length,n>=0&&e.slice(n,s)==t}function Gh(e){return e=xe(e),e&&bi.test(e)?e.replace(Qn,Lu):e}function Vh(e){return e=xe(e),e&&Ra.test(e)?e.replace(vr,"\\$&"):e}var Kh=Hn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Yh=Hn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Zh=al("toLowerCase");function Xh(e,t,n){e=xe(e),t=te(t);var i=t?Un(e):0;if(!t||i>=t)return e;var s=(t-i)/2;return Ji(Mi(s),n)+e+Ji(Ui(s),n)}function Jh(e,t,n){e=xe(e),t=te(t);var i=t?Un(e):0;return t&&i<t?e+Ji(t-i,n):e}function Qh(e,t,n){e=xe(e),t=te(t);var i=t?Un(e):0;return t&&i<t?Ji(t-i,n)+e:e}function jh(e,t,n){return n||t==null?t=0:t&&(t=+t),of(xe(e).replace(mr,""),t||0)}function eg(e,t,n){return(n?Je(e,t,n):t===r)?t=1:t=te(t),Xr(xe(e),t)}function tg(){var e=arguments,t=xe(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var ng=Hn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function ig(e,t,n){return n&&typeof n!="number"&&Je(e,t,n)&&(t=n=r),n=n===r?D:n>>>0,n?(e=xe(e),e&&(typeof t=="string"||t!=null&&!ys(t))&&(t=dt(t),!t&&Pn(e))?dn(zt(e),0,n):e.split(t,n)):[]}var rg=Hn(function(e,t,n){return e+(n?" ":"")+ws(t)});function sg(e,t,n){return e=xe(e),n=n==null?0:bn(te(n),0,e.length),t=dt(t),e.slice(n,n+t.length)==t}function og(e,t,n){var i=o.templateSettings;n&&Je(e,t,n)&&(t=r),e=xe(e),t=ur({},t,i,gl);var s=ur({},t.imports,i.imports,gl),l=Ne(s),u=Lr(s,l),c,p,w=0,S=t.interpolate||wi,$="__p += '",L=kr((t.escape||wi).source+"|"+S.source+"|"+(S===Ps?Ma:wi).source+"|"+(t.evaluate||wi).source+"|$","g"),W="//# sourceURL="+(be.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++hu+"]")+`
`;e.replace(L,function(V,se,pe,ht,Qe,gt){return pe||(pe=ht),$+=e.slice(w,gt).replace(Ga,Eu),se&&(c=!0,$+=`' +
__e(`+se+`) +
'`),Qe&&(p=!0,$+=`';
`+Qe+`;
__p += '`),pe&&($+=`' +
((__t = (`+pe+`)) == null ? '' : __t) +
'`),w=gt+V.length,V}),$+=`';
`;var G=be.call(t,"variable")&&t.variable;if(!G)$=`with (obj) {
`+$+`
}
`;else if(Pa.test(G))throw new J(I);$=(p?$.replace(mi,""):$).replace(yi,"$1").replace(xi,"$1;"),$="function("+(G||"obj")+`) {
`+(G?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(c?", __e = _.escape":"")+(p?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+$+`return __p
}`;var ne=la(function(){return me(l,W+"return "+$).apply(r,u)});if(ne.source=$,ms(ne))throw ne;return ne}function lg(e){return xe(e).toLowerCase()}function ag(e){return xe(e).toUpperCase()}function ug(e,t,n){if(e=xe(e),e&&(n||t===r))return _o(e);if(!e||!(t=dt(t)))return e;var i=zt(e),s=zt(t),l=vo(i,s),u=mo(i,s)+1;return dn(i,l,u).join("")}function fg(e,t,n){if(e=xe(e),e&&(n||t===r))return e.slice(0,xo(e)+1);if(!e||!(t=dt(t)))return e;var i=zt(e),s=mo(i,zt(t))+1;return dn(i,0,s).join("")}function cg(e,t,n){if(e=xe(e),e&&(n||t===r))return e.replace(mr,"");if(!e||!(t=dt(t)))return e;var i=zt(e),s=vo(i,zt(t));return dn(i,s).join("")}function dg(e,t){var n=U,i=E;if(ke(t)){var s="separator"in t?t.separator:s;n="length"in t?te(t.length):n,i="omission"in t?dt(t.omission):i}e=xe(e);var l=e.length;if(Pn(e)){var u=zt(e);l=u.length}if(n>=l)return e;var c=n-Un(i);if(c<1)return i;var p=u?dn(u,0,c).join(""):e.slice(0,c);if(s===r)return p+i;if(u&&(c+=p.length-c),ys(s)){if(e.slice(c).search(s)){var w,S=p;for(s.global||(s=kr(s.source,xe(Us.exec(s))+"g")),s.lastIndex=0;w=s.exec(S);)var $=w.index;p=p.slice(0,$===r?c:$)}}else if(e.indexOf(dt(s),c)!=c){var L=p.lastIndexOf(s);L>-1&&(p=p.slice(0,L))}return p+i}function pg(e){return e=xe(e),e&&et.test(e)?e.replace(Jn,Fu):e}var hg=Hn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),ws=al("toUpperCase");function oa(e,t,n){return e=xe(e),t=n?r:t,t===r?Pu(e)?Hu(e):Tu(e):e.match(t)||[]}var la=re(function(e,t){try{return ft(e,r,t)}catch(n){return ms(n)?n:new J(n)}}),gg=Yt(function(e,t){return bt(t,function(n){n=Wt(n),Vt(e,n,_s(e[n],e))}),e});function _g(e){var t=e==null?0:e.length,n=H();return e=t?De(e,function(i){if(typeof i[1]!="function")throw new wt(m);return[n(i[0]),i[1]]}):[],re(function(i){for(var s=-1;++s<t;){var l=e[s];if(ft(l[0],this,i))return ft(l[1],this,i)}})}function vg(e){return qf(At(e,Y))}function Ss(e){return function(){return e}}function mg(e,t){return e==null||e!==e?t:e}var yg=fl(),xg=fl(!0);function rt(e){return e}function As(e){return Wo(typeof e=="function"?e:At(e,Y))}function bg(e){return qo(At(e,Y))}function wg(e,t){return No(e,At(t,Y))}var Sg=re(function(e,t){return function(n){return li(n,e,t)}}),Ag=re(function(e,t){return function(n){return li(e,n,t)}});function $s(e,t,n){var i=Ne(t),s=Hi(t,i);n==null&&!(ke(t)&&(s.length||!i.length))&&(n=t,t=e,e=this,s=Hi(t,Ne(t)));var l=!(ke(n)&&"chain"in n)||!!n.chain,u=Xt(e);return bt(s,function(c){var p=t[c];e[c]=p,u&&(e.prototype[c]=function(){var w=this.__chain__;if(l||w){var S=e(this.__wrapped__),$=S.__actions__=tt(this.__actions__);return $.push({func:p,args:arguments,thisArg:e}),S.__chain__=w,S}return p.apply(e,on([this.value()],arguments))})}),e}function $g(){return He._===this&&(He._=Xu),this}function Cs(){}function Cg(e){return e=te(e),re(function(t){return Ho(t,e)})}var Tg=is(De),Ig=is(fo),zg=is(Ir);function aa(e){return fs(e)?zr(Wt(e)):sc(e)}function Rg(e){return function(t){return e==null?r:wn(e,t)}}var Og=dl(),Dg=dl(!0);function Ts(){return[]}function Is(){return!1}function Lg(){return{}}function Eg(){return""}function kg(){return!0}function Pg(e,t){if(e=te(e),e<1||e>je)return[];var n=D,i=Ke(e,D);t=H(t),e-=D;for(var s=Dr(i,t);++n<e;)t(n);return s}function Ug(e){return j(e)?De(e,Wt):pt(e)?[e]:tt(Il(xe(e)))}function Mg(e){var t=++Yu;return xe(e)+t}var Bg=Xi(function(e,t){return e+t},0),Wg=rs("ceil"),Fg=Xi(function(e,t){return e/t},1),qg=rs("floor");function Ng(e){return e&&e.length?Ni(e,rt,Nr):r}function Hg(e,t){return e&&e.length?Ni(e,H(t,2),Nr):r}function Gg(e){return ho(e,rt)}function Vg(e,t){return ho(e,H(t,2))}function Kg(e){return e&&e.length?Ni(e,rt,Kr):r}function Yg(e,t){return e&&e.length?Ni(e,H(t,2),Kr):r}var Zg=Xi(function(e,t){return e*t},1),Xg=rs("round"),Jg=Xi(function(e,t){return e-t},0);function Qg(e){return e&&e.length?Or(e,rt):0}function jg(e,t){return e&&e.length?Or(e,H(t,2)):0}return o.after=bp,o.ary=Bl,o.assign=ah,o.assignIn=jl,o.assignInWith=ur,o.assignWith=uh,o.at=fh,o.before=Wl,o.bind=_s,o.bindAll=gg,o.bindKey=Fl,o.castArray=Lp,o.chain=Pl,o.chunk=qc,o.compact=Nc,o.concat=Hc,o.cond=_g,o.conforms=vg,o.constant=Ss,o.countBy=Qd,o.create=ch,o.curry=ql,o.curryRight=Nl,o.debounce=Hl,o.defaults=dh,o.defaultsDeep=ph,o.defer=wp,o.delay=Sp,o.difference=Gc,o.differenceBy=Vc,o.differenceWith=Kc,o.drop=Yc,o.dropRight=Zc,o.dropRightWhile=Xc,o.dropWhile=Jc,o.fill=Qc,o.filter=ep,o.flatMap=ip,o.flatMapDeep=rp,o.flatMapDepth=sp,o.flatten=Dl,o.flattenDeep=jc,o.flattenDepth=ed,o.flip=Ap,o.flow=yg,o.flowRight=xg,o.fromPairs=td,o.functions=xh,o.functionsIn=bh,o.groupBy=op,o.initial=id,o.intersection=rd,o.intersectionBy=sd,o.intersectionWith=od,o.invert=Sh,o.invertBy=Ah,o.invokeMap=ap,o.iteratee=As,o.keyBy=up,o.keys=Ne,o.keysIn=it,o.map=ir,o.mapKeys=Ch,o.mapValues=Th,o.matches=bg,o.matchesProperty=wg,o.memoize=sr,o.merge=Ih,o.mergeWith=ea,o.method=Sg,o.methodOf=Ag,o.mixin=$s,o.negate=or,o.nthArg=Cg,o.omit=zh,o.omitBy=Rh,o.once=$p,o.orderBy=fp,o.over=Tg,o.overArgs=Cp,o.overEvery=Ig,o.overSome=zg,o.partial=vs,o.partialRight=Gl,o.partition=cp,o.pick=Oh,o.pickBy=ta,o.property=aa,o.propertyOf=Rg,o.pull=fd,o.pullAll=El,o.pullAllBy=cd,o.pullAllWith=dd,o.pullAt=pd,o.range=Og,o.rangeRight=Dg,o.rearg=Tp,o.reject=hp,o.remove=hd,o.rest=Ip,o.reverse=hs,o.sampleSize=_p,o.set=Lh,o.setWith=Eh,o.shuffle=vp,o.slice=gd,o.sortBy=xp,o.sortedUniq=wd,o.sortedUniqBy=Sd,o.split=ig,o.spread=zp,o.tail=Ad,o.take=$d,o.takeRight=Cd,o.takeRightWhile=Td,o.takeWhile=Id,o.tap=Nd,o.throttle=Rp,o.thru=nr,o.toArray=Xl,o.toPairs=na,o.toPairsIn=ia,o.toPath=Ug,o.toPlainObject=Ql,o.transform=kh,o.unary=Op,o.union=zd,o.unionBy=Rd,o.unionWith=Od,o.uniq=Dd,o.uniqBy=Ld,o.uniqWith=Ed,o.unset=Ph,o.unzip=gs,o.unzipWith=kl,o.update=Uh,o.updateWith=Mh,o.values=Kn,o.valuesIn=Bh,o.without=kd,o.words=oa,o.wrap=Dp,o.xor=Pd,o.xorBy=Ud,o.xorWith=Md,o.zip=Bd,o.zipObject=Wd,o.zipObjectDeep=Fd,o.zipWith=qd,o.entries=na,o.entriesIn=ia,o.extend=jl,o.extendWith=ur,$s(o,o),o.add=Bg,o.attempt=la,o.camelCase=Nh,o.capitalize=ra,o.ceil=Wg,o.clamp=Wh,o.clone=Ep,o.cloneDeep=Pp,o.cloneDeepWith=Up,o.cloneWith=kp,o.conformsTo=Mp,o.deburr=sa,o.defaultTo=mg,o.divide=Fg,o.endsWith=Hh,o.eq=Ot,o.escape=Gh,o.escapeRegExp=Vh,o.every=jd,o.find=tp,o.findIndex=Rl,o.findKey=hh,o.findLast=np,o.findLastIndex=Ol,o.findLastKey=gh,o.floor=qg,o.forEach=Ul,o.forEachRight=Ml,o.forIn=_h,o.forInRight=vh,o.forOwn=mh,o.forOwnRight=yh,o.get=xs,o.gt=Bp,o.gte=Wp,o.has=wh,o.hasIn=bs,o.head=Ll,o.identity=rt,o.includes=lp,o.indexOf=nd,o.inRange=Fh,o.invoke=$h,o.isArguments=$n,o.isArray=j,o.isArrayBuffer=Fp,o.isArrayLike=nt,o.isArrayLikeObject=Ue,o.isBoolean=qp,o.isBuffer=pn,o.isDate=Np,o.isElement=Hp,o.isEmpty=Gp,o.isEqual=Vp,o.isEqualWith=Kp,o.isError=ms,o.isFinite=Yp,o.isFunction=Xt,o.isInteger=Vl,o.isLength=lr,o.isMap=Kl,o.isMatch=Zp,o.isMatchWith=Xp,o.isNaN=Jp,o.isNative=Qp,o.isNil=eh,o.isNull=jp,o.isNumber=Yl,o.isObject=ke,o.isObjectLike=Pe,o.isPlainObject=pi,o.isRegExp=ys,o.isSafeInteger=th,o.isSet=Zl,o.isString=ar,o.isSymbol=pt,o.isTypedArray=Vn,o.isUndefined=nh,o.isWeakMap=ih,o.isWeakSet=rh,o.join=ld,o.kebabCase=Kh,o.last=Ct,o.lastIndexOf=ad,o.lowerCase=Yh,o.lowerFirst=Zh,o.lt=sh,o.lte=oh,o.max=Ng,o.maxBy=Hg,o.mean=Gg,o.meanBy=Vg,o.min=Kg,o.minBy=Yg,o.stubArray=Ts,o.stubFalse=Is,o.stubObject=Lg,o.stubString=Eg,o.stubTrue=kg,o.multiply=Zg,o.nth=ud,o.noConflict=$g,o.noop=Cs,o.now=rr,o.pad=Xh,o.padEnd=Jh,o.padStart=Qh,o.parseInt=jh,o.random=qh,o.reduce=dp,o.reduceRight=pp,o.repeat=eg,o.replace=tg,o.result=Dh,o.round=Xg,o.runInContext=d,o.sample=gp,o.size=mp,o.snakeCase=ng,o.some=yp,o.sortedIndex=_d,o.sortedIndexBy=vd,o.sortedIndexOf=md,o.sortedLastIndex=yd,o.sortedLastIndexBy=xd,o.sortedLastIndexOf=bd,o.startCase=rg,o.startsWith=sg,o.subtract=Jg,o.sum=Qg,o.sumBy=jg,o.template=og,o.times=Pg,o.toFinite=Jt,o.toInteger=te,o.toLength=Jl,o.toLower=lg,o.toNumber=Tt,o.toSafeInteger=lh,o.toString=xe,o.toUpper=ag,o.trim=ug,o.trimEnd=fg,o.trimStart=cg,o.truncate=dg,o.unescape=pg,o.uniqueId=Mg,o.upperCase=hg,o.upperFirst=ws,o.each=Ul,o.eachRight=Ml,o.first=Ll,$s(o,function(){var e={};return Mt(o,function(t,n){be.call(o.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),o.VERSION=g,bt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){o[e].placeholder=o}),bt(["drop","take"],function(e,t){ce.prototype[e]=function(n){n=n===r?1:qe(te(n),0);var i=this.__filtered__&&!t?new ce(this):this.clone();return i.__filtered__?i.__takeCount__=Ke(n,i.__takeCount__):i.__views__.push({size:Ke(n,D),type:e+(i.__dir__<0?"Right":"")}),i},ce.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),bt(["filter","map","takeWhile"],function(e,t){var n=t+1,i=n==we||n==Ee;ce.prototype[e]=function(s){var l=this.clone();return l.__iteratees__.push({iteratee:H(s,3),type:n}),l.__filtered__=l.__filtered__||i,l}}),bt(["head","last"],function(e,t){var n="take"+(t?"Right":"");ce.prototype[e]=function(){return this[n](1).value()[0]}}),bt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");ce.prototype[e]=function(){return this.__filtered__?new ce(this):this[n](1)}}),ce.prototype.compact=function(){return this.filter(rt)},ce.prototype.find=function(e){return this.filter(e).head()},ce.prototype.findLast=function(e){return this.reverse().find(e)},ce.prototype.invokeMap=re(function(e,t){return typeof e=="function"?new ce(this):this.map(function(n){return li(n,e,t)})}),ce.prototype.reject=function(e){return this.filter(or(H(e)))},ce.prototype.slice=function(e,t){e=te(e);var n=this;return n.__filtered__&&(e>0||t<0)?new ce(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(t=te(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},ce.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},ce.prototype.toArray=function(){return this.take(D)},Mt(ce.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),s=o[i?"take"+(t=="last"?"Right":""):t],l=i||/^find/.test(t);s&&(o.prototype[t]=function(){var u=this.__wrapped__,c=i?[1]:arguments,p=u instanceof ce,w=c[0],S=p||j(u),$=function(se){var pe=s.apply(o,on([se],c));return i&&L?pe[0]:pe};S&&n&&typeof w=="function"&&w.length!=1&&(p=S=!1);var L=this.__chain__,W=!!this.__actions__.length,G=l&&!L,ne=p&&!W;if(!l&&S){u=ne?u:new ce(this);var V=e.apply(u,c);return V.__actions__.push({func:nr,args:[$],thisArg:r}),new St(V,L)}return G&&ne?e.apply(this,c):(V=this.thru($),G?i?V.value()[0]:V.value():V)})}),bt(["pop","push","shift","sort","splice","unshift"],function(e){var t=Ii[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);o.prototype[e]=function(){var s=arguments;if(i&&!this.__chain__){var l=this.value();return t.apply(j(l)?l:[],s)}return this[n](function(u){return t.apply(j(u)?u:[],s)})}}),Mt(ce.prototype,function(e,t){var n=o[t];if(n){var i=n.name+"";be.call(Fn,i)||(Fn[i]=[]),Fn[i].push({name:t,func:n})}}),Fn[Zi(r,ae).name]=[{name:"wrapper",func:r}],ce.prototype.clone=pf,ce.prototype.reverse=hf,ce.prototype.value=gf,o.prototype.at=Hd,o.prototype.chain=Gd,o.prototype.commit=Vd,o.prototype.next=Kd,o.prototype.plant=Zd,o.prototype.reverse=Xd,o.prototype.toJSON=o.prototype.valueOf=o.prototype.value=Jd,o.prototype.first=o.prototype.head,ei&&(o.prototype[ei]=Yd),o},Mn=Gu();vn?((vn.exports=Mn)._=Mn,Ar._=Mn):He._=Mn}).call(av)}(hi,hi.exports)),hi.exports}var Ft=uv();const fv={class:""},cv={class:"group py-2"},dv={class:"flex items-center justify-between"},pv={class:"py-4"},hv={class:"flex flex-col gap-5"},gv={class:"flex flex-col gap-2"},_v={class:"flex flex-col gap-2 p-3 bg-gray-50 border border-gray-200 rounded-lg"},vv={class:"flex items-center justify-between"},mv={class:"flex flex-col gap-2"},yv={class:"flex flex-col p-3 bg-gray-50 border border-gray-200 rounded-lg"},xv={class:"flex items-center justify-between"},bv={class:"flex items-center justify-between"},wv=vt({__name:"ReviewConfigAbilityItem",props:{app_id:{type:String,default:"",required:!0},review_config:{type:Object,default:{},required:!0}},setup(a){var Y,Z,B,le,F,q,ae,ye,ue;const f=a,{loading:r,handleUpdateDraftAppConfig:g}=gn(),y=oe(!1),T=oe(!1),m=oe({enable:(Y=f.review_config)==null?void 0:Y.enable,keywords:(B=(Z=f.review_config)==null?void 0:Z.keywords)==null?void 0:B.join(`
`),inputs_config:{enable:(F=(le=f.review_config)==null?void 0:le.inputs_config)==null?void 0:F.enable,preset_response:(ae=(q=f.review_config)==null?void 0:q.inputs_config)==null?void 0:ae.preset_response},outputs_config:{enable:(ue=(ye=f.review_config)==null?void 0:ye.outputs_config)==null?void 0:ue.enable}}),I=oe({...Ft.cloneDeep(m.value)}),A=()=>Ft.isEqual(I.value,m.value),O=()=>{T.value=!1,m.value=Ft.cloneDeep(I.value)},K=async()=>{try{await g(f.app_id,{review_config:{enable:m.value.enable,keywords:m.value.keywords.split(/\r?\n/).filter(k=>k.trim()!==""),inputs_config:m.value.inputs_config,outputs_config:m.value.outputs_config}}),I.value=Ft.cloneDeep(m.value),await Cn(),O()}catch{}};return cr(()=>f.review_config,k=>{(!y.value||!A())&&k&&Object.keys(k).length>0&&(m.value=Ft.cloneDeep({...k,keywords:k==null?void 0:k.keywords.join(`
`)}),I.value=Ft.cloneDeep({...k,keywords:k==null?void 0:k.keywords.join(`
`)}),y.value=!0)},{immediate:!0,deep:!0}),(k,z)=>{const ve=C("icon-down"),Q=C("a-button"),$e=C("a-doption"),Re=C("a-dropdown"),U=C("icon-settings"),E=C("a-collapse-item"),ie=C("icon-close"),ee=C("a-textarea"),we=C("a-switch"),We=C("a-space"),Ee=C("a-modal");return R(),M("div",fv,[h(E,{key:"review_config",class:"app-ability-item review-config-ability-item"},{header:b(()=>z[7]||(z[7]=[_("div",{class:"text-gray-700 font-bold"},"内容审查",-1)])),extra:b(()=>[h(Re,{onSelect:z[1]||(z[1]=async Se=>{if(!!Se!==m.value.enable)try{m.value.enable=!!Se,await Cn(),await K()}catch{}})},{content:b(()=>[h($e,{value:1,class:"text-xs py-1.5 text-gray-700"},{default:b(()=>z[8]||(z[8]=[de("开启")])),_:1}),h($e,{value:0,class:"text-xs py-1.5 text-red-700"},{default:b(()=>z[9]||(z[9]=[de("关闭")])),_:1})]),default:b(()=>[h(Q,{size:"mini",class:"rounded-lg flex items-center gap-1 px-1",onClick:z[0]||(z[0]=Zn(()=>{},["stop"]))},{default:b(()=>[de(_e(m.value.enable?"开启":"关闭")+" ",1),h(ve)]),_:1})]),_:1})]),default:b(()=>[_("div",cv,[z[11]||(z[11]=_("div",{class:"text-xs text-gray-500 leading-[22px] group-hover:hidden"}," 对用户输入以及大语言模型输出内容进行审查。 ",-1)),h(Q,{size:"small",long:"",class:"hidden group-hover:block rounded-lg transition-all",onClick:z[2]||(z[2]=Se=>T.value=!0)},{icon:b(()=>[h(U)]),default:b(()=>[z[10]||(z[10]=de(" 设置 "))]),_:1})])]),_:1}),h(Ee,{visible:T.value,"hide-title":"",footer:!1,"modal-class":"rounded-xl",onCancel:O},{default:b(()=>[_("div",dv,[z[12]||(z[12]=_("div",{class:"text-lg font-bold text-gray-700"},"内容审核",-1)),h(Q,{type:"text",class:"!text-gray-700",size:"small",onClick:O},{icon:b(()=>[h(ie)]),_:1})]),_("div",pv,[_("div",hv,[_("div",gv,[z[13]||(z[13]=_("div",{class:"flex flex-col"},[_("div",{class:"flex items-center gap-1 text-gray-700"},[de(" 关键词 "),_("div",{class:"text-red-700"},"*")]),_("div",{class:"text-gray-500 text-xs"},"每行一个，用换行符分割，最多填写100个关键词")],-1)),h(ee,{"model-value":m.value.keywords,"onUpdate:modelValue":z[3]||(z[3]=Se=>m.value.keywords=Se),class:"bg-white rounded-lg border border-gray-200",placeholder:"每行一个，用换行符分隔。","max-length":100,"show-word-limit":"","auto-size":{minRows:4,maxRows:4},"word-length":Se=>Se.trim()===""?0:Se.split(/\r?\n/).length,"word-slice":(Se,je)=>Se.split(/\r?\n/).slice(0,je).join(`
`)},null,8,["model-value","word-length","word-slice"])]),_("div",_v,[_("div",vv,[z[14]||(z[14]=_("div",{class:"text-gray-700"},"输入审查内容",-1)),h(we,{"model-value":m.value.inputs_config.enable,"onUpdate:modelValue":z[4]||(z[4]=Se=>m.value.inputs_config.enable=Se),size:"small",type:"round","checked-color":"#10b981","unchecked-color":"#556581"},null,8,["model-value"])]),_("div",mv,[z[15]||(z[15]=_("div",{class:"text-gray-700 text-xs"},"预设回复",-1)),h(ee,{"model-value":m.value.inputs_config.preset_response,"onUpdate:modelValue":z[5]||(z[5]=Se=>m.value.inputs_config.preset_response=Se),placeholder:"这里是预设回复内容",class:"bg-white rounded-lg border border-gray-200","auto-size":{minRows:3,maxRows:3}},null,8,["model-value"])])]),_("div",yv,[_("div",xv,[z[16]||(z[16]=_("div",{class:"text-gray-700"},"输出审查内容",-1)),h(we,{"model-value":m.value.outputs_config.enable,"onUpdate:modelValue":z[6]||(z[6]=Se=>m.value.outputs_config.enable=Se),size:"small",type:"round","checked-color":"#10b981","unchecked-color":"#556581"},null,8,["model-value"])])])])]),_("div",bv,[z[19]||(z[19]=_("div",{class:""},null,-1)),h(We,{size:16},{default:b(()=>[h(Q,{class:"rounded-lg",onClick:O},{default:b(()=>z[17]||(z[17]=[de("取消")])),_:1}),h(Q,{loading:N(r),type:"primary",class:"rounded-lg",onClick:K},{default:b(()=>z[18]||(z[18]=[de(" 保存 ")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["visible"])])}}}),Sv={class:""},Av={key:0,class:""},$v={key:1,class:""},Cv={key:2,class:""},Tv={key:0,class:"flex flex-col gap-1"},Iv={class:"flex items-center gap-2"},zv={class:"flex flex-col flex-1 gap-1 h-9"},Rv={class:"text-gray-700 font-bold leading-[18px] line-clamp-1 break-all"},Ov={class:"text-gray-500 text-xs line-clamp-1 break-all"},Dv={key:1,class:"text-xs text-gray-500 leading-[22px]"},Lv={class:"flex items-center justify-between mb-6"},Ev={class:"h-[calc(100vh-180px)] mb-4 overflow-scroll scrollbar-w-none"},kv={class:"flex flex-col gap-2"},Pv=["onClick"],Uv={class:"line-clamp-1 text-gray-500 flex-1"},Mv={class:"flex items-center justify-between"},Bv={class:""},Wv={class:"flex items-center justify-between"},Fv={class:"flex items-center gap-4 w-full pl-3"},qv={class:"flex items-center gap-4 w-full pl-3"},Nv={class:"flex items-center justify-between"},Hv=vt({__name:"DatasetsAbilityItem",props:{app_id:{type:String,default:"",required:!0},retrieval_config:{type:Object,default:{},required:!0},datasets:{type:Array,default:[],required:!0}},emits:["update:datasets","update:retrieval_config"],setup(a,{emit:f}){const r=a,g=f,{loading:y,handleUpdateDraftAppConfig:T}=gn(),{loading:m,paginator:I,datasets:A,loadDatasets:O}=$_(),K=oe(!1),Y=oe(!1),Z=oe(!1),B=oe([]),le=oe([]),F=oe({}),q=oe({}),ae=oe(!1),ye=async U=>{const{scrollTop:E,scrollHeight:ie,clientHeight:ee}=U.target;if(E+ee>=ie-10){if(m.value)return;await O()}},ue=()=>Ft.isEqual(B.value,le.value),k=()=>Ft.isEqual(F.value,q.value),z=()=>{K.value=!1,B.value=le.value,Z.value=!1},ve=()=>{Y.value=!1,F.value=q.value,ae.value=!1},Q=U=>{const E=A[U];if(B.value.some(ie=>ie.id===E.id))B.value=B.value.filter(ie=>ie.id!==E.id);else{if(B.value.length>=5){Yn.warning("关联知识库已超过5个，无法继续关联");return}B.value.push({id:E.id,name:E.name,icon:E.icon,description:E.description})}},$e=async()=>{try{await T(r.app_id,{datasets:B.value.map(U=>U.id)}),le.value=B.value,await Cn(),g("update:datasets",B.value),z()}catch(U){Yn.error(U.message)}},Re=async()=>{try{await T(r.app_id,{retrieval_config:F.value}),q.value=F.value,g("update:retrieval_config",F.value),ve()}catch(U){Yn.error(U.message)}};return cr(()=>r.datasets,U=>{if((!Z.value||!ue())&&U&&U.length>0){const E=r.datasets.map(ie=>({id:ie.id,name:ie.name,icon:ie.icon,description:ie.description}));B.value=Ft.cloneDeep(E),le.value=Ft.cloneDeep(E),Z.value=!0}},{immediate:!0,deep:!0}),cr(()=>r.retrieval_config,U=>{(!ae.value||!k())&&U&&Object.keys(U).length>0&&(F.value={...U},q.value={...U},ae.value=!0)},{immediate:!0,deep:!0}),cr(()=>K.value,async U=>{U?await O(!0):A.splice(0,A.length)}),(U,E)=>{const ie=C("icon-language"),ee=C("a-button"),we=C("icon-plus"),We=C("a-space"),Ee=C("a-avatar"),Se=C("icon-delete"),je=C("a-collapse-item"),Et=C("icon-close"),Oe=C("a-empty"),D=C("a-spin"),he=C("a-col"),X=C("a-row"),ge=C("a-modal"),mt=C("a-radio-group"),ot=C("a-form-item"),qt=C("a-slider"),kt=C("a-input-number"),Pt=C("a-form");return R(),M("div",Sv,[h(je,{key:"datasets",class:"app-ability-item"},{header:b(()=>E[7]||(E[7]=[_("div",{class:"text-gray-700 font-bold"},"知识库",-1)])),extra:b(()=>[h(We,null,{default:b(()=>[h(ee,{size:"mini",class:"rounded-lg px-2",onClick:E[0]||(E[0]=Zn(Ae=>Y.value=!0,["stop"]))},{icon:b(()=>[h(ie)]),default:b(()=>{var Ae,lt;return[((Ae=a.retrieval_config)==null?void 0:Ae.retrieval_strategy)==="semantic"?(R(),M("div",Av," 相似度检索 ")):((lt=a.retrieval_config)==null?void 0:lt.retrieval_strategy)==="full_text"?(R(),M("div",$v," 全文检索 ")):(R(),M("div",Cv,"混合检索"))]}),_:1}),h(ee,{size:"mini",type:"text",class:"!text-gray-700",onClick:E[1]||(E[1]=Zn(Ae=>K.value=!0,["stop"]))},{icon:b(()=>[h(we)]),_:1})]),_:1})]),default:b(()=>[r.datasets.length>0?(R(),M("div",Tv,[(R(!0),M(st,null,_t(r.datasets,(Ae,lt)=>(R(),M("div",{key:Ae.id,class:"flex items-center justify-between bg-white p-3 rounded-lg cursor-pointer hover:shadow-sm group"},[_("div",Iv,[h(Ee,{size:36,shape:"square",class:"rounded flex-shrink-0","image-url":Ae.icon},null,8,["image-url"]),_("div",zv,[_("div",Rv,_e(Ae.name),1),_("div",Ov,_e(Ae.description),1)])]),h(ee,{size:"mini",type:"text",class:"hidden group-hover:block flex-shrink-0 ml-2 !text-red-700 rounded",onClick:async()=>{const yt=[...r.datasets];yt.splice(lt,1),await N(T)(r.app_id,{datasets:yt.map(Tn=>Tn.id)}),Z.value=!1,g("update:datasets",yt)}},{icon:b(()=>[h(Se)]),_:2},1032,["onClick"])]))),128))])):(R(),M("div",Dv," 引用文本类型的数据，实现知识问答，应用最多支持关联 5 个知识库。 "))]),_:1}),h(ge,{visible:K.value,"hide-title":"",footer:!1,width:400,class:"datasets-modal","modal-class":"h-[calc(100vh-32px)] right-4",onCancel:z},{default:b(()=>[_("div",Lv,[E[8]||(E[8]=_("div",{class:"text-lg font-bold text-gray-700"},"选择引用知识库",-1)),h(ee,{type:"text",class:"!text-gray-700",size:"small",onClick:z},{icon:b(()=>[h(Et)]),_:1})]),_("div",Ev,[h(D,{loading:N(m),class:"block h-full scrollbar-w-none overflow-scroll",onScroll:ye},{default:b(()=>[_("div",kv,[(R(!0),M(st,null,_t(N(A),(Ae,lt)=>(R(),M("div",{key:Ae.id,class:Lt(`flex items-center gap-2 border px-3 py-2 rounded-lg cursor-pointer hover:bg-blue-50 hover:border-blue-700 ${B.value.some(yt=>yt.id===Ae.id)?"bg-blue-50 border-blue-700":""}`),onClick:()=>Q(lt)},[h(Ee,{size:24,shape:"square",class:"flex-shrink-0 rounded","image-url":Ae.icon},null,8,["image-url"]),_("div",Uv,_e(Ae.name),1)],10,Pv))),128)),N(A).length===0?(R(),Be(Oe,{key:0,description:"没有可用知识库",class:"h-[400px] flex flex-col items-center justify-center"})):Le("",!0)]),N(I).total_page>=2?(R(),Be(X,{key:0},{default:b(()=>[N(I).current_page<=N(I).total_page?(R(),Be(he,{key:0,span:24,class:"!text-center"},{default:b(()=>[h(We,{class:"my-4"},{default:b(()=>[h(D),E[9]||(E[9]=_("div",{class:"text-gray-400"},"加载中",-1))]),_:1})]),_:1})):(R(),Be(he,{key:1,span:24,class:"!text-center"},{default:b(()=>E[10]||(E[10]=[_("div",{class:"text-gray-400 my-4"},"数据已加载完成",-1)])),_:1}))]),_:1})):Le("",!0)]),_:1},8,["loading"])]),_("div",Mv,[_("div",Bv,_e(B.value.length)+"个知识库被选中",1),h(We,{size:12},{default:b(()=>[h(ee,{class:"rounded-lg",onClick:z},{default:b(()=>E[11]||(E[11]=[de("取消")])),_:1}),h(ee,{loading:N(y),type:"primary",class:"rounded-lg",onClick:$e},{default:b(()=>E[12]||(E[12]=[de(" 添加 ")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["visible"]),h(ge,{visible:Y.value,"hide-title":"",footer:!1,"modal-class":"rounded-xl",onCancel:ve},{default:b(()=>[_("div",Wv,[E[13]||(E[13]=_("div",{class:"text-lg font-bold text-gray-700"},"检索设置",-1)),h(ee,{type:"text",class:"!text-gray-700",size:"small",onClick:ve},{icon:b(()=>[h(Et)]),_:1})]),h(Pt,{model:F.value,onSubmit:Re,class:"pt-6"},{default:b(()=>[h(ot,{field:"retrieval_strategy",label:"检索策略","label-align":"left"},{default:b(()=>[h(mt,{"model-value":F.value.retrieval_strategy,"onUpdate:modelValue":E[2]||(E[2]=Ae=>F.value.retrieval_strategy=Ae),"default-value":"semantic",options:[{label:"混合策略",value:"hybrid"},{label:"全文检索",value:"full_text"},{label:"相似性检索",value:"semantic"}]},null,8,["model-value"])]),_:1}),h(ot,{field:"k",label:"最大召回数量"},{default:b(()=>[_("div",Fv,[h(qt,{"model-value":F.value.k,"onUpdate:modelValue":E[3]||(E[3]=Ae=>F.value.k=Ae),step:1,min:1,max:10},null,8,["model-value"]),h(kt,{"model-value":F.value.k,"onUpdate:modelValue":E[4]||(E[4]=Ae=>F.value.k=Ae),class:"w-[80px]","default-value":4},null,8,["model-value"])])]),_:1}),h(ot,{field:"score",label:"最小匹配度"},{default:b(()=>[_("div",qv,[h(qt,{"model-value":F.value.score,"onUpdate:modelValue":E[5]||(E[5]=Ae=>F.value.score=Ae),step:.01,min:0,max:.99},null,8,["model-value"]),h(kt,{"model-value":F.value.score,"onUpdate:modelValue":E[6]||(E[6]=Ae=>F.value.score=Ae),class:"w-[80px]",min:0,max:.99,step:.01,precision:2,"default-value":.5},null,8,["model-value"])])]),_:1}),_("div",Nv,[E[16]||(E[16]=_("div",{class:""},null,-1)),h(We,{size:16},{default:b(()=>[h(ee,{class:"rounded-lg",onClick:ve},{default:b(()=>E[14]||(E[14]=[de("取消")])),_:1}),h(ee,{loading:N(y),type:"primary","html-type":"submit",class:"rounded-lg"},{default:b(()=>E[15]||(E[15]=[de("保存")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["model"])]),_:1},8,["visible"])])}}}),Gv=()=>{const a=oe(!1),f=Xn({});return{loading:a,api_tool:f,loadApiTool:async(g,y)=>{try{a.value=!0;const m=(await C_(g,y)).data;Object.assign(f,m)}finally{a.value=!1}}}},Vv=()=>{const a=oe(!1),f=Xn([]),r={current_page:1,page_size:20,total_page:0,total_record:0},g=Xn({...r}),y=async(m=!1)=>{if(m)Object.assign(g,{...r});else if(g.current_page>g.total_page)return;try{a.value=!0;const A=(await T_(g.current_page,g.page_size,"")).data;T(A),g.current_page<=g.total_page&&(g.current_page+=1),m?f.splice(0,f.length,...A.list):f.push(...A.list)}finally{a.value=!1}},T=m=>{g.current_page=m.paginator.current_page,g.page_size=m.paginator.page_size,g.total_page=m.paginator.total_page,g.total_record=m.paginator.total_record};return{loading:a,api_tool_providers:f,paginator:g,loadApiToolProviders:y}},Kv=()=>{const a=oe(!1),f=Xn([]),r=async()=>{try{a.value=!0;const y=(await I_()).data;f.splice(0,f.length,...y)}finally{a.value=!1}};return va(async()=>await r()),{loading:a,categories:f,loadCategories:r}},Yv=()=>{const a=oe(!1),f=Xn({});return{loading:a,builtin_tool:f,loadBuiltinTool:async(g,y)=>{try{a.value=!0;const m=(await z_(g,y)).data;Object.assign(f,m)}finally{a.value=!1}}}},Zv=()=>{const a=oe(!1),f=Xn([]);return{loading:a,builtin_tools:f,loadBuiltinTools:async()=>{try{a.value=!0;const y=(await R_()).data;f.splice(0,f.length,...y)}finally{a.value=!1}}}},Xv={class:""},Jv={key:0,class:"flex flex-col gap-1"},Qv={class:"flex items-center gap-2"},jv={class:"flex flex-col gap-1 h-9"},em={class:"text-gray-700 font-bold leading-[18px] line-clamp-1 break-all"},tm={class:"text-gray-500 text-xs line-clamp-1 break-all"},nm={class:"hidden group-hover:flex items-center gap-1 flex-shrink-0 ml-2"},im={key:1,class:"text-xs text-gray-500 leading-[22px]"},rm={class:"flex items-center justify-between mb-6"},sm={class:"flex items-center"},om={class:"flex items-center gap-2"},lm={class:"text-gray-700 font-bold max-w-[200px] line-clamp-1 break-all"},am={class:"mx-4 text-gray-400"},um={class:"flex items-center gap-6"},fm={key:0,class:"h-[calc(100vh-170px)] pb-4 overflow-scroll scrollbar-w-none"},cm={class:"text-gray-500 text-xs"},dm={key:0,class:""},pm={class:"flex flex-col gap-4"},hm={class:"flex items-center gap-2 text-xs"},gm={class:"text-gray-900 font-bold"},_m={class:"text-gray-500"},vm={key:0,class:"text-red-700"},mm={class:"text-xs text-gray-500"},ym={key:1,class:"h-[calc(100vh-170px)] pb-4 overflow-scroll scrollbar-w-none"},xm={class:"flex items-center gap-1"},bm={class:"text-gray-700"},wm={key:0,class:"text-red-700"},Sm={class:"flex items-center justify-between"},Am={class:"flex w-full h-full"},$m={class:"flex flex-col flex-shrink-0 bg-gray-50 w-[200px] h-full px-3 py-4 overflow-scroll scrollbar-w-none"},Cm={class:"flex flex-col gap-1 mb-4"},Tm={key:0,class:""},Im={class:"flex flex-col gap-1"},zm=["onClick"],Rm=["innerHTML"],Om={class:"flex-1 p-4"},Dm={class:"w-full flex items-center justify-between gap-2 mb-7"},Lm={class:"text-lg font-bold text-gray-700"},Em={key:0,class:"h-[calc(100vh-130px)] overflow-scroll scrollbar-w-none"},km={class:"text-gray-900"},Pm={class:"flex flex-col gap-1"},Um={class:"flex items-center gap-2"},Mm={class:"text-gray-900"},Bm={key:0,class:""},Wm={key:1},Fm={class:"text-gray-900"},qm={class:"flex flex-col gap-1"},Nm={class:"flex items-center gap-2"},Hm={class:"text-gray-900"},Gm={key:0,class:""},Vm=vt({__name:"ToolsAbilityItem",props:{app_id:{type:String,default:"",required:!0},tools:{type:Array,default:[],required:!0}},emits:["update:tools"],setup(a,{emit:f}){const r=a,g=f,{loading:y,handleUpdateDraftAppConfig:T}=gn(),{loading:m,api_tool:I,loadApiTool:A}=Gv(),{loading:O,paginator:K,api_tool_providers:Y,loadApiToolProviders:Z}=Vv(),{loading:B,builtin_tool:le,loadBuiltinTool:F}=Yv(),{categories:q}=Kv(),{builtin_tools:ae,loadBuiltinTools:ye}=Zv(),ue=oe(!1),k=oe("info"),z=oe({}),ve=oe(-1),Q=oe({}),$e=oe(!1),Re=oe("api_tool"),U=oe("all"),E=_a(()=>U.value==="all"?ae:ae.filter(Oe=>Oe.category===U.value)),ie=async Oe=>{if(Oe===-1)return;ve.value=Oe;const D=r.tools[Oe];D.type==="builtin_tool"?(await F(D.provider.name,D.tool.name),z.value={type:"builtin_tool",provider:{id:le.provider.name,icon:le.provider.icon,name:le.provider.name,label:le.provider.label,description:le.provider.description},tool:{id:le.name,name:le.name,label:le.label,description:le.description,inputs:le.inputs,params:le.params}}):(await A(D.provider.id,D.tool.name),z.value={type:"api_tool",provider:{id:I.provider.id,icon:I.provider.icon,name:I.provider.name,label:I.provider.name,description:I.provider.description},tool:{id:I.name,name:I.name,label:I.name,description:I.description,inputs:le.inputs,params:[]}});const he=D.tool.params;z.value.tool.params.forEach(X=>{Q.value[X.name]=he[X.name]??X.default}),ue.value=!0},ee=()=>{ve.value=-1,ue.value=!1,k.value="info"},we=async()=>{if(r.tools[ve.value].type==="api_tool"){ee();return}const D=[...r.tools];D[ve.value].tool.params=Q.value,await T(r.app_id,{tools:D.map(he=>({type:he.type,params:he.tool.params,provider_id:he.provider.id,tool_id:he.tool.name}))}),g("update:tools",D),ee()},We=async Oe=>{const D=[...r.tools];D.splice(Oe,1),await T(r.app_id,{tools:D.map(he=>({type:he.type,params:he.tool.params,provider_id:he.provider.id,tool_id:he.tool.name}))}),g("update:tools",D)},Ee=async()=>{$e.value=!0,await Z(!0),await ye()},Se=async Oe=>{const{scrollTop:D,scrollHeight:he,clientHeight:X}=Oe.target;if(D+X>=he-10){if(O.value)return;await Z()}},je=async(Oe,D)=>{let he={};if(Re.value==="api_tool"){const X=Y[Oe],ge=X.tools[D];he={type:"api_tool",provider:{id:X.id,name:X.name,label:X.name,icon:X.icon,description:X.description},tool:{id:ge.name,name:ge.name,label:ge.name,description:ge.description,params:{}}}}else{const X=E.value[Oe],ge=X.tools[D],mt=ge.params;he={type:"builtin_tool",provider:{id:X.name,name:X.name,label:X.label,icon:`${fa}/builtin-tools/${X.name}/icon`,description:X.description},tool:{id:ge.name,name:ge.name,label:ge.label,description:ge.description,params:mt.reduce((ot,qt)=>(ot[qt.name]=qt.default,ot),{})}}}if(r.tools.some(X=>X.provider.id===he.provider.id&&X.tool.name===he.tool.name)){const X=[...r.tools].filter(ge=>ge.provider.id!==he.provider.id&&ge.tool.name!==he.tool.name);await T(r.app_id,{tools:X.map(ge=>({type:ge.type,params:ge.tool.params,provider_id:ge.provider.id,tool_id:ge.tool.name}))}),g("update:tools",X);return}else{if(r.tools.length>=5){Yn.warning("一个Agent应用最多关联5个扩展插件");return}const X=[...r.tools];X.push(he),await T(r.app_id,{tools:X.map(ge=>({type:ge.type,params:ge.tool.params,provider_id:ge.provider.id,tool_id:ge.tool.name}))}),g("update:tools",X)}},Et=(Oe,D)=>r.tools.some(he=>he.provider.name===Oe.name&&he.tool.name===D.name);return(Oe,D)=>{const he=C("icon-plus"),X=C("a-button"),ge=C("a-avatar"),mt=C("icon-settings"),ot=C("icon-delete"),qt=C("a-collapse-item"),kt=C("icon-oblique-line"),Pt=C("icon-close"),Ae=C("icon-info-circle"),lt=C("a-tooltip"),yt=C("a-select"),Tn=C("a-input"),at=C("a-input-number"),jt=C("a-radio"),gr=C("a-radio-group"),It=C("a-form-item"),gi=C("a-form"),_i=C("a-space"),en=C("a-modal"),ut=C("router-link"),_n=C("icon-code"),In=C("icon-translate"),_r=C("icon-apps"),tn=C("a-empty"),vi=C("a-spin"),nn=C("a-col"),rn=C("a-row");return R(),M("div",Xv,[h(qt,{key:"tools",class:"app-ability-item"},{header:b(()=>D[7]||(D[7]=[_("div",{class:"text-gray-700 font-bold"},"扩展插件",-1)])),extra:b(()=>[h(X,{size:"mini",type:"text",class:"!text-gray-700",onClick:Zn(Ee,["stop"])},{icon:b(()=>[h(he)]),_:1})]),default:b(()=>[r.tools.length>0?(R(),M("div",Jv,[(R(!0),M(st,null,_t(r.tools,(fe,Ze)=>(R(),M("div",{key:Ze,class:"flex items-center justify-between bg-white p-3 rounded-lg cursor-pointer hover:shadow-sm group"},[_("div",Qv,[h(ge,{size:36,shape:"square",class:"rounded flex-shrink-0","image-url":fe.provider.icon},null,8,["image-url"]),_("div",jv,[_("div",em,_e(fe.provider.label)+" / "+_e(fe.tool.label),1),_("div",tm,_e(fe.tool.description),1)])]),_("div",nm,[h(X,{loading:N(m)||N(B),size:"mini",type:"text",class:"!text-gray-700 rounded",onClick:async()=>await ie(Ze)},{icon:b(()=>[h(mt)]),_:2},1032,["loading","onClick"]),h(X,{loading:N(y),size:"mini",type:"text",class:"!text-red-700 rounded",onClick:async()=>await We(Ze)},{icon:b(()=>[h(ot)]),_:2},1032,["loading","onClick"])])]))),128))])):(R(),M("div",im," 插件能够让智能体调用外部 API，例如搜索信息、浏览网页、生成图片等，扩展智能体的能力和使用场景。 "))]),_:1}),h(en,{visible:ue.value,"hide-title":"",footer:!1,class:"tool-setting-modal","modal-class":"h-[calc(100vh-32px)] right-4",onCancel:ee},{default:b(()=>{var fe,Ze,Ve,Ut,zn,Rn,On,Dn,Ln,mi,yi,xi,Jn,Qn;return[_("div",rm,[_("div",sm,[_("div",om,[h(ge,{size:24,shape:"circle","image-url":(Ze=(fe=z.value)==null?void 0:fe.provider)==null?void 0:Ze.icon},null,8,["image-url"]),_("div",lm,_e((Ut=(Ve=z.value)==null?void 0:Ve.tool)==null?void 0:Ut.label),1)]),_("div",am,[h(kt,{size:12})]),_("div",um,[_("div",{class:Lt(`text-gray-700 pt-1 cursor-pointer border-blue-700 hover:border-b-4 hover:font-bold transition-all ${k.value==="info"?"font-bold border-b-4":""}`),onClick:D[0]||(D[0]=et=>k.value="info")}," 信息 ",2),z.value.type==="builtin_tool"&&((On=(Rn=(zn=z.value)==null?void 0:zn.tool)==null?void 0:Rn.params)==null?void 0:On.length)>0?(R(),M("div",{key:0,class:Lt(`text-gray-700 pt-1 cursor-pointer border-blue-700 hover:border-b-4 hover:font-bold transition-all ${k.value==="setting"?"font-bold border-b-4":""}`),onClick:D[1]||(D[1]=et=>k.value="setting")}," 设置 ",2)):Le("",!0)])]),h(X,{size:"mini",type:"text",class:"!text-gray-700",onClick:ee},{icon:b(()=>[h(Pt)]),_:1})]),k.value==="info"?(R(),M("div",fm,[D[9]||(D[9]=_("div",{class:"text-gray-70 font-bold mb-1"},"工具描述",-1)),_("div",cm,_e((Ln=(Dn=z.value)==null?void 0:Dn.tool)==null?void 0:Ln.description),1),((xi=(yi=(mi=z.value)==null?void 0:mi.tool)==null?void 0:yi.inputs)==null?void 0:xi.length)>0?(R(),M("div",dm,[D[8]||(D[8]=_("div",{class:"flex items-center gap-2 my-4"},[_("div",{class:"text-xs font-bold text-gray-500"},"参数"),_("hr",{class:"flex-1"})],-1)),_("div",pm,[(R(!0),M(st,null,_t((Qn=(Jn=z.value)==null?void 0:Jn.tool)==null?void 0:Qn.inputs,et=>(R(),M("div",{key:et.name,class:"flex flex-col gap-2"},[_("div",hm,[_("div",gm,_e(et.name),1),_("div",_m,_e(N(r_)[et.type]),1),et.required?(R(),M("div",vm,"必填")):Le("",!0)]),_("div",mm,_e(et.description),1)]))),128))])])):Le("",!0)])):Le("",!0),k.value==="setting"?(R(),M("div",ym,[h(gi,{model:Q.value,"onUpdate:model":D[2]||(D[2]=et=>Q.value=et),layout:"vertical",class:""},{default:b(()=>{var et,bi;return[(R(!0),M(st,null,_t((bi=(et=z.value)==null?void 0:et.tool)==null?void 0:bi.params,Ie=>(R(),Be(It,{field:Ie.name},{label:b(()=>[_("div",xm,[_("div",bm,_e(Ie.label),1),Ie.required?(R(),M("div",wm,"*")):Le("",!0),h(lt,{content:Ie.label},{default:b(()=>[h(Ae)]),_:2},1032,["content"])])]),default:b(()=>[Ie.type==="select"?(R(),Be(yt,{key:0,"default-value":Ie.default,"model-value":Q.value[Ie.name],"onUpdate:modelValue":Nt=>Q.value[Ie.name]=Nt,placeholder:"请输入参数值",options:Ie.options},null,8,["default-value","model-value","onUpdate:modelValue","options"])):Le("",!0),Ie.type==="string"?(R(),Be(Tn,{key:1,placeholder:"请输入参数值","model-value":Q.value[Ie.name],"onUpdate:modelValue":Nt=>Q.value[Ie.name]=Nt,"default-value":Ie.default},null,8,["model-value","onUpdate:modelValue","default-value"])):Le("",!0),Ie.type==="number"?(R(),Be(at,{key:2,placeholder:"请输入参数值","model-value":Q.value[Ie.name],"onUpdate:modelValue":Nt=>Q.value[Ie.name]=Nt,"default-value":Ie.default,min:Ie.min,max:Ie.max},null,8,["model-value","onUpdate:modelValue","default-value","min","max"])):Le("",!0),Ie.type==="boolean"?(R(),Be(gr,{key:3,"model-value":Q.value[Ie.name],"onUpdate:modelValue":Nt=>Q.value[Ie.name]=Nt,"default-value":Ie.default},{default:b(()=>[h(jt,{value:!0},{default:b(()=>D[10]||(D[10]=[de("开启")])),_:1}),h(jt,{value:!1},{default:b(()=>D[11]||(D[11]=[de("关闭")])),_:1})]),_:2},1032,["model-value","onUpdate:modelValue","default-value"])):Le("",!0)]),_:2},1032,["field"]))),256))]}),_:1},8,["model"])])):Le("",!0),_("div",Sm,[D[14]||(D[14]=_("div",{class:""},null,-1)),h(_i,{size:12},{default:b(()=>[h(X,{class:"rounded-lg",onClick:ee},{default:b(()=>D[12]||(D[12]=[de("取消")])),_:1}),h(X,{loading:N(y),type:"primary",class:"rounded-lg",onClick:we},{default:b(()=>D[13]||(D[13]=[de(" 保存 ")])),_:1},8,["loading"])]),_:1})])]}),_:1},8,["visible"]),h(en,{visible:$e.value,"onUpdate:visible":D[6]||(D[6]=fe=>$e.value=fe),"hide-title":"",footer:!1,class:"tools-modal","modal-class":"right-4 h-[calc(100vh-32px)]"},{default:b(()=>[_("div",Am,[_("div",$m,[D[20]||(D[20]=_("div",{class:"text-gray-900 font-bold text-lg mb-4"},"添加插件",-1)),h(ut,{to:{name:"space-tools-list"}},{default:b(()=>[h(X,{long:"",type:"primary",class:"rounded-lg mb-5"},{default:b(()=>D[15]||(D[15]=[de("创建自定义插件")])),_:1})]),_:1}),_("div",Cm,[_("div",{class:Lt(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${Re.value==="api_tool"?"text-blue-700 bg-white":"text-gray-700"}`),onClick:D[3]||(D[3]=fe=>Re.value="api_tool")},[h(_n),D[16]||(D[16]=de(" 自定义插件 "))],2),_("div",{class:Lt(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${Re.value==="builtin_tool"?"text-blue-700 bg-white":"text-gray-700"}`),onClick:D[4]||(D[4]=fe=>Re.value="builtin_tool")},[h(In),D[17]||(D[17]=de(" 内置插件 "))],2)]),Re.value==="builtin_tool"?(R(),M("div",Tm,[D[19]||(D[19]=_("div",{class:"text-xs text-gray-500 mb-3"},"类别",-1)),_("div",Im,[_("div",{class:Lt(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${U.value==="all"?"text-blue-700 bg-white":"text-gray-700"}`),onClick:D[5]||(D[5]=fe=>U.value="all")},[h(_r),D[18]||(D[18]=de(" 全部 "))],2),(R(!0),M(st,null,_t(N(q),fe=>(R(),M("div",{key:fe.name,class:Lt(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${U.value===fe.category?"text-blue-700 bg-white":" text-gray-700"}`),onClick:Ze=>U.value=fe.category},[_("span",{innerHTML:fe.icon},null,8,Rm),de(" "+_e(fe.name),1)],10,zm))),128))])])):Le("",!0)]),_("div",Om,[_("div",Dm,[_("div",Lm,_e(Re.value==="api_tool"?"自定义插件":"内置插件"),1),h(X,{size:"mini",type:"text",class:"!text-gray-700 ml-6"},{icon:b(()=>[h(Pt)]),_:1})]),Re.value==="builtin_tool"?(R(),M("div",Em,[(R(!0),M(st,null,_t(E.value,(fe,Ze)=>(R(),M("div",{key:fe.name,class:"flex flex-col gap-3 mb-3"},[_("div",km,_e(fe.label),1),_("div",Pm,[(R(!0),M(st,null,_t(fe.tools,(Ve,Ut)=>(R(),M("div",{key:Ve.name,class:Lt(`flex items-center justify-between px-2 h-8 rounded-lg cursor-pointer hover:bg-gray-50 group ${Et(fe,Ve)?"bg-blue-50 border border-blue-700":""}`)},[_("div",Um,[h(ge,{size:20,shape:"circle","image-url":`${N(fa)}/builtin-tools/${fe.name}/icon`},null,8,["image-url"]),_("div",Mm,_e(Ve.label),1)]),h(X,{size:"mini",class:"hidden group-hover:block rounded px-1.5 flex-shrink-0",onClick:async()=>await je(Ze,Ut)},{icon:b(()=>[h(he)]),default:b(()=>[de(" "+_e(Et(fe,Ve)?"删除":"添加"),1)]),_:2},1032,["onClick"])],2))),128))])]))),128)),E.value.length===0?(R(),M("div",Bm,[h(tn,{description:"没有可用的内置插件",class:"h-[400px] flex flex-col items-center justify-center"})])):Le("",!0)])):Le("",!0),Re.value==="api_tool"?(R(),M("div",Wm,[h(vi,{loading:N(O),class:"block h-[calc(100vh-130px)] overflow-scroll scrollbar-w-none",onScroll:Se},{default:b(()=>[(R(!0),M(st,null,_t(N(Y),(fe,Ze)=>(R(),M("div",{key:fe.id,class:"flex flex-col gap-3 mb-3"},[_("div",Fm,_e(fe.name),1),_("div",qm,[(R(!0),M(st,null,_t(fe.tools,(Ve,Ut)=>(R(),M("div",{key:Ve.name,class:Lt(`flex items-center justify-between px-2 h-8 rounded-lg cursor-pointer hover:bg-gray-50 group ${Et(fe,Ve)?"bg-blue-50 border border-blue-700":""}`)},[_("div",Nm,[h(ge,{size:20,shape:"circle","image-url":fe.icon},null,8,["image-url"]),_("div",Hm,_e(Ve.name),1)]),h(X,{size:"mini",class:"hidden group-hover:block rounded px-1.5 flex-shrink-0",onClick:async()=>await je(Ze,Ut)},{icon:b(()=>[h(he)]),default:b(()=>[de(" "+_e(Et(fe,Ve)?"删除":"添加"),1)]),_:2},1032,["onClick"])],2))),128))])]))),128)),N(Y).length===0?(R(),M("div",Gm,[h(tn,{description:"没有可用的API插件",class:"h-[400px] flex flex-col items-center justify-center"})])):Le("",!0),N(K).total_page>=2?(R(),Be(rn,{key:1},{default:b(()=>[N(K).current_page<=N(K).total_page?(R(),Be(nn,{key:0,span:24,class:"!text-center"},{default:b(()=>[h(_i,{class:"my-4"},{default:b(()=>[h(vi),D[21]||(D[21]=_("div",{class:"text-gray-400"},"加载中",-1))]),_:1})]),_:1})):(R(),Be(nn,{key:1,span:24,class:"!text-center"},{default:b(()=>D[22]||(D[22]=[_("div",{class:"text-gray-400 my-4"},"数据已加载完成",-1)])),_:1}))]),_:1})):Le("",!0)]),_:1},8,["loading"])])):Le("",!0)])])]),_:1},8,["visible"])])}}}),Km={class:"flex flex-col h-[calc(100vh-141px)]"},Ym={class:"flex-1 overflow-scroll scrollbar-w-none"},Zm=vt({__name:"AgentAppAbility",props:{app_id:{type:String,default:"",required:!0},draft_app_config:{type:Object,required:!0}},emits:["update:draft_app_config"],setup(a,{emit:f}){const r=["tools","datasets","long_term_memory","opening","suggested_after_answer","review_config"];return(g,y)=>{const T=C("icon-down"),m=C("icon-right"),I=C("a-collapse");return R(),M("div",Km,[y[7]||(y[7]=_("div",{class:"p-4 text-gray-700 font-bold"},"应用能力",-1)),_("div",Ym,[h(I,{bordered:!1,"default-active-key":r},{"expand-icon":b(({active:A})=>[A?(R(),Be(T,{key:0})):(R(),Be(m,{key:1}))]),default:b(()=>[h(Vm,{tools:a.draft_app_config.tools,"onUpdate:tools":y[0]||(y[0]=A=>a.draft_app_config.tools=A),app_id:a.app_id},null,8,["tools","app_id"]),h(Hv,{retrieval_config:a.draft_app_config.retrieval_config,"onUpdate:retrieval_config":y[1]||(y[1]=A=>a.draft_app_config.retrieval_config=A),datasets:a.draft_app_config.datasets,"onUpdate:datasets":y[2]||(y[2]=A=>a.draft_app_config.datasets=A),app_id:a.app_id},null,8,["retrieval_config","datasets","app_id"]),h(J_,{long_term_memory:a.draft_app_config.long_term_memory,"onUpdate:long_term_memory":y[3]||(y[3]=A=>a.draft_app_config.long_term_memory=A),app_id:a.app_id},null,8,["long_term_memory","app_id"]),h(sv,{opening_questions:a.draft_app_config.opening_questions,"onUpdate:opening_questions":y[4]||(y[4]=A=>a.draft_app_config.opening_questions=A),opening_statement:a.draft_app_config.opening_statement,"onUpdate:opening_statement":y[5]||(y[5]=A=>a.draft_app_config.opening_statement=A),app_id:a.app_id},null,8,["opening_questions","opening_statement","app_id"]),h(lv,{suggested_after_answer:a.draft_app_config.suggested_after_answer,"onUpdate:suggested_after_answer":y[6]||(y[6]=A=>a.draft_app_config.suggested_after_answer=A),app_id:a.app_id},null,8,["suggested_after_answer","app_id"]),h(wv,{review_config:a.draft_app_config.review_config,app_id:a.app_id},null,8,["review_config","app_id"])]),_:1})])])}}});function Xm(){var a=window.navigator.userAgent,f=a.indexOf("MSIE ");if(f>0)return parseInt(a.substring(f+5,a.indexOf(".",f)),10);var r=a.indexOf("Trident/");if(r>0){var g=a.indexOf("rv:");return parseInt(a.substring(g+3,a.indexOf(".",g)),10)}var y=a.indexOf("Edge/");return y>0?parseInt(a.substring(y+5,a.indexOf(".",y)),10):-1}let dr;function Rs(){Rs.init||(Rs.init=!0,dr=Xm()!==-1)}var hr={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Rs(),Cn(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const a=document.createElement("object");this._resizeObject=a,a.setAttribute("aria-hidden","true"),a.setAttribute("tabindex",-1),a.onload=this.addResizeHandlers,a.type="text/html",dr&&this.$el.appendChild(a),a.data="about:blank",dr||this.$el.appendChild(a)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!dr&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const Jm=l_();s_("data-v-b329ee4c");const Qm={class:"resize-observer",tabindex:"-1"};o_();const jm=Jm((a,f,r,g,y,T)=>(R(),Be("div",Qm)));hr.render=jm;hr.__scopeId="data-v-b329ee4c";hr.__file="src/components/ResizeObserver.vue";function pr(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?pr=function(f){return typeof f}:pr=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},pr(a)}function e0(a,f){if(!(a instanceof f))throw new TypeError("Cannot call a class as a function")}function t0(a,f){for(var r=0;r<f.length;r++){var g=f[r];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(a,g.key,g)}}function n0(a,f,r){return t0(a.prototype,f),a}function pa(a){return i0(a)||r0(a)||s0(a)||o0()}function i0(a){if(Array.isArray(a))return Os(a)}function r0(a){if(typeof Symbol<"u"&&Symbol.iterator in Object(a))return Array.from(a)}function s0(a,f){if(a){if(typeof a=="string")return Os(a,f);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Os(a,f)}}function Os(a,f){(f==null||f>a.length)&&(f=a.length);for(var r=0,g=new Array(f);r<f;r++)g[r]=a[r];return g}function o0(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l0(a){var f;return typeof a=="function"?f={callback:a}:f=a,f}function a0(a,f){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},g,y,T,m=function(A){for(var O=arguments.length,K=new Array(O>1?O-1:0),Y=1;Y<O;Y++)K[Y-1]=arguments[Y];if(T=K,!(g&&A===y)){var Z=r.leading;typeof Z=="function"&&(Z=Z(A,y)),(!g||A!==y)&&Z&&a.apply(void 0,[A].concat(pa(T))),y=A,clearTimeout(g),g=setTimeout(function(){a.apply(void 0,[A].concat(pa(T))),g=0},f)}};return m._clear=function(){clearTimeout(g),g=null},m}function xa(a,f){if(a===f)return!0;if(pr(a)==="object"){for(var r in a)if(!xa(a[r],f[r]))return!1;return!0}return!1}var u0=function(){function a(f,r,g){e0(this,a),this.el=f,this.observer=null,this.frozen=!1,this.createObserver(r,g)}return n0(a,[{key:"createObserver",value:function(r,g){var y=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=l0(r),this.callback=function(I,A){y.options.callback(I,A),I&&y.options.once&&(y.frozen=!0,y.destroyObserver())},this.callback&&this.options.throttle){var T=this.options.throttleOptions||{},m=T.leading;this.callback=a0(this.callback,this.options.throttle,{leading:function(A){return m==="both"||m==="visible"&&A||m==="hidden"&&!A}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(I){var A=I[0];if(I.length>1){var O=I.find(function(Y){return Y.isIntersecting});O&&(A=O)}if(y.callback){var K=A.isIntersecting&&A.intersectionRatio>=y.threshold;if(K===y.oldResult)return;y.oldResult=K,y.callback(K,A)}},this.options.intersection),Cn(function(){y.observer&&y.observer.observe(y.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),a}();function ba(a,f,r){var g=f.value;if(g)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var y=new u0(a,g,r);a._vue_visibilityState=y}}function f0(a,f,r){var g=f.value,y=f.oldValue;if(!xa(g,y)){var T=a._vue_visibilityState;if(!g){wa(a);return}T?T.createObserver(g,r):ba(a,{value:g},r)}}function wa(a){var f=a._vue_visibilityState;f&&(f.destroyObserver(),delete a._vue_visibilityState)}var c0={beforeMount:ba,updated:f0,unmounted:wa};function d0(a){return{all:a=a||new Map,on:function(f,r){var g=a.get(f);g&&g.push(r)||a.set(f,[r])},off:function(f,r){var g=a.get(f);g&&g.splice(g.indexOf(r)>>>0,1)},emit:function(f,r){(a.get(f)||[]).slice().map(function(g){g(r)}),(a.get("*")||[]).slice().map(function(g){g(f,r)})}}}var p0={itemsLimit:1e3},h0=/(auto|scroll)/;function Sa(a,f){return a.parentNode===null?f:Sa(a.parentNode,f.concat([a]))}var zs=function(f,r){return getComputedStyle(f,null).getPropertyValue(r)},g0=function(f){return zs(f,"overflow")+zs(f,"overflow-y")+zs(f,"overflow-x")},_0=function(f){return h0.test(g0(f))};function ha(a){if(a instanceof HTMLElement||a instanceof SVGElement){for(var f=Sa(a.parentNode,[]),r=0;r<f.length;r+=1)if(_0(f[r]))return f[r];return document.scrollingElement||document.documentElement}}function Ds(a){"@babel/helpers - typeof";return Ds=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},Ds(a)}var Aa={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(f){return["vertical","horizontal"].includes(f)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function $a(){return this.items.length&&Ds(this.items[0])!=="object"}var Ls=!1;if(typeof window<"u"){Ls=!1;try{var v0=Object.defineProperty({},"passive",{get:function(){Ls=!0}});window.addEventListener("test",null,v0)}catch{}}let m0=0;var Es={name:"RecycleScroller",components:{ResizeObserver:hr},directives:{ObserveVisibility:c0},props:{...Aa,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const a={"-1":{accumulator:0}},f=this.items,r=this.sizeField,g=this.minItemSize;let y=1e4,T=0,m;for(let I=0,A=f.length;I<A;I++)m=f[I][r]||g,m<y&&(y=m),T+=m,a[I]={accumulator:T,size:m};return this.$_computedMinItemSize=y,a}return[]},simpleArray:$a,itemIndexByKey(){const{keyField:a,items:f}=this,r={};for(let g=0,y=f.length;g<y;g++)r[f[g][a]]=g;return r}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const a=this.$_lastUpdateScrollPosition;typeof a=="number"&&this.$nextTick(()=>{this.scrollToPosition(a)})},beforeUnmount(){this.removeListeners()},methods:{addView(a,f,r,g,y){const T=a_({id:m0++,index:f,used:!0,key:g,type:y}),m=u_({item:r,position:0,nr:T});return a.push(m),m},unuseView(a,f=!1){const r=this.$_unusedViews,g=a.nr.type;let y=r.get(g);y||(y=[],r.set(g,y)),y.push(a),f||(a.nr.used=!1,a.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(a){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const f=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:r}=this.updateVisibleItems(!1,!0);r||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});f(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&f()},this.updateInterval))}},handleVisibilityChange(a,f){this.ready&&(a||f.boundingClientRect.width!==0||f.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(a,f=!1){const r=this.itemSize,g=this.gridItems||1,y=this.itemSecondarySize||r,T=this.$_computedMinItemSize,m=this.typeField,I=this.simpleArray?null:this.keyField,A=this.items,O=A.length,K=this.sizes,Y=this.$_views,Z=this.$_unusedViews,B=this.pool,le=this.itemIndexByKey;let F,q,ae,ye,ue;if(!O)F=q=ye=ue=ae=0;else if(this.$_prerender)F=ye=0,q=ue=Math.min(this.prerender,A.length),ae=null;else{const U=this.getScroll();if(f){let ee=U.start-this.$_lastUpdateScrollPosition;if(ee<0&&(ee=-ee),r===null&&ee<T||ee<r)return{continuous:!0}}this.$_lastUpdateScrollPosition=U.start;const E=this.buffer;U.start-=E,U.end+=E;let ie=0;if(this.$refs.before&&(ie=this.$refs.before.scrollHeight,U.start-=ie),this.$refs.after){const ee=this.$refs.after.scrollHeight;U.end+=ee}if(r===null){let ee,we=0,We=O-1,Ee=~~(O/2),Se;do Se=Ee,ee=K[Ee].accumulator,ee<U.start?we=Ee:Ee<O-1&&K[Ee+1].accumulator>U.start&&(We=Ee),Ee=~~((we+We)/2);while(Ee!==Se);for(Ee<0&&(Ee=0),F=Ee,ae=K[O-1].accumulator,q=Ee;q<O&&K[q].accumulator<U.end;q++);for(q===-1?q=A.length-1:(q++,q>O&&(q=O)),ye=F;ye<O&&ie+K[ye].accumulator<U.start;ye++);for(ue=ye;ue<O&&ie+K[ue].accumulator<U.end;ue++);}else{F=~~(U.start/r*g);const ee=F%g;F-=ee,q=Math.ceil(U.end/r*g),ye=Math.max(0,Math.floor((U.start-ie)/r*g)),ue=Math.floor((U.end-ie)/r*g),F<0&&(F=0),q>O&&(q=O),ye<0&&(ye=0),ue>O&&(ue=O),ae=Math.ceil(O/g)*r}}q-F>p0.itemsLimit&&this.itemsLimitError(),this.totalSize=ae;let k;const z=F<=this.$_endIndex&&q>=this.$_startIndex;if(z)for(let U=0,E=B.length;U<E;U++)k=B[U],k.nr.used&&(a&&(k.nr.index=le[k.item[I]]),(k.nr.index==null||k.nr.index<F||k.nr.index>=q)&&this.unuseView(k));const ve=z?null:new Map;let Q,$e,Re;for(let U=F;U<q;U++){Q=A[U];const E=I?Q[I]:Q;if(E==null)throw new Error(`Key is ${E} on item (keyField is '${I}')`);if(k=Y.get(E),!r&&!K[U].size){k&&this.unuseView(k);continue}$e=Q[m];let ie=Z.get($e),ee=!1;if(!k)z?ie&&ie.length?k=ie.pop():k=this.addView(B,U,Q,E,$e):(Re=ve.get($e)||0,(!ie||Re>=ie.length)&&(k=this.addView(B,U,Q,E,$e),this.unuseView(k,!0),ie=Z.get($e)),k=ie[Re],ve.set($e,Re+1)),Y.delete(k.nr.key),k.nr.used=!0,k.nr.index=U,k.nr.key=E,k.nr.type=$e,Y.set(E,k),ee=!0;else if(!k.nr.used&&(k.nr.used=!0,ee=!0,ie)){const we=ie.indexOf(k);we!==-1&&ie.splice(we,1)}k.item=Q,ee&&(U===A.length-1&&this.$emit("scroll-end"),U===0&&this.$emit("scroll-start")),r===null?(k.position=K[U-1].accumulator,k.offset=0):(k.position=Math.floor(U/g)*r,k.offset=U%g*y)}return this.$_startIndex=F,this.$_endIndex=q,this.emitUpdate&&this.$emit("update",F,q,ye,ue),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:z}},getListenerTarget(){let a=ha(this.$el);return window.document&&(a===window.document.documentElement||a===window.document.body)&&(a=window),a},getScroll(){const{$el:a,direction:f}=this,r=f==="vertical";let g;if(this.pageMode){const y=a.getBoundingClientRect(),T=r?y.height:y.width;let m=-(r?y.top:y.left),I=r?window.innerHeight:window.innerWidth;m<0&&(I+=m,m=0),m+I>T&&(I=T-m),g={start:m,end:m+I}}else r?g={start:a.scrollTop,end:a.scrollTop+a.clientHeight}:g={start:a.scrollLeft,end:a.scrollLeft+a.clientWidth};return g},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,Ls?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(a){let f;const r=this.gridItems||1;this.itemSize===null?f=a>0?this.sizes[a-1].accumulator:0:f=Math.floor(a/r)*this.itemSize,this.scrollToPosition(f)},scrollToPosition(a){const f=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let r,g,y;if(this.pageMode){const T=ha(this.$el),m=T.tagName==="HTML"?0:T[f.scroll],I=T.getBoundingClientRect(),O=this.$el.getBoundingClientRect()[f.start]-I[f.start];r=T,g=f.scroll,y=a+m+O}else r=this.$el,g=f.scroll,y=a;r[g]=y},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((a,f)=>a.nr.index-f.nr.index)}}};const y0={key:0,ref:"before",class:"vue-recycle-scroller__slot"},x0={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function b0(a,f,r,g,y,T){const m=C("ResizeObserver"),I=f_("observe-visibility");return ga((R(),M("div",{class:Lt(["vue-recycle-scroller",{ready:y.ready,"page-mode":r.pageMode,[`direction-${a.direction}`]:!0}]),onScrollPassive:f[0]||(f[0]=(...A)=>T.handleScroll&&T.handleScroll(...A))},[a.$slots.before?(R(),M("div",y0,[hn(a.$slots,"before")],512)):Le("v-if",!0),(R(),Be(ca(r.listTag),{ref:"wrapper",style:d_({[a.direction==="vertical"?"minHeight":"minWidth"]:y.totalSize+"px"}),class:Lt(["vue-recycle-scroller__item-wrapper",r.listClass])},{default:b(()=>[(R(!0),M(st,null,_t(y.pool,A=>(R(),Be(ca(r.itemTag),ma({key:A.nr.id,style:y.ready?{transform:`translate${a.direction==="vertical"?"Y":"X"}(${A.position}px) translate${a.direction==="vertical"?"X":"Y"}(${A.offset}px)`,width:r.gridItems?`${a.direction==="vertical"&&r.itemSecondarySize||r.itemSize}px`:void 0,height:r.gridItems?`${a.direction==="horizontal"&&r.itemSecondarySize||r.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[r.itemClass,{hover:!r.skipHover&&y.hoverKey===A.nr.key}]]},c_(r.skipHover?{}:{mouseenter:()=>{y.hoverKey=A.nr.key},mouseleave:()=>{y.hoverKey=null}})),{default:b(()=>[hn(a.$slots,"default",{item:A.item,index:A.nr.index,active:A.nr.used})]),_:2},1040,["style","class"]))),128)),hn(a.$slots,"empty")]),_:3},8,["style","class"])),a.$slots.after?(R(),M("div",x0,[hn(a.$slots,"after")],512)):Le("v-if",!0),h(m,{onNotify:T.handleResize},null,8,["onNotify"])],34)),[[I,T.handleVisibilityChange]])}Es.render=b0;Es.__file="src/components/RecycleScroller.vue";var ks={name:"DynamicScroller",components:{RecycleScroller:Es},provide(){return typeof ResizeObserver<"u"&&(this.$_resizeObserver=new ResizeObserver(a=>{requestAnimationFrame(()=>{if(Array.isArray(a)){for(const f of a)if(f.target&&f.target.$_vs_onResize){let r,g;if(f.borderBoxSize){const y=f.borderBoxSize[0];r=y.inlineSize,g=y.blockSize}else r=f.contentRect.width,g=f.contentRect.height;f.target.$_vs_onResize(f.target.$_vs_id,r,g)}}})})),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},inheritAttrs:!1,props:{...Aa,minItemSize:{type:[Number,String],required:!0}},emits:["resize","visible"],data(){return{vscrollData:{active:!0,sizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray:$a,itemsWithSize(){const a=[],{items:f,keyField:r,simpleArray:g}=this,y=this.vscrollData.sizes,T=f.length;for(let m=0;m<T;m++){const I=f[m],A=g?m:I[r];let O=y[A];typeof O>"u"&&!this.$_undefinedMap[A]&&(O=0),a.push({item:I,id:A,size:O})}return a}},watch:{items(){this.forceUpdate()},simpleArray:{handler(a){this.vscrollData.simpleArray=a},immediate:!0},direction(a){this.forceUpdate(!0)},itemsWithSize(a,f){const r=this.$el.scrollTop;let g=0,y=0;const T=Math.min(a.length,f.length);for(let I=0;I<T&&!(g>=r);I++)g+=f[I].size||this.minItemSize,y+=a[I].size||this.minItemSize;const m=y-g;m!==0&&(this.$el.scrollTop+=m)}},beforeCreate(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={},this.$_events=d0()},activated(){this.vscrollData.active=!0},deactivated(){this.vscrollData.active=!1},unmounted(){this.$_events.all.clear()},methods:{onScrollerResize(){this.$refs.scroller&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible(){this.$_events.emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate(a=!1){(a||this.simpleArray)&&(this.vscrollData.sizes={}),this.$_events.emit("vscroll:update",{force:!0})},scrollToItem(a){const f=this.$refs.scroller;f&&f.scrollToItem(a)},getItemSize(a,f=void 0){const r=this.simpleArray?f??this.items.indexOf(a):a[this.keyField];return this.vscrollData.sizes[r]||0},scrollToBottom(){if(this.$_scrollingToBottom)return;this.$_scrollingToBottom=!0;const a=this.$el;this.$nextTick(()=>{a.scrollTop=a.scrollHeight+5e3;const f=()=>{a.scrollTop=a.scrollHeight+5e3,requestAnimationFrame(()=>{a.scrollTop=a.scrollHeight+5e3,this.$_undefinedSizes===0?this.$_scrollingToBottom=!1:requestAnimationFrame(f)})};requestAnimationFrame(f)})}}};function w0(a,f,r,g,y,T){const m=C("RecycleScroller");return R(),Be(m,ma({ref:"scroller",items:T.itemsWithSize,"min-item-size":r.minItemSize,direction:a.direction,"key-field":"id","list-tag":a.listTag,"item-tag":a.itemTag},a.$attrs,{onResize:T.onScrollerResize,onVisible:T.onScrollerVisible}),{default:b(({item:I,index:A,active:O})=>[hn(a.$slots,"default",p_(h_({item:I.item,index:A,active:O,itemWithSize:I})))]),before:b(()=>[hn(a.$slots,"before")]),after:b(()=>[hn(a.$slots,"after")]),empty:b(()=>[hn(a.$slots,"empty")]),_:3},16,["items","min-item-size","direction","list-tag","item-tag","onResize","onVisible"])}ks.render=w0;ks.__file="src/components/DynamicScroller.vue";var Ca={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},emits:["resize"],computed:{id(){if(this.vscrollData.simpleArray)return this.index;if(this.vscrollData.keyField in this.item)return this.item[this.vscrollData.keyField];throw new Error(`keyField '${this.vscrollData.keyField}' not found in your item. You should set a valid keyField prop on your Scroller`)},size(){return this.vscrollData.sizes[this.id]||0},finalActive(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id(a,f){if(this.$el.$_vs_id=this.id,this.size||this.onDataUpdate(),this.$_sizeObserved){const r=this.vscrollData.sizes[f],g=this.vscrollData.sizes[a];r!=null&&r!==g&&this.applySize(r)}},finalActive(a){this.size||(a?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?a?this.observeSize():this.unobserveSize():a&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created(){if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){for(const a in this.sizeDependencies)this.$watch(()=>this.sizeDependencies[a],this.onDataUpdate);this.vscrollParent.$_events.on("vscroll:update",this.onVscrollUpdate)}},mounted(){this.finalActive&&(this.updateSize(),this.observeSize())},beforeUnmount(){this.vscrollParent.$_events.off("vscroll:update",this.onVscrollUpdate),this.unobserveSize()},methods:{updateSize(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData(){this.watchData&&!this.vscrollResizeObserver?this.$_watchData=this.$watch("item",()=>{this.onDataUpdate()},{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate({force:a}){!this.finalActive&&a&&(this.$_pendingVScrollUpdate=this.id),(this.$_forceNextVScrollUpdate===this.id||a||!this.size)&&this.updateSize()},onDataUpdate(){this.updateSize()},computeSize(a){this.$nextTick(()=>{if(this.id===a){const f=this.$el.offsetWidth,r=this.$el.offsetHeight;this.applyWidthHeight(f,r)}this.$_pendingSizeUpdate=null})},applyWidthHeight(a,f){const r=~~(this.vscrollParent.direction==="vertical"?f:a);r&&this.size!==r&&this.applySize(r)},applySize(a){this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.vscrollData.sizes[this.id]=a,this.emitResize&&this.$emit("resize",this.id)},observeSize(){this.vscrollResizeObserver&&(this.$_sizeObserved||(this.vscrollResizeObserver.observe(this.$el),this.$el.$_vs_id=this.id,this.$el.$_vs_onResize=this.onResize,this.$_sizeObserved=!0))},unobserveSize(){this.vscrollResizeObserver&&this.$_sizeObserved&&(this.vscrollResizeObserver.unobserve(this.$el),this.$el.$_vs_onResize=void 0,this.$_sizeObserved=!1)},onResize(a,f,r){this.id===a&&this.applyWidthHeight(f,r)}},render(){return g_(this.tag,this.$slots.default())}};Ca.__file="src/components/DynamicScrollerItem.vue";const S0={class:"flex gap-2"},A0={class:"flex flex-col gap-2"},$0={class:"text-gray-700 font-bold"},C0={class:"bg-blue-100 border border-blue-200 text-gray-700 px-4 py-3 rounded-2xl break-all"},T0=vt({__name:"HumanMessage",props:{account:{type:Object,default:{},required:!0},query:{type:String,default:"",required:!0}},setup(a){const f=a;return(r,g)=>{var T,m;const y=C("a-avatar");return R(),M("div",S0,[h(y,{size:30,shape:"circle",class:"flex-shrink-0","image-url":(T=f.account)==null?void 0:T.avatar},null,8,["image-url"]),_("div",A0,[_("div",$0,_e((m=f.account)==null?void 0:m.name),1),_("div",C0,_e(f.query),1)])])}}}),I0={},z0={class:"h-5 w-5 flex items-center justify-center"};function R0(a,f){return R(),M("div",z0,f[0]||(f[0]=[_("div",{class:"dot-flashing text"},null,-1)]))}const O0=__(I0,[["render",R0],["__scopeId","data-v-69ca6368"]]),D0={class:"flex gap-2"},L0={class:"flex flex-col gap-2"},E0={class:"text-gray-700 font-bold"},k0={class:"bg-gray-100 border border-gray-200 text-gray-700 px-4 py-3 rounded-2xl break-all"},P0=vt({__name:"AiMessage",props:{app:{type:Object,default:{},required:!0},answer:{type:String,default:"",required:!0},loading:{type:Boolean,default:!1,required:!1},agent_thoughts:{type:Array,default:[],required:!0}},setup(a){const f=a;return(r,g)=>{var T,m;const y=C("a-avatar");return R(),M("div",D0,[h(y,{size:30,shape:"circle",class:"flex-shrink-0","image-url":(T=f.app)==null?void 0:T.icon},null,8,["image-url"]),_("div",L0,[_("div",E0,_e((m=f.app)==null?void 0:m.name),1),_("div",k0,[f.loading&&f.answer.trim()===""?(R(),Be(O0,{key:0})):(R(),M(st,{key:1},[de(_e(f.answer),1)],64))])])])}}}),U0={class:""},M0={key:0,class:"flex flex-col px-6 h-[calc(100vh-238px)]"},B0={class:"flex flex-col gap-6 py-6"},W0={key:0,class:"h-[50px] flex items-center justify-center"},F0={key:1,class:"flex flex-col p-6 gap-2 items-center justify-center h-[calc(100vh-238px)]"},q0={class:"flex flex-col items-center gap-2"},N0={class:"text-lg text-gray-700"},H0={key:0,class:"bg-gray-100 w-full px-4 py-3 rounded-lg text-gray-700"},G0={class:"flex items-center flex-wrap gap-2 w-full"},V0={class:"w-full flex flex-col flex-shrink-0"},K0={class:"px-6 flex items-center gap-4"},Y0={class:"h-[50px] flex items-center gap-2 px-4 flex-1 border border-gray-200 rounded-full"},Z0=vt({__name:"PreviewDebugChat",props:{app:{type:Object,default:{},required:!0},opening_statement:{type:String,default:"",required:!0},opening_questions:{type:Array,default:[],required:!0}},setup(a){const f=ya(),r=a;oe(""),oe("");const g=oe(""),y=oe(null),T=oe(0),m=v_(),{loading:I,handleDeleteDebugConversation:A}=x_(),{loading:O,messages:K,paginator:Y,loadDebugConversationMessages:Z}=b_(),{loading:B,handleDebugChat:le}=w_(),{loading:F,handleStopDebugChat:q}=S_();L_();const ae=()=>{T.value=y.value.$el.scrollHeight},ye=()=>{y.value.$el.scrollTop=y.value.$el.scrollHeight-T.value},ue=async z=>{var Q;const{scrollTop:ve}=z.target;ve<=0&&!O.value&&(ae(),await Z((Q=f.params)==null?void 0:Q.app_id,!1),ye())},k=async()=>{var z;g.value===""||!B.value||await q((z=r.app)==null?void 0:z.id,g.value)};return va(async()=>{var z;await Z((z=f.params)==null?void 0:z.app_id,!0),await Cn(()=>{y.value&&y.value.scrollToBottom()})}),(z,ve)=>{var ie,ee;const Q=C("icon-poweroff"),$e=C("a-button"),Re=C("a-avatar"),U=C("icon-empty"),E=C("icon-send");return R(),M("div",U0,[N(K).length>0?(R(),M("div",M0,[h(N(ks),{ref_key:"scroller",ref:y,items:N(K).slice().reverse(),"min-item-size":1,onScroll:ue,class:"h-full scrollbar-w-none"},{default:b(({item:we,index:We,active:Ee})=>[h(N(Ca),{item:we,active:Ee,"data-index":we.id},{default:b(()=>[_("div",B0,[h(T0,{query:we.query,account:N(m).account},null,8,["query","account"]),h(P0,{agent_thoughts:we.agent_thoughts,answer:we.answer,app:r.app,loading:!1},null,8,["agent_thoughts","answer","app"])])]),_:2},1032,["item","active","data-index"])]),_:1},8,["items"]),g.value&&N(B)?(R(),M("div",W0,[h($e,{loading:N(F),class:"rounded-lg px-2",onClick:k},{icon:b(()=>[h(Q)]),default:b(()=>[ve[1]||(ve[1]=de(" 停止响应 "))]),_:1},8,["loading"])])):Le("",!0)])):(R(),M("div",F0,[_("div",q0,[h(Re,{size:48,shape:"square",class:"rounded-lg","image-url":(ie=r.app)==null?void 0:ie.icon},null,8,["image-url"]),_("div",N0,_e((ee=r.app)==null?void 0:ee.name),1)]),r.opening_statement?(R(),M("div",H0,_e(r.opening_statement),1)):Le("",!0),_("div",G0,[(R(!0),M(st,null,_t(r.opening_questions.filter(we=>we.trim()!==""),(we,We)=>(R(),M("div",{key:We,class:"px-4 py-1.5 border rounded-lg text-gray-700 cursor-pointer hover:bg-gray-50"},_e(we),1))),128))])])),_("div",V0,[_("div",K0,[h($e,{loading:N(I),class:"flex-shrink-0 !text-gray-700",type:"text",shape:"circle",onClick:ve[0]||(ve[0]=async()=>{var we,We;await k(),await N(A)((we=r.app)==null?void 0:we.id),await N(Z)((We=r.app)==null?void 0:We.id,!0)})},{icon:b(()=>[h(U,{size:16})]),_:1},8,["loading"]),_("div",Y0,[ve[2]||(ve[2]=_("input",{type:"text",class:"flex-1 outline-0"},null,-1)),h($e,{type:"text",shape:"circle",class:"!text-gray-700"},{icon:b(()=>[h(E,{size:16})]),_:1})])]),ve[3]||(ve[3]=_("div",{class:"text-center text-gray-500 text-xs py-4"}," 内容由AI生成，无法确保真实准确，仅供参考 ",-1))])])}}}),X0={class:"flex-1 w-full min-h-0 bg-white"},J0={class:"flex-1 grid grid-cols-[26fr_14fr] h-full w-full"},Q0={class:"bg-gray-50 flex flex-col h-full"},j0={class:"grid grid-cols-[13fr_13fr] overflow-hidden h-[calc(100vh-141px)]"},e1={class:"border-r py-4"},t1={class:"min-w-[404px]"},a1=vt({__name:"DetailView",props:{app:{type:Object,default:{},required:!0}},setup(a){var T;const f=ya(),r=a,{draftAppConfigForm:g,loadDraftAppConfig:y}=A_((T=f.params)==null?void 0:T.app_id);return gn(),(m,I)=>{var A,O,K;return R(),M("div",X0,[_("div",J0,[_("div",Q0,[I[1]||(I[1]=_("div",{class:"flex items-center h-16 border-b p-4"},[_("div",{class:"text-lg text-gray-700"},"应用编排")],-1)),_("div",j0,[_("div",e1,[h(N_,{preset_prompt:N(g).preset_prompt,"onUpdate:preset_prompt":I[0]||(I[0]=Y=>N(g).preset_prompt=Y),app_id:(A=N(f).params)==null?void 0:A.app_id},null,8,["preset_prompt","app_id"])]),h(Zm,{draft_app_config:N(g),app_id:(O=N(f).params)==null?void 0:O.app_id},null,8,["draft_app_config","app_id"])])]),_("div",t1,[h(Z_,{app_id:(K=N(f).params)==null?void 0:K.app_id,long_term_memory:N(g).long_term_memory},null,8,["app_id","long_term_memory"]),h(Z0,{opening_questions:N(g).opening_questions,opening_statement:N(g).opening_statement,app:r.app},null,8,["opening_questions","opening_statement","app"])])])])}}});export{a1 as default};
