import{E as c,D as p,Q as m,b as r,m as g,p as _,s as u,M as v}from"./index-BfR_kAqQ.js";const y=e=>c(`/apps/${e}`),b=e=>c(`/apps/${e}/draft-app-config`),h=(e,t)=>p(`/apps/${e}/draft-app-config`,{body:t}),D=e=>c(`/apps/${e}/summary`),P=(e,t)=>p(`/apps/${e}/summary`,{body:{summary:t}}),C=(e,t)=>c(`/apps/${e}/conversations/messages`,{params:t}),w=e=>p(`/apps/${e}/conversations/delete-debug-conversation`),A=e=>p(`/apps/${e}/publish`),z=e=>p(`/apps/${e}/cancel-publish`),$=(e,t)=>c(`/apps/${e}/publish-histories`,{params:t}),k=(e,t)=>p(`/apps/${e}/fallback-history`,{body:{app_config_version_id:t}}),M=(e,t)=>m("/ai/optimize-prompt",{body:{prompt:e}},t),H=e=>{const t=r(!1),s=g({}),a=async n=>{try{t.value=!0;const o=(await y(n)).data;Object.assign(s,{...o})}finally{Object.assign(s,{id:"122121",debug_conversation_id:"12121",name:"LLMOps",icon:"https://img2.baidu.com/it/u=4067866627,2025998864&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500",description:"",status:"draft",draft_updated_at:1742225012,updated_at:1742225012,created_at:1742225012}),t.value=!1}};return _(async()=>await a(e)),{loading:t,app:s,loadApp:a}},S=()=>{const e=r(!1);return{loading:e,handlePublish:async s=>{try{e.value=!0;const a=await A(s);u.success(a.message)}finally{e.value=!1}}}},j=()=>{const e=r(!1);return{loading:e,handleCancelPublish:async(s,a)=>{v.warning({title:"è¦å–æ¶ˆå‘å¸ƒè¯¥Agentåº”ç”¨å—?",content:"å–æ¶ˆå‘å¸ƒåŽï¼ŒWebAppä»¥åŠå‘å¸ƒçš„ç¤¾äº¤å¹³å°å‡æ— æ³•ä½¿ç”¨è¯¥Agentï¼Œå¦‚éœ€æ›´æ–°WebAppåœ°å€ï¼Œè¯·ä½¿ç”¨åœ°å€é‡æ–°ç”ŸæˆåŠŸèƒ½",hideCancel:!1,onOk:async()=>{try{e.value=!0;const n=await z(s);u.success(n.message)}finally{e.value=!1,a&&a()}}})}}},G=()=>{const e=r(!1),t={current_page:1,page_size:20,total_page:0,total_record:0},s=g([]),a=g({...t});return{loading:e,publishHistories:s,paginator:a,loadPublishHistories:async(i,o=!1)=>{try{if(o)Object.assign(a,{...t});else if(a.current_page>a.total_page)return;e.value=!0;const l=(await $(i,{current_page:a.current_page,page_size:a.page_size})).data;a.current_page=l.paginator.current_page,a.page_size=l.paginator.page_size,a.total_page=l.paginator.total_page,a.total_record=l.paginator.total_record,a.current_page<=a.total_page&&(a.current_page+=1),o?s.splice(0,s.length,...l.list):s.push(...l.list)}finally{s.splice(0,a.total_page,{id:"2121-3211",version:2,created_at:1742225012},{id:"2121-3221",version:1,created_at:1742225012}),e.value=!1}}}},T=()=>{const e=r(!1);return{loading:e,handleFallbackHistoryToDraft:async(s,a,n)=>{try{e.value=!0;const i=await k(s,a);u.success(i.message)}finally{e.value=!1,n&&n()}}}},W=e=>{const t=r(!1),s=g({}),a=async n=>{try{t.value=!0;const o=(await b(n)).data;Object.assign(s,{preset_prompt:o.preset_prompt,long_term_memory:o.long_term_memory,opening_statement:o.opening_statement,opening_questions:o.opening_questions,suggested_after_answer:o.suggested_after_answer,review_config:o.review_config,datasets:o.datasets,retrieval_config:o.retrieval_config,tools:o.tools})}finally{Object.assign(s,{preset_prompt:`# è§’è‰²
ä½ æ˜¯ä¸€ä½æ‹¥æœ‰10å¹´ç»éªŒçš„äº§å“ç»ç†ï¼Œæ“…é•¿åˆ†æžç”¨æˆ·éœ€æ±‚å’Œå¸‚åœºè¶‹åŠ¿ï¼Œèƒ½å¤Ÿæä¾›æœ‰æ•ˆçš„äº§å“è§£å†³æ–¹æ¡ˆå’Œå»ºè®®ã€‚

## æŠ€èƒ½
### æŠ€èƒ½1: ç”¨æˆ·éœ€æ±‚åˆ†æž
- é€šè¿‡æé—®äº†è§£ç”¨æˆ·çš„å…·ä½“éœ€æ±‚å’Œç—›ç‚¹ã€‚
- ç»“åˆå¸‚åœºè°ƒç ”æ•°æ®ï¼Œåˆ†æžç”¨æˆ·éœ€æ±‚çš„åˆç†æ€§å’Œå¯è¡Œæ€§ã€‚

### æŠ€èƒ½2: äº§å“ç­–ç•¥åˆ¶å®š
- æ ¹æ®ç”¨æˆ·åé¦ˆå’Œå¸‚åœºè¶‹åŠ¿ï¼Œåˆ¶å®šäº§å“å‘å±•ç­–ç•¥ã€‚
- æä¾›äº§å“å®šä½ã€ç›®æ ‡ç”¨æˆ·å’Œç«žäº‰åˆ†æžçš„å»ºè®®ã€‚ `,long_term_memory:{enable:!0},opening_statement:"ä½ å¥½ï¼Œæˆ‘æ˜¯PPTåˆ›æ„ç¤¾çš„ç¤¾é•¿ðŸ™ˆï¼Œå¾ˆé«˜å…´å¯ä»¥å¸®åˆ°ä½ ï¼æˆ‘èƒ½å¸®åŠ©ä½ æ ¹æ®â€œä¸»é¢˜ï¼ˆxxxï¼‰+å—ä¼—äººç¾¤â€ç”Ÿæˆæ•´ä½“å†™ä½œæ€è·¯å’ŒPPTå¤§çº²ï¼Œè¿˜å¯ä»¥æä¾›åšå¥½çš„PPTæ–‡ä»¶å“¦ï¼ ",opening_questions:["ä½ çŸ¥é“ä»€ä¹ˆæ˜¯LLMå—ï¼Ÿ","ä½ çŸ¥é“ä»€ä¹ˆæ˜¯Agentå—ï¼Ÿ","æ€Žä¹ˆå­¦ä¹ Pythonå‘¢ï¼Ÿä½ æœ‰ä»€ä¹ˆå»ºè®®å‘¢ï¼Ÿ"],suggested_after_answer:!0,review_config:{enable:!0,keywords:["1","2","3"],inputs_config:{enable:!0,preset_response:"æˆ‘æ˜¯é¢„è®¾å›žå¤"},outputs_config:{enable:!0}},datasets:[{id:"46db30d1-3199-4e79-a0cd-abf12fa6858f",name:"book1",icon:"https://pic.616pic.com/ys_bnew_img/00/21/26/W0Y78oDGoQ.jpg",description:"i am book"}],retrieval_config:{retrieval_strategy:"full_text",k:5,score:.09},tools:[{type:"builtin_tool",provider:{id:"121",name:"google",label:"google",icon:"https://q2.itc.cn/q_70/images03/20240329/84cca9641e9444e5b3fe9256f095da6b.png",description:"æˆ‘æ˜¯æä¾›å•†"},tool:{id:"22121",name:"googleæœç´¢",label:"search",description:"æœç´¢",params:{}}}]}),t.value=!1}};return _(async()=>await a(e)),{loading:t,draftAppConfigForm:s,loadDraftAppConfig:a}},U=()=>{const e=r(!1);return{loading:e,handleUpdateDraftAppConfig:async(s,a)=>{try{e.value=!0;const n=await h(s,a);u.success(n.message)}finally{e.value=!1}}}},q=()=>{const e=r(!1),t=r("");return{loading:e,optimize_prompt:t,handleOptimizePrompt:async a=>{try{e.value=!0,t.value="",await M(a,n=>{const i=n.data;t.value+=i==null?void 0:i.optimize_prompt})}finally{e.value=!1}}}},x=()=>{const e=r(!1),t=r("");return{loading:e,debug_conversation_summary:t,loadDebugConversationSummary:async a=>{try{e.value=!0;const i=(await D(a)).data;t.value=i.summary}finally{t.value="é•¿è®°å¿†mock",e.value=!1}}}},F=()=>{const e=r(!1);return{loading:e,handleUpdateDebugConversationSummary:async(s,a)=>{try{e.value=!0;const n=await P(s,a);u.success(n.message)}finally{e.value=!1}}}},L=()=>{const e=r(!1);return{loading:e,handleDeleteDebugConversation:async s=>{try{e.value=!0;const a=await w(s);u.success(a.message)}finally{e.value=!1}}}},E=()=>{const e=r(!1),t=r([]),s={current_page:1,page_size:5,total_page:0,total_record:0},a=r({...s});return{loading:e,messages:t,paginator:a,loadDebugConversationMessages:async(i,o=0,d=!1)=>{if(d)a.value={...s};else if(a.value.current_page>a.value.total_page)return;try{e.value=!0;const f=(await C(i,{current_page:a.value.current_page,page_size:a.value.page_size,created_at:o})).data;a.value=f.paginator,a.value.current_page<=a.value.total_page&&(a.value.current_page+=1),d?t.value=f.list:t.value.push(...f.list)}finally{e.value=!1}}}};export{T as a,H as b,S as c,j as d,U as e,q as f,x as g,F as h,L as i,E as j,W as k,G as u};
