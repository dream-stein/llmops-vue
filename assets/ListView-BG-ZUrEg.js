import{B as k,C as R,b as d,k as $,v as E,d as J,q as O,m as P,o as u,c as _,w as s,u as m,r as n,g as a,h as o,a as b,f as B,n as w,t as p,F as C,i as U}from"./index-BJ7K_jw0.js";import{h as W}from"./moment-C5S46NFB.js";const K=()=>k("/builtin-apps/categories"),Q=()=>k("/builtin-apps"),X=l=>R("/builtin-apps/add-builtin-app-to-space",{body:{builtin_app_id:l}}),Y=()=>{const l=d(!1),e=d([]);return{loading:l,categories:e,loadBuiltinAppCategories:async()=>{try{l.value=!0;const r=await K();e.value=r.data}finally{e.value=[{category:"助手",name:"助手"},{category:"人力资源",name:"人力资源"},{category:"写作",name:"写作"},{category:"电商营销",name:"电商营销"}],l.value=!1}}}},Z=()=>{const l=d(!1),e=d([]);return{loading:l,apps:e,loadBuiltinApps:async()=>{try{l.value=!0;const r=await Q();e.value=r.data}finally{e.value=[{id:"111",category:"写作",name:"AI编程助手",icon:"",description:`采用最智能的大模型，自动化AI编程。精通Java、C、C++、Python、Rust、Go等编程语言有很深的造诣，能够回答各种复杂的与编程相关的问题。

`,model_config:{provider:"阿里",model:"通义千问Max"},created_at:1742704861}],l.value=!1}}}},ee=()=>{const l=$(),e=d(!1);return{loading:e,handleAddBuiltinAppToSpace:async r=>{try{e.value=!0;const g=await X(r);E.success("将Agent模板添加到工作区成功"),await l.push({name:"space-apps-detail",params:{app_id:g.data.id}})}finally{e.value=!1}}}},te={class:"p-6 flex flex-col"},ae={class:"flex items-center justify-between mb-6"},oe={class:"flex items-center gap-2"},se={class:"flex items-center justify-between mb-6"},ne={class:"flex items-center gap-2"},le={class:"flex items-center gap-3 mb-3"},ce={class:"flex flex-1 justify-between"},ie={class:"flex flex-col"},re={class:"text-base text-gray-900 font-bold"},de={class:"text-xs text-gray-500 line-clamp-1"},ue={class:"leading-[18px] text-gray-500 h-[72px] line-clamp-4 mb-2 break-all"},pe={class:"flex items-center gap-1.5"},_e={class:"text-xs text-gray-400"},fe=J({__name:"ListView",setup(l){const e=d("all"),i=d(""),{categories:r,loadBuiltinAppCategories:g}=Y(),{loading:V,apps:S,loadBuiltinApps:L}=Z(),{handleAddBuiltinAppToSpace:M}=ee(),h=O(()=>S.value.filter(f=>{const c=e.value==="all"||f.category===e.value,y=i.value===""||f.name.toLowerCase().includes(i.value);return c&&y}));return P(()=>{g(),L()}),(f,c)=>{const y=n("icon-common"),v=n("a-avatar"),x=n("a-button"),T=n("a-input-search"),z=n("icon-more"),j=n("a-doption"),N=n("a-dropdown"),D=n("icon-user"),G=n("a-card"),A=n("a-col"),q=n("a-empty"),F=n("a-row"),H=n("a-spin");return u(),_(H,{loading:m(V),class:"block h-full w-full"},{default:s(()=>[a("div",te,[a("div",ae,[a("div",oe,[o(v,{size:32,class:"bg-blue-700"},{default:s(()=>[o(y,{size:18})]),_:1}),c[2]||(c[2]=a("div",{class:"text-lg font-medium text-gray-900"},"应用广场",-1))])]),a("div",se,[a("div",ne,[o(x,{type:e.value==="all"?"secondary":"text",class:"rounded-lg !text-gray-700 px-3",onClick:c[0]||(c[0]=t=>e.value="all")},{default:s(()=>c[3]||(c[3]=[b(" 全部 ")])),_:1},8,["type"]),(u(!0),B(C,null,w(m(r),t=>(u(),_(x,{key:t.category,type:e.value===t.category?"secondary":"text",class:"rounded-lg !text-gray-700 px-3",onClick:I=>e.value=t.category},{default:s(()=>[b(p(t.name),1)]),_:2},1032,["type","onClick"]))),128))]),o(T,{modelValue:i.value,"onUpdate:modelValue":c[1]||(c[1]=t=>i.value=t),placeholder:"请输入应用名称",class:"w-[240px] bg-white rounded-lg border-gray-300"},null,8,["modelValue"])]),o(F,{gutter:[20,20],class:"flex-1"},{default:s(()=>[(u(!0),B(C,null,w(h.value,(t,I)=>(u(),_(A,{key:t.id,span:6},{default:s(()=>[o(G,{hoverable:"",class:"cursor-pointer rounded-lg"},{default:s(()=>[a("div",le,[o(v,{size:40,shape:"square","image-url":t.icon},null,8,["image-url"]),a("div",ce,[a("div",ie,[a("div",re,p(t.name),1),a("div",de,p(t.model_config.provider)+" · "+p(t.model_config.model),1)]),o(N,{position:"br"},{content:s(()=>[o(j,{onClick:async()=>await m(M)(t.id)},{default:s(()=>c[4]||(c[4]=[b(" 添加到工作区 ")])),_:2},1032,["onClick"])]),default:s(()=>[o(x,{type:"text",size:"small",class:"rounded-lg !text-gray-700"},{icon:s(()=>[o(z)]),_:1})]),_:2},1024)])]),a("div",ue,p(t.description),1),a("div",pe,[o(v,{size:18,class:"bg-blue-700"},{default:s(()=>[o(D)]),_:1}),a("div",_e," LLMOps · 发布时间 "+p(m(W)(t.created_at*1e3).format("MM-DD HH:mm")),1)])]),_:2},1024)]),_:2},1024))),128)),h.value.length===0?(u(),_(A,{key:0,span:24},{default:s(()=>[o(q,{description:"没有可用的内置Agent智能体",class:"h-[400px] flex flex-col items-center justify-center"})]),_:1})):U("",!0)]),_:1})])]),_:1},8,["loading"])}}});export{fe as default};
