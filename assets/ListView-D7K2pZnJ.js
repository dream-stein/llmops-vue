import{g as k,p as $,r as d,B as O,M as R,d as U,E as W,o as I,z as _,w as o,e as m,q as n,t as u,b as a,a as s,i as b,c as B,j as w,x as p,F as C,f as J}from"./index-DlWzBxXg.js";import{h as K}from"./moment-C5S46NFB.js";const P=()=>k("/builtin-apps/categories"),Q=()=>k("/builtin-apps"),X=l=>$("/builtin-apps/add-builtin-app-to-space",{body:{builtin_app_id:l}}),Y=()=>{const l=d(!1),e=d([]);return{loading:l,categories:e,loadBuiltinAppCategories:async()=>{try{l.value=!0;const r=await P();e.value=r.data}finally{e.value=[{category:"助手",name:"助手"},{category:"人力资源",name:"人力资源"},{category:"写作",name:"写作"},{category:"电商营销",name:"电商营销"}],l.value=!1}}}},Z=()=>{const l=d(!1),e=d([]);return{loading:l,apps:e,loadBuiltinApps:async()=>{try{l.value=!0;const r=await Q();e.value=r.data}finally{l.value=!1}}}},ee=()=>{const l=O(),e=d(!1);return{loading:e,handleAddBuiltinAppToSpace:async r=>{try{e.value=!0;const g=await X(r);R.success("将Agent模板添加到工作区成功"),await l.push({name:"space-apps-detail",params:{app_id:g.data.id}})}finally{e.value=!1}}}},te={class:"p-6 flex flex-col"},ae={class:"flex items-center justify-between mb-6"},se={class:"flex items-center gap-2"},oe={class:"flex items-center justify-between mb-6"},ne={class:"flex items-center gap-2"},le={class:"flex items-center gap-3 mb-3"},ce={class:"flex flex-1 justify-between"},ie={class:"flex flex-col"},re={class:"text-base text-gray-900 font-bold"},de={class:"text-xs text-gray-500 line-clamp-1"},ue={class:"leading-[18px] text-gray-500 h-[72px] line-clamp-4 mb-2 break-all"},pe={class:"flex items-center gap-1.5"},_e={class:"text-xs text-gray-400"},fe=U({__name:"ListView",setup(l){const e=d("all"),i=d(""),{categories:r,loadBuiltinAppCategories:g}=Y(),{loading:V,apps:S,loadBuiltinApps:z}=Z(),{handleAddBuiltinAppToSpace:L}=ee(),h=W(()=>S.value.filter(f=>{const c=e.value==="all"||f.category===e.value,y=i.value===""||f.name.toLowerCase().includes(i.value);return c&&y}));return I(()=>{g(),z()}),(f,c)=>{const y=n("icon-common"),x=n("a-avatar"),v=n("a-button"),M=n("a-input-search"),T=n("icon-more"),j=n("a-doption"),N=n("a-dropdown"),D=n("icon-user"),q=n("a-card"),A=n("a-col"),E=n("a-empty"),F=n("a-row"),G=n("a-spin");return u(),_(G,{loading:m(V),class:"block h-full w-full"},{default:o(()=>[a("div",te,[a("div",ae,[a("div",se,[s(x,{size:32,class:"bg-blue-700"},{default:o(()=>[s(y,{size:18})]),_:1}),c[2]||(c[2]=a("div",{class:"text-lg font-medium text-gray-900"},"应用广场",-1))])]),a("div",oe,[a("div",ne,[s(v,{type:e.value==="all"?"secondary":"text",class:"rounded-lg !text-gray-700 px-3",onClick:c[0]||(c[0]=t=>e.value="all")},{default:o(()=>c[3]||(c[3]=[b(" 全部 ")])),_:1},8,["type"]),(u(!0),B(C,null,w(m(r),t=>(u(),_(v,{key:t.category,type:e.value===t.category?"secondary":"text",class:"rounded-lg !text-gray-700 px-3",onClick:H=>e.value=t.category},{default:o(()=>[b(p(t.name),1)]),_:2},1032,["type","onClick"]))),128))]),s(M,{modelValue:i.value,"onUpdate:modelValue":c[1]||(c[1]=t=>i.value=t),placeholder:"请输入应用名称",class:"w-[240px] bg-white rounded-lg border-gray-300"},null,8,["modelValue"])]),s(F,{gutter:[20,20],class:"flex-1"},{default:o(()=>[(u(!0),B(C,null,w(h.value,(t,H)=>(u(),_(A,{key:t.id,span:6},{default:o(()=>[s(q,{hoverable:"",class:"cursor-pointer rounded-lg"},{default:o(()=>[a("div",le,[s(x,{size:40,shape:"square","image-url":t.icon},null,8,["image-url"]),a("div",ce,[a("div",ie,[a("div",re,p(t.name),1),a("div",de,p(t.model_config.provider)+" · "+p(t.model_config.model),1)]),s(N,{position:"br"},{content:o(()=>[s(j,{onClick:async()=>await m(L)(t.id)},{default:o(()=>c[4]||(c[4]=[b(" 添加到工作区 ")])),_:2},1032,["onClick"])]),default:o(()=>[s(v,{type:"text",size:"small",class:"rounded-lg !text-gray-700"},{icon:o(()=>[s(T)]),_:1})]),_:2},1024)])]),a("div",ue,p(t.description),1),a("div",pe,[s(x,{size:18,class:"bg-blue-700"},{default:o(()=>[s(D)]),_:1}),a("div",_e," LLMOps · 发布时间 "+p(m(K)(t.created_at).format("MM-DD HH:mm")),1)])]),_:2},1024)]),_:2},1024))),128)),h.value.length===0?(u(),_(A,{key:0,span:24},{default:o(()=>[s(E,{description:"没有可用的内置Agent智能体",class:"h-[400px] flex flex-col items-center justify-center"})]),_:1})):J("",!0)]),_:1})])]),_:1},8,["loading"])}}});export{fe as default};
