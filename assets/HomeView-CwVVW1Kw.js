import{s as K,p as D,g as J,r as d,M as H,d as R,u as X,o as Y,n as Z,c as w,a,b as r,e as u,w as f,f as ee,h as te,i as L,F as se,j as ne,k as ae,v as oe,l as le,m as ie,Q as q,q as y,t as k,x as re}from"./index-BJog29LW.js";import{u as ue,s as ce,_ as ge,a as de,b as ve}from"./AiMessage.vue_vue_type_script_setup_true_lang-CYp1y0Mb.js";const pe=(s,l)=>K("/assistant-agent/chat",{body:{query:s}},l),_e=s=>D(`/assistant-agent/chat/${s}/stop`),he=s=>J("/assistant-agent/messages",{params:s}),fe=()=>D("/assistant-agent/delete-conversation"),ye=()=>{const s=d(!1);return{loading:s,handleAssistantAgentChat:async(i,c)=>{try{s.value=!0,await pe(i,c)}finally{s.value=!1}}}},xe=()=>{const s=d(!1);return{loading:s,handleStopAssistantAgentChat:async i=>{try{s.value=!0,await _e(i)}finally{s.value=!1}}}},Ae=()=>{const s=d(!1),l=d([]),i=d(0),c={current_page:1,page_size:5,total_page:0,total_record:0},n=d({...c});return{loading:s,messages:l,paginator:n,loadAssistantAgentMessages:async(C=!1)=>{var S;if(C)n.value={...c},i.value=0;else if(n.value.current_page>n.value.total_page)return;try{s.value=!0;const x=(await he({current_page:n.value.current_page,page_size:n.value.page_size,created_at:i.value})).data;n.value=x.paginator,n.value.current_page<=n.value.total_page&&(n.value.current_page+=1),C?l.value=x.list:(l.value.push(...x.list),i.value=((S=x.list[0])==null?void 0:S.created_at)??0)}finally{l.value.push({id:"1221",conversation_id:"212121",query:"å¸®æˆ‘çœ‹ä¸€ä¸‹2025å¹´4æœˆçš„é»„é‡‘èµ°åŠ¿",answer:`2025å¹´4æœˆé»„é‡‘èµ°åŠ¿å¯èƒ½å‘ˆç°ä»¥ä¸‹ç‰¹ç‚¹ï¼š

### çŸ­æœŸè¶‹åŠ¿ï¼š
1. **æŠ€æœ¯æ€§å›è°ƒå‹åŠ›**ï¼šé‡‘ä»·åœ¨3æœˆçªç ´3000ç¾å…ƒåï¼Œéƒ¨åˆ†è·åˆ©ç›˜å¯èƒ½ç¦»åœºï¼Œå åŠ å¸‚åœºå¯¹å‰æœŸå¿«é€Ÿä¸Šæ¶¨çš„æ¶ˆåŒ–éœ€æ±‚ï¼Œ4æœˆå¯èƒ½å‡ºç°çŸ­æœŸå›è°ƒæˆ–ç›˜æ•´ã€‚
2. **å…³ç¨æ”¿ç­–å½±å“**ï¼šç¾å›½4æœˆå…³ç¨æ”¿ç­–ç»†èŠ‚è‹¥è½åœ°ï¼Œå¯èƒ½ç¼“è§£å¸‚åœºå¯¹è´¸æ˜“ç´§å¼ çš„æ‹…å¿§ï¼ŒçŸ­æœŸå‰Šå¼±é¿é™©éœ€æ±‚ï¼Œå¯¼è‡´é‡‘ä»·å›è°ƒã€‚

### ä¸­é•¿æœŸæ”¯æ’‘å› ç´ ï¼š
1. **ç¾è”å‚¨é™æ¯é¢„æœŸ**ï¼šè‹¥ç¾å›½ç»æµæ•°æ®ç–²è½¯ï¼ˆå¦‚å¤±ä¸šç‡ä¸Šå‡ã€é€šèƒ€å›è½ï¼‰ï¼Œå¸‚åœºå¯¹ç¾è”å‚¨ä¸‰å­£åº¦é™æ¯çš„é¢„æœŸå°†å‡æ¸©ï¼Œæ¨åŠ¨é‡‘ä»·å‘3200ç¾å…ƒç”šè‡³æ›´é«˜ç›®æ ‡è¿ˆè¿›ã€‚
2. **åœ°ç¼˜æ”¿æ²»é£é™©**ï¼šä¸­ä¸œå±€åŠ¿æŒç»­ç´§å¼ ï¼ˆå¦‚å·´ä»¥å†²çªã€èƒ¡å¡æ­¦è£…è¡ŒåŠ¨ï¼‰ã€å…¨çƒå»ç¾å…ƒåŒ–è¶‹åŠ¿åŠå¤®è¡ŒæŒç»­è´­é‡‘ï¼ˆå°¤å…¶æ˜¯ä¸­å›½ã€å°åº¦ç­‰å›½ï¼‰å°†ä¸ºé‡‘ä»·æä¾›é•¿æœŸæ”¯æ’‘ã€‚
3. **ç¾å…ƒç–²è½¯**ï¼šç¾å…ƒæŒ‡æ•°èµ°å¼±ç›´æ¥åˆ©å¥½ä»¥ç¾å…ƒè®¡ä»·çš„é»„é‡‘ï¼Œè‹¥ç¾å…ƒå»¶ç»­è·ŒåŠ¿ï¼Œé‡‘ä»·ä¸Šè¡Œç©ºé—´å°†è¿›ä¸€æ­¥æ‰“å¼€ã€‚

### æœºæ„è§‚ç‚¹ï¼š
- **ä¹è§‚é¢„æœŸ**ï¼šç‘é“¶ã€é«˜ç››ç­‰æœºæ„ä¸Šè°ƒç›®æ ‡ä»·è‡³3200ç¾å…ƒï¼Œéº¦æ ¼ç†ç”šè‡³é¢„æµ‹ä¸‰å­£åº¦é‡‘ä»·å¯èƒ½å†²å‡»3500ç¾å…ƒã€‚
- **è°¨æ…æé†’**ï¼šæ³•å…´é“¶è¡ŒæŒ‡å‡ºï¼Œè‹¥è´¸æ˜“ç´§å¼ å±€åŠ¿ç¼“å’Œæˆ–ç¾è”å‚¨é™æ¯ä¿¡å·ä¸æ˜ï¼Œé‡‘ä»·ä¸‹åŠå¹´æ¶¨åŠ¿å¯èƒ½å—é™ã€‚

### æ€»ç»“ï¼š
4æœˆé‡‘ä»·æˆ–å…ˆç»å†çŸ­æœŸå›è°ƒï¼Œä½†ä¸­é•¿æœŸåœ¨é¿é™©éœ€æ±‚ã€å®½æ¾è´§å¸æ”¿ç­–é¢„æœŸåŠå¤®è¡Œè´­é‡‘æ”¯æ’‘ä¸‹ä»å…·å¤‡ä¸Šè¡Œç©ºé—´ã€‚æŠ•èµ„è€…éœ€å…³æ³¨ç¾è”å‚¨æ”¿ç­–åŠ¨å‘ã€åœ°ç¼˜å†²çªè¿›å±•åŠå…³ç¨æ”¿ç­–ç»†èŠ‚ï¼Œå»ºè®®åˆ†æ‰¹å¸ƒå±€ï¼Œæ§åˆ¶ä»“ä½ä»¥åº”å¯¹çŸ­æœŸæ³¢åŠ¨ã€‚`,total_token_count:2121,latency:2,agent_thoughts:[],created_at:0}),s.value=!1}}}},me=()=>{const s=d(!1);return{loading:s,handleDeleteAssistantAgentConversation:async()=>{try{s.value=!0;const i=await fe();H.success(i.message)}finally{s.value=!1}}}},be="/llmops-vue/assets/assistant-agent-background-Jf_uHUnU.png",we={class:"w-[600px] h-full min-h-screen mx-auto"},ke={key:0,class:"flex flex-col px-6 h-[calc(100%-100px)] min-h-[calc(100vh-100px)]"},Ce={class:"flex flex-col gap-6 py-6"},Se={key:0,class:"h-[50px] flex items-center justify-center"},Me={key:1,class:"flex flex-col p-6 gap-2 items-center justify-center overflow-scroll scrollbar-w-none h-[calc(100%-100px)] min-h-[calc(100vh-100px)]"},Le={class:"flex gap-2"},qe={class:"flex flex-col items-start gap-2"},Te={class:"bg-white border border-gray-200 text-gray-700 px-4 py-3 rounded-2xl break-all leading-7"},ze={class:"list-disc pl-6"},Ie={class:"flex flex-col gap-2"},$e=["onClick"],Be={class:"w-full flex flex-col flex-shrink-0"},He={class:"px-6 flex items-center gap-4"},Qe={class:"bg-white h-[50px] flex items-center gap-2 px-4 flex-1 border border-gray-200 rounded-full"},Pe=R({__name:"HomeView",setup(s){const l=d(""),i=d(""),c=d(""),n=d(null),T=d(0),C=X(),S=["ä»€ä¹ˆæ˜¯LLMOps?","æˆ‘æƒ³åˆ›å»ºä¸€ä¸ªåº”ç”¨","èƒ½ä»‹ç»ä¸‹ä»€ä¹ˆæ˜¯RAGå—?"],{suggested_questions:z,handleGenerateSuggestedQuestions:x}=ue(),{loading:m,handleAssistantAgentChat:P}=ye(),{loading:N,handleStopAssistantAgentChat:O}=xe(),{loading:G,messages:g,loadAssistantAgentMessages:I}=Ae(),{loading:j,handleDeleteAssistantAgentConversation:U}=me(),W=()=>{T.value=n.value.$el.scrollHeight},E=()=>{n.value.$el.scrollTop=n.value.$el.scrollHeight-T.value},F=async v=>{const{scrollTop:t}=v.target;t<=0&&!G.value&&(W(),await I(!1),E())},$=async()=>{if(l.value.trim()===""){H.warning("ç”¨æˆ·æé—®ä¸èƒ½ä¸ºç©º");return}if(m.value){H.warning("ä¸Šä¸€æ¬¡æé—®è¿˜æœªç»“æŸï¼Œè¯·ç¨ç­‰");return}z.value=[],c.value="",i.value="",g.value.unshift({id:"",conversation_id:"",query:l.value,answer:"",total_token_count:0,latency:0,agent_thoughts:[],created_at:0});let v=0;const t=l.value;l.value="",await P(t,_=>{var M;const h=_==null?void 0:_.event,e=_==null?void 0:_.data,b=e==null?void 0:e.id,p=g.value[0].agent_thoughts;if(c.value===""&&(e!=null&&e.message_id)&&(i.value=e==null?void 0:e.task_id,c.value=e==null?void 0:e.message_id,g.value[0].id=e==null?void 0:e.message_id,g.value[0].conversation_id=e==null?void 0:e.conversation_id),h!==q.ping){if(h===q.agentMessage){const A=p.findIndex(o=>(o==null?void 0:o.id)===b);A===-1?(v+=1,p.push({id:b,position:v,event:e==null?void 0:e.event,thought:e==null?void 0:e.thought,observation:e==null?void 0:e.observation,tool:e==null?void 0:e.tool,tool_input:e==null?void 0:e.tool_input,latency:e==null?void 0:e.latency,created_at:0})):p[A]={...p[A],thought:((M=p[A])==null?void 0:M.thought)+(e==null?void 0:e.thought),latency:e==null?void 0:e.latency},g.value[0].answer+=e==null?void 0:e.thought,g.value[0].latency=e==null?void 0:e.latency,g.value[0].total_token_count=e==null?void 0:e.total_token_count}else h===q.error?g.value[0].answer=e==null?void 0:e.observation:h===q.timeout?g.value[0].answer="å½“å‰Agentæ‰§è¡Œå·²è¶…æ—¶ï¼Œæ— æ³•å¾—åˆ°ç­”æ¡ˆï¼Œè¯·é‡è¯•":(v+=1,p.push({id:b,position:v,event:e==null?void 0:e.event,thought:e==null?void 0:e.thought,observation:e==null?void 0:e.observation,tool:e==null?void 0:e.tool,tool_input:e==null?void 0:e.tool_input,latency:e==null?void 0:e.latency,created_at:0}));g.value[0].agent_thoughts=p,n.value.scrollToBottom()}}),c.value&&(await x(c.value),setTimeout(()=>n.value&&n.value.scrollToBottom(),100))},Q=async()=>{i.value===""||!m.value||await O(i.value)},V=async v=>{l.value=v,await $()};return Y(async()=>{await I(!0),await Z(()=>{n.value&&n.value.scrollToBottom()})}),(v,t)=>{const _=y("icon-poweroff"),h=y("a-button"),e=y("icon-apps"),b=y("a-avatar"),p=y("router-link"),M=y("icon-empty"),A=y("icon-send");return k(),w("div",{class:"w-full h-full min-h-screen bg-gray-100 bg-cover bg-no-repeat bg-center",style:ie({backgroundImage:`url(${r(be)})`})},[a("div",we,[r(g).length>0?(k(),w("div",ke,[u(r(ve),{ref_key:"scroller",ref:n,items:r(g).slice().reverse(),"min-item-size":1,onScroll:F,class:"h-full scrollbar-w-none"},{default:f(({item:o,active:B})=>[u(r(ce),{item:o,active:B,"data-index":o.id},{default:f(()=>[a("div",Ce,[u(ge,{query:o.query,account:r(C).account},null,8,["query","account"]),u(de,{agent_thoughts:o.agent_thoughts,answer:o.answer,app:{name:"è¾…åŠ©Agent"},suggested_questions:o.id===c.value?r(z):[],loading:o.id===c.value&&r(m),latency:o.latency,total_token_count:o.total_token_count,message_class:"bg-white",onSelectSuggestedQuestion:V},null,8,["agent_thoughts","answer","suggested_questions","loading","latency","total_token_count"])])]),_:2},1032,["item","active","data-index"])]),_:1},8,["items"]),i.value&&r(m)?(k(),w("div",Se,[u(h,{loading:r(N),class:"rounded-lg px-2",onClick:Q},{icon:f(()=>[u(_)]),default:f(()=>[t[2]||(t[2]=L(" åœæ­¢å“åº” "))]),_:1},8,["loading"])])):ee("",!0)])):(k(),w("div",Me,[t[12]||(t[12]=te('<div class="mb-9"><div class="text-[40px] font-bold text-gray-700 mt-[52px] mb-4"> Hiï¼Œæˆ‘æ˜¯ AI åº”ç”¨æ„å»ºå™¨ </div><div class="text-[30px] font-bold text-gray-700 mb-2"> ä½ çš„ä¸“å± <span class="text-blue-700">AI åŸç”Ÿåº”ç”¨</span> å¼€å‘å¹³å° </div><div class="text-base text-gray-700"> è¯´å‡ºä½ çš„åˆ›æ„ï¼Œæˆ‘å¯ä»¥å¿«é€Ÿå¸®ä½ åˆ›å»ºä¸“å±åº”ç”¨ï¼Œä¸€é”®è½»æ¾åˆ†äº«ç»™æœ‹å‹ï¼Œä¹Ÿå¯ä»¥ä¸€é”®å‘å¸ƒåˆ° LLMOps å¹³å°ã€å¾®ä¿¡ç­‰å¤šä¸ªæ¸ é“ã€‚ </div></div>',1)),a("div",Le,[u(b,{size:30,shape:"circle",class:"flex-shrink-0 bg-blue-700"},{default:f(()=>[u(e)]),_:1}),a("div",qe,[t[11]||(t[11]=a("div",{class:"text-gray-700 font-bold"},"è¾…åŠ©Agent",-1)),a("div",Te,[t[8]||(t[8]=a("div",{class:"font-bold"},"ä½ å¥½ï¼Œæ¬¢è¿æ¥åˆ°LLMOpsğŸ‰",-1)),t[9]||(t[9]=a("div",{class:""}," LLMOpsæ˜¯æ–°ä¸€ä»£å¤§æ¨¡å‹ AI åº”ç”¨å¼€å‘å¹³å°ã€‚æ— è®ºä½ æ˜¯å¦æœ‰ç¼–ç¨‹åŸºç¡€ï¼Œéƒ½å¯ä»¥å¿«é€Ÿæ­å»ºå‡ºå„ç§ AI åº”ç”¨ï¼Œå¹¶ä¸€é”®å‘å¸ƒåˆ°å„å¤§ç¤¾äº¤å¹³å°ï¼Œæˆ–è€…è½»æ¾éƒ¨ç½²åˆ°è‡ªå·±çš„ç½‘ç«™ã€‚ ",-1)),a("ul",ze,[a("li",null,[t[4]||(t[4]=L(" éšæ—¶æ¥ ")),u(p,{to:{name:"store-apps-list"},class:"text-blue-700"},{default:f(()=>t[3]||(t[3]=[L("åº”ç”¨å¹¿åœº ")])),_:1}),t[5]||(t[5]=L(" é€›é€›ï¼Œè¿™é‡Œå†…ç½®äº†è®¸å¤šè¶…æœ‰è¶£çš„åº”ç”¨ã€‚ "))]),t[6]||(t[6]=a("li",null,"ä½ ä¹Ÿå¯ä»¥ç›´æ¥å‘é€â€œæˆ‘æƒ³åšä¸€ä¸ªåº”ç”¨â€ï¼Œæˆ‘å¯ä»¥å¸®ä½ å¿«é€Ÿåˆ›å»ºåº”ç”¨ã€‚",-1)),t[7]||(t[7]=a("li",null,"ä½ ä¹Ÿå¯ä»¥å‘æˆ‘æé—®æœ‰å…³è¯¾ç¨‹çš„é—®é¢˜ï¼Œæˆ‘å¯ä»¥å¿«é€Ÿæ›¿ä½ è§£ç­”ã€‚",-1))]),t[10]||(t[10]=a("div",{class:""},"å¦‚æœä½ è¿˜æœ‰å…¶ä»–LLMOpsä½¿ç”¨é—®é¢˜ï¼Œä¹Ÿæ¬¢è¿éšæ—¶é—®æˆ‘ï¼",-1))]),a("div",Ie,[(k(),w(se,null,ne(S,(o,B)=>a("div",{key:B,class:"px-4 py-1.5 border rounded-lg text-gray-700 cursor-pointer bg-white hover:bg-gray-50",onClick:async()=>await V(o)},re(o),9,$e)),64))])])])])),a("div",Be,[a("div",He,[u(h,{loading:r(j),class:"flex-shrink-0 !text-gray-700",type:"text",shape:"circle",onClick:t[0]||(t[0]=async()=>{await Q(),await r(U)(),await r(I)(!0)})},{icon:f(()=>[u(M,{size:16})]),_:1},8,["loading"]),a("div",Qe,[ae(a("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>l.value=o),type:"text",class:"flex-1 outline-0",placeholder:"å‘é€æ¶ˆæ¯æˆ–åˆ›å»ºAIåº”ç”¨...",onKeyup:le($,["enter"])},null,544),[[oe,l.value]]),u(h,{loading:r(m),type:"text",shape:"circle",class:"!text-gray-700",onClick:$},{icon:f(()=>[u(A,{size:16})]),_:1},8,["loading"])])]),t[13]||(t[13]=a("div",{class:"text-center text-gray-500 text-xs py-4"}," å†…å®¹ç”±AIç”Ÿæˆï¼Œæ— æ³•ç¡®ä¿çœŸå®å‡†ç¡®ï¼Œä»…ä¾›å‚è€ƒã€‚ ",-1))])])],4)}}});export{Pe as default};
