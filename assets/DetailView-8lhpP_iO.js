import{G as B,d as D,b as h,o as a,f as n,g as t,H as I,F as T,t as G,h as o,w as d,i as m,I as K,J as M,K as P,j,x as w,r as i,c as k,a as C,v as _,_ as q}from"./index-CLu65jPb.js";const A=(b,r,s)=>B(`/apps/${b}/debug`,{body:{query:r}},s),F={class:"min-h-screen"},L={class:"flex flex-row h-[calc(100vh-74px)]"},S={class:"flex flex-col w-1/3 bg-white h-full"},E={class:"h-full min-h-0 px-6 py-7 overflow-x-hidden overflow-y-scroll scrollbar-w-none"},H={class:"flex flex-col gap-2"},J={class:"font-semibold text-gray-700"},Q={key:0,class:"max-w-max bg-blue-700 text-white border border-blue-800 px-4 py-3 rounded-2xl leading-5"},R={key:1,class:"max-w-max bg-gray-100 text-gray-900 border border-gray-200 px-4 py-3 rounded-2xl leading-5"},U={key:0,class:"cursor"},$={key:0,class:"mt-[200px] flex flex-col items-center justify-center gap-2"},O={class:"w-full flex-shrink-0 flex flex-col"},W={class:"px-6 flex items-center gap-4"},X={class:"h-[50px] flex items-center gap-2 px-4 flex-1 border border-gray-200 rounded-full"},Y=D({__name:"DetailView",setup(b){const r=h(""),s=h([]),f=h(!1),V=j(),z=()=>{s.value=[]},g=async()=>{if(!r.value){w.error("用户提问不能为空");return}if(f.value){w.warning("上一次回复还未结束，请稍等");return}try{const v=r.value;s.value.push({role:"human",content:v}),r.value="",f.value=!0,s.value.push({role:"ai",content:""}),await A(V.params.app_id,v,e=>{const x=e==null?void 0:e.evnet,c=e==null?void 0:e.data,p=s.value.length-1,u=s.value[p];if(x==="agent_message"){const y=c==null?void 0:c.data;s.value[p].constructor=u.content+y}})}finally{f.value=!1}};return(v,e)=>{const x=i("a-avatar"),c=i("icon-apps"),p=i("icon-empty"),u=i("a-button"),y=i("icon-plus-circle"),N=i("icon-send");return a(),n("div",F,[e[6]||(e[6]=t("header",{class:"flex items-center h-[74px] bg-gray-100 border-b border-gray-200 px-4"}," 顶部导航 ",-1)),t("div",L,[e[5]||(e[5]=I('<div class="w-2/3 bg-gray-50 h-full" data-v-0de4643f><header class="flex items-center h-16 border-b border-gray-200 px-7 text-xl text-gray-700" data-v-0de4643f> 应用编排 </header><div class="flex flex-row h-[calc(100%-64px)]" data-v-0de4643f><div class="flex-1 border-r border-gray-200 p-6" data-v-0de4643f>人设与回复逻辑</div><div class="flex-1 p-6" data-v-0de4643f>应用能力</div></div></div>',1)),t("div",S,[e[4]||(e[4]=t("header",{class:"flex flex-shrink-0 items-center h-16 px-4 text-xl bg-white border-b border-gray-200 shadow-sm"}," 调试与预览 ",-1)),t("div",E,[(a(!0),n(T,null,G(s.value,l=>(a(),n("div",{class:"flex flex-row gap-2 mb-6",key:l.content},[l.role==="human"?(a(),k(x,{key:0,style:{backgroundColor:"#3370ff"},class:"flex-shrink-0",size:30},{default:d(()=>e[1]||(e[1]=[C(" 慕 ")])),_:1})):(a(),k(x,{key:1,style:{backgroundColor:"#00d0b6"},class:"flex-shrink-0",size:30},{default:d(()=>[o(c)]),_:1})),t("div",H,[t("div",J,_(l.role==="human"?"慕小课":"ChatGPT聊天机器人"),1),l.role==="human"?(a(),n("div",Q,_(l.content),1)):(a(),n("div",R,[C(_(l.content)+" ",1),f.value?(a(),n("div",U)):m("",!0)]))])]))),128)),s.value.length?m("",!0):(a(),n("div",$,[o(x,{size:70,shape:"square",style:{backgroundColor:"#00d0b6"}},{default:d(()=>[o(c)]),_:1}),e[2]||(e[2]=t("div",{class:"text-2xl font-semibold text-gray-900"},"ChatGPT聊天机器人",-1))]))]),t("div",O,[t("div",W,[o(u,{class:"flex-shrink-0",type:"text",shape:"circle",onClick:z},{icon:d(()=>[o(p,{size:"16",style:{color:"#374151"}})]),_:1}),t("div",X,[K(t("input",{type:"text",class:"flex-1 outline-0","onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l),onKeyup:P(g,["enter"])},null,544),[[M,r.value]]),o(u,{type:"text",shape:"circle"},{icon:d(()=>[o(y,{size:"16",style:{color:"#374151"}})]),_:1}),o(u,{type:"text",shape:"circle",onClick:g},{icon:d(()=>[o(N,{size:"16",style:{color:"#1d4ed8"}})]),_:1})])]),e[3]||(e[3]=t("div",{class:"text-center text-gray-500 text-xs py-4"}," 内容由AI生成，无法确保真实准确，仅供参考。 ",-1))])])])])}}}),ee=q(Y,[["__scopeId","data-v-0de4643f"]]);export{ee as default};
