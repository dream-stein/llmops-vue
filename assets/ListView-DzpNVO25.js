import{g as A,a as E}from"./builtin-tool-TWdDZ8Hn.js";import{h as G}from"./moment-C5S46NFB.js";import{d as K,K as q,r as g,G as O,o as F,B as v,w as l,x as r,y as c,a as e,f as o,j as V,c as u,k as y,z as a,F as h,q as M,b,L as j,h as k,H as U}from"./index-BZV3AOS3.js";const W={class:"p-6 flex flex-col"},J={class:"flex items-center justify-between mb-6"},Q={class:"flex items-center gap-2"},R={class:"flex items-center justify-between mb-6"},X={class:"flex items-center gap-2"},Z={class:"flex items-center gap-3 mb-3"},I=["src","alt"],ee={class:"flex flex-col"},te={class:"text-base text-gray-900 font-bold"},se={class:"text-xs text-gray-500 line-clamp-1"},ae={class:"leading-[18px] text-gray-500 h-[72px] line-clamp-4 mb-2"},le={class:"flex items-center gap-1.5"},oe={class:"text-xs text-gray-400"},ne={key:0,class:""},ce={class:"flex items-center gap-3 mb-3"},re=["src","alt"],ie={class:"flex flex-col"},de={class:"text-base text-gray-900 font-bold"},ue={class:"text-xs text-gray-500 line-clamp-1"},_e={class:"leading-[18px] text-gray-500 mb-2"},xe={class:"flex flex-col gap-2"},me={class:"text-xs text-gray-500"},ve={class:"font-bold text-gray-900 mb-2"},fe={class:"text-gray-500 text-xs"},pe={key:0,class:""},ge={class:"flex flex-col gap-4"},ye={class:"flex items-center gap-2 text-xs"},he={class:"text-gray-900 font-bold"},be={class:"text-gray-500"},ke={key:0,class:"text-red-700"},we={class:"text-xs text-gray-500"},Le=K({__name:"ListView",setup(Ce){const $=q([]),z=q([]),m=g(!1),x=g("all"),f=g(""),n=g(-1),i=O(()=>z.filter(_=>{const s=x.value==="all"||_.category===x.value,w=f.value===""||_.label.toLowerCase().includes(f.value);return s&&w}));return F(async()=>{try{m.value=!0;const _=await A();$.push(..._.data)}finally{m.value=!1}}),F(async()=>{try{m.value=!0;const _=await E();z.push(..._.data)}finally{m.value=!1}}),(_,s)=>{const w=r("icon-common"),p=r("a-avatar"),C=r("a-button"),N=r("router-link"),Y=r("a-input-search"),D=r("icon-user"),B=r("a-card"),L=r("a-col"),H=r("a-empty"),S=r("a-row"),P=r("a-drawer"),T=r("a-spin");return c(),v(T,{loading:m.value,class:"block h-full w-full"},{default:l(()=>[e("div",W,[e("div",J,[e("div",Q,[o(p,{size:32,class:"bg-blue-700"},{default:l(()=>[o(w,{size:18})]),_:1}),s[3]||(s[3]=e("div",{class:"text-lg font-medium text-gray-900"},"插件广场",-1))]),o(N,{to:{name:"space-tools-list",query:{create_type:"tool"}}},{default:l(()=>[o(C,{type:"primary",class:"rounded-lg"},{default:l(()=>s[4]||(s[4]=[V("创建自定义插件")])),_:1})]),_:1})]),e("div",R,[e("div",X,[o(C,{type:x.value==="all"?"secondary":"text",class:"rounded-lg !text-gray-700 px-3",onClick:s[0]||(s[0]=t=>x.value="all")},{default:l(()=>s[5]||(s[5]=[V("全部 ")])),_:1},8,["type"]),(c(!0),u(h,null,y($,t=>(c(),v(C,{key:t.category,type:x.value===t.category?"secondary":"text",class:"rounded-lg !text-gray-700 px-3",onClick:d=>x.value=t.category},{default:l(()=>[V(a(t.name),1)]),_:2},1032,["type","onClick"]))),128))]),o(Y,{modelValue:f.value,"onUpdate:modelValue":s[1]||(s[1]=t=>f.value=t),placeholder:"请输入插件名称",class:"w-[240px] bg-white rounded-lg border-gray-300"},null,8,["modelValue"])]),o(S,{gutter:[20,20],class:"flex-1"},{default:l(()=>[(c(!0),u(h,null,y(i.value,(t,d)=>(c(),v(L,{key:t.name,span:6},{default:l(()=>[o(B,{hoverable:"",class:"cursor-pointer rounded-lg",onClick:Ve=>n.value=d},{default:l(()=>[e("div",Z,[o(p,{size:40,shape:"square",style:M({backgroundColor:t.background})},{default:l(()=>[e("img",{src:`${b(j)}/builtin-tools/${t.name}/icon`,alt:t.name},null,8,I)]),_:2},1032,["style"]),e("div",ee,[e("div",te,a(t.label),1),e("div",se," 提供商 "+a(t.name)+" · "+a(t.tools.length)+" 插件 ",1)])]),e("div",ae,a(t.description),1),e("div",le,[o(p,{size:18,class:"bg-blue-700"},{default:l(()=>[o(D)]),_:1}),e("div",oe," LLMOps · 发布时间 "+a(b(G)(t.created_at).format("YYYY-MM-DD HH:mm")),1)])]),_:2},1032,["onClick"])]),_:2},1024))),128)),i.value.length===0?(c(),v(L,{key:0,span:24},{default:l(()=>[o(H,{description:"没有可用的内置插件",class:"h-[400px] flex flex-col items-center justify-center"})]),_:1})):k("",!0)]),_:1}),o(P,{visible:n.value!=-1,width:350,footer:!1,title:"工具详情","drawer-style":{background:"#F9FAFB"},onCancel:s[2]||(s[2]=t=>n.value=-1)},{default:l(()=>[n.value!=-1?(c(),u("div",ne,[e("div",ce,[o(p,{size:40,shape:"square",style:M({backgroundColor:i.value[n.value].background})},{default:l(()=>[e("img",{src:`${b(j)}/builtin-tools/${i.value[n.value].name}/icon`,alt:i.value[n.value].name},null,8,re)]),_:1},8,["style"]),e("div",ie,[e("div",de,a(i.value[n.value].label),1),e("div",ue," 提供商 "+a(i.value[n.value].name)+" · "+a(i.value[n.value].tools.length)+" 插件 ",1)])]),e("div",_e,a(i.value[n.value].description),1),s[7]||(s[7]=e("hr",{class:"my-4"},null,-1)),e("div",xe,[e("div",me," 包含 "+a(i.value[n.value].tools.length)+" 个工具 ",1),(c(!0),u(h,null,y(i.value[n.value].tools,t=>(c(),v(B,{key:t.name,class:"cursor-pointer flex flex-col rounded-xl"},{default:l(()=>[e("div",ve,a(t.label),1),e("div",fe,a(t.description),1),t.inputs.length>0?(c(),u("div",pe,[s[6]||(s[6]=e("div",{class:"flex items-center gap-2 my-4"},[e("div",{class:"text-xs font-bold text-gray-500"},"参数"),e("hr",{class:"flex-1"})],-1)),e("div",ge,[(c(!0),u(h,null,y(t.inputs,d=>(c(),u("div",{key:d.name,class:"flex flex-col gap-2"},[e("div",ye,[e("div",he,a(d.name),1),e("div",be,a(b(U)[d.type]),1),d.required?(c(),u("div",ke,"必填")):k("",!0)]),e("div",we,a(d.description),1)]))),128))])])):k("",!0)]),_:2},1024))),128))])])):k("",!0)]),_:1},8,["visible"])])]),_:1},8,["loading"])}}});export{Le as default};
