import{E as g,D as p,N as f,b as r,m as u,p as d,s as c,M as m}from"./index-pc14s8G_.js";const _=e=>g(`/apps/${e}`),y=e=>g(`/apps/${e}/draft-app-config`),b=(e,t)=>p(`/apps/${e}/draft-app-config`,{body:t}),v=e=>g(`/apps/${e}/summary`),h=(e,t)=>p(`/apps/${e}/summary`,{body:{summary:t}}),w=e=>p(`/apps/${e}/publish`),D=e=>p(`/apps/${e}/cancel-publish`),C=(e,t)=>g(`/apps/${e}/publish-histories`,{params:t}),P=(e,t)=>p(`/apps/${e}/fallback-history`,{body:{app_config_version_id:t}}),A=(e,t)=>f("/ai/optimize-prompt",{body:{prompt:e}},t),k=e=>{const t=r(!1),s=u({}),a=async n=>{try{t.value=!0;const o=(await _(n)).data;Object.assign(s,{...o})}finally{Object.assign(s,{id:"122121",debug_conversation_id:"12121",name:"LLMOps",icon:"https://img2.baidu.com/it/u=4067866627,2025998864&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500",description:"",status:"draft",draft_updated_at:1742225012,updated_at:1742225012,created_at:1742225012}),t.value=!1}};return d(async()=>await a(e)),{loading:t,app:s,loadApp:a}},H=()=>{const e=r(!1);return{loading:e,handlePublish:async s=>{try{e.value=!0;const a=await w(s);c.success(a.message)}finally{e.value=!1}}}},$=()=>{const e=r(!1);return{loading:e,handleCancelPublish:async(s,a)=>{m.warning({title:"要取消发布该Agent应用吗?",content:"取消发布后，WebApp以及发布的社交平台均无法使用该Agent，如需更新WebApp地址，请使用地址重新生成功能",hideCancel:!1,onOk:async()=>{try{e.value=!0;const n=await D(s);c.success(n.message)}finally{e.value=!1,a&&a()}}})}}},S=()=>{const e=r(!1),t={current_page:1,page_size:20,total_page:0,total_record:0},s=u([]),a=u({...t});return{loading:e,publishHistories:s,paginator:a,loadPublishHistories:async(i,o=!1)=>{try{if(o)Object.assign(a,{...t});else if(a.current_page>a.total_page)return;e.value=!0;const l=(await C(i,{current_page:a.current_page,page_size:a.page_size})).data;a.current_page=l.paginator.current_page,a.page_size=l.paginator.page_size,a.total_page=l.paginator.total_page,a.total_record=l.paginator.total_record,a.current_page<=a.total_page&&(a.current_page+=1),o?s.splice(0,s.length,...l.list):s.push(...l.list)}finally{s.splice(0,a.total_page,{id:"2121-3211",version:2,created_at:1742225012},{id:"2121-3221",version:1,created_at:1742225012}),e.value=!1}}}},j=()=>{const e=r(!1);return{loading:e,handleFallbackHistoryToDraft:async(s,a,n)=>{try{e.value=!0;const i=await P(s,a);c.success(i.message)}finally{e.value=!1,n&&n()}}}},G=e=>{const t=r(!1),s=u({}),a=async n=>{try{t.value=!0;const o=(await y(n)).data;Object.assign(s,{preset_prompt:o.preset_prompt,long_term_memory:o.long_term_memory,opening_statement:o.opening_statement,opening_questions:o.opening_questions,suggested_after_answer:o.suggested_after_answer,review_config:o.review_config,datasets:o.datasets,retrieval_config:o.retrieval_config,tools:o.tools})}finally{Object.assign(s,{preset_prompt:`# 角色
你是一位拥有10年经验的产品经理，擅长分析用户需求和市场趋势，能够提供有效的产品解决方案和建议。

## 技能
### 技能1: 用户需求分析
- 通过提问了解用户的具体需求和痛点。
- 结合市场调研数据，分析用户需求的合理性和可行性。

### 技能2: 产品策略制定
- 根据用户反馈和市场趋势，制定产品发展策略。
- 提供产品定位、目标用户和竞争分析的建议。 `,long_term_memory:{enable:!0},opening_statement:"212121",opening_questions:["11","22","33"],suggested_after_answer:!0,review_config:{enable:!0,keywords:["1","2","3"],inputs_config:{enable:!0,preset_response:"我是预设回复"},outputs_config:{enable:!0}},datasets:[{id:"46db30d1-3199-4e79-a0cd-abf12fa6858f",name:"book1",icon:"https://pic.616pic.com/ys_bnew_img/00/21/26/W0Y78oDGoQ.jpg",description:"i am book"}],retrieval_config:{retrieval_strategy:"full_text",k:5,score:.09},tools:[{type:"builtin_tool",provider:{id:"121",name:"google",label:"google",icon:"https://q2.itc.cn/q_70/images03/20240329/84cca9641e9444e5b3fe9256f095da6b.png",description:"我是提供商"},tool:{id:"22121",name:"google搜索",label:"search",description:"搜索",params:{}}}]}),t.value=!1}};return d(async()=>await a(e)),{loading:t,draftAppConfigForm:s,loadDraftAppConfig:a}},U=()=>{const e=r(!1);return{loading:e,handleUpdateDraftAppConfig:async(s,a)=>{try{e.value=!0;const n=await b(s,a);c.success(n.message)}finally{e.value=!1}}}},q=()=>{const e=r(!1),t=r("");return{loading:e,optimize_prompt:t,handleOptimizePrompt:async a=>{try{e.value=!0,t.value="",await A(a,n=>{const i=n.data;t.value+=i==null?void 0:i.optimize_prompt})}finally{e.value=!1}}}},M=()=>{const e=r(!1),t=r("");return{loading:e,debug_conversation_summary:t,loadDebugConversationSummary:async a=>{try{e.value=!0;const i=(await v(a)).data;t.value=i.summary}finally{t.value="长记忆mock",e.value=!1}}}},W=()=>{const e=r(!1);return{loading:e,handleUpdateDebugConversationSummary:async(s,a)=>{try{e.value=!0;const n=await h(s,a);c.success(n.message)}finally{e.value=!1}}}};export{j as a,k as b,H as c,$ as d,U as e,q as f,M as g,W as h,G as i,S as u};
