import{l as g,p,N as f,b as r,n as c,s as d,x as u,M as m}from"./index-CbAIhHcx.js";const y=a=>g(`/apps/${a}`),_=a=>g(`/apps/${a}/draft-app-config`),b=(a,t)=>p(`/apps/${a}/draft-app-config`,{body:t}),v=a=>g(`/apps/${a}/summary`),h=(a,t)=>p(`/apps/${a}/summary`,{body:{summary:t}}),C=a=>p(`/apps/${a}/publish`),P=a=>p(`/apps/${a}/cancel-publish`),D=(a,t)=>g(`/apps/${a}/publish-histories`,{params:t}),w=(a,t)=>p(`/apps/${a}/fallback-history`,{body:{app_config_version_id:t}}),A=(a,t)=>f("/ai/optimize-prompt",{body:{prompt:a}},t),H=a=>{const t=r(!1),s=c({}),e=async n=>{try{t.value=!0;const i=(await y(n)).data;Object.assign(s,{...i})}finally{Object.assign(s,{id:"122121",debug_conversation_id:"12121",name:"LLMOps",icon:"https://img2.baidu.com/it/u=4067866627,2025998864&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500",description:"",status:"draft",draft_updated_at:1742225012,updated_at:1742225012,created_at:1742225012}),t.value=!1}};return d(async()=>await e(a)),{loading:t,app:s,loadApp:e}},$=()=>{const a=r(!1);return{loading:a,handlePublish:async s=>{try{a.value=!0;const e=await C(s);u.success(e.message)}finally{a.value=!1}}}},S=()=>{const a=r(!1);return{loading:a,handleCancelPublish:async(s,e)=>{m.warning({title:"要取消发布该Agent应用吗?",content:"取消发布后，WebApp以及发布的社交平台均无法使用该Agent，如需更新WebApp地址，请使用地址重新生成功能",hideCancel:!1,onOk:async()=>{try{a.value=!0;const n=await P(s);u.success(n.message)}finally{a.value=!1,e&&e()}}})}}},U=()=>{const a=r(!1),t={current_page:1,page_size:20,total_page:0,total_record:0},s=c([]),e=c({...t});return{loading:a,publishHistories:s,paginator:e,loadPublishHistories:async(o,i=!1)=>{try{if(i)Object.assign(e,{...t});else if(e.current_page>e.total_page)return;a.value=!0;const l=(await D(o,{current_page:e.current_page,page_size:e.page_size})).data;e.current_page=l.paginator.current_page,e.page_size=l.paginator.page_size,e.total_page=l.paginator.total_page,e.total_record=l.paginator.total_record,e.current_page<=e.total_page&&(e.current_page+=1),i?s.splice(0,s.length,...l.list):s.push(...l.list)}finally{s.splice(0,e.total_page,{id:"2121-3211",version:2,created_at:1742225012},{id:"2121-3221",version:1,created_at:1742225012}),a.value=!1}}}},j=()=>{const a=r(!1);return{loading:a,handleFallbackHistoryToDraft:async(s,e,n)=>{try{a.value=!0;const o=await w(s,e);u.success(o.message)}finally{a.value=!1,n&&n()}}}},k=a=>{const t=r(!1),s=c({}),e=async n=>{try{t.value=!0;const i=(await _(n)).data;Object.assign(s,{preset_prompt:i.preset_prompt,long_term_memory:i.long_term_memory,opening_statement:i.opening_statement,opening_questions:i.opening_questions,suggested_after_answer:i.suggested_after_answer,review_config:i.review_config})}finally{Object.assign(s,{preset_prompt:`# 角色
你是一位拥有10年经验的产品经理，擅长分析用户需求和市场趋势，能够提供有效的产品解决方案和建议。

## 技能
### 技能1: 用户需求分析
- 通过提问了解用户的具体需求和痛点。
- 结合市场调研数据，分析用户需求的合理性和可行性。

### 技能2: 产品策略制定
- 根据用户反馈和市场趋势，制定产品发展策略。
- 提供产品定位、目标用户和竞争分析的建议。 `,long_term_memory:{enable:!0}}),t.value=!1}};return d(async()=>await e(a)),{loading:t,draftAppConfigForm:s,loadDraftAppConfig:e}},G=()=>{const a=r(!1);return{loading:a,handleUpdateDraftAppConfig:async(s,e)=>{try{a.value=!0;const n=await b(s,e);u.success(n.message)}finally{a.value=!1}}}},M=()=>{const a=r(!1),t=r("");return{loading:a,optimize_prompt:t,handleOptimizePrompt:async e=>{try{a.value=!0,t.value="",await A(e,n=>{const o=n.data;t.value+=o==null?void 0:o.optimize_prompt})}finally{a.value=!1}}}},F=()=>{const a=r(!1),t=r("");return{loading:a,debug_conversation_summary:t,loadDebugConversationSummary:async e=>{try{a.value=!0;const o=(await v(e)).data;t.value=o.summary}finally{t.value="长记忆mock",a.value=!1}}}},T=()=>{const a=r(!1);return{loading:a,handleUpdateDebugConversationSummary:async(s,e)=>{try{a.value=!0;const n=await h(s,e);u.success(n.message)}finally{a.value=!1}}}};export{j as a,H as b,$ as c,S as d,G as e,M as f,F as g,T as h,k as i,U as u};
