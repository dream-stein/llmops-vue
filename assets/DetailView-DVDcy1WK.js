import{J as n_,C as i_,b as ue,d as ut,o as T,f as E,g as v,h,w as x,u as U,r as $,t as de,c as Se,a as pe,i as ye,K as Es,L as va,v as _n,N as r_,O as Qn,q as ma,F as Ze,n as it,P as zn,Q as cr,e as dr,z as xt,p as Xn,m as ya,s as s_,R as da,S as o_,T as l_,U as a_,V as u_,W as f_,X as c_,E as hn,Y as pa,Z as xa,$ as d_,D as p_,a0 as g_,a1 as h_,a2 as __,_ as v_,a3 as Ye,l as m_,a4 as y_,j as ba}from"./index-BJ7K_jw0.js";import{j as vn,k as x_,l as b_,m as w_,n as S_,o as A_,p as $_,q as T_}from"./use-app-HIlHJGBN.js";import{u as C_}from"./use-dataset-BoB0QdKI.js";import{b as z_,g as I_}from"./api-tools-CllbPHz7.js";import{g as R_,b as O_,a as k_}from"./builtin-tool-s_3V_jaA.js";import"./dataset-DF1Y1eZM.js";const D_=(a,f)=>n_("/ai/optimize-prompt",{body:{prompt:a}},f),L_=a=>i_("/ai/suggested-questions",{body:a}),E_=()=>{const a=ue(!1),f=ue([]);return{loading:a,suggested_questions:f,handleGenerateSuggestedQuestions:async g=>{try{a.value=!0;const y=await L_(g);f.value=y.data}finally{a.value=!1}}}},P_=()=>{const a=ue(!1),f=ue("");return{loading:a,optimize_prompt:f,handleOptimizePrompt:async g=>{try{a.value=!0,f.value="",await D_(g,y=>{const O=y.data;f.value+=O==null?void 0:O.optimize_prompt})}finally{a.value=!1}}}},U_={class:"flex flex-col h-[calc(100vh-173px)]"},M_={class:"flex items-center justify-between px-4 mb-4"},B_={class:"flex flex-col"},W_={key:0,class:"mb-4 flex flex-col"},q_={class:"max-h-[321px] overflow-scroll scrollbar-w-none mb-2 text-gray-700 whitespace-pre-line"},F_={class:""},N_={class:"h-[50px] flex items-center gap-2 px-4 flex-1 border border-gray-200 rounded-full"},H_={class:"flex-1"},G_=ut({__name:"PresetPromptTextarea",props:{app_id:{type:String,required:!0},preset_prompt:{type:String,default:"",required:!0}},emits:["update:preset_prompt"],setup(a,{emit:f}){const r=a,g=f,y=ue(!1),O=ue(""),{handleUpdateDraftAppConfig:_}=vn(),{loading:z,optimize_prompt:A,handleOptimizePrompt:k}=P_(),V=()=>{if(A.value.trim()===""){_n.warning("优化prompt为空，请重新生成");return}g("update:preset_prompt",A.value),_(r.app_id,{preset_prompt:A.value}),y.value=!1},Y=async()=>{if(O.value.trim()===""){_n.warning("原始prompt不能为空");return}await k(O.value)};return(G,F)=>{const ie=$("icon-sync"),N=$("a-button"),M=$("a-space"),ge=$("icon-send"),be=$("a-card"),fe=$("a-trigger"),q=$("a-textarea");return T(),E("div",U_,[v("div",M_,[F[8]||(F[8]=v("div",{class:"text-gray-700 font-bold"},"人设与回复逻辑",-1)),h(fe,{"popup-visible":y.value,"onUpdate:popupVisible":F[2]||(F[2]=L=>y.value=L),trigger:["click"],position:"bl","popup-translate":[0,8]},{content:x(()=>[h(be,{class:"rounded-lg w-[422px]"},{default:x(()=>[v("div",B_,[U(A)?(T(),E("div",W_,[v("div",q_,de(U(A)),1),U(z)?ye("",!0):(T(),Se(M,{key:0},{default:x(()=>[h(N,{size:"small",type:"primary",class:"rounded-lg",onClick:V},{default:x(()=>F[6]||(F[6]=[pe(" 替换 ")])),_:1}),h(N,{size:"small",class:"rounded-lg",onClick:F[0]||(F[0]=L=>y.value=!1)},{default:x(()=>F[7]||(F[7]=[pe(" 退出 ")])),_:1})]),_:1}))])):ye("",!0),v("div",F_,[v("div",N_,[Es(v("input",{"onUpdate:modelValue":F[1]||(F[1]=L=>O.value=L),type:"text",class:"flex-1 outline-0",placeholder:"你希望如何编写或优化提示词"},null,512),[[va,O.value]]),h(N,{loading:U(z),type:"text",shape:"circle",onClick:Y},{icon:x(()=>[h(ge,{size:16,class:"!text-blue-700"})]),_:1},8,["loading"])])])])]),_:1})]),default:x(()=>[h(N,{size:"mini",class:"rounded-lg px-2"},{icon:x(()=>[h(ie)]),default:x(()=>[F[5]||(F[5]=pe(" 优化 "))]),_:1})]),_:1},8,["popup-visible"])]),v("div",H_,[h(q,{class:"h-full resize-none !bg-transparent !border-0 text-gray-700 px-1 preset-prompt-textarea",placeholder:"请在这里输入Agent的人设与回复逻辑(预设prompt)","max-length":2e3,"show-word-limit":"","model-value":r.preset_prompt,"onUpdate:modelValue":F[3]||(F[3]=L=>g("update:preset_prompt",L)),onBlur:F[4]||(F[4]=async()=>{await U(_)(r.app_id,{preset_prompt:r.preset_prompt})})},null,8,["model-value"])])])}}}),V_={class:""},K_={class:"flex items-center justify-between border-b h-[64px] px-4"},Y_={class:"flex items-center justify-between"},Z_={class:"pt-6"},Q_={class:"flex items-center justify-between"},X_=ut({__name:"PreviewDebugHeader",props:{app_id:{type:String,required:!0},long_term_memory:{type:Object,required:!0}},setup(a){const f=a,{debug_conversation_summary:r,loadDebugConversationSummary:g}=x_(),{loading:y,handleUpdateDebugConversationSummary:O}=b_(),_=ue(!1),z=async()=>{await g(f.app_id),_.value=!0};return(A,k)=>{var M;const V=$("icon-save"),Y=$("a-button"),G=$("icon-close"),F=$("a-textarea"),ie=$("a-space"),N=$("a-modal");return T(),E("div",V_,[v("div",K_,[k[6]||(k[6]=v("div",{class:"text-lg text-gray-700"},"预览与调试",-1)),h(Y,{disabled:!((M=f.long_term_memory)!=null&&M.enable),size:"mini",type:"text",class:"rounded-lg px-1 !text-blue-700",onClick:z},{icon:x(()=>[h(V)]),default:x(()=>[k[5]||(k[5]=pe(" 长期记忆 "))]),_:1},8,["disabled"])]),h(N,{width:520,visible:_.value,"onUpdate:visible":k[4]||(k[4]=ge=>_.value=ge),"hide-title":"",footer:!1,"modal-class":"rounded-xl"},{default:x(()=>[v("div",Y_,[k[7]||(k[7]=v("div",{class:"text-lg font-bold text-gray-700"},"长期记忆",-1)),h(Y,{type:"text",class:"!text-gray-700",size:"small",onClick:k[0]||(k[0]=ge=>_.value=!1)},{icon:x(()=>[h(G)]),_:1})]),v("div",Z_,[h(F,{"model-value":U(r),"onUpdate:modelValue":k[1]||(k[1]=ge=>r_(r)?r.value=ge:null),placeholder:"请输入当前调试会话长期记忆","show-word-limit":"","max-length":2e3,"auto-size":{minRows:8,maxRows:8}},null,8,["model-value"]),v("div",Q_,[k[10]||(k[10]=v("div",{class:""},null,-1)),h(ie,{size:16},{default:x(()=>[h(Y,{class:"rounded-lg",onClick:k[2]||(k[2]=ge=>_.value=!1)},{default:x(()=>k[8]||(k[8]=[pe("取消")])),_:1}),h(Y,{loading:U(y),type:"primary",class:"rounded-lg",onClick:k[3]||(k[3]=async()=>{await U(O)(f.app_id,U(r)),_.value=!1})},{default:x(()=>k[9]||(k[9]=[pe(" 保存 ")])),_:1},8,["loading"])]),_:1})])])]),_:1},8,["visible"])])}}}),J_={class:""},j_=ut({__name:"LongTermMemoryAbilityItem",props:{app_id:{type:String,default:"",required:!0},long_term_memory:{type:Object,default:{enable:!1},required:!0}},emits:["update:long_term_memory"],setup(a,{emit:f}){const r=a,g=f,{handleUpdateDraftAppConfig:y}=vn();return(O,_)=>{const z=$("icon-down"),A=$("a-button"),k=$("a-doption"),V=$("a-dropdown"),Y=$("a-collapse-item");return T(),E("div",J_,[h(Y,{key:"long_term_memory",class:"app-ability-item"},{header:x(()=>_[2]||(_[2]=[v("div",{class:"text-gray-700 font-bold"},"长期记忆",-1)])),extra:x(()=>[h(V,{onSelect:_[1]||(_[1]=async G=>{var F;!!G!==((F=r.long_term_memory)==null?void 0:F.enable)&&(g("update:long_term_memory",{enable:!!G}),await U(y)(r.app_id,{long_term_memory:{enable:!!G}}))})},{content:x(()=>[h(k,{value:1,class:"text-xs py-1.5 text-gray-700"},{default:x(()=>_[3]||(_[3]=[pe("开启")])),_:1}),h(k,{value:0,class:"text-xs py-1.5 text-red-700"},{default:x(()=>_[4]||(_[4]=[pe("关闭")])),_:1})]),default:x(()=>[h(A,{size:"mini",class:"rounded-lg flex items-center gap-1 px-1",onClick:_[0]||(_[0]=Qn(()=>{},["stop"]))},{default:x(()=>{var G;return[pe(de((G=r.long_term_memory)!=null&&G.enable?"开启":"关闭")+" ",1),h(z)]}),_:1})]),_:1})]),default:x(()=>[_[5]||(_[5]=v("div",{class:"text-xs text-gray-500 leading-[22px]"}," 总结聊天对话内容，并用于更好的响应用户的信息 ",-1))]),_:1})])}}}),ev={class:""},tv={class:"text-xs text-gray-500"},nv={class:"flex flex-col gap-2 mb-2"},iv={class:"flex items-center gap-2"},rv={class:"flex flex-col gap-2 mb-2"},sv={class:"flex items-center gap-2"},ov={class:"flex flex-col gap-2"},lv=ut({__name:"OpeningAbilityItem",props:{app_id:{type:String,default:"",required:!0},opening_statement:{type:String,default:"",required:!0},opening_questions:{type:Array,default:[],required:!0}},emits:["update:opening_statement","update:opening_questions"],setup(a,{emit:f}){const r=a,g=f,{handleUpdateDraftAppConfig:y}=vn(),O=ma({get(){const z=[...r.opening_questions];return z.length<3&&z[z.length-1]!==""&&z.push(""),z},set(z){g("update:opening_questions",z)}}),_=async()=>{await y(r.app_id,{opening_questions:O.value.filter(z=>z.trim()!=="")})};return(z,A)=>{const k=$("icon-exclamation-circle"),V=$("a-tooltip"),Y=$("a-textarea"),G=$("a-input"),F=$("icon-delete"),ie=$("a-button"),N=$("a-collapse-item");return T(),E("div",ev,[h(N,{key:"opening",class:"app-ability-item"},{header:x(()=>A[3]||(A[3]=[v("div",{class:"text-gray-700 font-bold"},"对话开场白",-1)])),default:x(()=>[v("div",tv,[v("div",nv,[v("div",iv,[A[4]||(A[4]=v("div",{class:"text-gray-700"},"开场白文案",-1)),h(V,{content:"开场白是与Agent应用对话时，Agent默认展示的对话。"},{default:x(()=>[h(k)]),_:1})]),h(Y,{"model-value":r.opening_statement,"onUpdate:modelValue":A[0]||(A[0]=M=>g("update:opening_statement",M)),placeholder:"在此处填写 AI 应用的开场白",class:"bg-white text-gray-700 rounded-lg border border-gray-200","auto-size":{minRows:4,maxRows:4},onBlur:A[1]||(A[1]=async()=>{await U(y)(r.app_id,{opening_statement:r.opening_statement})})},null,8,["model-value"])]),v("div",rv,[v("div",sv,[A[5]||(A[5]=v("div",{class:"text-gray-700"},"开场白预设问题",-1)),h(V,{content:"开场白预设问题是与Agent对话时，初始化提供的建议问题，最多不超过3个"},{default:x(()=>[h(k)]),_:1})]),v("div",ov,[(T(!0),E(Ze,null,it(O.value,(M,ge)=>(T(),E("div",{key:ge,class:"flex items-center gap-2"},[h(G,{"model-value":M,"onUpdate:modelValue":be=>{const fe=[...O.value];fe[ge]=be,O.value=fe},class:"rounded-lg bg-white",placeholder:"输入开场白引导问题",onBlur:A[2]||(A[2]=async()=>await _())},null,8,["model-value","onUpdate:modelValue"]),h(ie,{class:"rounded-lg",onClick:async()=>{const be=[...O.value];be.splice(ge,1),g("update:opening_questions",be),await zn(),await _()}},{icon:x(()=>[h(F)]),_:2},1032,["onClick"])]))),128))])])])]),_:1})])}}}),av={class:""},uv=ut({__name:"SuggestedAfterAnswerAbilityItem",props:{app_id:{type:String,default:"",required:!0},suggested_after_answer:{type:Object,default:{enable:!1},required:!0}},emits:["update:suggested_after_answer"],setup(a,{emit:f}){const r=a,g=f,{handleUpdateDraftAppConfig:y}=vn();return(O,_)=>{const z=$("icon-down"),A=$("a-button"),k=$("a-doption"),V=$("a-dropdown"),Y=$("a-collapse-item");return T(),E("div",av,[h(Y,{key:"suggested_after_answer",class:"app-ability-item"},{header:x(()=>_[2]||(_[2]=[v("div",{class:"text-gray-700 font-bold"},"用户问题建议",-1)])),extra:x(()=>[h(V,{onSelect:_[1]||(_[1]=async G=>{var F;!!G!==((F=r.suggested_after_answer)==null?void 0:F.enable)&&(g("update:suggested_after_answer",{enable:!!G}),await U(y)(r.app_id,{suggested_after_answer:{enable:!!G}}))})},{content:x(()=>[h(k,{value:1,class:"text-xs py-1.5 text-gray-700"},{default:x(()=>_[3]||(_[3]=[pe("开启")])),_:1}),h(k,{value:0,class:"text-xs py-1.5 text-red-700"},{default:x(()=>_[4]||(_[4]=[pe("关闭")])),_:1})]),default:x(()=>[h(A,{size:"mini",class:"rounded-lg flex items-center gap-1 px-1",onClick:_[0]||(_[0]=Qn(()=>{},["stop"]))},{default:x(()=>{var G;return[pe(de((G=r.suggested_after_answer)!=null&&G.enable?"开启":"关闭")+" ",1),h(z)]}),_:1})]),_:1})]),default:x(()=>[_[5]||(_[5]=v("div",{class:"text-xs text-gray-500 leading-[22px]"}," 在应用回复后，自动根据对话内容提供 3 条用户提问建议 ",-1))]),_:1})])}}});var hi={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var fv=hi.exports,ga;function cv(){return ga||(ga=1,function(a,f){(function(){var r,g="4.17.21",y=200,O="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",_="Expected a function",z="Invalid `variable` option passed into `_.template`",A="__lodash_hash_undefined__",k=500,V="__lodash_placeholder__",Y=1,G=2,F=4,ie=1,N=2,M=1,ge=2,be=4,fe=8,q=16,L=32,Ee=64,se=128,Te=256,Re=512,B=30,D="...",X=800,J=16,Pe=1,Ue=2,ze=3,I=1/0,Be=9007199254740991,We=17976931348623157e292,j=NaN,R=4294967295,le=R-1,ee=R>>>1,me=[["ary",se],["bind",M],["bindKey",ge],["curry",fe],["curryRight",q],["flip",Re],["partial",L],["partialRight",Ee],["rearg",Te]],bt="[object Arguments]",ft="[object Array]",Nt="[object AsyncFunction]",Pt="[object Boolean]",Ut="[object Date]",$e="[object DOMException]",ct="[object Error]",wt="[object Function]",In="[object GeneratorFunction]",dt="[object Map]",en="[object Number]",_r="[object Null]",Ot="[object Object]",_i="[object Promise]",vi="[object Proxy]",tn="[object RegExp]",pt="[object Set]",mn="[object String]",Rn="[object Symbol]",vr="[object Undefined]",nn="[object WeakMap]",mi="[object WeakSet]",rn="[object ArrayBuffer]",sn="[object DataView]",he="[object Float32Array]",je="[object Float64Array]",Qe="[object Int8Array]",Mt="[object Int16Array]",On="[object Int32Array]",kn="[object Uint8Array]",Dn="[object Uint8ClampedArray]",Ln="[object Uint16Array]",En="[object Uint32Array]",yi=/\b__p \+= '';/g,xi=/\b(__p \+=) '' \+/g,bi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Jn=/&(?:amp|lt|gt|quot|#39);/g,jn=/[&<>"']/g,rt=RegExp(Jn.source),wi=RegExp(jn.source),Oe=/<%-([\s\S]+?)%>/g,Ht=/<%([\s\S]+?)%>/g,Ms=/<%=([\s\S]+?)%>/g,Ia=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ra=/^\w*$/,Oa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mr=/[\\^$.*+?()[\]{}|]/g,ka=RegExp(mr.source),yr=/^\s+/,Da=/\s/,La=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ea=/\{\n\/\* \[wrapped with (.+)\] \*/,Pa=/,? & /,Ua=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ma=/[()=,{}\[\]\/\s]/,Ba=/\\(\\)?/g,Wa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Bs=/\w*$/,qa=/^[-+]0x[0-9a-f]+$/i,Fa=/^0b[01]+$/i,Na=/^\[object .+?Constructor\]$/,Ha=/^0o[0-7]+$/i,Ga=/^(?:0|[1-9]\d*)$/,Va=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Si=/($^)/,Ka=/['\n\r\u2028\u2029\\]/g,Ai="\\ud800-\\udfff",Ya="\\u0300-\\u036f",Za="\\ufe20-\\ufe2f",Qa="\\u20d0-\\u20ff",Ws=Ya+Za+Qa,qs="\\u2700-\\u27bf",Fs="a-z\\xdf-\\xf6\\xf8-\\xff",Xa="\\xac\\xb1\\xd7\\xf7",Ja="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ja="\\u2000-\\u206f",eu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ns="A-Z\\xc0-\\xd6\\xd8-\\xde",Hs="\\ufe0e\\ufe0f",Gs=Xa+Ja+ja+eu,xr="['’]",tu="["+Ai+"]",Vs="["+Gs+"]",$i="["+Ws+"]",Ks="\\d+",nu="["+qs+"]",Ys="["+Fs+"]",Zs="[^"+Ai+Gs+Ks+qs+Fs+Ns+"]",br="\\ud83c[\\udffb-\\udfff]",iu="(?:"+$i+"|"+br+")",Qs="[^"+Ai+"]",wr="(?:\\ud83c[\\udde6-\\uddff]){2}",Sr="[\\ud800-\\udbff][\\udc00-\\udfff]",Pn="["+Ns+"]",Xs="\\u200d",Js="(?:"+Ys+"|"+Zs+")",ru="(?:"+Pn+"|"+Zs+")",js="(?:"+xr+"(?:d|ll|m|re|s|t|ve))?",eo="(?:"+xr+"(?:D|LL|M|RE|S|T|VE))?",to=iu+"?",no="["+Hs+"]?",su="(?:"+Xs+"(?:"+[Qs,wr,Sr].join("|")+")"+no+to+")*",ou="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",lu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",io=no+to+su,au="(?:"+[nu,wr,Sr].join("|")+")"+io,uu="(?:"+[Qs+$i+"?",$i,wr,Sr,tu].join("|")+")",fu=RegExp(xr,"g"),cu=RegExp($i,"g"),Ar=RegExp(br+"(?="+br+")|"+uu+io,"g"),du=RegExp([Pn+"?"+Ys+"+"+js+"(?="+[Vs,Pn,"$"].join("|")+")",ru+"+"+eo+"(?="+[Vs,Pn+Js,"$"].join("|")+")",Pn+"?"+Js+"+"+js,Pn+"+"+eo,lu,ou,Ks,au].join("|"),"g"),pu=RegExp("["+Xs+Ai+Ws+Hs+"]"),gu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,hu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_u=-1,ke={};ke[he]=ke[je]=ke[Qe]=ke[Mt]=ke[On]=ke[kn]=ke[Dn]=ke[Ln]=ke[En]=!0,ke[bt]=ke[ft]=ke[rn]=ke[Pt]=ke[sn]=ke[Ut]=ke[ct]=ke[wt]=ke[dt]=ke[en]=ke[Ot]=ke[tn]=ke[pt]=ke[mn]=ke[nn]=!1;var Ie={};Ie[bt]=Ie[ft]=Ie[rn]=Ie[sn]=Ie[Pt]=Ie[Ut]=Ie[he]=Ie[je]=Ie[Qe]=Ie[Mt]=Ie[On]=Ie[dt]=Ie[en]=Ie[Ot]=Ie[tn]=Ie[pt]=Ie[mn]=Ie[Rn]=Ie[kn]=Ie[Dn]=Ie[Ln]=Ie[En]=!0,Ie[ct]=Ie[wt]=Ie[nn]=!1;var vu={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},mu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},xu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},bu=parseFloat,wu=parseInt,ro=typeof cr=="object"&&cr&&cr.Object===Object&&cr,Su=typeof self=="object"&&self&&self.Object===Object&&self,Ve=ro||Su||Function("return this")(),$r=f&&!f.nodeType&&f,yn=$r&&!0&&a&&!a.nodeType&&a,so=yn&&yn.exports===$r,Tr=so&&ro.process,St=function(){try{var d=yn&&yn.require&&yn.require("util").types;return d||Tr&&Tr.binding&&Tr.binding("util")}catch{}}(),oo=St&&St.isArrayBuffer,lo=St&&St.isDate,ao=St&&St.isMap,uo=St&&St.isRegExp,fo=St&&St.isSet,co=St&&St.isTypedArray;function gt(d,b,m){switch(m.length){case 0:return d.call(b);case 1:return d.call(b,m[0]);case 2:return d.call(b,m[0],m[1]);case 3:return d.call(b,m[0],m[1],m[2])}return d.apply(b,m)}function Au(d,b,m,W){for(var te=-1,xe=d==null?0:d.length;++te<xe;){var Ne=d[te];b(W,Ne,m(Ne),d)}return W}function At(d,b){for(var m=-1,W=d==null?0:d.length;++m<W&&b(d[m],m,d)!==!1;);return d}function $u(d,b){for(var m=d==null?0:d.length;m--&&b(d[m],m,d)!==!1;);return d}function po(d,b){for(var m=-1,W=d==null?0:d.length;++m<W;)if(!b(d[m],m,d))return!1;return!0}function on(d,b){for(var m=-1,W=d==null?0:d.length,te=0,xe=[];++m<W;){var Ne=d[m];b(Ne,m,d)&&(xe[te++]=Ne)}return xe}function Ti(d,b){var m=d==null?0:d.length;return!!m&&Un(d,b,0)>-1}function Cr(d,b,m){for(var W=-1,te=d==null?0:d.length;++W<te;)if(m(b,d[W]))return!0;return!1}function De(d,b){for(var m=-1,W=d==null?0:d.length,te=Array(W);++m<W;)te[m]=b(d[m],m,d);return te}function ln(d,b){for(var m=-1,W=b.length,te=d.length;++m<W;)d[te+m]=b[m];return d}function zr(d,b,m,W){var te=-1,xe=d==null?0:d.length;for(W&&xe&&(m=d[++te]);++te<xe;)m=b(m,d[te],te,d);return m}function Tu(d,b,m,W){var te=d==null?0:d.length;for(W&&te&&(m=d[--te]);te--;)m=b(m,d[te],te,d);return m}function Ir(d,b){for(var m=-1,W=d==null?0:d.length;++m<W;)if(b(d[m],m,d))return!0;return!1}var Cu=Rr("length");function zu(d){return d.split("")}function Iu(d){return d.match(Ua)||[]}function go(d,b,m){var W;return m(d,function(te,xe,Ne){if(b(te,xe,Ne))return W=xe,!1}),W}function Ci(d,b,m,W){for(var te=d.length,xe=m+(W?1:-1);W?xe--:++xe<te;)if(b(d[xe],xe,d))return xe;return-1}function Un(d,b,m){return b===b?qu(d,b,m):Ci(d,ho,m)}function Ru(d,b,m,W){for(var te=m-1,xe=d.length;++te<xe;)if(W(d[te],b))return te;return-1}function ho(d){return d!==d}function _o(d,b){var m=d==null?0:d.length;return m?kr(d,b)/m:j}function Rr(d){return function(b){return b==null?r:b[d]}}function Or(d){return function(b){return d==null?r:d[b]}}function vo(d,b,m,W,te){return te(d,function(xe,Ne,Ce){m=W?(W=!1,xe):b(m,xe,Ne,Ce)}),m}function Ou(d,b){var m=d.length;for(d.sort(b);m--;)d[m]=d[m].value;return d}function kr(d,b){for(var m,W=-1,te=d.length;++W<te;){var xe=b(d[W]);xe!==r&&(m=m===r?xe:m+xe)}return m}function Dr(d,b){for(var m=-1,W=Array(d);++m<d;)W[m]=b(m);return W}function ku(d,b){return De(b,function(m){return[m,d[m]]})}function mo(d){return d&&d.slice(0,wo(d)+1).replace(yr,"")}function ht(d){return function(b){return d(b)}}function Lr(d,b){return De(b,function(m){return d[m]})}function ei(d,b){return d.has(b)}function yo(d,b){for(var m=-1,W=d.length;++m<W&&Un(b,d[m],0)>-1;);return m}function xo(d,b){for(var m=d.length;m--&&Un(b,d[m],0)>-1;);return m}function Du(d,b){for(var m=d.length,W=0;m--;)d[m]===b&&++W;return W}var Lu=Or(vu),Eu=Or(mu);function Pu(d){return"\\"+xu[d]}function Uu(d,b){return d==null?r:d[b]}function Mn(d){return pu.test(d)}function Mu(d){return gu.test(d)}function Bu(d){for(var b,m=[];!(b=d.next()).done;)m.push(b.value);return m}function Er(d){var b=-1,m=Array(d.size);return d.forEach(function(W,te){m[++b]=[te,W]}),m}function bo(d,b){return function(m){return d(b(m))}}function an(d,b){for(var m=-1,W=d.length,te=0,xe=[];++m<W;){var Ne=d[m];(Ne===b||Ne===V)&&(d[m]=V,xe[te++]=m)}return xe}function zi(d){var b=-1,m=Array(d.size);return d.forEach(function(W){m[++b]=W}),m}function Wu(d){var b=-1,m=Array(d.size);return d.forEach(function(W){m[++b]=[W,W]}),m}function qu(d,b,m){for(var W=m-1,te=d.length;++W<te;)if(d[W]===b)return W;return-1}function Fu(d,b,m){for(var W=m+1;W--;)if(d[W]===b)return W;return W}function Bn(d){return Mn(d)?Hu(d):Cu(d)}function kt(d){return Mn(d)?Gu(d):zu(d)}function wo(d){for(var b=d.length;b--&&Da.test(d.charAt(b)););return b}var Nu=Or(yu);function Hu(d){for(var b=Ar.lastIndex=0;Ar.test(d);)++b;return b}function Gu(d){return d.match(Ar)||[]}function Vu(d){return d.match(du)||[]}var Ku=function d(b){b=b==null?Ve:Wn.defaults(Ve.Object(),b,Wn.pick(Ve,hu));var m=b.Array,W=b.Date,te=b.Error,xe=b.Function,Ne=b.Math,Ce=b.Object,Pr=b.RegExp,Yu=b.String,$t=b.TypeError,Ii=m.prototype,Zu=xe.prototype,qn=Ce.prototype,Ri=b["__core-js_shared__"],Oi=Zu.toString,Ae=qn.hasOwnProperty,Qu=0,So=function(){var e=/[^.]+$/.exec(Ri&&Ri.keys&&Ri.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ki=qn.toString,Xu=Oi.call(Ce),Ju=Ve._,ju=Pr("^"+Oi.call(Ae).replace(mr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Di=so?b.Buffer:r,un=b.Symbol,Li=b.Uint8Array,Ao=Di?Di.allocUnsafe:r,Ei=bo(Ce.getPrototypeOf,Ce),$o=Ce.create,To=qn.propertyIsEnumerable,Pi=Ii.splice,Co=un?un.isConcatSpreadable:r,ti=un?un.iterator:r,xn=un?un.toStringTag:r,Ui=function(){try{var e=$n(Ce,"defineProperty");return e({},"",{}),e}catch{}}(),ef=b.clearTimeout!==Ve.clearTimeout&&b.clearTimeout,tf=W&&W.now!==Ve.Date.now&&W.now,nf=b.setTimeout!==Ve.setTimeout&&b.setTimeout,Mi=Ne.ceil,Bi=Ne.floor,Ur=Ce.getOwnPropertySymbols,rf=Di?Di.isBuffer:r,zo=b.isFinite,sf=Ii.join,of=bo(Ce.keys,Ce),He=Ne.max,Xe=Ne.min,lf=W.now,af=b.parseInt,Io=Ne.random,uf=Ii.reverse,Mr=$n(b,"DataView"),ni=$n(b,"Map"),Br=$n(b,"Promise"),Fn=$n(b,"Set"),ii=$n(b,"WeakMap"),ri=$n(Ce,"create"),Wi=ii&&new ii,Nn={},ff=Tn(Mr),cf=Tn(ni),df=Tn(Br),pf=Tn(Fn),gf=Tn(ii),qi=un?un.prototype:r,si=qi?qi.valueOf:r,Ro=qi?qi.toString:r;function o(e){if(Me(e)&&!ne(e)&&!(e instanceof _e)){if(e instanceof Tt)return e;if(Ae.call(e,"__wrapped__"))return Ol(e)}return new Tt(e)}var Hn=function(){function e(){}return function(t){if(!Le(t))return{};if($o)return $o(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function Fi(){}function Tt(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}o.templateSettings={escape:Oe,evaluate:Ht,interpolate:Ms,variable:"",imports:{_:o}},o.prototype=Fi.prototype,o.prototype.constructor=o,Tt.prototype=Hn(Fi.prototype),Tt.prototype.constructor=Tt;function _e(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=R,this.__views__=[]}function hf(){var e=new _e(this.__wrapped__);return e.__actions__=st(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=st(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=st(this.__views__),e}function _f(){if(this.__filtered__){var e=new _e(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function vf(){var e=this.__wrapped__.value(),t=this.__dir__,n=ne(e),i=t<0,s=n?e.length:0,l=Ic(0,s,this.__views__),u=l.start,c=l.end,p=c-u,w=i?c:u-1,S=this.__iteratees__,C=S.length,P=0,H=Xe(p,this.__takeCount__);if(!n||!i&&s==p&&H==p)return el(e,this.__actions__);var Z=[];e:for(;p--&&P<H;){w+=t;for(var oe=-1,Q=e[w];++oe<C;){var ce=S[oe],ve=ce.iteratee,mt=ce.type,nt=ve(Q);if(mt==Ue)Q=nt;else if(!nt){if(mt==Pe)continue e;break e}}Z[P++]=Q}return Z}_e.prototype=Hn(Fi.prototype),_e.prototype.constructor=_e;function bn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function mf(){this.__data__=ri?ri(null):{},this.size=0}function yf(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function xf(e){var t=this.__data__;if(ri){var n=t[e];return n===A?r:n}return Ae.call(t,e)?t[e]:r}function bf(e){var t=this.__data__;return ri?t[e]!==r:Ae.call(t,e)}function wf(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ri&&t===r?A:t,this}bn.prototype.clear=mf,bn.prototype.delete=yf,bn.prototype.get=xf,bn.prototype.has=bf,bn.prototype.set=wf;function Gt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Sf(){this.__data__=[],this.size=0}function Af(e){var t=this.__data__,n=Ni(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():Pi.call(t,n,1),--this.size,!0}function $f(e){var t=this.__data__,n=Ni(t,e);return n<0?r:t[n][1]}function Tf(e){return Ni(this.__data__,e)>-1}function Cf(e,t){var n=this.__data__,i=Ni(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}Gt.prototype.clear=Sf,Gt.prototype.delete=Af,Gt.prototype.get=$f,Gt.prototype.has=Tf,Gt.prototype.set=Cf;function Vt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function zf(){this.size=0,this.__data__={hash:new bn,map:new(ni||Gt),string:new bn}}function If(e){var t=tr(this,e).delete(e);return this.size-=t?1:0,t}function Rf(e){return tr(this,e).get(e)}function Of(e){return tr(this,e).has(e)}function kf(e,t){var n=tr(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}Vt.prototype.clear=zf,Vt.prototype.delete=If,Vt.prototype.get=Rf,Vt.prototype.has=Of,Vt.prototype.set=kf;function wn(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Vt;++t<n;)this.add(e[t])}function Df(e){return this.__data__.set(e,A),this}function Lf(e){return this.__data__.has(e)}wn.prototype.add=wn.prototype.push=Df,wn.prototype.has=Lf;function Dt(e){var t=this.__data__=new Gt(e);this.size=t.size}function Ef(){this.__data__=new Gt,this.size=0}function Pf(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Uf(e){return this.__data__.get(e)}function Mf(e){return this.__data__.has(e)}function Bf(e,t){var n=this.__data__;if(n instanceof Gt){var i=n.__data__;if(!ni||i.length<y-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Vt(i)}return n.set(e,t),this.size=n.size,this}Dt.prototype.clear=Ef,Dt.prototype.delete=Pf,Dt.prototype.get=Uf,Dt.prototype.has=Mf,Dt.prototype.set=Bf;function Oo(e,t){var n=ne(e),i=!n&&Cn(e),s=!n&&!i&&gn(e),l=!n&&!i&&!s&&Yn(e),u=n||i||s||l,c=u?Dr(e.length,Yu):[],p=c.length;for(var w in e)(t||Ae.call(e,w))&&!(u&&(w=="length"||s&&(w=="offset"||w=="parent")||l&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||Qt(w,p)))&&c.push(w);return c}function ko(e){var t=e.length;return t?e[Qr(0,t-1)]:r}function Wf(e,t){return nr(st(e),Sn(t,0,e.length))}function qf(e){return nr(st(e))}function Wr(e,t,n){(n!==r&&!Lt(e[t],n)||n===r&&!(t in e))&&Kt(e,t,n)}function oi(e,t,n){var i=e[t];(!(Ae.call(e,t)&&Lt(i,n))||n===r&&!(t in e))&&Kt(e,t,n)}function Ni(e,t){for(var n=e.length;n--;)if(Lt(e[n][0],t))return n;return-1}function Ff(e,t,n,i){return fn(e,function(s,l,u){t(i,s,n(s),u)}),i}function Do(e,t){return e&&Wt(t,Ge(t),e)}function Nf(e,t){return e&&Wt(t,lt(t),e)}function Kt(e,t,n){t=="__proto__"&&Ui?Ui(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function qr(e,t){for(var n=-1,i=t.length,s=m(i),l=e==null;++n<i;)s[n]=l?r:bs(e,t[n]);return s}function Sn(e,t,n){return e===e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function Ct(e,t,n,i,s,l){var u,c=t&Y,p=t&G,w=t&F;if(n&&(u=s?n(e,i,s,l):n(e)),u!==r)return u;if(!Le(e))return e;var S=ne(e);if(S){if(u=Oc(e),!c)return st(e,u)}else{var C=Je(e),P=C==wt||C==In;if(gn(e))return il(e,c);if(C==Ot||C==bt||P&&!s){if(u=p||P?{}:wl(e),!c)return p?xc(e,Nf(u,e)):yc(e,Do(u,e))}else{if(!Ie[C])return s?e:{};u=kc(e,C,c)}}l||(l=new Dt);var H=l.get(e);if(H)return H;l.set(e,u),Xl(e)?e.forEach(function(Q){u.add(Ct(Q,t,n,Q,e,l))}):Zl(e)&&e.forEach(function(Q,ce){u.set(ce,Ct(Q,t,n,ce,e,l))});var Z=w?p?ls:os:p?lt:Ge,oe=S?r:Z(e);return At(oe||e,function(Q,ce){oe&&(ce=Q,Q=e[ce]),oi(u,ce,Ct(Q,t,n,ce,e,l))}),u}function Hf(e){var t=Ge(e);return function(n){return Lo(n,e,t)}}function Lo(e,t,n){var i=n.length;if(e==null)return!i;for(e=Ce(e);i--;){var s=n[i],l=t[s],u=e[s];if(u===r&&!(s in e)||!l(u))return!1}return!0}function Eo(e,t,n){if(typeof e!="function")throw new $t(_);return pi(function(){e.apply(r,n)},t)}function li(e,t,n,i){var s=-1,l=Ti,u=!0,c=e.length,p=[],w=t.length;if(!c)return p;n&&(t=De(t,ht(n))),i?(l=Cr,u=!1):t.length>=y&&(l=ei,u=!1,t=new wn(t));e:for(;++s<c;){var S=e[s],C=n==null?S:n(S);if(S=i||S!==0?S:0,u&&C===C){for(var P=w;P--;)if(t[P]===C)continue e;p.push(S)}else l(t,C,i)||p.push(S)}return p}var fn=al(Bt),Po=al(Nr,!0);function Gf(e,t){var n=!0;return fn(e,function(i,s,l){return n=!!t(i,s,l),n}),n}function Hi(e,t,n){for(var i=-1,s=e.length;++i<s;){var l=e[i],u=t(l);if(u!=null&&(c===r?u===u&&!vt(u):n(u,c)))var c=u,p=l}return p}function Vf(e,t,n,i){var s=e.length;for(n=re(n),n<0&&(n=-n>s?0:s+n),i=i===r||i>s?s:re(i),i<0&&(i+=s),i=n>i?0:jl(i);n<i;)e[n++]=t;return e}function Uo(e,t){var n=[];return fn(e,function(i,s,l){t(i,s,l)&&n.push(i)}),n}function Ke(e,t,n,i,s){var l=-1,u=e.length;for(n||(n=Lc),s||(s=[]);++l<u;){var c=e[l];t>0&&n(c)?t>1?Ke(c,t-1,n,i,s):ln(s,c):i||(s[s.length]=c)}return s}var Fr=ul(),Mo=ul(!0);function Bt(e,t){return e&&Fr(e,t,Ge)}function Nr(e,t){return e&&Mo(e,t,Ge)}function Gi(e,t){return on(t,function(n){return Xt(e[n])})}function An(e,t){t=dn(t,e);for(var n=0,i=t.length;e!=null&&n<i;)e=e[qt(t[n++])];return n&&n==i?e:r}function Bo(e,t,n){var i=t(e);return ne(e)?i:ln(i,n(e))}function et(e){return e==null?e===r?vr:_r:xn&&xn in Ce(e)?zc(e):qc(e)}function Hr(e,t){return e>t}function Kf(e,t){return e!=null&&Ae.call(e,t)}function Yf(e,t){return e!=null&&t in Ce(e)}function Zf(e,t,n){return e>=Xe(t,n)&&e<He(t,n)}function Gr(e,t,n){for(var i=n?Cr:Ti,s=e[0].length,l=e.length,u=l,c=m(l),p=1/0,w=[];u--;){var S=e[u];u&&t&&(S=De(S,ht(t))),p=Xe(S.length,p),c[u]=!n&&(t||s>=120&&S.length>=120)?new wn(u&&S):r}S=e[0];var C=-1,P=c[0];e:for(;++C<s&&w.length<p;){var H=S[C],Z=t?t(H):H;if(H=n||H!==0?H:0,!(P?ei(P,Z):i(w,Z,n))){for(u=l;--u;){var oe=c[u];if(!(oe?ei(oe,Z):i(e[u],Z,n)))continue e}P&&P.push(Z),w.push(H)}}return w}function Qf(e,t,n,i){return Bt(e,function(s,l,u){t(i,n(s),l,u)}),i}function ai(e,t,n){t=dn(t,e),e=Tl(e,t);var i=e==null?e:e[qt(It(t))];return i==null?r:gt(i,e,n)}function Wo(e){return Me(e)&&et(e)==bt}function Xf(e){return Me(e)&&et(e)==rn}function Jf(e){return Me(e)&&et(e)==Ut}function ui(e,t,n,i,s){return e===t?!0:e==null||t==null||!Me(e)&&!Me(t)?e!==e&&t!==t:jf(e,t,n,i,ui,s)}function jf(e,t,n,i,s,l){var u=ne(e),c=ne(t),p=u?ft:Je(e),w=c?ft:Je(t);p=p==bt?Ot:p,w=w==bt?Ot:w;var S=p==Ot,C=w==Ot,P=p==w;if(P&&gn(e)){if(!gn(t))return!1;u=!0,S=!1}if(P&&!S)return l||(l=new Dt),u||Yn(e)?yl(e,t,n,i,s,l):Tc(e,t,p,n,i,s,l);if(!(n&ie)){var H=S&&Ae.call(e,"__wrapped__"),Z=C&&Ae.call(t,"__wrapped__");if(H||Z){var oe=H?e.value():e,Q=Z?t.value():t;return l||(l=new Dt),s(oe,Q,n,i,l)}}return P?(l||(l=new Dt),Cc(e,t,n,i,s,l)):!1}function ec(e){return Me(e)&&Je(e)==dt}function Vr(e,t,n,i){var s=n.length,l=s,u=!i;if(e==null)return!l;for(e=Ce(e);s--;){var c=n[s];if(u&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++s<l;){c=n[s];var p=c[0],w=e[p],S=c[1];if(u&&c[2]){if(w===r&&!(p in e))return!1}else{var C=new Dt;if(i)var P=i(w,S,p,e,t,C);if(!(P===r?ui(S,w,ie|N,i,C):P))return!1}}return!0}function qo(e){if(!Le(e)||Pc(e))return!1;var t=Xt(e)?ju:Na;return t.test(Tn(e))}function tc(e){return Me(e)&&et(e)==tn}function nc(e){return Me(e)&&Je(e)==pt}function ic(e){return Me(e)&&ar(e.length)&&!!ke[et(e)]}function Fo(e){return typeof e=="function"?e:e==null?at:typeof e=="object"?ne(e)?Go(e[0],e[1]):Ho(e):fa(e)}function Kr(e){if(!di(e))return of(e);var t=[];for(var n in Ce(e))Ae.call(e,n)&&n!="constructor"&&t.push(n);return t}function rc(e){if(!Le(e))return Wc(e);var t=di(e),n=[];for(var i in e)i=="constructor"&&(t||!Ae.call(e,i))||n.push(i);return n}function Yr(e,t){return e<t}function No(e,t){var n=-1,i=ot(e)?m(e.length):[];return fn(e,function(s,l,u){i[++n]=t(s,l,u)}),i}function Ho(e){var t=us(e);return t.length==1&&t[0][2]?Al(t[0][0],t[0][1]):function(n){return n===e||Vr(n,e,t)}}function Go(e,t){return cs(e)&&Sl(t)?Al(qt(e),t):function(n){var i=bs(n,e);return i===r&&i===t?ws(n,e):ui(t,i,ie|N)}}function Vi(e,t,n,i,s){e!==t&&Fr(t,function(l,u){if(s||(s=new Dt),Le(l))sc(e,t,u,n,Vi,i,s);else{var c=i?i(ps(e,u),l,u+"",e,t,s):r;c===r&&(c=l),Wr(e,u,c)}},lt)}function sc(e,t,n,i,s,l,u){var c=ps(e,n),p=ps(t,n),w=u.get(p);if(w){Wr(e,n,w);return}var S=l?l(c,p,n+"",e,t,u):r,C=S===r;if(C){var P=ne(p),H=!P&&gn(p),Z=!P&&!H&&Yn(p);S=p,P||H||Z?ne(c)?S=c:qe(c)?S=st(c):H?(C=!1,S=il(p,!0)):Z?(C=!1,S=rl(p,!0)):S=[]:gi(p)||Cn(p)?(S=c,Cn(c)?S=ea(c):(!Le(c)||Xt(c))&&(S=wl(p))):C=!1}C&&(u.set(p,S),s(S,p,i,l,u),u.delete(p)),Wr(e,n,S)}function Vo(e,t){var n=e.length;if(n)return t+=t<0?n:0,Qt(t,n)?e[t]:r}function Ko(e,t,n){t.length?t=De(t,function(l){return ne(l)?function(u){return An(u,l.length===1?l[0]:l)}:l}):t=[at];var i=-1;t=De(t,ht(K()));var s=No(e,function(l,u,c){var p=De(t,function(w){return w(l)});return{criteria:p,index:++i,value:l}});return Ou(s,function(l,u){return mc(l,u,n)})}function oc(e,t){return Yo(e,t,function(n,i){return ws(e,i)})}function Yo(e,t,n){for(var i=-1,s=t.length,l={};++i<s;){var u=t[i],c=An(e,u);n(c,u)&&fi(l,dn(u,e),c)}return l}function lc(e){return function(t){return An(t,e)}}function Zr(e,t,n,i){var s=i?Ru:Un,l=-1,u=t.length,c=e;for(e===t&&(t=st(t)),n&&(c=De(e,ht(n)));++l<u;)for(var p=0,w=t[l],S=n?n(w):w;(p=s(c,S,p,i))>-1;)c!==e&&Pi.call(c,p,1),Pi.call(e,p,1);return e}function Zo(e,t){for(var n=e?t.length:0,i=n-1;n--;){var s=t[n];if(n==i||s!==l){var l=s;Qt(s)?Pi.call(e,s,1):jr(e,s)}}return e}function Qr(e,t){return e+Bi(Io()*(t-e+1))}function ac(e,t,n,i){for(var s=-1,l=He(Mi((t-e)/(n||1)),0),u=m(l);l--;)u[i?l:++s]=e,e+=n;return u}function Xr(e,t){var n="";if(!e||t<1||t>Be)return n;do t%2&&(n+=e),t=Bi(t/2),t&&(e+=e);while(t);return n}function ae(e,t){return gs($l(e,t,at),e+"")}function uc(e){return ko(Zn(e))}function fc(e,t){var n=Zn(e);return nr(n,Sn(t,0,n.length))}function fi(e,t,n,i){if(!Le(e))return e;t=dn(t,e);for(var s=-1,l=t.length,u=l-1,c=e;c!=null&&++s<l;){var p=qt(t[s]),w=n;if(p==="__proto__"||p==="constructor"||p==="prototype")return e;if(s!=u){var S=c[p];w=i?i(S,p,c):r,w===r&&(w=Le(S)?S:Qt(t[s+1])?[]:{})}oi(c,p,w),c=c[p]}return e}var Qo=Wi?function(e,t){return Wi.set(e,t),e}:at,cc=Ui?function(e,t){return Ui(e,"toString",{configurable:!0,enumerable:!1,value:As(t),writable:!0})}:at;function dc(e){return nr(Zn(e))}function zt(e,t,n){var i=-1,s=e.length;t<0&&(t=-t>s?0:s+t),n=n>s?s:n,n<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var l=m(s);++i<s;)l[i]=e[i+t];return l}function pc(e,t){var n;return fn(e,function(i,s,l){return n=t(i,s,l),!n}),!!n}function Ki(e,t,n){var i=0,s=e==null?i:e.length;if(typeof t=="number"&&t===t&&s<=ee){for(;i<s;){var l=i+s>>>1,u=e[l];u!==null&&!vt(u)&&(n?u<=t:u<t)?i=l+1:s=l}return s}return Jr(e,t,at,n)}function Jr(e,t,n,i){var s=0,l=e==null?0:e.length;if(l===0)return 0;t=n(t);for(var u=t!==t,c=t===null,p=vt(t),w=t===r;s<l;){var S=Bi((s+l)/2),C=n(e[S]),P=C!==r,H=C===null,Z=C===C,oe=vt(C);if(u)var Q=i||Z;else w?Q=Z&&(i||P):c?Q=Z&&P&&(i||!H):p?Q=Z&&P&&!H&&(i||!oe):H||oe?Q=!1:Q=i?C<=t:C<t;Q?s=S+1:l=S}return Xe(l,le)}function Xo(e,t){for(var n=-1,i=e.length,s=0,l=[];++n<i;){var u=e[n],c=t?t(u):u;if(!n||!Lt(c,p)){var p=c;l[s++]=u===0?0:u}}return l}function Jo(e){return typeof e=="number"?e:vt(e)?j:+e}function _t(e){if(typeof e=="string")return e;if(ne(e))return De(e,_t)+"";if(vt(e))return Ro?Ro.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function cn(e,t,n){var i=-1,s=Ti,l=e.length,u=!0,c=[],p=c;if(n)u=!1,s=Cr;else if(l>=y){var w=t?null:Ac(e);if(w)return zi(w);u=!1,s=ei,p=new wn}else p=t?[]:c;e:for(;++i<l;){var S=e[i],C=t?t(S):S;if(S=n||S!==0?S:0,u&&C===C){for(var P=p.length;P--;)if(p[P]===C)continue e;t&&p.push(C),c.push(S)}else s(p,C,n)||(p!==c&&p.push(C),c.push(S))}return c}function jr(e,t){return t=dn(t,e),e=Tl(e,t),e==null||delete e[qt(It(t))]}function jo(e,t,n,i){return fi(e,t,n(An(e,t)),i)}function Yi(e,t,n,i){for(var s=e.length,l=i?s:-1;(i?l--:++l<s)&&t(e[l],l,e););return n?zt(e,i?0:l,i?l+1:s):zt(e,i?l+1:0,i?s:l)}function el(e,t){var n=e;return n instanceof _e&&(n=n.value()),zr(t,function(i,s){return s.func.apply(s.thisArg,ln([i],s.args))},n)}function es(e,t,n){var i=e.length;if(i<2)return i?cn(e[0]):[];for(var s=-1,l=m(i);++s<i;)for(var u=e[s],c=-1;++c<i;)c!=s&&(l[s]=li(l[s]||u,e[c],t,n));return cn(Ke(l,1),t,n)}function tl(e,t,n){for(var i=-1,s=e.length,l=t.length,u={};++i<s;){var c=i<l?t[i]:r;n(u,e[i],c)}return u}function ts(e){return qe(e)?e:[]}function ns(e){return typeof e=="function"?e:at}function dn(e,t){return ne(e)?e:cs(e,t)?[e]:Rl(we(e))}var gc=ae;function pn(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:zt(e,t,n)}var nl=ef||function(e){return Ve.clearTimeout(e)};function il(e,t){if(t)return e.slice();var n=e.length,i=Ao?Ao(n):new e.constructor(n);return e.copy(i),i}function is(e){var t=new e.constructor(e.byteLength);return new Li(t).set(new Li(e)),t}function hc(e,t){var n=t?is(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function _c(e){var t=new e.constructor(e.source,Bs.exec(e));return t.lastIndex=e.lastIndex,t}function vc(e){return si?Ce(si.call(e)):{}}function rl(e,t){var n=t?is(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function sl(e,t){if(e!==t){var n=e!==r,i=e===null,s=e===e,l=vt(e),u=t!==r,c=t===null,p=t===t,w=vt(t);if(!c&&!w&&!l&&e>t||l&&u&&p&&!c&&!w||i&&u&&p||!n&&p||!s)return 1;if(!i&&!l&&!w&&e<t||w&&n&&s&&!i&&!l||c&&n&&s||!u&&s||!p)return-1}return 0}function mc(e,t,n){for(var i=-1,s=e.criteria,l=t.criteria,u=s.length,c=n.length;++i<u;){var p=sl(s[i],l[i]);if(p){if(i>=c)return p;var w=n[i];return p*(w=="desc"?-1:1)}}return e.index-t.index}function ol(e,t,n,i){for(var s=-1,l=e.length,u=n.length,c=-1,p=t.length,w=He(l-u,0),S=m(p+w),C=!i;++c<p;)S[c]=t[c];for(;++s<u;)(C||s<l)&&(S[n[s]]=e[s]);for(;w--;)S[c++]=e[s++];return S}function ll(e,t,n,i){for(var s=-1,l=e.length,u=-1,c=n.length,p=-1,w=t.length,S=He(l-c,0),C=m(S+w),P=!i;++s<S;)C[s]=e[s];for(var H=s;++p<w;)C[H+p]=t[p];for(;++u<c;)(P||s<l)&&(C[H+n[u]]=e[s++]);return C}function st(e,t){var n=-1,i=e.length;for(t||(t=m(i));++n<i;)t[n]=e[n];return t}function Wt(e,t,n,i){var s=!n;n||(n={});for(var l=-1,u=t.length;++l<u;){var c=t[l],p=i?i(n[c],e[c],c,n,e):r;p===r&&(p=e[c]),s?Kt(n,c,p):oi(n,c,p)}return n}function yc(e,t){return Wt(e,fs(e),t)}function xc(e,t){return Wt(e,xl(e),t)}function Zi(e,t){return function(n,i){var s=ne(n)?Au:Ff,l=t?t():{};return s(n,e,K(i,2),l)}}function Gn(e){return ae(function(t,n){var i=-1,s=n.length,l=s>1?n[s-1]:r,u=s>2?n[2]:r;for(l=e.length>3&&typeof l=="function"?(s--,l):r,u&&tt(n[0],n[1],u)&&(l=s<3?r:l,s=1),t=Ce(t);++i<s;){var c=n[i];c&&e(t,c,i,l)}return t})}function al(e,t){return function(n,i){if(n==null)return n;if(!ot(n))return e(n,i);for(var s=n.length,l=t?s:-1,u=Ce(n);(t?l--:++l<s)&&i(u[l],l,u)!==!1;);return n}}function ul(e){return function(t,n,i){for(var s=-1,l=Ce(t),u=i(t),c=u.length;c--;){var p=u[e?c:++s];if(n(l[p],p,l)===!1)break}return t}}function bc(e,t,n){var i=t&M,s=ci(e);function l(){var u=this&&this!==Ve&&this instanceof l?s:e;return u.apply(i?n:this,arguments)}return l}function fl(e){return function(t){t=we(t);var n=Mn(t)?kt(t):r,i=n?n[0]:t.charAt(0),s=n?pn(n,1).join(""):t.slice(1);return i[e]()+s}}function Vn(e){return function(t){return zr(aa(la(t).replace(fu,"")),e,"")}}function ci(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Hn(e.prototype),i=e.apply(n,t);return Le(i)?i:n}}function wc(e,t,n){var i=ci(e);function s(){for(var l=arguments.length,u=m(l),c=l,p=Kn(s);c--;)u[c]=arguments[c];var w=l<3&&u[0]!==p&&u[l-1]!==p?[]:an(u,p);if(l-=w.length,l<n)return hl(e,t,Qi,s.placeholder,r,u,w,r,r,n-l);var S=this&&this!==Ve&&this instanceof s?i:e;return gt(S,this,u)}return s}function cl(e){return function(t,n,i){var s=Ce(t);if(!ot(t)){var l=K(n,3);t=Ge(t),n=function(c){return l(s[c],c,s)}}var u=e(t,n,i);return u>-1?s[l?t[u]:u]:r}}function dl(e){return Zt(function(t){var n=t.length,i=n,s=Tt.prototype.thru;for(e&&t.reverse();i--;){var l=t[i];if(typeof l!="function")throw new $t(_);if(s&&!u&&er(l)=="wrapper")var u=new Tt([],!0)}for(i=u?i:n;++i<n;){l=t[i];var c=er(l),p=c=="wrapper"?as(l):r;p&&ds(p[0])&&p[1]==(se|fe|L|Te)&&!p[4].length&&p[9]==1?u=u[er(p[0])].apply(u,p[3]):u=l.length==1&&ds(l)?u[c]():u.thru(l)}return function(){var w=arguments,S=w[0];if(u&&w.length==1&&ne(S))return u.plant(S).value();for(var C=0,P=n?t[C].apply(this,w):S;++C<n;)P=t[C].call(this,P);return P}})}function Qi(e,t,n,i,s,l,u,c,p,w){var S=t&se,C=t&M,P=t&ge,H=t&(fe|q),Z=t&Re,oe=P?r:ci(e);function Q(){for(var ce=arguments.length,ve=m(ce),mt=ce;mt--;)ve[mt]=arguments[mt];if(H)var nt=Kn(Q),yt=Du(ve,nt);if(i&&(ve=ol(ve,i,s,H)),l&&(ve=ll(ve,l,u,H)),ce-=yt,H&&ce<w){var Fe=an(ve,nt);return hl(e,t,Qi,Q.placeholder,n,ve,Fe,c,p,w-ce)}var Et=C?n:this,jt=P?Et[e]:e;return ce=ve.length,c?ve=Fc(ve,c):Z&&ce>1&&ve.reverse(),S&&p<ce&&(ve.length=p),this&&this!==Ve&&this instanceof Q&&(jt=oe||ci(jt)),jt.apply(Et,ve)}return Q}function pl(e,t){return function(n,i){return Qf(n,e,t(i),{})}}function Xi(e,t){return function(n,i){var s;if(n===r&&i===r)return t;if(n!==r&&(s=n),i!==r){if(s===r)return i;typeof n=="string"||typeof i=="string"?(n=_t(n),i=_t(i)):(n=Jo(n),i=Jo(i)),s=e(n,i)}return s}}function rs(e){return Zt(function(t){return t=De(t,ht(K())),ae(function(n){var i=this;return e(t,function(s){return gt(s,i,n)})})})}function Ji(e,t){t=t===r?" ":_t(t);var n=t.length;if(n<2)return n?Xr(t,e):t;var i=Xr(t,Mi(e/Bn(t)));return Mn(t)?pn(kt(i),0,e).join(""):i.slice(0,e)}function Sc(e,t,n,i){var s=t&M,l=ci(e);function u(){for(var c=-1,p=arguments.length,w=-1,S=i.length,C=m(S+p),P=this&&this!==Ve&&this instanceof u?l:e;++w<S;)C[w]=i[w];for(;p--;)C[w++]=arguments[++c];return gt(P,s?n:this,C)}return u}function gl(e){return function(t,n,i){return i&&typeof i!="number"&&tt(t,n,i)&&(n=i=r),t=Jt(t),n===r?(n=t,t=0):n=Jt(n),i=i===r?t<n?1:-1:Jt(i),ac(t,n,i,e)}}function ji(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Rt(t),n=Rt(n)),e(t,n)}}function hl(e,t,n,i,s,l,u,c,p,w){var S=t&fe,C=S?u:r,P=S?r:u,H=S?l:r,Z=S?r:l;t|=S?L:Ee,t&=~(S?Ee:L),t&be||(t&=-4);var oe=[e,t,s,H,C,Z,P,c,p,w],Q=n.apply(r,oe);return ds(e)&&Cl(Q,oe),Q.placeholder=i,zl(Q,e,t)}function ss(e){var t=Ne[e];return function(n,i){if(n=Rt(n),i=i==null?0:Xe(re(i),292),i&&zo(n)){var s=(we(n)+"e").split("e"),l=t(s[0]+"e"+(+s[1]+i));return s=(we(l)+"e").split("e"),+(s[0]+"e"+(+s[1]-i))}return t(n)}}var Ac=Fn&&1/zi(new Fn([,-0]))[1]==I?function(e){return new Fn(e)}:Cs;function _l(e){return function(t){var n=Je(t);return n==dt?Er(t):n==pt?Wu(t):ku(t,e(t))}}function Yt(e,t,n,i,s,l,u,c){var p=t&ge;if(!p&&typeof e!="function")throw new $t(_);var w=i?i.length:0;if(w||(t&=-97,i=s=r),u=u===r?u:He(re(u),0),c=c===r?c:re(c),w-=s?s.length:0,t&Ee){var S=i,C=s;i=s=r}var P=p?r:as(e),H=[e,t,n,i,s,S,C,l,u,c];if(P&&Bc(H,P),e=H[0],t=H[1],n=H[2],i=H[3],s=H[4],c=H[9]=H[9]===r?p?0:e.length:He(H[9]-w,0),!c&&t&(fe|q)&&(t&=-25),!t||t==M)var Z=bc(e,t,n);else t==fe||t==q?Z=wc(e,t,c):(t==L||t==(M|L))&&!s.length?Z=Sc(e,t,n,i):Z=Qi.apply(r,H);var oe=P?Qo:Cl;return zl(oe(Z,H),e,t)}function vl(e,t,n,i){return e===r||Lt(e,qn[n])&&!Ae.call(i,n)?t:e}function ml(e,t,n,i,s,l){return Le(e)&&Le(t)&&(l.set(t,e),Vi(e,t,r,ml,l),l.delete(t)),e}function $c(e){return gi(e)?r:e}function yl(e,t,n,i,s,l){var u=n&ie,c=e.length,p=t.length;if(c!=p&&!(u&&p>c))return!1;var w=l.get(e),S=l.get(t);if(w&&S)return w==t&&S==e;var C=-1,P=!0,H=n&N?new wn:r;for(l.set(e,t),l.set(t,e);++C<c;){var Z=e[C],oe=t[C];if(i)var Q=u?i(oe,Z,C,t,e,l):i(Z,oe,C,e,t,l);if(Q!==r){if(Q)continue;P=!1;break}if(H){if(!Ir(t,function(ce,ve){if(!ei(H,ve)&&(Z===ce||s(Z,ce,n,i,l)))return H.push(ve)})){P=!1;break}}else if(!(Z===oe||s(Z,oe,n,i,l))){P=!1;break}}return l.delete(e),l.delete(t),P}function Tc(e,t,n,i,s,l,u){switch(n){case sn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case rn:return!(e.byteLength!=t.byteLength||!l(new Li(e),new Li(t)));case Pt:case Ut:case en:return Lt(+e,+t);case ct:return e.name==t.name&&e.message==t.message;case tn:case mn:return e==t+"";case dt:var c=Er;case pt:var p=i&ie;if(c||(c=zi),e.size!=t.size&&!p)return!1;var w=u.get(e);if(w)return w==t;i|=N,u.set(e,t);var S=yl(c(e),c(t),i,s,l,u);return u.delete(e),S;case Rn:if(si)return si.call(e)==si.call(t)}return!1}function Cc(e,t,n,i,s,l){var u=n&ie,c=os(e),p=c.length,w=os(t),S=w.length;if(p!=S&&!u)return!1;for(var C=p;C--;){var P=c[C];if(!(u?P in t:Ae.call(t,P)))return!1}var H=l.get(e),Z=l.get(t);if(H&&Z)return H==t&&Z==e;var oe=!0;l.set(e,t),l.set(t,e);for(var Q=u;++C<p;){P=c[C];var ce=e[P],ve=t[P];if(i)var mt=u?i(ve,ce,P,t,e,l):i(ce,ve,P,e,t,l);if(!(mt===r?ce===ve||s(ce,ve,n,i,l):mt)){oe=!1;break}Q||(Q=P=="constructor")}if(oe&&!Q){var nt=e.constructor,yt=t.constructor;nt!=yt&&"constructor"in e&&"constructor"in t&&!(typeof nt=="function"&&nt instanceof nt&&typeof yt=="function"&&yt instanceof yt)&&(oe=!1)}return l.delete(e),l.delete(t),oe}function Zt(e){return gs($l(e,r,Ll),e+"")}function os(e){return Bo(e,Ge,fs)}function ls(e){return Bo(e,lt,xl)}var as=Wi?function(e){return Wi.get(e)}:Cs;function er(e){for(var t=e.name+"",n=Nn[t],i=Ae.call(Nn,t)?n.length:0;i--;){var s=n[i],l=s.func;if(l==null||l==e)return s.name}return t}function Kn(e){var t=Ae.call(o,"placeholder")?o:e;return t.placeholder}function K(){var e=o.iteratee||$s;return e=e===$s?Fo:e,arguments.length?e(arguments[0],arguments[1]):e}function tr(e,t){var n=e.__data__;return Ec(t)?n[typeof t=="string"?"string":"hash"]:n.map}function us(e){for(var t=Ge(e),n=t.length;n--;){var i=t[n],s=e[i];t[n]=[i,s,Sl(s)]}return t}function $n(e,t){var n=Uu(e,t);return qo(n)?n:r}function zc(e){var t=Ae.call(e,xn),n=e[xn];try{e[xn]=r;var i=!0}catch{}var s=ki.call(e);return i&&(t?e[xn]=n:delete e[xn]),s}var fs=Ur?function(e){return e==null?[]:(e=Ce(e),on(Ur(e),function(t){return To.call(e,t)}))}:zs,xl=Ur?function(e){for(var t=[];e;)ln(t,fs(e)),e=Ei(e);return t}:zs,Je=et;(Mr&&Je(new Mr(new ArrayBuffer(1)))!=sn||ni&&Je(new ni)!=dt||Br&&Je(Br.resolve())!=_i||Fn&&Je(new Fn)!=pt||ii&&Je(new ii)!=nn)&&(Je=function(e){var t=et(e),n=t==Ot?e.constructor:r,i=n?Tn(n):"";if(i)switch(i){case ff:return sn;case cf:return dt;case df:return _i;case pf:return pt;case gf:return nn}return t});function Ic(e,t,n){for(var i=-1,s=n.length;++i<s;){var l=n[i],u=l.size;switch(l.type){case"drop":e+=u;break;case"dropRight":t-=u;break;case"take":t=Xe(t,e+u);break;case"takeRight":e=He(e,t-u);break}}return{start:e,end:t}}function Rc(e){var t=e.match(Ea);return t?t[1].split(Pa):[]}function bl(e,t,n){t=dn(t,e);for(var i=-1,s=t.length,l=!1;++i<s;){var u=qt(t[i]);if(!(l=e!=null&&n(e,u)))break;e=e[u]}return l||++i!=s?l:(s=e==null?0:e.length,!!s&&ar(s)&&Qt(u,s)&&(ne(e)||Cn(e)))}function Oc(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Ae.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function wl(e){return typeof e.constructor=="function"&&!di(e)?Hn(Ei(e)):{}}function kc(e,t,n){var i=e.constructor;switch(t){case rn:return is(e);case Pt:case Ut:return new i(+e);case sn:return hc(e,n);case he:case je:case Qe:case Mt:case On:case kn:case Dn:case Ln:case En:return rl(e,n);case dt:return new i;case en:case mn:return new i(e);case tn:return _c(e);case pt:return new i;case Rn:return vc(e)}}function Dc(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(La,`{
/* [wrapped with `+t+`] */
`)}function Lc(e){return ne(e)||Cn(e)||!!(Co&&e&&e[Co])}function Qt(e,t){var n=typeof e;return t=t??Be,!!t&&(n=="number"||n!="symbol"&&Ga.test(e))&&e>-1&&e%1==0&&e<t}function tt(e,t,n){if(!Le(n))return!1;var i=typeof t;return(i=="number"?ot(n)&&Qt(t,n.length):i=="string"&&t in n)?Lt(n[t],e):!1}function cs(e,t){if(ne(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||vt(e)?!0:Ra.test(e)||!Ia.test(e)||t!=null&&e in Ce(t)}function Ec(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ds(e){var t=er(e),n=o[t];if(typeof n!="function"||!(t in _e.prototype))return!1;if(e===n)return!0;var i=as(n);return!!i&&e===i[0]}function Pc(e){return!!So&&So in e}var Uc=Ri?Xt:Is;function di(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||qn;return e===n}function Sl(e){return e===e&&!Le(e)}function Al(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==r||e in Ce(n))}}function Mc(e){var t=or(e,function(i){return n.size===k&&n.clear(),i}),n=t.cache;return t}function Bc(e,t){var n=e[1],i=t[1],s=n|i,l=s<(M|ge|se),u=i==se&&n==fe||i==se&&n==Te&&e[7].length<=t[8]||i==(se|Te)&&t[7].length<=t[8]&&n==fe;if(!(l||u))return e;i&M&&(e[2]=t[2],s|=n&M?0:be);var c=t[3];if(c){var p=e[3];e[3]=p?ol(p,c,t[4]):c,e[4]=p?an(e[3],V):t[4]}return c=t[5],c&&(p=e[5],e[5]=p?ll(p,c,t[6]):c,e[6]=p?an(e[5],V):t[6]),c=t[7],c&&(e[7]=c),i&se&&(e[8]=e[8]==null?t[8]:Xe(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=s,e}function Wc(e){var t=[];if(e!=null)for(var n in Ce(e))t.push(n);return t}function qc(e){return ki.call(e)}function $l(e,t,n){return t=He(t===r?e.length-1:t,0),function(){for(var i=arguments,s=-1,l=He(i.length-t,0),u=m(l);++s<l;)u[s]=i[t+s];s=-1;for(var c=m(t+1);++s<t;)c[s]=i[s];return c[t]=n(u),gt(e,this,c)}}function Tl(e,t){return t.length<2?e:An(e,zt(t,0,-1))}function Fc(e,t){for(var n=e.length,i=Xe(t.length,n),s=st(e);i--;){var l=t[i];e[i]=Qt(l,n)?s[l]:r}return e}function ps(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Cl=Il(Qo),pi=nf||function(e,t){return Ve.setTimeout(e,t)},gs=Il(cc);function zl(e,t,n){var i=t+"";return gs(e,Dc(i,Nc(Rc(i),n)))}function Il(e){var t=0,n=0;return function(){var i=lf(),s=J-(i-n);if(n=i,s>0){if(++t>=X)return arguments[0]}else t=0;return e.apply(r,arguments)}}function nr(e,t){var n=-1,i=e.length,s=i-1;for(t=t===r?i:t;++n<t;){var l=Qr(n,s),u=e[l];e[l]=e[n],e[n]=u}return e.length=t,e}var Rl=Mc(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Oa,function(n,i,s,l){t.push(s?l.replace(Ba,"$1"):i||n)}),t});function qt(e){if(typeof e=="string"||vt(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Tn(e){if(e!=null){try{return Oi.call(e)}catch{}try{return e+""}catch{}}return""}function Nc(e,t){return At(me,function(n){var i="_."+n[0];t&n[1]&&!Ti(e,i)&&e.push(i)}),e.sort()}function Ol(e){if(e instanceof _e)return e.clone();var t=new Tt(e.__wrapped__,e.__chain__);return t.__actions__=st(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Hc(e,t,n){(n?tt(e,t,n):t===r)?t=1:t=He(re(t),0);var i=e==null?0:e.length;if(!i||t<1)return[];for(var s=0,l=0,u=m(Mi(i/t));s<i;)u[l++]=zt(e,s,s+=t);return u}function Gc(e){for(var t=-1,n=e==null?0:e.length,i=0,s=[];++t<n;){var l=e[t];l&&(s[i++]=l)}return s}function Vc(){var e=arguments.length;if(!e)return[];for(var t=m(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return ln(ne(n)?st(n):[n],Ke(t,1))}var Kc=ae(function(e,t){return qe(e)?li(e,Ke(t,1,qe,!0)):[]}),Yc=ae(function(e,t){var n=It(t);return qe(n)&&(n=r),qe(e)?li(e,Ke(t,1,qe,!0),K(n,2)):[]}),Zc=ae(function(e,t){var n=It(t);return qe(n)&&(n=r),qe(e)?li(e,Ke(t,1,qe,!0),r,n):[]});function Qc(e,t,n){var i=e==null?0:e.length;return i?(t=n||t===r?1:re(t),zt(e,t<0?0:t,i)):[]}function Xc(e,t,n){var i=e==null?0:e.length;return i?(t=n||t===r?1:re(t),t=i-t,zt(e,0,t<0?0:t)):[]}function Jc(e,t){return e&&e.length?Yi(e,K(t,3),!0,!0):[]}function jc(e,t){return e&&e.length?Yi(e,K(t,3),!0):[]}function ed(e,t,n,i){var s=e==null?0:e.length;return s?(n&&typeof n!="number"&&tt(e,t,n)&&(n=0,i=s),Vf(e,t,n,i)):[]}function kl(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var s=n==null?0:re(n);return s<0&&(s=He(i+s,0)),Ci(e,K(t,3),s)}function Dl(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var s=i-1;return n!==r&&(s=re(n),s=n<0?He(i+s,0):Xe(s,i-1)),Ci(e,K(t,3),s,!0)}function Ll(e){var t=e==null?0:e.length;return t?Ke(e,1):[]}function td(e){var t=e==null?0:e.length;return t?Ke(e,I):[]}function nd(e,t){var n=e==null?0:e.length;return n?(t=t===r?1:re(t),Ke(e,t)):[]}function id(e){for(var t=-1,n=e==null?0:e.length,i={};++t<n;){var s=e[t];i[s[0]]=s[1]}return i}function El(e){return e&&e.length?e[0]:r}function rd(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var s=n==null?0:re(n);return s<0&&(s=He(i+s,0)),Un(e,t,s)}function sd(e){var t=e==null?0:e.length;return t?zt(e,0,-1):[]}var od=ae(function(e){var t=De(e,ts);return t.length&&t[0]===e[0]?Gr(t):[]}),ld=ae(function(e){var t=It(e),n=De(e,ts);return t===It(n)?t=r:n.pop(),n.length&&n[0]===e[0]?Gr(n,K(t,2)):[]}),ad=ae(function(e){var t=It(e),n=De(e,ts);return t=typeof t=="function"?t:r,t&&n.pop(),n.length&&n[0]===e[0]?Gr(n,r,t):[]});function ud(e,t){return e==null?"":sf.call(e,t)}function It(e){var t=e==null?0:e.length;return t?e[t-1]:r}function fd(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var s=i;return n!==r&&(s=re(n),s=s<0?He(i+s,0):Xe(s,i-1)),t===t?Fu(e,t,s):Ci(e,ho,s,!0)}function cd(e,t){return e&&e.length?Vo(e,re(t)):r}var dd=ae(Pl);function Pl(e,t){return e&&e.length&&t&&t.length?Zr(e,t):e}function pd(e,t,n){return e&&e.length&&t&&t.length?Zr(e,t,K(n,2)):e}function gd(e,t,n){return e&&e.length&&t&&t.length?Zr(e,t,r,n):e}var hd=Zt(function(e,t){var n=e==null?0:e.length,i=qr(e,t);return Zo(e,De(t,function(s){return Qt(s,n)?+s:s}).sort(sl)),i});function _d(e,t){var n=[];if(!(e&&e.length))return n;var i=-1,s=[],l=e.length;for(t=K(t,3);++i<l;){var u=e[i];t(u,i,e)&&(n.push(u),s.push(i))}return Zo(e,s),n}function hs(e){return e==null?e:uf.call(e)}function vd(e,t,n){var i=e==null?0:e.length;return i?(n&&typeof n!="number"&&tt(e,t,n)?(t=0,n=i):(t=t==null?0:re(t),n=n===r?i:re(n)),zt(e,t,n)):[]}function md(e,t){return Ki(e,t)}function yd(e,t,n){return Jr(e,t,K(n,2))}function xd(e,t){var n=e==null?0:e.length;if(n){var i=Ki(e,t);if(i<n&&Lt(e[i],t))return i}return-1}function bd(e,t){return Ki(e,t,!0)}function wd(e,t,n){return Jr(e,t,K(n,2),!0)}function Sd(e,t){var n=e==null?0:e.length;if(n){var i=Ki(e,t,!0)-1;if(Lt(e[i],t))return i}return-1}function Ad(e){return e&&e.length?Xo(e):[]}function $d(e,t){return e&&e.length?Xo(e,K(t,2)):[]}function Td(e){var t=e==null?0:e.length;return t?zt(e,1,t):[]}function Cd(e,t,n){return e&&e.length?(t=n||t===r?1:re(t),zt(e,0,t<0?0:t)):[]}function zd(e,t,n){var i=e==null?0:e.length;return i?(t=n||t===r?1:re(t),t=i-t,zt(e,t<0?0:t,i)):[]}function Id(e,t){return e&&e.length?Yi(e,K(t,3),!1,!0):[]}function Rd(e,t){return e&&e.length?Yi(e,K(t,3)):[]}var Od=ae(function(e){return cn(Ke(e,1,qe,!0))}),kd=ae(function(e){var t=It(e);return qe(t)&&(t=r),cn(Ke(e,1,qe,!0),K(t,2))}),Dd=ae(function(e){var t=It(e);return t=typeof t=="function"?t:r,cn(Ke(e,1,qe,!0),r,t)});function Ld(e){return e&&e.length?cn(e):[]}function Ed(e,t){return e&&e.length?cn(e,K(t,2)):[]}function Pd(e,t){return t=typeof t=="function"?t:r,e&&e.length?cn(e,r,t):[]}function _s(e){if(!(e&&e.length))return[];var t=0;return e=on(e,function(n){if(qe(n))return t=He(n.length,t),!0}),Dr(t,function(n){return De(e,Rr(n))})}function Ul(e,t){if(!(e&&e.length))return[];var n=_s(e);return t==null?n:De(n,function(i){return gt(t,r,i)})}var Ud=ae(function(e,t){return qe(e)?li(e,t):[]}),Md=ae(function(e){return es(on(e,qe))}),Bd=ae(function(e){var t=It(e);return qe(t)&&(t=r),es(on(e,qe),K(t,2))}),Wd=ae(function(e){var t=It(e);return t=typeof t=="function"?t:r,es(on(e,qe),r,t)}),qd=ae(_s);function Fd(e,t){return tl(e||[],t||[],oi)}function Nd(e,t){return tl(e||[],t||[],fi)}var Hd=ae(function(e){var t=e.length,n=t>1?e[t-1]:r;return n=typeof n=="function"?(e.pop(),n):r,Ul(e,n)});function Ml(e){var t=o(e);return t.__chain__=!0,t}function Gd(e,t){return t(e),e}function ir(e,t){return t(e)}var Vd=Zt(function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,s=function(l){return qr(l,e)};return t>1||this.__actions__.length||!(i instanceof _e)||!Qt(n)?this.thru(s):(i=i.slice(n,+n+(t?1:0)),i.__actions__.push({func:ir,args:[s],thisArg:r}),new Tt(i,this.__chain__).thru(function(l){return t&&!l.length&&l.push(r),l}))});function Kd(){return Ml(this)}function Yd(){return new Tt(this.value(),this.__chain__)}function Zd(){this.__values__===r&&(this.__values__=Jl(this.value()));var e=this.__index__>=this.__values__.length,t=e?r:this.__values__[this.__index__++];return{done:e,value:t}}function Qd(){return this}function Xd(e){for(var t,n=this;n instanceof Fi;){var i=Ol(n);i.__index__=0,i.__values__=r,t?s.__wrapped__=i:t=i;var s=i;n=n.__wrapped__}return s.__wrapped__=e,t}function Jd(){var e=this.__wrapped__;if(e instanceof _e){var t=e;return this.__actions__.length&&(t=new _e(this)),t=t.reverse(),t.__actions__.push({func:ir,args:[hs],thisArg:r}),new Tt(t,this.__chain__)}return this.thru(hs)}function jd(){return el(this.__wrapped__,this.__actions__)}var ep=Zi(function(e,t,n){Ae.call(e,n)?++e[n]:Kt(e,n,1)});function tp(e,t,n){var i=ne(e)?po:Gf;return n&&tt(e,t,n)&&(t=r),i(e,K(t,3))}function np(e,t){var n=ne(e)?on:Uo;return n(e,K(t,3))}var ip=cl(kl),rp=cl(Dl);function sp(e,t){return Ke(rr(e,t),1)}function op(e,t){return Ke(rr(e,t),I)}function lp(e,t,n){return n=n===r?1:re(n),Ke(rr(e,t),n)}function Bl(e,t){var n=ne(e)?At:fn;return n(e,K(t,3))}function Wl(e,t){var n=ne(e)?$u:Po;return n(e,K(t,3))}var ap=Zi(function(e,t,n){Ae.call(e,n)?e[n].push(t):Kt(e,n,[t])});function up(e,t,n,i){e=ot(e)?e:Zn(e),n=n&&!i?re(n):0;var s=e.length;return n<0&&(n=He(s+n,0)),ur(e)?n<=s&&e.indexOf(t,n)>-1:!!s&&Un(e,t,n)>-1}var fp=ae(function(e,t,n){var i=-1,s=typeof t=="function",l=ot(e)?m(e.length):[];return fn(e,function(u){l[++i]=s?gt(t,u,n):ai(u,t,n)}),l}),cp=Zi(function(e,t,n){Kt(e,n,t)});function rr(e,t){var n=ne(e)?De:No;return n(e,K(t,3))}function dp(e,t,n,i){return e==null?[]:(ne(t)||(t=t==null?[]:[t]),n=i?r:n,ne(n)||(n=n==null?[]:[n]),Ko(e,t,n))}var pp=Zi(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function gp(e,t,n){var i=ne(e)?zr:vo,s=arguments.length<3;return i(e,K(t,4),n,s,fn)}function hp(e,t,n){var i=ne(e)?Tu:vo,s=arguments.length<3;return i(e,K(t,4),n,s,Po)}function _p(e,t){var n=ne(e)?on:Uo;return n(e,lr(K(t,3)))}function vp(e){var t=ne(e)?ko:uc;return t(e)}function mp(e,t,n){(n?tt(e,t,n):t===r)?t=1:t=re(t);var i=ne(e)?Wf:fc;return i(e,t)}function yp(e){var t=ne(e)?qf:dc;return t(e)}function xp(e){if(e==null)return 0;if(ot(e))return ur(e)?Bn(e):e.length;var t=Je(e);return t==dt||t==pt?e.size:Kr(e).length}function bp(e,t,n){var i=ne(e)?Ir:pc;return n&&tt(e,t,n)&&(t=r),i(e,K(t,3))}var wp=ae(function(e,t){if(e==null)return[];var n=t.length;return n>1&&tt(e,t[0],t[1])?t=[]:n>2&&tt(t[0],t[1],t[2])&&(t=[t[0]]),Ko(e,Ke(t,1),[])}),sr=tf||function(){return Ve.Date.now()};function Sp(e,t){if(typeof t!="function")throw new $t(_);return e=re(e),function(){if(--e<1)return t.apply(this,arguments)}}function ql(e,t,n){return t=n?r:t,t=e&&t==null?e.length:t,Yt(e,se,r,r,r,r,t)}function Fl(e,t){var n;if(typeof t!="function")throw new $t(_);return e=re(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var vs=ae(function(e,t,n){var i=M;if(n.length){var s=an(n,Kn(vs));i|=L}return Yt(e,i,t,n,s)}),Nl=ae(function(e,t,n){var i=M|ge;if(n.length){var s=an(n,Kn(Nl));i|=L}return Yt(t,i,e,n,s)});function Hl(e,t,n){t=n?r:t;var i=Yt(e,fe,r,r,r,r,r,t);return i.placeholder=Hl.placeholder,i}function Gl(e,t,n){t=n?r:t;var i=Yt(e,q,r,r,r,r,r,t);return i.placeholder=Gl.placeholder,i}function Vl(e,t,n){var i,s,l,u,c,p,w=0,S=!1,C=!1,P=!0;if(typeof e!="function")throw new $t(_);t=Rt(t)||0,Le(n)&&(S=!!n.leading,C="maxWait"in n,l=C?He(Rt(n.maxWait)||0,t):l,P="trailing"in n?!!n.trailing:P);function H(Fe){var Et=i,jt=s;return i=s=r,w=Fe,u=e.apply(jt,Et),u}function Z(Fe){return w=Fe,c=pi(ce,t),S?H(Fe):u}function oe(Fe){var Et=Fe-p,jt=Fe-w,ca=t-Et;return C?Xe(ca,l-jt):ca}function Q(Fe){var Et=Fe-p,jt=Fe-w;return p===r||Et>=t||Et<0||C&&jt>=l}function ce(){var Fe=sr();if(Q(Fe))return ve(Fe);c=pi(ce,oe(Fe))}function ve(Fe){return c=r,P&&i?H(Fe):(i=s=r,u)}function mt(){c!==r&&nl(c),w=0,i=p=s=c=r}function nt(){return c===r?u:ve(sr())}function yt(){var Fe=sr(),Et=Q(Fe);if(i=arguments,s=this,p=Fe,Et){if(c===r)return Z(p);if(C)return nl(c),c=pi(ce,t),H(p)}return c===r&&(c=pi(ce,t)),u}return yt.cancel=mt,yt.flush=nt,yt}var Ap=ae(function(e,t){return Eo(e,1,t)}),$p=ae(function(e,t,n){return Eo(e,Rt(t)||0,n)});function Tp(e){return Yt(e,Re)}function or(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new $t(_);var n=function(){var i=arguments,s=t?t.apply(this,i):i[0],l=n.cache;if(l.has(s))return l.get(s);var u=e.apply(this,i);return n.cache=l.set(s,u)||l,u};return n.cache=new(or.Cache||Vt),n}or.Cache=Vt;function lr(e){if(typeof e!="function")throw new $t(_);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Cp(e){return Fl(2,e)}var zp=gc(function(e,t){t=t.length==1&&ne(t[0])?De(t[0],ht(K())):De(Ke(t,1),ht(K()));var n=t.length;return ae(function(i){for(var s=-1,l=Xe(i.length,n);++s<l;)i[s]=t[s].call(this,i[s]);return gt(e,this,i)})}),ms=ae(function(e,t){var n=an(t,Kn(ms));return Yt(e,L,r,t,n)}),Kl=ae(function(e,t){var n=an(t,Kn(Kl));return Yt(e,Ee,r,t,n)}),Ip=Zt(function(e,t){return Yt(e,Te,r,r,r,t)});function Rp(e,t){if(typeof e!="function")throw new $t(_);return t=t===r?t:re(t),ae(e,t)}function Op(e,t){if(typeof e!="function")throw new $t(_);return t=t==null?0:He(re(t),0),ae(function(n){var i=n[t],s=pn(n,0,t);return i&&ln(s,i),gt(e,this,s)})}function kp(e,t,n){var i=!0,s=!0;if(typeof e!="function")throw new $t(_);return Le(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),Vl(e,t,{leading:i,maxWait:t,trailing:s})}function Dp(e){return ql(e,1)}function Lp(e,t){return ms(ns(t),e)}function Ep(){if(!arguments.length)return[];var e=arguments[0];return ne(e)?e:[e]}function Pp(e){return Ct(e,F)}function Up(e,t){return t=typeof t=="function"?t:r,Ct(e,F,t)}function Mp(e){return Ct(e,Y|F)}function Bp(e,t){return t=typeof t=="function"?t:r,Ct(e,Y|F,t)}function Wp(e,t){return t==null||Lo(e,t,Ge(t))}function Lt(e,t){return e===t||e!==e&&t!==t}var qp=ji(Hr),Fp=ji(function(e,t){return e>=t}),Cn=Wo(function(){return arguments}())?Wo:function(e){return Me(e)&&Ae.call(e,"callee")&&!To.call(e,"callee")},ne=m.isArray,Np=oo?ht(oo):Xf;function ot(e){return e!=null&&ar(e.length)&&!Xt(e)}function qe(e){return Me(e)&&ot(e)}function Hp(e){return e===!0||e===!1||Me(e)&&et(e)==Pt}var gn=rf||Is,Gp=lo?ht(lo):Jf;function Vp(e){return Me(e)&&e.nodeType===1&&!gi(e)}function Kp(e){if(e==null)return!0;if(ot(e)&&(ne(e)||typeof e=="string"||typeof e.splice=="function"||gn(e)||Yn(e)||Cn(e)))return!e.length;var t=Je(e);if(t==dt||t==pt)return!e.size;if(di(e))return!Kr(e).length;for(var n in e)if(Ae.call(e,n))return!1;return!0}function Yp(e,t){return ui(e,t)}function Zp(e,t,n){n=typeof n=="function"?n:r;var i=n?n(e,t):r;return i===r?ui(e,t,r,n):!!i}function ys(e){if(!Me(e))return!1;var t=et(e);return t==ct||t==$e||typeof e.message=="string"&&typeof e.name=="string"&&!gi(e)}function Qp(e){return typeof e=="number"&&zo(e)}function Xt(e){if(!Le(e))return!1;var t=et(e);return t==wt||t==In||t==Nt||t==vi}function Yl(e){return typeof e=="number"&&e==re(e)}function ar(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Be}function Le(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Me(e){return e!=null&&typeof e=="object"}var Zl=ao?ht(ao):ec;function Xp(e,t){return e===t||Vr(e,t,us(t))}function Jp(e,t,n){return n=typeof n=="function"?n:r,Vr(e,t,us(t),n)}function jp(e){return Ql(e)&&e!=+e}function eg(e){if(Uc(e))throw new te(O);return qo(e)}function tg(e){return e===null}function ng(e){return e==null}function Ql(e){return typeof e=="number"||Me(e)&&et(e)==en}function gi(e){if(!Me(e)||et(e)!=Ot)return!1;var t=Ei(e);if(t===null)return!0;var n=Ae.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Oi.call(n)==Xu}var xs=uo?ht(uo):tc;function ig(e){return Yl(e)&&e>=-9007199254740991&&e<=Be}var Xl=fo?ht(fo):nc;function ur(e){return typeof e=="string"||!ne(e)&&Me(e)&&et(e)==mn}function vt(e){return typeof e=="symbol"||Me(e)&&et(e)==Rn}var Yn=co?ht(co):ic;function rg(e){return e===r}function sg(e){return Me(e)&&Je(e)==nn}function og(e){return Me(e)&&et(e)==mi}var lg=ji(Yr),ag=ji(function(e,t){return e<=t});function Jl(e){if(!e)return[];if(ot(e))return ur(e)?kt(e):st(e);if(ti&&e[ti])return Bu(e[ti]());var t=Je(e),n=t==dt?Er:t==pt?zi:Zn;return n(e)}function Jt(e){if(!e)return e===0?e:0;if(e=Rt(e),e===I||e===-1/0){var t=e<0?-1:1;return t*We}return e===e?e:0}function re(e){var t=Jt(e),n=t%1;return t===t?n?t-n:t:0}function jl(e){return e?Sn(re(e),0,R):0}function Rt(e){if(typeof e=="number")return e;if(vt(e))return j;if(Le(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Le(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=mo(e);var n=Fa.test(e);return n||Ha.test(e)?wu(e.slice(2),n?2:8):qa.test(e)?j:+e}function ea(e){return Wt(e,lt(e))}function ug(e){return e?Sn(re(e),-9007199254740991,Be):e===0?e:0}function we(e){return e==null?"":_t(e)}var fg=Gn(function(e,t){if(di(t)||ot(t)){Wt(t,Ge(t),e);return}for(var n in t)Ae.call(t,n)&&oi(e,n,t[n])}),ta=Gn(function(e,t){Wt(t,lt(t),e)}),fr=Gn(function(e,t,n,i){Wt(t,lt(t),e,i)}),cg=Gn(function(e,t,n,i){Wt(t,Ge(t),e,i)}),dg=Zt(qr);function pg(e,t){var n=Hn(e);return t==null?n:Do(n,t)}var gg=ae(function(e,t){e=Ce(e);var n=-1,i=t.length,s=i>2?t[2]:r;for(s&&tt(t[0],t[1],s)&&(i=1);++n<i;)for(var l=t[n],u=lt(l),c=-1,p=u.length;++c<p;){var w=u[c],S=e[w];(S===r||Lt(S,qn[w])&&!Ae.call(e,w))&&(e[w]=l[w])}return e}),hg=ae(function(e){return e.push(r,ml),gt(na,r,e)});function _g(e,t){return go(e,K(t,3),Bt)}function vg(e,t){return go(e,K(t,3),Nr)}function mg(e,t){return e==null?e:Fr(e,K(t,3),lt)}function yg(e,t){return e==null?e:Mo(e,K(t,3),lt)}function xg(e,t){return e&&Bt(e,K(t,3))}function bg(e,t){return e&&Nr(e,K(t,3))}function wg(e){return e==null?[]:Gi(e,Ge(e))}function Sg(e){return e==null?[]:Gi(e,lt(e))}function bs(e,t,n){var i=e==null?r:An(e,t);return i===r?n:i}function Ag(e,t){return e!=null&&bl(e,t,Kf)}function ws(e,t){return e!=null&&bl(e,t,Yf)}var $g=pl(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=ki.call(t)),e[t]=n},As(at)),Tg=pl(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=ki.call(t)),Ae.call(e,t)?e[t].push(n):e[t]=[n]},K),Cg=ae(ai);function Ge(e){return ot(e)?Oo(e):Kr(e)}function lt(e){return ot(e)?Oo(e,!0):rc(e)}function zg(e,t){var n={};return t=K(t,3),Bt(e,function(i,s,l){Kt(n,t(i,s,l),i)}),n}function Ig(e,t){var n={};return t=K(t,3),Bt(e,function(i,s,l){Kt(n,s,t(i,s,l))}),n}var Rg=Gn(function(e,t,n){Vi(e,t,n)}),na=Gn(function(e,t,n,i){Vi(e,t,n,i)}),Og=Zt(function(e,t){var n={};if(e==null)return n;var i=!1;t=De(t,function(l){return l=dn(l,e),i||(i=l.length>1),l}),Wt(e,ls(e),n),i&&(n=Ct(n,Y|G|F,$c));for(var s=t.length;s--;)jr(n,t[s]);return n});function kg(e,t){return ia(e,lr(K(t)))}var Dg=Zt(function(e,t){return e==null?{}:oc(e,t)});function ia(e,t){if(e==null)return{};var n=De(ls(e),function(i){return[i]});return t=K(t),Yo(e,n,function(i,s){return t(i,s[0])})}function Lg(e,t,n){t=dn(t,e);var i=-1,s=t.length;for(s||(s=1,e=r);++i<s;){var l=e==null?r:e[qt(t[i])];l===r&&(i=s,l=n),e=Xt(l)?l.call(e):l}return e}function Eg(e,t,n){return e==null?e:fi(e,t,n)}function Pg(e,t,n,i){return i=typeof i=="function"?i:r,e==null?e:fi(e,t,n,i)}var ra=_l(Ge),sa=_l(lt);function Ug(e,t,n){var i=ne(e),s=i||gn(e)||Yn(e);if(t=K(t,4),n==null){var l=e&&e.constructor;s?n=i?new l:[]:Le(e)?n=Xt(l)?Hn(Ei(e)):{}:n={}}return(s?At:Bt)(e,function(u,c,p){return t(n,u,c,p)}),n}function Mg(e,t){return e==null?!0:jr(e,t)}function Bg(e,t,n){return e==null?e:jo(e,t,ns(n))}function Wg(e,t,n,i){return i=typeof i=="function"?i:r,e==null?e:jo(e,t,ns(n),i)}function Zn(e){return e==null?[]:Lr(e,Ge(e))}function qg(e){return e==null?[]:Lr(e,lt(e))}function Fg(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=Rt(n),n=n===n?n:0),t!==r&&(t=Rt(t),t=t===t?t:0),Sn(Rt(e),t,n)}function Ng(e,t,n){return t=Jt(t),n===r?(n=t,t=0):n=Jt(n),e=Rt(e),Zf(e,t,n)}function Hg(e,t,n){if(n&&typeof n!="boolean"&&tt(e,t,n)&&(t=n=r),n===r&&(typeof t=="boolean"?(n=t,t=r):typeof e=="boolean"&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=Jt(e),t===r?(t=e,e=0):t=Jt(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var s=Io();return Xe(e+s*(t-e+bu("1e-"+((s+"").length-1))),t)}return Qr(e,t)}var Gg=Vn(function(e,t,n){return t=t.toLowerCase(),e+(n?oa(t):t)});function oa(e){return Ss(we(e).toLowerCase())}function la(e){return e=we(e),e&&e.replace(Va,Lu).replace(cu,"")}function Vg(e,t,n){e=we(e),t=_t(t);var i=e.length;n=n===r?i:Sn(re(n),0,i);var s=n;return n-=t.length,n>=0&&e.slice(n,s)==t}function Kg(e){return e=we(e),e&&wi.test(e)?e.replace(jn,Eu):e}function Yg(e){return e=we(e),e&&ka.test(e)?e.replace(mr,"\\$&"):e}var Zg=Vn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Qg=Vn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Xg=fl("toLowerCase");function Jg(e,t,n){e=we(e),t=re(t);var i=t?Bn(e):0;if(!t||i>=t)return e;var s=(t-i)/2;return Ji(Bi(s),n)+e+Ji(Mi(s),n)}function jg(e,t,n){e=we(e),t=re(t);var i=t?Bn(e):0;return t&&i<t?e+Ji(t-i,n):e}function eh(e,t,n){e=we(e),t=re(t);var i=t?Bn(e):0;return t&&i<t?Ji(t-i,n)+e:e}function th(e,t,n){return n||t==null?t=0:t&&(t=+t),af(we(e).replace(yr,""),t||0)}function nh(e,t,n){return(n?tt(e,t,n):t===r)?t=1:t=re(t),Xr(we(e),t)}function ih(){var e=arguments,t=we(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var rh=Vn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function sh(e,t,n){return n&&typeof n!="number"&&tt(e,t,n)&&(t=n=r),n=n===r?R:n>>>0,n?(e=we(e),e&&(typeof t=="string"||t!=null&&!xs(t))&&(t=_t(t),!t&&Mn(e))?pn(kt(e),0,n):e.split(t,n)):[]}var oh=Vn(function(e,t,n){return e+(n?" ":"")+Ss(t)});function lh(e,t,n){return e=we(e),n=n==null?0:Sn(re(n),0,e.length),t=_t(t),e.slice(n,n+t.length)==t}function ah(e,t,n){var i=o.templateSettings;n&&tt(e,t,n)&&(t=r),e=we(e),t=fr({},t,i,vl);var s=fr({},t.imports,i.imports,vl),l=Ge(s),u=Lr(s,l),c,p,w=0,S=t.interpolate||Si,C="__p += '",P=Pr((t.escape||Si).source+"|"+S.source+"|"+(S===Ms?Wa:Si).source+"|"+(t.evaluate||Si).source+"|$","g"),H="//# sourceURL="+(Ae.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_u+"]")+`
`;e.replace(P,function(Q,ce,ve,mt,nt,yt){return ve||(ve=mt),C+=e.slice(w,yt).replace(Ka,Pu),ce&&(c=!0,C+=`' +
__e(`+ce+`) +
'`),nt&&(p=!0,C+=`';
`+nt+`;
__p += '`),ve&&(C+=`' +
((__t = (`+ve+`)) == null ? '' : __t) +
'`),w=yt+Q.length,Q}),C+=`';
`;var Z=Ae.call(t,"variable")&&t.variable;if(!Z)C=`with (obj) {
`+C+`
}
`;else if(Ma.test(Z))throw new te(z);C=(p?C.replace(yi,""):C).replace(xi,"$1").replace(bi,"$1;"),C="function("+(Z||"obj")+`) {
`+(Z?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(c?", __e = _.escape":"")+(p?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+C+`return __p
}`;var oe=ua(function(){return xe(l,H+"return "+C).apply(r,u)});if(oe.source=C,ys(oe))throw oe;return oe}function uh(e){return we(e).toLowerCase()}function fh(e){return we(e).toUpperCase()}function ch(e,t,n){if(e=we(e),e&&(n||t===r))return mo(e);if(!e||!(t=_t(t)))return e;var i=kt(e),s=kt(t),l=yo(i,s),u=xo(i,s)+1;return pn(i,l,u).join("")}function dh(e,t,n){if(e=we(e),e&&(n||t===r))return e.slice(0,wo(e)+1);if(!e||!(t=_t(t)))return e;var i=kt(e),s=xo(i,kt(t))+1;return pn(i,0,s).join("")}function ph(e,t,n){if(e=we(e),e&&(n||t===r))return e.replace(yr,"");if(!e||!(t=_t(t)))return e;var i=kt(e),s=yo(i,kt(t));return pn(i,s).join("")}function gh(e,t){var n=B,i=D;if(Le(t)){var s="separator"in t?t.separator:s;n="length"in t?re(t.length):n,i="omission"in t?_t(t.omission):i}e=we(e);var l=e.length;if(Mn(e)){var u=kt(e);l=u.length}if(n>=l)return e;var c=n-Bn(i);if(c<1)return i;var p=u?pn(u,0,c).join(""):e.slice(0,c);if(s===r)return p+i;if(u&&(c+=p.length-c),xs(s)){if(e.slice(c).search(s)){var w,S=p;for(s.global||(s=Pr(s.source,we(Bs.exec(s))+"g")),s.lastIndex=0;w=s.exec(S);)var C=w.index;p=p.slice(0,C===r?c:C)}}else if(e.indexOf(_t(s),c)!=c){var P=p.lastIndexOf(s);P>-1&&(p=p.slice(0,P))}return p+i}function hh(e){return e=we(e),e&&rt.test(e)?e.replace(Jn,Nu):e}var _h=Vn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Ss=fl("toUpperCase");function aa(e,t,n){return e=we(e),t=n?r:t,t===r?Mu(e)?Vu(e):Iu(e):e.match(t)||[]}var ua=ae(function(e,t){try{return gt(e,r,t)}catch(n){return ys(n)?n:new te(n)}}),vh=Zt(function(e,t){return At(t,function(n){n=qt(n),Kt(e,n,vs(e[n],e))}),e});function mh(e){var t=e==null?0:e.length,n=K();return e=t?De(e,function(i){if(typeof i[1]!="function")throw new $t(_);return[n(i[0]),i[1]]}):[],ae(function(i){for(var s=-1;++s<t;){var l=e[s];if(gt(l[0],this,i))return gt(l[1],this,i)}})}function yh(e){return Hf(Ct(e,Y))}function As(e){return function(){return e}}function xh(e,t){return e==null||e!==e?t:e}var bh=dl(),wh=dl(!0);function at(e){return e}function $s(e){return Fo(typeof e=="function"?e:Ct(e,Y))}function Sh(e){return Ho(Ct(e,Y))}function Ah(e,t){return Go(e,Ct(t,Y))}var $h=ae(function(e,t){return function(n){return ai(n,e,t)}}),Th=ae(function(e,t){return function(n){return ai(e,n,t)}});function Ts(e,t,n){var i=Ge(t),s=Gi(t,i);n==null&&!(Le(t)&&(s.length||!i.length))&&(n=t,t=e,e=this,s=Gi(t,Ge(t)));var l=!(Le(n)&&"chain"in n)||!!n.chain,u=Xt(e);return At(s,function(c){var p=t[c];e[c]=p,u&&(e.prototype[c]=function(){var w=this.__chain__;if(l||w){var S=e(this.__wrapped__),C=S.__actions__=st(this.__actions__);return C.push({func:p,args:arguments,thisArg:e}),S.__chain__=w,S}return p.apply(e,ln([this.value()],arguments))})}),e}function Ch(){return Ve._===this&&(Ve._=Ju),this}function Cs(){}function zh(e){return e=re(e),ae(function(t){return Vo(t,e)})}var Ih=rs(De),Rh=rs(po),Oh=rs(Ir);function fa(e){return cs(e)?Rr(qt(e)):lc(e)}function kh(e){return function(t){return e==null?r:An(e,t)}}var Dh=gl(),Lh=gl(!0);function zs(){return[]}function Is(){return!1}function Eh(){return{}}function Ph(){return""}function Uh(){return!0}function Mh(e,t){if(e=re(e),e<1||e>Be)return[];var n=R,i=Xe(e,R);t=K(t),e-=R;for(var s=Dr(i,t);++n<e;)t(n);return s}function Bh(e){return ne(e)?De(e,qt):vt(e)?[e]:st(Rl(we(e)))}function Wh(e){var t=++Qu;return we(e)+t}var qh=Xi(function(e,t){return e+t},0),Fh=ss("ceil"),Nh=Xi(function(e,t){return e/t},1),Hh=ss("floor");function Gh(e){return e&&e.length?Hi(e,at,Hr):r}function Vh(e,t){return e&&e.length?Hi(e,K(t,2),Hr):r}function Kh(e){return _o(e,at)}function Yh(e,t){return _o(e,K(t,2))}function Zh(e){return e&&e.length?Hi(e,at,Yr):r}function Qh(e,t){return e&&e.length?Hi(e,K(t,2),Yr):r}var Xh=Xi(function(e,t){return e*t},1),Jh=ss("round"),jh=Xi(function(e,t){return e-t},0);function e_(e){return e&&e.length?kr(e,at):0}function t_(e,t){return e&&e.length?kr(e,K(t,2)):0}return o.after=Sp,o.ary=ql,o.assign=fg,o.assignIn=ta,o.assignInWith=fr,o.assignWith=cg,o.at=dg,o.before=Fl,o.bind=vs,o.bindAll=vh,o.bindKey=Nl,o.castArray=Ep,o.chain=Ml,o.chunk=Hc,o.compact=Gc,o.concat=Vc,o.cond=mh,o.conforms=yh,o.constant=As,o.countBy=ep,o.create=pg,o.curry=Hl,o.curryRight=Gl,o.debounce=Vl,o.defaults=gg,o.defaultsDeep=hg,o.defer=Ap,o.delay=$p,o.difference=Kc,o.differenceBy=Yc,o.differenceWith=Zc,o.drop=Qc,o.dropRight=Xc,o.dropRightWhile=Jc,o.dropWhile=jc,o.fill=ed,o.filter=np,o.flatMap=sp,o.flatMapDeep=op,o.flatMapDepth=lp,o.flatten=Ll,o.flattenDeep=td,o.flattenDepth=nd,o.flip=Tp,o.flow=bh,o.flowRight=wh,o.fromPairs=id,o.functions=wg,o.functionsIn=Sg,o.groupBy=ap,o.initial=sd,o.intersection=od,o.intersectionBy=ld,o.intersectionWith=ad,o.invert=$g,o.invertBy=Tg,o.invokeMap=fp,o.iteratee=$s,o.keyBy=cp,o.keys=Ge,o.keysIn=lt,o.map=rr,o.mapKeys=zg,o.mapValues=Ig,o.matches=Sh,o.matchesProperty=Ah,o.memoize=or,o.merge=Rg,o.mergeWith=na,o.method=$h,o.methodOf=Th,o.mixin=Ts,o.negate=lr,o.nthArg=zh,o.omit=Og,o.omitBy=kg,o.once=Cp,o.orderBy=dp,o.over=Ih,o.overArgs=zp,o.overEvery=Rh,o.overSome=Oh,o.partial=ms,o.partialRight=Kl,o.partition=pp,o.pick=Dg,o.pickBy=ia,o.property=fa,o.propertyOf=kh,o.pull=dd,o.pullAll=Pl,o.pullAllBy=pd,o.pullAllWith=gd,o.pullAt=hd,o.range=Dh,o.rangeRight=Lh,o.rearg=Ip,o.reject=_p,o.remove=_d,o.rest=Rp,o.reverse=hs,o.sampleSize=mp,o.set=Eg,o.setWith=Pg,o.shuffle=yp,o.slice=vd,o.sortBy=wp,o.sortedUniq=Ad,o.sortedUniqBy=$d,o.split=sh,o.spread=Op,o.tail=Td,o.take=Cd,o.takeRight=zd,o.takeRightWhile=Id,o.takeWhile=Rd,o.tap=Gd,o.throttle=kp,o.thru=ir,o.toArray=Jl,o.toPairs=ra,o.toPairsIn=sa,o.toPath=Bh,o.toPlainObject=ea,o.transform=Ug,o.unary=Dp,o.union=Od,o.unionBy=kd,o.unionWith=Dd,o.uniq=Ld,o.uniqBy=Ed,o.uniqWith=Pd,o.unset=Mg,o.unzip=_s,o.unzipWith=Ul,o.update=Bg,o.updateWith=Wg,o.values=Zn,o.valuesIn=qg,o.without=Ud,o.words=aa,o.wrap=Lp,o.xor=Md,o.xorBy=Bd,o.xorWith=Wd,o.zip=qd,o.zipObject=Fd,o.zipObjectDeep=Nd,o.zipWith=Hd,o.entries=ra,o.entriesIn=sa,o.extend=ta,o.extendWith=fr,Ts(o,o),o.add=qh,o.attempt=ua,o.camelCase=Gg,o.capitalize=oa,o.ceil=Fh,o.clamp=Fg,o.clone=Pp,o.cloneDeep=Mp,o.cloneDeepWith=Bp,o.cloneWith=Up,o.conformsTo=Wp,o.deburr=la,o.defaultTo=xh,o.divide=Nh,o.endsWith=Vg,o.eq=Lt,o.escape=Kg,o.escapeRegExp=Yg,o.every=tp,o.find=ip,o.findIndex=kl,o.findKey=_g,o.findLast=rp,o.findLastIndex=Dl,o.findLastKey=vg,o.floor=Hh,o.forEach=Bl,o.forEachRight=Wl,o.forIn=mg,o.forInRight=yg,o.forOwn=xg,o.forOwnRight=bg,o.get=bs,o.gt=qp,o.gte=Fp,o.has=Ag,o.hasIn=ws,o.head=El,o.identity=at,o.includes=up,o.indexOf=rd,o.inRange=Ng,o.invoke=Cg,o.isArguments=Cn,o.isArray=ne,o.isArrayBuffer=Np,o.isArrayLike=ot,o.isArrayLikeObject=qe,o.isBoolean=Hp,o.isBuffer=gn,o.isDate=Gp,o.isElement=Vp,o.isEmpty=Kp,o.isEqual=Yp,o.isEqualWith=Zp,o.isError=ys,o.isFinite=Qp,o.isFunction=Xt,o.isInteger=Yl,o.isLength=ar,o.isMap=Zl,o.isMatch=Xp,o.isMatchWith=Jp,o.isNaN=jp,o.isNative=eg,o.isNil=ng,o.isNull=tg,o.isNumber=Ql,o.isObject=Le,o.isObjectLike=Me,o.isPlainObject=gi,o.isRegExp=xs,o.isSafeInteger=ig,o.isSet=Xl,o.isString=ur,o.isSymbol=vt,o.isTypedArray=Yn,o.isUndefined=rg,o.isWeakMap=sg,o.isWeakSet=og,o.join=ud,o.kebabCase=Zg,o.last=It,o.lastIndexOf=fd,o.lowerCase=Qg,o.lowerFirst=Xg,o.lt=lg,o.lte=ag,o.max=Gh,o.maxBy=Vh,o.mean=Kh,o.meanBy=Yh,o.min=Zh,o.minBy=Qh,o.stubArray=zs,o.stubFalse=Is,o.stubObject=Eh,o.stubString=Ph,o.stubTrue=Uh,o.multiply=Xh,o.nth=cd,o.noConflict=Ch,o.noop=Cs,o.now=sr,o.pad=Jg,o.padEnd=jg,o.padStart=eh,o.parseInt=th,o.random=Hg,o.reduce=gp,o.reduceRight=hp,o.repeat=nh,o.replace=ih,o.result=Lg,o.round=Jh,o.runInContext=d,o.sample=vp,o.size=xp,o.snakeCase=rh,o.some=bp,o.sortedIndex=md,o.sortedIndexBy=yd,o.sortedIndexOf=xd,o.sortedLastIndex=bd,o.sortedLastIndexBy=wd,o.sortedLastIndexOf=Sd,o.startCase=oh,o.startsWith=lh,o.subtract=jh,o.sum=e_,o.sumBy=t_,o.template=ah,o.times=Mh,o.toFinite=Jt,o.toInteger=re,o.toLength=jl,o.toLower=uh,o.toNumber=Rt,o.toSafeInteger=ug,o.toString=we,o.toUpper=fh,o.trim=ch,o.trimEnd=dh,o.trimStart=ph,o.truncate=gh,o.unescape=hh,o.uniqueId=Wh,o.upperCase=_h,o.upperFirst=Ss,o.each=Bl,o.eachRight=Wl,o.first=El,Ts(o,function(){var e={};return Bt(o,function(t,n){Ae.call(o.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),o.VERSION=g,At(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){o[e].placeholder=o}),At(["drop","take"],function(e,t){_e.prototype[e]=function(n){n=n===r?1:He(re(n),0);var i=this.__filtered__&&!t?new _e(this):this.clone();return i.__filtered__?i.__takeCount__=Xe(n,i.__takeCount__):i.__views__.push({size:Xe(n,R),type:e+(i.__dir__<0?"Right":"")}),i},_e.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),At(["filter","map","takeWhile"],function(e,t){var n=t+1,i=n==Pe||n==ze;_e.prototype[e]=function(s){var l=this.clone();return l.__iteratees__.push({iteratee:K(s,3),type:n}),l.__filtered__=l.__filtered__||i,l}}),At(["head","last"],function(e,t){var n="take"+(t?"Right":"");_e.prototype[e]=function(){return this[n](1).value()[0]}}),At(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");_e.prototype[e]=function(){return this.__filtered__?new _e(this):this[n](1)}}),_e.prototype.compact=function(){return this.filter(at)},_e.prototype.find=function(e){return this.filter(e).head()},_e.prototype.findLast=function(e){return this.reverse().find(e)},_e.prototype.invokeMap=ae(function(e,t){return typeof e=="function"?new _e(this):this.map(function(n){return ai(n,e,t)})}),_e.prototype.reject=function(e){return this.filter(lr(K(e)))},_e.prototype.slice=function(e,t){e=re(e);var n=this;return n.__filtered__&&(e>0||t<0)?new _e(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(t=re(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},_e.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},_e.prototype.toArray=function(){return this.take(R)},Bt(_e.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),s=o[i?"take"+(t=="last"?"Right":""):t],l=i||/^find/.test(t);s&&(o.prototype[t]=function(){var u=this.__wrapped__,c=i?[1]:arguments,p=u instanceof _e,w=c[0],S=p||ne(u),C=function(ce){var ve=s.apply(o,ln([ce],c));return i&&P?ve[0]:ve};S&&n&&typeof w=="function"&&w.length!=1&&(p=S=!1);var P=this.__chain__,H=!!this.__actions__.length,Z=l&&!P,oe=p&&!H;if(!l&&S){u=oe?u:new _e(this);var Q=e.apply(u,c);return Q.__actions__.push({func:ir,args:[C],thisArg:r}),new Tt(Q,P)}return Z&&oe?e.apply(this,c):(Q=this.thru(C),Z?i?Q.value()[0]:Q.value():Q)})}),At(["pop","push","shift","sort","splice","unshift"],function(e){var t=Ii[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);o.prototype[e]=function(){var s=arguments;if(i&&!this.__chain__){var l=this.value();return t.apply(ne(l)?l:[],s)}return this[n](function(u){return t.apply(ne(u)?u:[],s)})}}),Bt(_e.prototype,function(e,t){var n=o[t];if(n){var i=n.name+"";Ae.call(Nn,i)||(Nn[i]=[]),Nn[i].push({name:t,func:n})}}),Nn[Qi(r,ge).name]=[{name:"wrapper",func:r}],_e.prototype.clone=hf,_e.prototype.reverse=_f,_e.prototype.value=vf,o.prototype.at=Vd,o.prototype.chain=Kd,o.prototype.commit=Yd,o.prototype.next=Zd,o.prototype.plant=Xd,o.prototype.reverse=Jd,o.prototype.toJSON=o.prototype.valueOf=o.prototype.value=jd,o.prototype.first=o.prototype.head,ti&&(o.prototype[ti]=Qd),o},Wn=Ku();yn?((yn.exports=Wn)._=Wn,$r._=Wn):Ve._=Wn}).call(fv)}(hi,hi.exports)),hi.exports}var Ft=cv();const dv={class:""},pv={class:"group py-2"},gv={class:"flex items-center justify-between"},hv={class:"py-4"},_v={class:"flex flex-col gap-5"},vv={class:"flex flex-col gap-2"},mv={class:"flex flex-col gap-2 p-3 bg-gray-50 border border-gray-200 rounded-lg"},yv={class:"flex items-center justify-between"},xv={class:"flex flex-col gap-2"},bv={class:"flex flex-col p-3 bg-gray-50 border border-gray-200 rounded-lg"},wv={class:"flex items-center justify-between"},Sv={class:"flex items-center justify-between"},Av=ut({__name:"ReviewConfigAbilityItem",props:{app_id:{type:String,default:"",required:!0},review_config:{type:Object,default:{},required:!0}},setup(a){var Y,G,F,ie,N,M,ge,be,fe;const f=a,{loading:r,handleUpdateDraftAppConfig:g}=vn(),y=ue(!1),O=ue(!1),_=ue({enable:(Y=f.review_config)==null?void 0:Y.enable,keywords:(F=(G=f.review_config)==null?void 0:G.keywords)==null?void 0:F.join(`
`),inputs_config:{enable:(N=(ie=f.review_config)==null?void 0:ie.inputs_config)==null?void 0:N.enable,preset_response:(ge=(M=f.review_config)==null?void 0:M.inputs_config)==null?void 0:ge.preset_response},outputs_config:{enable:(fe=(be=f.review_config)==null?void 0:be.outputs_config)==null?void 0:fe.enable}}),z=ue({...Ft.cloneDeep(_.value)}),A=()=>Ft.isEqual(z.value,_.value),k=()=>{O.value=!1,_.value=Ft.cloneDeep(z.value)},V=async()=>{try{await g(f.app_id,{review_config:{enable:_.value.enable,keywords:_.value.keywords.split(/\r?\n/).filter(q=>q.trim()!==""),inputs_config:_.value.inputs_config,outputs_config:_.value.outputs_config}}),z.value=Ft.cloneDeep(_.value),await zn(),k()}catch{}};return dr(()=>f.review_config,q=>{(!y.value||!A())&&q&&Object.keys(q).length>0&&(_.value=Ft.cloneDeep({...q,keywords:q==null?void 0:q.keywords.join(`
`)}),z.value=Ft.cloneDeep({...q,keywords:q==null?void 0:q.keywords.join(`
`)}),y.value=!0)},{immediate:!0,deep:!0}),(q,L)=>{const Ee=$("icon-down"),se=$("a-button"),Te=$("a-doption"),Re=$("a-dropdown"),B=$("icon-settings"),D=$("a-collapse-item"),X=$("icon-close"),J=$("a-textarea"),Pe=$("a-switch"),Ue=$("a-space"),ze=$("a-modal");return T(),E("div",dv,[h(D,{key:"review_config",class:"app-ability-item review-config-ability-item"},{header:x(()=>L[7]||(L[7]=[v("div",{class:"text-gray-700 font-bold"},"内容审查",-1)])),extra:x(()=>[h(Re,{onSelect:L[1]||(L[1]=async I=>{if(!!I!==_.value.enable)try{_.value.enable=!!I,await zn(),await V()}catch{}})},{content:x(()=>[h(Te,{value:1,class:"text-xs py-1.5 text-gray-700"},{default:x(()=>L[8]||(L[8]=[pe("开启")])),_:1}),h(Te,{value:0,class:"text-xs py-1.5 text-red-700"},{default:x(()=>L[9]||(L[9]=[pe("关闭")])),_:1})]),default:x(()=>[h(se,{size:"mini",class:"rounded-lg flex items-center gap-1 px-1",onClick:L[0]||(L[0]=Qn(()=>{},["stop"]))},{default:x(()=>[pe(de(_.value.enable?"开启":"关闭")+" ",1),h(Ee)]),_:1})]),_:1})]),default:x(()=>[v("div",pv,[L[11]||(L[11]=v("div",{class:"text-xs text-gray-500 leading-[22px] group-hover:hidden"}," 对用户输入以及大语言模型输出内容进行审查。 ",-1)),h(se,{size:"small",long:"",class:"hidden group-hover:block rounded-lg transition-all",onClick:L[2]||(L[2]=I=>O.value=!0)},{icon:x(()=>[h(B)]),default:x(()=>[L[10]||(L[10]=pe(" 设置 "))]),_:1})])]),_:1}),h(ze,{visible:O.value,"hide-title":"",footer:!1,"modal-class":"rounded-xl",onCancel:k},{default:x(()=>[v("div",gv,[L[12]||(L[12]=v("div",{class:"text-lg font-bold text-gray-700"},"内容审核",-1)),h(se,{type:"text",class:"!text-gray-700",size:"small",onClick:k},{icon:x(()=>[h(X)]),_:1})]),v("div",hv,[v("div",_v,[v("div",vv,[L[13]||(L[13]=v("div",{class:"flex flex-col"},[v("div",{class:"flex items-center gap-1 text-gray-700"},[pe(" 关键词 "),v("div",{class:"text-red-700"},"*")]),v("div",{class:"text-gray-500 text-xs"},"每行一个，用换行符分割，最多填写100个关键词")],-1)),h(J,{"model-value":_.value.keywords,"onUpdate:modelValue":L[3]||(L[3]=I=>_.value.keywords=I),class:"bg-white rounded-lg border border-gray-200",placeholder:"每行一个，用换行符分隔。","max-length":100,"show-word-limit":"","auto-size":{minRows:4,maxRows:4},"word-length":I=>I.trim()===""?0:I.split(/\r?\n/).length,"word-slice":(I,Be)=>I.split(/\r?\n/).slice(0,Be).join(`
`)},null,8,["model-value","word-length","word-slice"])]),v("div",mv,[v("div",yv,[L[14]||(L[14]=v("div",{class:"text-gray-700"},"输入审查内容",-1)),h(Pe,{"model-value":_.value.inputs_config.enable,"onUpdate:modelValue":L[4]||(L[4]=I=>_.value.inputs_config.enable=I),size:"small",type:"round","checked-color":"#10b981","unchecked-color":"#556581"},null,8,["model-value"])]),v("div",xv,[L[15]||(L[15]=v("div",{class:"text-gray-700 text-xs"},"预设回复",-1)),h(J,{"model-value":_.value.inputs_config.preset_response,"onUpdate:modelValue":L[5]||(L[5]=I=>_.value.inputs_config.preset_response=I),placeholder:"这里是预设回复内容",class:"bg-white rounded-lg border border-gray-200","auto-size":{minRows:3,maxRows:3}},null,8,["model-value"])])]),v("div",bv,[v("div",wv,[L[16]||(L[16]=v("div",{class:"text-gray-700"},"输出审查内容",-1)),h(Pe,{"model-value":_.value.outputs_config.enable,"onUpdate:modelValue":L[6]||(L[6]=I=>_.value.outputs_config.enable=I),size:"small",type:"round","checked-color":"#10b981","unchecked-color":"#556581"},null,8,["model-value"])])])])]),v("div",Sv,[L[19]||(L[19]=v("div",{class:""},null,-1)),h(Ue,{size:16},{default:x(()=>[h(se,{class:"rounded-lg",onClick:k},{default:x(()=>L[17]||(L[17]=[pe("取消")])),_:1}),h(se,{loading:U(r),type:"primary",class:"rounded-lg",onClick:V},{default:x(()=>L[18]||(L[18]=[pe(" 保存 ")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["visible"])])}}}),$v={class:""},Tv={key:0,class:""},Cv={key:1,class:""},zv={key:2,class:""},Iv={key:0,class:"flex flex-col gap-1"},Rv={class:"flex items-center gap-2"},Ov={class:"flex flex-col flex-1 gap-1 h-9"},kv={class:"text-gray-700 font-bold leading-[18px] line-clamp-1 break-all"},Dv={class:"text-gray-500 text-xs line-clamp-1 break-all"},Lv={key:1,class:"text-xs text-gray-500 leading-[22px]"},Ev={class:"flex items-center justify-between mb-6"},Pv={class:"h-[calc(100vh-180px)] mb-4 overflow-scroll scrollbar-w-none"},Uv={class:"flex flex-col gap-2"},Mv=["onClick"],Bv={class:"line-clamp-1 text-gray-500 flex-1"},Wv={class:"flex items-center justify-between"},qv={class:""},Fv={class:"flex items-center justify-between"},Nv={class:"flex items-center gap-4 w-full pl-3"},Hv={class:"flex items-center gap-4 w-full pl-3"},Gv={class:"flex items-center justify-between"},Vv=ut({__name:"DatasetsAbilityItem",props:{app_id:{type:String,default:"",required:!0},retrieval_config:{type:Object,default:{},required:!0},datasets:{type:Array,default:[],required:!0}},emits:["update:datasets","update:retrieval_config"],setup(a,{emit:f}){const r=a,g=f,{loading:y,handleUpdateDraftAppConfig:O}=vn(),{loading:_,paginator:z,datasets:A,loadDatasets:k}=C_(),V=ue(!1),Y=ue(!1),G=ue(!1),F=ue([]),ie=ue([]),N=ue({}),M=ue({}),ge=ue(!1),be=async B=>{const{scrollTop:D,scrollHeight:X,clientHeight:J}=B.target;if(D+J>=X-10){if(_.value)return;await k()}},fe=()=>Ft.isEqual(F.value,ie.value),q=()=>Ft.isEqual(N.value,M.value),L=()=>{V.value=!1,F.value=ie.value,G.value=!1},Ee=()=>{Y.value=!1,N.value=M.value,ge.value=!1},se=B=>{const D=A[B];if(F.value.some(X=>X.id===D.id))F.value=F.value.filter(X=>X.id!==D.id);else{if(F.value.length>=5){_n.warning("关联知识库已超过5个，无法继续关联");return}F.value.push({id:D.id,name:D.name,icon:D.icon,description:D.description})}},Te=async()=>{try{await O(r.app_id,{datasets:F.value.map(B=>B.id)}),ie.value=F.value,await zn(),g("update:datasets",F.value),L()}catch(B){_n.error(B.message)}},Re=async()=>{try{await O(r.app_id,{retrieval_config:N.value}),M.value=N.value,g("update:retrieval_config",N.value),Ee()}catch(B){_n.error(B.message)}};return dr(()=>r.datasets,B=>{if((!G.value||!fe())&&B&&B.length>0){const D=r.datasets.map(X=>({id:X.id,name:X.name,icon:X.icon,description:X.description}));F.value=Ft.cloneDeep(D),ie.value=Ft.cloneDeep(D),G.value=!0}},{immediate:!0,deep:!0}),dr(()=>r.retrieval_config,B=>{(!ge.value||!q())&&B&&Object.keys(B).length>0&&(N.value={...B},M.value={...B},ge.value=!0)},{immediate:!0,deep:!0}),dr(()=>V.value,async B=>{B?await k(!0):A.splice(0,A.length)}),(B,D)=>{const X=$("icon-language"),J=$("a-button"),Pe=$("icon-plus"),Ue=$("a-space"),ze=$("a-avatar"),I=$("icon-delete"),Be=$("a-collapse-item"),We=$("icon-close"),j=$("a-empty"),R=$("a-spin"),le=$("a-col"),ee=$("a-row"),me=$("a-modal"),bt=$("a-radio-group"),ft=$("a-form-item"),Nt=$("a-slider"),Pt=$("a-input-number"),Ut=$("a-form");return T(),E("div",$v,[h(Be,{key:"datasets",class:"app-ability-item"},{header:x(()=>D[7]||(D[7]=[v("div",{class:"text-gray-700 font-bold"},"知识库",-1)])),extra:x(()=>[h(Ue,null,{default:x(()=>[h(J,{size:"mini",class:"rounded-lg px-2",onClick:D[0]||(D[0]=Qn($e=>Y.value=!0,["stop"]))},{icon:x(()=>[h(X)]),default:x(()=>{var $e,ct;return[(($e=a.retrieval_config)==null?void 0:$e.retrieval_strategy)==="semantic"?(T(),E("div",Tv," 相似度检索 ")):((ct=a.retrieval_config)==null?void 0:ct.retrieval_strategy)==="full_text"?(T(),E("div",Cv," 全文检索 ")):(T(),E("div",zv,"混合检索"))]}),_:1}),h(J,{size:"mini",type:"text",class:"!text-gray-700",onClick:D[1]||(D[1]=Qn($e=>V.value=!0,["stop"]))},{icon:x(()=>[h(Pe)]),_:1})]),_:1})]),default:x(()=>[r.datasets.length>0?(T(),E("div",Iv,[(T(!0),E(Ze,null,it(r.datasets,($e,ct)=>(T(),E("div",{key:$e.id,class:"flex items-center justify-between bg-white p-3 rounded-lg cursor-pointer hover:shadow-sm group"},[v("div",Rv,[h(ze,{size:36,shape:"square",class:"rounded flex-shrink-0","image-url":$e.icon},null,8,["image-url"]),v("div",Ov,[v("div",kv,de($e.name),1),v("div",Dv,de($e.description),1)])]),h(J,{size:"mini",type:"text",class:"hidden group-hover:block flex-shrink-0 ml-2 !text-red-700 rounded",onClick:async()=>{const wt=[...r.datasets];wt.splice(ct,1),await U(O)(r.app_id,{datasets:wt.map(In=>In.id)}),G.value=!1,g("update:datasets",wt)}},{icon:x(()=>[h(I)]),_:2},1032,["onClick"])]))),128))])):(T(),E("div",Lv," 引用文本类型的数据，实现知识问答，应用最多支持关联 5 个知识库。 "))]),_:1}),h(me,{visible:V.value,"hide-title":"",footer:!1,width:400,class:"datasets-modal","modal-class":"h-[calc(100vh-32px)] right-4",onCancel:L},{default:x(()=>[v("div",Ev,[D[8]||(D[8]=v("div",{class:"text-lg font-bold text-gray-700"},"选择引用知识库",-1)),h(J,{type:"text",class:"!text-gray-700",size:"small",onClick:L},{icon:x(()=>[h(We)]),_:1})]),v("div",Pv,[h(R,{loading:U(_),class:"block h-full scrollbar-w-none overflow-scroll",onScroll:be},{default:x(()=>[v("div",Uv,[(T(!0),E(Ze,null,it(U(A),($e,ct)=>(T(),E("div",{key:$e.id,class:xt(`flex items-center gap-2 border px-3 py-2 rounded-lg cursor-pointer hover:bg-blue-50 hover:border-blue-700 ${F.value.some(wt=>wt.id===$e.id)?"bg-blue-50 border-blue-700":""}`),onClick:()=>se(ct)},[h(ze,{size:24,shape:"square",class:"flex-shrink-0 rounded","image-url":$e.icon},null,8,["image-url"]),v("div",Bv,de($e.name),1)],10,Mv))),128)),U(A).length===0?(T(),Se(j,{key:0,description:"没有可用知识库",class:"h-[400px] flex flex-col items-center justify-center"})):ye("",!0)]),U(z).total_page>=2?(T(),Se(ee,{key:0},{default:x(()=>[U(z).current_page<=U(z).total_page?(T(),Se(le,{key:0,span:24,class:"!text-center"},{default:x(()=>[h(Ue,{class:"my-4"},{default:x(()=>[h(R),D[9]||(D[9]=v("div",{class:"text-gray-400"},"加载中",-1))]),_:1})]),_:1})):(T(),Se(le,{key:1,span:24,class:"!text-center"},{default:x(()=>D[10]||(D[10]=[v("div",{class:"text-gray-400 my-4"},"数据已加载完成",-1)])),_:1}))]),_:1})):ye("",!0)]),_:1},8,["loading"])]),v("div",Wv,[v("div",qv,de(F.value.length)+"个知识库被选中",1),h(Ue,{size:12},{default:x(()=>[h(J,{class:"rounded-lg",onClick:L},{default:x(()=>D[11]||(D[11]=[pe("取消")])),_:1}),h(J,{loading:U(y),type:"primary",class:"rounded-lg",onClick:Te},{default:x(()=>D[12]||(D[12]=[pe(" 添加 ")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["visible"]),h(me,{visible:Y.value,"hide-title":"",footer:!1,"modal-class":"rounded-xl",onCancel:Ee},{default:x(()=>[v("div",Fv,[D[13]||(D[13]=v("div",{class:"text-lg font-bold text-gray-700"},"检索设置",-1)),h(J,{type:"text",class:"!text-gray-700",size:"small",onClick:Ee},{icon:x(()=>[h(We)]),_:1})]),h(Ut,{model:N.value,onSubmit:Re,class:"pt-6"},{default:x(()=>[h(ft,{field:"retrieval_strategy",label:"检索策略","label-align":"left"},{default:x(()=>[h(bt,{"model-value":N.value.retrieval_strategy,"onUpdate:modelValue":D[2]||(D[2]=$e=>N.value.retrieval_strategy=$e),"default-value":"semantic",options:[{label:"混合策略",value:"hybrid"},{label:"全文检索",value:"full_text"},{label:"相似性检索",value:"semantic"}]},null,8,["model-value"])]),_:1}),h(ft,{field:"k",label:"最大召回数量"},{default:x(()=>[v("div",Nv,[h(Nt,{"model-value":N.value.k,"onUpdate:modelValue":D[3]||(D[3]=$e=>N.value.k=$e),step:1,min:1,max:10},null,8,["model-value"]),h(Pt,{"model-value":N.value.k,"onUpdate:modelValue":D[4]||(D[4]=$e=>N.value.k=$e),class:"w-[80px]","default-value":4},null,8,["model-value"])])]),_:1}),h(ft,{field:"score",label:"最小匹配度"},{default:x(()=>[v("div",Hv,[h(Nt,{"model-value":N.value.score,"onUpdate:modelValue":D[5]||(D[5]=$e=>N.value.score=$e),step:.01,min:0,max:.99},null,8,["model-value"]),h(Pt,{"model-value":N.value.score,"onUpdate:modelValue":D[6]||(D[6]=$e=>N.value.score=$e),class:"w-[80px]",min:0,max:.99,step:.01,precision:2,"default-value":.5},null,8,["model-value"])])]),_:1}),v("div",Gv,[D[16]||(D[16]=v("div",{class:""},null,-1)),h(Ue,{size:16},{default:x(()=>[h(J,{class:"rounded-lg",onClick:Ee},{default:x(()=>D[14]||(D[14]=[pe("取消")])),_:1}),h(J,{loading:U(y),type:"primary","html-type":"submit",class:"rounded-lg"},{default:x(()=>D[15]||(D[15]=[pe("保存")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["model"])]),_:1},8,["visible"])])}}}),Kv=()=>{const a=ue(!1),f=Xn({});return{loading:a,api_tool:f,loadApiTool:async(g,y)=>{try{a.value=!0;const _=(await z_(g,y)).data;Object.assign(f,_)}finally{a.value=!1}}}},Yv=()=>{const a=ue(!1),f=Xn([]),r={current_page:1,page_size:20,total_page:0,total_record:0},g=Xn({...r}),y=async(_=!1)=>{if(_)Object.assign(g,{...r});else if(g.current_page>g.total_page)return;try{a.value=!0;const A=(await I_(g.current_page,g.page_size,"")).data;O(A),g.current_page<=g.total_page&&(g.current_page+=1),_?f.splice(0,f.length,...A.list):f.push(...A.list)}finally{a.value=!1}},O=_=>{g.current_page=_.paginator.current_page,g.page_size=_.paginator.page_size,g.total_page=_.paginator.total_page,g.total_record=_.paginator.total_record};return{loading:a,api_tool_providers:f,paginator:g,loadApiToolProviders:y}},Zv=()=>{const a=ue(!1),f=Xn([]),r=async()=>{try{a.value=!0;const y=(await R_()).data;f.splice(0,f.length,...y)}finally{a.value=!1}};return ya(async()=>await r()),{loading:a,categories:f,loadCategories:r}},Qv=()=>{const a=ue(!1),f=Xn({});return{loading:a,builtin_tool:f,loadBuiltinTool:async(g,y)=>{try{a.value=!0;const _=(await O_(g,y)).data;Object.assign(f,_)}finally{a.value=!1}}}},Xv=()=>{const a=ue(!1),f=Xn([]);return{loading:a,builtin_tools:f,loadBuiltinTools:async()=>{try{a.value=!0;const y=(await k_()).data;f.splice(0,f.length,...y)}finally{a.value=!1}}}},Jv={class:""},jv={key:0,class:"flex flex-col gap-1"},em={class:"flex items-center gap-2"},tm={class:"flex flex-col gap-1 h-9"},nm={class:"text-gray-700 font-bold leading-[18px] line-clamp-1 break-all"},im={class:"text-gray-500 text-xs line-clamp-1 break-all"},rm={class:"hidden group-hover:flex items-center gap-1 flex-shrink-0 ml-2"},sm={key:1,class:"text-xs text-gray-500 leading-[22px]"},om={class:"flex items-center justify-between mb-6"},lm={class:"flex items-center"},am={class:"flex items-center gap-2"},um={class:"text-gray-700 font-bold max-w-[200px] line-clamp-1 break-all"},fm={class:"mx-4 text-gray-400"},cm={class:"flex items-center gap-6"},dm={key:0,class:"h-[calc(100vh-170px)] pb-4 overflow-scroll scrollbar-w-none"},pm={class:"text-gray-500 text-xs"},gm={key:0,class:""},hm={class:"flex flex-col gap-4"},_m={class:"flex items-center gap-2 text-xs"},vm={class:"text-gray-900 font-bold"},mm={class:"text-gray-500"},ym={key:0,class:"text-red-700"},xm={class:"text-xs text-gray-500"},bm={key:1,class:"h-[calc(100vh-170px)] pb-4 overflow-scroll scrollbar-w-none"},wm={class:"flex items-center gap-1"},Sm={class:"text-gray-700"},Am={key:0,class:"text-red-700"},$m={class:"flex items-center justify-between"},Tm={class:"flex w-full h-full"},Cm={class:"flex flex-col flex-shrink-0 bg-gray-50 w-[200px] h-full px-3 py-4 overflow-scroll scrollbar-w-none"},zm={class:"flex flex-col gap-1 mb-4"},Im={key:0,class:""},Rm={class:"flex flex-col gap-1"},Om=["onClick"],km=["innerHTML"],Dm={class:"flex-1 p-4"},Lm={class:"w-full flex items-center justify-between gap-2 mb-7"},Em={class:"text-lg font-bold text-gray-700"},Pm={key:0,class:"h-[calc(100vh-130px)] overflow-scroll scrollbar-w-none"},Um={class:"text-gray-900"},Mm={class:"flex flex-col gap-1"},Bm={class:"flex items-center gap-2"},Wm={class:"text-gray-900"},qm={key:0,class:""},Fm={key:1},Nm={class:"text-gray-900"},Hm={class:"flex flex-col gap-1"},Gm={class:"flex items-center gap-2"},Vm={class:"text-gray-900"},Km={key:0,class:""},Ym=ut({__name:"ToolsAbilityItem",props:{app_id:{type:String,default:"",required:!0},tools:{type:Array,default:[],required:!0}},emits:["update:tools"],setup(a,{emit:f}){const r=a,g=f,{loading:y,handleUpdateDraftAppConfig:O}=vn(),{loading:_,api_tool:z,loadApiTool:A}=Kv(),{loading:k,paginator:V,api_tool_providers:Y,loadApiToolProviders:G}=Yv(),{loading:F,builtin_tool:ie,loadBuiltinTool:N}=Qv(),{categories:M}=Zv(),{builtin_tools:ge,loadBuiltinTools:be}=Xv(),fe=ue(!1),q=ue("info"),L=ue({}),Ee=ue(-1),se=ue({}),Te=ue(!1),Re=ue("api_tool"),B=ue("all"),D=ma(()=>B.value==="all"?ge:ge.filter(j=>j.category===B.value)),X=async j=>{if(j===-1)return;Ee.value=j;const R=r.tools[j];R.type==="builtin_tool"?(await N(R.provider.name,R.tool.name),L.value={type:"builtin_tool",provider:{id:ie.provider.name,icon:ie.provider.icon,name:ie.provider.name,label:ie.provider.label,description:ie.provider.description},tool:{id:ie.name,name:ie.name,label:ie.label,description:ie.description,inputs:ie.inputs,params:ie.params}}):(await A(R.provider.id,R.tool.name),L.value={type:"api_tool",provider:{id:z.provider.id,icon:z.provider.icon,name:z.provider.name,label:z.provider.name,description:z.provider.description},tool:{id:z.name,name:z.name,label:z.name,description:z.description,inputs:ie.inputs,params:[]}});const le=R.tool.params;L.value.tool.params.forEach(ee=>{se.value[ee.name]=le[ee.name]??ee.default}),fe.value=!0},J=()=>{Ee.value=-1,fe.value=!1,q.value="info"},Pe=async()=>{if(r.tools[Ee.value].type==="api_tool"){J();return}const R=[...r.tools];R[Ee.value].tool.params=se.value,await O(r.app_id,{tools:R.map(le=>({type:le.type,params:le.tool.params,provider_id:le.provider.id,tool_id:le.tool.name}))}),g("update:tools",R),J()},Ue=async j=>{const R=[...r.tools];R.splice(j,1),await O(r.app_id,{tools:R.map(le=>({type:le.type,params:le.tool.params,provider_id:le.provider.id,tool_id:le.tool.name}))}),g("update:tools",R)},ze=async()=>{Te.value=!0,await G(!0),await be()},I=async j=>{const{scrollTop:R,scrollHeight:le,clientHeight:ee}=j.target;if(R+ee>=le-10){if(k.value)return;await G()}},Be=async(j,R)=>{let le={};if(Re.value==="api_tool"){const ee=Y[j],me=ee.tools[R];le={type:"api_tool",provider:{id:ee.id,name:ee.name,label:ee.name,icon:ee.icon,description:ee.description},tool:{id:me.name,name:me.name,label:me.name,description:me.description,params:{}}}}else{const ee=D.value[j],me=ee.tools[R],bt=me.params;le={type:"builtin_tool",provider:{id:ee.name,name:ee.name,label:ee.label,icon:`${da}/builtin-tools/${ee.name}/icon`,description:ee.description},tool:{id:me.name,name:me.name,label:me.label,description:me.description,params:bt.reduce((ft,Nt)=>(ft[Nt.name]=Nt.default,ft),{})}}}if(r.tools.some(ee=>ee.provider.id===le.provider.id&&ee.tool.name===le.tool.name)){const ee=[...r.tools].filter(me=>me.provider.id!==le.provider.id&&me.tool.name!==le.tool.name);await O(r.app_id,{tools:ee.map(me=>({type:me.type,params:me.tool.params,provider_id:me.provider.id,tool_id:me.tool.name}))}),g("update:tools",ee);return}else{if(r.tools.length>=5){_n.warning("一个Agent应用最多关联5个扩展插件");return}const ee=[...r.tools];ee.push(le),await O(r.app_id,{tools:ee.map(me=>({type:me.type,params:me.tool.params,provider_id:me.provider.id,tool_id:me.tool.name}))}),g("update:tools",ee)}},We=(j,R)=>r.tools.some(le=>le.provider.name===j.name&&le.tool.name===R.name);return(j,R)=>{const le=$("icon-plus"),ee=$("a-button"),me=$("a-avatar"),bt=$("icon-settings"),ft=$("icon-delete"),Nt=$("a-collapse-item"),Pt=$("icon-oblique-line"),Ut=$("icon-close"),$e=$("icon-info-circle"),ct=$("a-tooltip"),wt=$("a-select"),In=$("a-input"),dt=$("a-input-number"),en=$("a-radio"),_r=$("a-radio-group"),Ot=$("a-form-item"),_i=$("a-form"),vi=$("a-space"),tn=$("a-modal"),pt=$("router-link"),mn=$("icon-code"),Rn=$("icon-translate"),vr=$("icon-apps"),nn=$("a-empty"),mi=$("a-spin"),rn=$("a-col"),sn=$("a-row");return T(),E("div",Jv,[h(Nt,{key:"tools",class:"app-ability-item"},{header:x(()=>R[7]||(R[7]=[v("div",{class:"text-gray-700 font-bold"},"扩展插件",-1)])),extra:x(()=>[h(ee,{size:"mini",type:"text",class:"!text-gray-700",onClick:Qn(ze,["stop"])},{icon:x(()=>[h(le)]),_:1})]),default:x(()=>[r.tools.length>0?(T(),E("div",jv,[(T(!0),E(Ze,null,it(r.tools,(he,je)=>(T(),E("div",{key:je,class:"flex items-center justify-between bg-white p-3 rounded-lg cursor-pointer hover:shadow-sm group"},[v("div",em,[h(me,{size:36,shape:"square",class:"rounded flex-shrink-0","image-url":he.provider.icon},null,8,["image-url"]),v("div",tm,[v("div",nm,de(he.provider.label)+" / "+de(he.tool.label),1),v("div",im,de(he.tool.description),1)])]),v("div",rm,[h(ee,{loading:U(_)||U(F),size:"mini",type:"text",class:"!text-gray-700 rounded",onClick:async()=>await X(je)},{icon:x(()=>[h(bt)]),_:2},1032,["loading","onClick"]),h(ee,{loading:U(y),size:"mini",type:"text",class:"!text-red-700 rounded",onClick:async()=>await Ue(je)},{icon:x(()=>[h(ft)]),_:2},1032,["loading","onClick"])])]))),128))])):(T(),E("div",sm," 插件能够让智能体调用外部 API，例如搜索信息、浏览网页、生成图片等，扩展智能体的能力和使用场景。 "))]),_:1}),h(tn,{visible:fe.value,"hide-title":"",footer:!1,class:"tool-setting-modal","modal-class":"h-[calc(100vh-32px)] right-4",onCancel:J},{default:x(()=>{var he,je,Qe,Mt,On,kn,Dn,Ln,En,yi,xi,bi,Jn,jn;return[v("div",om,[v("div",lm,[v("div",am,[h(me,{size:24,shape:"circle","image-url":(je=(he=L.value)==null?void 0:he.provider)==null?void 0:je.icon},null,8,["image-url"]),v("div",um,de((Mt=(Qe=L.value)==null?void 0:Qe.tool)==null?void 0:Mt.label),1)]),v("div",fm,[h(Pt,{size:12})]),v("div",cm,[v("div",{class:xt(`text-gray-700 pt-1 cursor-pointer border-blue-700 hover:border-b-4 hover:font-bold transition-all ${q.value==="info"?"font-bold border-b-4":""}`),onClick:R[0]||(R[0]=rt=>q.value="info")}," 信息 ",2),L.value.type==="builtin_tool"&&((Dn=(kn=(On=L.value)==null?void 0:On.tool)==null?void 0:kn.params)==null?void 0:Dn.length)>0?(T(),E("div",{key:0,class:xt(`text-gray-700 pt-1 cursor-pointer border-blue-700 hover:border-b-4 hover:font-bold transition-all ${q.value==="setting"?"font-bold border-b-4":""}`),onClick:R[1]||(R[1]=rt=>q.value="setting")}," 设置 ",2)):ye("",!0)])]),h(ee,{size:"mini",type:"text",class:"!text-gray-700",onClick:J},{icon:x(()=>[h(Ut)]),_:1})]),q.value==="info"?(T(),E("div",dm,[R[9]||(R[9]=v("div",{class:"text-gray-70 font-bold mb-1"},"工具描述",-1)),v("div",pm,de((En=(Ln=L.value)==null?void 0:Ln.tool)==null?void 0:En.description),1),((bi=(xi=(yi=L.value)==null?void 0:yi.tool)==null?void 0:xi.inputs)==null?void 0:bi.length)>0?(T(),E("div",gm,[R[8]||(R[8]=v("div",{class:"flex items-center gap-2 my-4"},[v("div",{class:"text-xs font-bold text-gray-500"},"参数"),v("hr",{class:"flex-1"})],-1)),v("div",hm,[(T(!0),E(Ze,null,it((jn=(Jn=L.value)==null?void 0:Jn.tool)==null?void 0:jn.inputs,rt=>(T(),E("div",{key:rt.name,class:"flex flex-col gap-2"},[v("div",_m,[v("div",vm,de(rt.name),1),v("div",mm,de(U(s_)[rt.type]),1),rt.required?(T(),E("div",ym,"必填")):ye("",!0)]),v("div",xm,de(rt.description),1)]))),128))])])):ye("",!0)])):ye("",!0),q.value==="setting"?(T(),E("div",bm,[h(_i,{model:se.value,"onUpdate:model":R[2]||(R[2]=rt=>se.value=rt),layout:"vertical",class:""},{default:x(()=>{var rt,wi;return[(T(!0),E(Ze,null,it((wi=(rt=L.value)==null?void 0:rt.tool)==null?void 0:wi.params,Oe=>(T(),Se(Ot,{field:Oe.name},{label:x(()=>[v("div",wm,[v("div",Sm,de(Oe.label),1),Oe.required?(T(),E("div",Am,"*")):ye("",!0),h(ct,{content:Oe.label},{default:x(()=>[h($e)]),_:2},1032,["content"])])]),default:x(()=>[Oe.type==="select"?(T(),Se(wt,{key:0,"default-value":Oe.default,"model-value":se.value[Oe.name],"onUpdate:modelValue":Ht=>se.value[Oe.name]=Ht,placeholder:"请输入参数值",options:Oe.options},null,8,["default-value","model-value","onUpdate:modelValue","options"])):ye("",!0),Oe.type==="string"?(T(),Se(In,{key:1,placeholder:"请输入参数值","model-value":se.value[Oe.name],"onUpdate:modelValue":Ht=>se.value[Oe.name]=Ht,"default-value":Oe.default},null,8,["model-value","onUpdate:modelValue","default-value"])):ye("",!0),Oe.type==="number"?(T(),Se(dt,{key:2,placeholder:"请输入参数值","model-value":se.value[Oe.name],"onUpdate:modelValue":Ht=>se.value[Oe.name]=Ht,"default-value":Oe.default,min:Oe.min,max:Oe.max},null,8,["model-value","onUpdate:modelValue","default-value","min","max"])):ye("",!0),Oe.type==="boolean"?(T(),Se(_r,{key:3,"model-value":se.value[Oe.name],"onUpdate:modelValue":Ht=>se.value[Oe.name]=Ht,"default-value":Oe.default},{default:x(()=>[h(en,{value:!0},{default:x(()=>R[10]||(R[10]=[pe("开启")])),_:1}),h(en,{value:!1},{default:x(()=>R[11]||(R[11]=[pe("关闭")])),_:1})]),_:2},1032,["model-value","onUpdate:modelValue","default-value"])):ye("",!0)]),_:2},1032,["field"]))),256))]}),_:1},8,["model"])])):ye("",!0),v("div",$m,[R[14]||(R[14]=v("div",{class:""},null,-1)),h(vi,{size:12},{default:x(()=>[h(ee,{class:"rounded-lg",onClick:J},{default:x(()=>R[12]||(R[12]=[pe("取消")])),_:1}),h(ee,{loading:U(y),type:"primary",class:"rounded-lg",onClick:Pe},{default:x(()=>R[13]||(R[13]=[pe(" 保存 ")])),_:1},8,["loading"])]),_:1})])]}),_:1},8,["visible"]),h(tn,{visible:Te.value,"onUpdate:visible":R[6]||(R[6]=he=>Te.value=he),"hide-title":"",footer:!1,class:"tools-modal","modal-class":"right-4 h-[calc(100vh-32px)]"},{default:x(()=>[v("div",Tm,[v("div",Cm,[R[20]||(R[20]=v("div",{class:"text-gray-900 font-bold text-lg mb-4"},"添加插件",-1)),h(pt,{to:{name:"space-tools-list"}},{default:x(()=>[h(ee,{long:"",type:"primary",class:"rounded-lg mb-5"},{default:x(()=>R[15]||(R[15]=[pe("创建自定义插件")])),_:1})]),_:1}),v("div",zm,[v("div",{class:xt(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${Re.value==="api_tool"?"text-blue-700 bg-white":"text-gray-700"}`),onClick:R[3]||(R[3]=he=>Re.value="api_tool")},[h(mn),R[16]||(R[16]=pe(" 自定义插件 "))],2),v("div",{class:xt(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${Re.value==="builtin_tool"?"text-blue-700 bg-white":"text-gray-700"}`),onClick:R[4]||(R[4]=he=>Re.value="builtin_tool")},[h(Rn),R[17]||(R[17]=pe(" 内置插件 "))],2)]),Re.value==="builtin_tool"?(T(),E("div",Im,[R[19]||(R[19]=v("div",{class:"text-xs text-gray-500 mb-3"},"类别",-1)),v("div",Rm,[v("div",{class:xt(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${B.value==="all"?"text-blue-700 bg-white":"text-gray-700"}`),onClick:R[5]||(R[5]=he=>B.value="all")},[h(vr),R[18]||(R[18]=pe(" 全部 "))],2),(T(!0),E(Ze,null,it(U(M),he=>(T(),E("div",{key:he.name,class:xt(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${B.value===he.category?"text-blue-700 bg-white":" text-gray-700"}`),onClick:je=>B.value=he.category},[v("span",{innerHTML:he.icon},null,8,km),pe(" "+de(he.name),1)],10,Om))),128))])])):ye("",!0)]),v("div",Dm,[v("div",Lm,[v("div",Em,de(Re.value==="api_tool"?"自定义插件":"内置插件"),1),h(ee,{size:"mini",type:"text",class:"!text-gray-700 ml-6"},{icon:x(()=>[h(Ut)]),_:1})]),Re.value==="builtin_tool"?(T(),E("div",Pm,[(T(!0),E(Ze,null,it(D.value,(he,je)=>(T(),E("div",{key:he.name,class:"flex flex-col gap-3 mb-3"},[v("div",Um,de(he.label),1),v("div",Mm,[(T(!0),E(Ze,null,it(he.tools,(Qe,Mt)=>(T(),E("div",{key:Qe.name,class:xt(`flex items-center justify-between px-2 h-8 rounded-lg cursor-pointer hover:bg-gray-50 group ${We(he,Qe)?"bg-blue-50 border border-blue-700":""}`)},[v("div",Bm,[h(me,{size:20,shape:"circle","image-url":`${U(da)}/builtin-tools/${he.name}/icon`},null,8,["image-url"]),v("div",Wm,de(Qe.label),1)]),h(ee,{size:"mini",class:"hidden group-hover:block rounded px-1.5 flex-shrink-0",onClick:async()=>await Be(je,Mt)},{icon:x(()=>[h(le)]),default:x(()=>[pe(" "+de(We(he,Qe)?"删除":"添加"),1)]),_:2},1032,["onClick"])],2))),128))])]))),128)),D.value.length===0?(T(),E("div",qm,[h(nn,{description:"没有可用的内置插件",class:"h-[400px] flex flex-col items-center justify-center"})])):ye("",!0)])):ye("",!0),Re.value==="api_tool"?(T(),E("div",Fm,[h(mi,{loading:U(k),class:"block h-[calc(100vh-130px)] overflow-scroll scrollbar-w-none",onScroll:I},{default:x(()=>[(T(!0),E(Ze,null,it(U(Y),(he,je)=>(T(),E("div",{key:he.id,class:"flex flex-col gap-3 mb-3"},[v("div",Nm,de(he.name),1),v("div",Hm,[(T(!0),E(Ze,null,it(he.tools,(Qe,Mt)=>(T(),E("div",{key:Qe.name,class:xt(`flex items-center justify-between px-2 h-8 rounded-lg cursor-pointer hover:bg-gray-50 group ${We(he,Qe)?"bg-blue-50 border border-blue-700":""}`)},[v("div",Gm,[h(me,{size:20,shape:"circle","image-url":he.icon},null,8,["image-url"]),v("div",Vm,de(Qe.name),1)]),h(ee,{size:"mini",class:"hidden group-hover:block rounded px-1.5 flex-shrink-0",onClick:async()=>await Be(je,Mt)},{icon:x(()=>[h(le)]),default:x(()=>[pe(" "+de(We(he,Qe)?"删除":"添加"),1)]),_:2},1032,["onClick"])],2))),128))])]))),128)),U(Y).length===0?(T(),E("div",Km,[h(nn,{description:"没有可用的API插件",class:"h-[400px] flex flex-col items-center justify-center"})])):ye("",!0),U(V).total_page>=2?(T(),Se(sn,{key:1},{default:x(()=>[U(V).current_page<=U(V).total_page?(T(),Se(rn,{key:0,span:24,class:"!text-center"},{default:x(()=>[h(vi,{class:"my-4"},{default:x(()=>[h(mi),R[21]||(R[21]=v("div",{class:"text-gray-400"},"加载中",-1))]),_:1})]),_:1})):(T(),Se(rn,{key:1,span:24,class:"!text-center"},{default:x(()=>R[22]||(R[22]=[v("div",{class:"text-gray-400 my-4"},"数据已加载完成",-1)])),_:1}))]),_:1})):ye("",!0)]),_:1},8,["loading"])])):ye("",!0)])])]),_:1},8,["visible"])])}}}),Zm={class:"flex flex-col h-[calc(100vh-141px)]"},Qm={class:"flex-1 overflow-scroll scrollbar-w-none"},Xm=ut({__name:"AgentAppAbility",props:{app_id:{type:String,default:"",required:!0},draft_app_config:{type:Object,required:!0}},emits:["update:draft_app_config"],setup(a,{emit:f}){const r=["tools","datasets","long_term_memory","opening","suggested_after_answer","review_config"];return(g,y)=>{const O=$("icon-down"),_=$("icon-right"),z=$("a-collapse");return T(),E("div",Zm,[y[7]||(y[7]=v("div",{class:"p-4 text-gray-700 font-bold"},"应用能力",-1)),v("div",Qm,[h(z,{bordered:!1,"default-active-key":r},{"expand-icon":x(({active:A})=>[A?(T(),Se(O,{key:0})):(T(),Se(_,{key:1}))]),default:x(()=>[h(Ym,{tools:a.draft_app_config.tools,"onUpdate:tools":y[0]||(y[0]=A=>a.draft_app_config.tools=A),app_id:a.app_id},null,8,["tools","app_id"]),h(Vv,{retrieval_config:a.draft_app_config.retrieval_config,"onUpdate:retrieval_config":y[1]||(y[1]=A=>a.draft_app_config.retrieval_config=A),datasets:a.draft_app_config.datasets,"onUpdate:datasets":y[2]||(y[2]=A=>a.draft_app_config.datasets=A),app_id:a.app_id},null,8,["retrieval_config","datasets","app_id"]),h(j_,{long_term_memory:a.draft_app_config.long_term_memory,"onUpdate:long_term_memory":y[3]||(y[3]=A=>a.draft_app_config.long_term_memory=A),app_id:a.app_id},null,8,["long_term_memory","app_id"]),h(lv,{opening_questions:a.draft_app_config.opening_questions,"onUpdate:opening_questions":y[4]||(y[4]=A=>a.draft_app_config.opening_questions=A),opening_statement:a.draft_app_config.opening_statement,"onUpdate:opening_statement":y[5]||(y[5]=A=>a.draft_app_config.opening_statement=A),app_id:a.app_id},null,8,["opening_questions","opening_statement","app_id"]),h(uv,{suggested_after_answer:a.draft_app_config.suggested_after_answer,"onUpdate:suggested_after_answer":y[6]||(y[6]=A=>a.draft_app_config.suggested_after_answer=A),app_id:a.app_id},null,8,["suggested_after_answer","app_id"]),h(Av,{review_config:a.draft_app_config.review_config,app_id:a.app_id},null,8,["review_config","app_id"])]),_:1})])])}}});function Jm(){var a=window.navigator.userAgent,f=a.indexOf("MSIE ");if(f>0)return parseInt(a.substring(f+5,a.indexOf(".",f)),10);var r=a.indexOf("Trident/");if(r>0){var g=a.indexOf("rv:");return parseInt(a.substring(g+3,a.indexOf(".",g)),10)}var y=a.indexOf("Edge/");return y>0?parseInt(a.substring(y+5,a.indexOf(".",y)),10):-1}let pr;function Os(){Os.init||(Os.init=!0,pr=Jm()!==-1)}var hr={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Os(),zn(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const a=document.createElement("object");this._resizeObject=a,a.setAttribute("aria-hidden","true"),a.setAttribute("tabindex",-1),a.onload=this.addResizeHandlers,a.type="text/html",pr&&this.$el.appendChild(a),a.data="about:blank",pr||this.$el.appendChild(a)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!pr&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const jm=a_();o_("data-v-b329ee4c");const e0={class:"resize-observer",tabindex:"-1"};l_();const t0=jm((a,f,r,g,y,O)=>(T(),Se("div",e0)));hr.render=t0;hr.__scopeId="data-v-b329ee4c";hr.__file="src/components/ResizeObserver.vue";function gr(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gr=function(f){return typeof f}:gr=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},gr(a)}function n0(a,f){if(!(a instanceof f))throw new TypeError("Cannot call a class as a function")}function i0(a,f){for(var r=0;r<f.length;r++){var g=f[r];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(a,g.key,g)}}function r0(a,f,r){return i0(a.prototype,f),a}function ha(a){return s0(a)||o0(a)||l0(a)||a0()}function s0(a){if(Array.isArray(a))return ks(a)}function o0(a){if(typeof Symbol<"u"&&Symbol.iterator in Object(a))return Array.from(a)}function l0(a,f){if(a){if(typeof a=="string")return ks(a,f);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ks(a,f)}}function ks(a,f){(f==null||f>a.length)&&(f=a.length);for(var r=0,g=new Array(f);r<f;r++)g[r]=a[r];return g}function a0(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u0(a){var f;return typeof a=="function"?f={callback:a}:f=a,f}function f0(a,f){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},g,y,O,_=function(A){for(var k=arguments.length,V=new Array(k>1?k-1:0),Y=1;Y<k;Y++)V[Y-1]=arguments[Y];if(O=V,!(g&&A===y)){var G=r.leading;typeof G=="function"&&(G=G(A,y)),(!g||A!==y)&&G&&a.apply(void 0,[A].concat(ha(O))),y=A,clearTimeout(g),g=setTimeout(function(){a.apply(void 0,[A].concat(ha(O))),g=0},f)}};return _._clear=function(){clearTimeout(g),g=null},_}function wa(a,f){if(a===f)return!0;if(gr(a)==="object"){for(var r in a)if(!wa(a[r],f[r]))return!1;return!0}return!1}var c0=function(){function a(f,r,g){n0(this,a),this.el=f,this.observer=null,this.frozen=!1,this.createObserver(r,g)}return r0(a,[{key:"createObserver",value:function(r,g){var y=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=u0(r),this.callback=function(z,A){y.options.callback(z,A),z&&y.options.once&&(y.frozen=!0,y.destroyObserver())},this.callback&&this.options.throttle){var O=this.options.throttleOptions||{},_=O.leading;this.callback=f0(this.callback,this.options.throttle,{leading:function(A){return _==="both"||_==="visible"&&A||_==="hidden"&&!A}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(z){var A=z[0];if(z.length>1){var k=z.find(function(Y){return Y.isIntersecting});k&&(A=k)}if(y.callback){var V=A.isIntersecting&&A.intersectionRatio>=y.threshold;if(V===y.oldResult)return;y.oldResult=V,y.callback(V,A)}},this.options.intersection),zn(function(){y.observer&&y.observer.observe(y.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),a}();function Sa(a,f,r){var g=f.value;if(g)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var y=new c0(a,g,r);a._vue_visibilityState=y}}function d0(a,f,r){var g=f.value,y=f.oldValue;if(!wa(g,y)){var O=a._vue_visibilityState;if(!g){Aa(a);return}O?O.createObserver(g,r):Sa(a,{value:g},r)}}function Aa(a){var f=a._vue_visibilityState;f&&(f.destroyObserver(),delete a._vue_visibilityState)}var p0={beforeMount:Sa,updated:d0,unmounted:Aa};function g0(a){return{all:a=a||new Map,on:function(f,r){var g=a.get(f);g&&g.push(r)||a.set(f,[r])},off:function(f,r){var g=a.get(f);g&&g.splice(g.indexOf(r)>>>0,1)},emit:function(f,r){(a.get(f)||[]).slice().map(function(g){g(r)}),(a.get("*")||[]).slice().map(function(g){g(f,r)})}}}var h0={itemsLimit:1e3},_0=/(auto|scroll)/;function $a(a,f){return a.parentNode===null?f:$a(a.parentNode,f.concat([a]))}var Rs=function(f,r){return getComputedStyle(f,null).getPropertyValue(r)},v0=function(f){return Rs(f,"overflow")+Rs(f,"overflow-y")+Rs(f,"overflow-x")},m0=function(f){return _0.test(v0(f))};function _a(a){if(a instanceof HTMLElement||a instanceof SVGElement){for(var f=$a(a.parentNode,[]),r=0;r<f.length;r+=1)if(m0(f[r]))return f[r];return document.scrollingElement||document.documentElement}}function Ds(a){"@babel/helpers - typeof";return Ds=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},Ds(a)}var Ta={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(f){return["vertical","horizontal"].includes(f)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function Ca(){return this.items.length&&Ds(this.items[0])!=="object"}var Ls=!1;if(typeof window<"u"){Ls=!1;try{var y0=Object.defineProperty({},"passive",{get:function(){Ls=!0}});window.addEventListener("test",null,y0)}catch{}}let x0=0;var Ps={name:"RecycleScroller",components:{ResizeObserver:hr},directives:{ObserveVisibility:p0},props:{...Ta,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const a={"-1":{accumulator:0}},f=this.items,r=this.sizeField,g=this.minItemSize;let y=1e4,O=0,_;for(let z=0,A=f.length;z<A;z++)_=f[z][r]||g,_<y&&(y=_),O+=_,a[z]={accumulator:O,size:_};return this.$_computedMinItemSize=y,a}return[]},simpleArray:Ca,itemIndexByKey(){const{keyField:a,items:f}=this,r={};for(let g=0,y=f.length;g<y;g++)r[f[g][a]]=g;return r}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const a=this.$_lastUpdateScrollPosition;typeof a=="number"&&this.$nextTick(()=>{this.scrollToPosition(a)})},beforeUnmount(){this.removeListeners()},methods:{addView(a,f,r,g,y){const O=u_({id:x0++,index:f,used:!0,key:g,type:y}),_=f_({item:r,position:0,nr:O});return a.push(_),_},unuseView(a,f=!1){const r=this.$_unusedViews,g=a.nr.type;let y=r.get(g);y||(y=[],r.set(g,y)),y.push(a),f||(a.nr.used=!1,a.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(a){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const f=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:r}=this.updateVisibleItems(!1,!0);r||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});f(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&f()},this.updateInterval))}},handleVisibilityChange(a,f){this.ready&&(a||f.boundingClientRect.width!==0||f.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(a,f=!1){const r=this.itemSize,g=this.gridItems||1,y=this.itemSecondarySize||r,O=this.$_computedMinItemSize,_=this.typeField,z=this.simpleArray?null:this.keyField,A=this.items,k=A.length,V=this.sizes,Y=this.$_views,G=this.$_unusedViews,F=this.pool,ie=this.itemIndexByKey;let N,M,ge,be,fe;if(!k)N=M=be=fe=ge=0;else if(this.$_prerender)N=be=0,M=fe=Math.min(this.prerender,A.length),ge=null;else{const B=this.getScroll();if(f){let J=B.start-this.$_lastUpdateScrollPosition;if(J<0&&(J=-J),r===null&&J<O||J<r)return{continuous:!0}}this.$_lastUpdateScrollPosition=B.start;const D=this.buffer;B.start-=D,B.end+=D;let X=0;if(this.$refs.before&&(X=this.$refs.before.scrollHeight,B.start-=X),this.$refs.after){const J=this.$refs.after.scrollHeight;B.end+=J}if(r===null){let J,Pe=0,Ue=k-1,ze=~~(k/2),I;do I=ze,J=V[ze].accumulator,J<B.start?Pe=ze:ze<k-1&&V[ze+1].accumulator>B.start&&(Ue=ze),ze=~~((Pe+Ue)/2);while(ze!==I);for(ze<0&&(ze=0),N=ze,ge=V[k-1].accumulator,M=ze;M<k&&V[M].accumulator<B.end;M++);for(M===-1?M=A.length-1:(M++,M>k&&(M=k)),be=N;be<k&&X+V[be].accumulator<B.start;be++);for(fe=be;fe<k&&X+V[fe].accumulator<B.end;fe++);}else{N=~~(B.start/r*g);const J=N%g;N-=J,M=Math.ceil(B.end/r*g),be=Math.max(0,Math.floor((B.start-X)/r*g)),fe=Math.floor((B.end-X)/r*g),N<0&&(N=0),M>k&&(M=k),be<0&&(be=0),fe>k&&(fe=k),ge=Math.ceil(k/g)*r}}M-N>h0.itemsLimit&&this.itemsLimitError(),this.totalSize=ge;let q;const L=N<=this.$_endIndex&&M>=this.$_startIndex;if(L)for(let B=0,D=F.length;B<D;B++)q=F[B],q.nr.used&&(a&&(q.nr.index=ie[q.item[z]]),(q.nr.index==null||q.nr.index<N||q.nr.index>=M)&&this.unuseView(q));const Ee=L?null:new Map;let se,Te,Re;for(let B=N;B<M;B++){se=A[B];const D=z?se[z]:se;if(D==null)throw new Error(`Key is ${D} on item (keyField is '${z}')`);if(q=Y.get(D),!r&&!V[B].size){q&&this.unuseView(q);continue}Te=se[_];let X=G.get(Te),J=!1;if(!q)L?X&&X.length?q=X.pop():q=this.addView(F,B,se,D,Te):(Re=Ee.get(Te)||0,(!X||Re>=X.length)&&(q=this.addView(F,B,se,D,Te),this.unuseView(q,!0),X=G.get(Te)),q=X[Re],Ee.set(Te,Re+1)),Y.delete(q.nr.key),q.nr.used=!0,q.nr.index=B,q.nr.key=D,q.nr.type=Te,Y.set(D,q),J=!0;else if(!q.nr.used&&(q.nr.used=!0,J=!0,X)){const Pe=X.indexOf(q);Pe!==-1&&X.splice(Pe,1)}q.item=se,J&&(B===A.length-1&&this.$emit("scroll-end"),B===0&&this.$emit("scroll-start")),r===null?(q.position=V[B-1].accumulator,q.offset=0):(q.position=Math.floor(B/g)*r,q.offset=B%g*y)}return this.$_startIndex=N,this.$_endIndex=M,this.emitUpdate&&this.$emit("update",N,M,be,fe),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:L}},getListenerTarget(){let a=_a(this.$el);return window.document&&(a===window.document.documentElement||a===window.document.body)&&(a=window),a},getScroll(){const{$el:a,direction:f}=this,r=f==="vertical";let g;if(this.pageMode){const y=a.getBoundingClientRect(),O=r?y.height:y.width;let _=-(r?y.top:y.left),z=r?window.innerHeight:window.innerWidth;_<0&&(z+=_,_=0),_+z>O&&(z=O-_),g={start:_,end:_+z}}else r?g={start:a.scrollTop,end:a.scrollTop+a.clientHeight}:g={start:a.scrollLeft,end:a.scrollLeft+a.clientWidth};return g},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,Ls?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(a){let f;const r=this.gridItems||1;this.itemSize===null?f=a>0?this.sizes[a-1].accumulator:0:f=Math.floor(a/r)*this.itemSize,this.scrollToPosition(f)},scrollToPosition(a){const f=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let r,g,y;if(this.pageMode){const O=_a(this.$el),_=O.tagName==="HTML"?0:O[f.scroll],z=O.getBoundingClientRect(),k=this.$el.getBoundingClientRect()[f.start]-z[f.start];r=O,g=f.scroll,y=a+_+k}else r=this.$el,g=f.scroll,y=a;r[g]=y},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((a,f)=>a.nr.index-f.nr.index)}}};const b0={key:0,ref:"before",class:"vue-recycle-scroller__slot"},w0={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function S0(a,f,r,g,y,O){const _=$("ResizeObserver"),z=c_("observe-visibility");return Es((T(),E("div",{class:xt(["vue-recycle-scroller",{ready:y.ready,"page-mode":r.pageMode,[`direction-${a.direction}`]:!0}]),onScrollPassive:f[0]||(f[0]=(...A)=>O.handleScroll&&O.handleScroll(...A))},[a.$slots.before?(T(),E("div",b0,[hn(a.$slots,"before")],512)):ye("v-if",!0),(T(),Se(pa(r.listTag),{ref:"wrapper",style:p_({[a.direction==="vertical"?"minHeight":"minWidth"]:y.totalSize+"px"}),class:xt(["vue-recycle-scroller__item-wrapper",r.listClass])},{default:x(()=>[(T(!0),E(Ze,null,it(y.pool,A=>(T(),Se(pa(r.itemTag),xa({key:A.nr.id,style:y.ready?{transform:`translate${a.direction==="vertical"?"Y":"X"}(${A.position}px) translate${a.direction==="vertical"?"X":"Y"}(${A.offset}px)`,width:r.gridItems?`${a.direction==="vertical"&&r.itemSecondarySize||r.itemSize}px`:void 0,height:r.gridItems?`${a.direction==="horizontal"&&r.itemSecondarySize||r.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[r.itemClass,{hover:!r.skipHover&&y.hoverKey===A.nr.key}]]},d_(r.skipHover?{}:{mouseenter:()=>{y.hoverKey=A.nr.key},mouseleave:()=>{y.hoverKey=null}})),{default:x(()=>[hn(a.$slots,"default",{item:A.item,index:A.nr.index,active:A.nr.used})]),_:2},1040,["style","class"]))),128)),hn(a.$slots,"empty")]),_:3},8,["style","class"])),a.$slots.after?(T(),E("div",w0,[hn(a.$slots,"after")],512)):ye("v-if",!0),h(_,{onNotify:O.handleResize},null,8,["onNotify"])],34)),[[z,O.handleVisibilityChange]])}Ps.render=S0;Ps.__file="src/components/RecycleScroller.vue";var Us={name:"DynamicScroller",components:{RecycleScroller:Ps},provide(){return typeof ResizeObserver<"u"&&(this.$_resizeObserver=new ResizeObserver(a=>{requestAnimationFrame(()=>{if(Array.isArray(a)){for(const f of a)if(f.target&&f.target.$_vs_onResize){let r,g;if(f.borderBoxSize){const y=f.borderBoxSize[0];r=y.inlineSize,g=y.blockSize}else r=f.contentRect.width,g=f.contentRect.height;f.target.$_vs_onResize(f.target.$_vs_id,r,g)}}})})),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},inheritAttrs:!1,props:{...Ta,minItemSize:{type:[Number,String],required:!0}},emits:["resize","visible"],data(){return{vscrollData:{active:!0,sizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray:Ca,itemsWithSize(){const a=[],{items:f,keyField:r,simpleArray:g}=this,y=this.vscrollData.sizes,O=f.length;for(let _=0;_<O;_++){const z=f[_],A=g?_:z[r];let k=y[A];typeof k>"u"&&!this.$_undefinedMap[A]&&(k=0),a.push({item:z,id:A,size:k})}return a}},watch:{items(){this.forceUpdate()},simpleArray:{handler(a){this.vscrollData.simpleArray=a},immediate:!0},direction(a){this.forceUpdate(!0)},itemsWithSize(a,f){const r=this.$el.scrollTop;let g=0,y=0;const O=Math.min(a.length,f.length);for(let z=0;z<O&&!(g>=r);z++)g+=f[z].size||this.minItemSize,y+=a[z].size||this.minItemSize;const _=y-g;_!==0&&(this.$el.scrollTop+=_)}},beforeCreate(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={},this.$_events=g0()},activated(){this.vscrollData.active=!0},deactivated(){this.vscrollData.active=!1},unmounted(){this.$_events.all.clear()},methods:{onScrollerResize(){this.$refs.scroller&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible(){this.$_events.emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate(a=!1){(a||this.simpleArray)&&(this.vscrollData.sizes={}),this.$_events.emit("vscroll:update",{force:!0})},scrollToItem(a){const f=this.$refs.scroller;f&&f.scrollToItem(a)},getItemSize(a,f=void 0){const r=this.simpleArray?f??this.items.indexOf(a):a[this.keyField];return this.vscrollData.sizes[r]||0},scrollToBottom(){if(this.$_scrollingToBottom)return;this.$_scrollingToBottom=!0;const a=this.$el;this.$nextTick(()=>{a.scrollTop=a.scrollHeight+5e3;const f=()=>{a.scrollTop=a.scrollHeight+5e3,requestAnimationFrame(()=>{a.scrollTop=a.scrollHeight+5e3,this.$_undefinedSizes===0?this.$_scrollingToBottom=!1:requestAnimationFrame(f)})};requestAnimationFrame(f)})}}};function A0(a,f,r,g,y,O){const _=$("RecycleScroller");return T(),Se(_,xa({ref:"scroller",items:O.itemsWithSize,"min-item-size":r.minItemSize,direction:a.direction,"key-field":"id","list-tag":a.listTag,"item-tag":a.itemTag},a.$attrs,{onResize:O.onScrollerResize,onVisible:O.onScrollerVisible}),{default:x(({item:z,index:A,active:k})=>[hn(a.$slots,"default",g_(h_({item:z.item,index:A,active:k,itemWithSize:z})))]),before:x(()=>[hn(a.$slots,"before")]),after:x(()=>[hn(a.$slots,"after")]),empty:x(()=>[hn(a.$slots,"empty")]),_:3},16,["items","min-item-size","direction","list-tag","item-tag","onResize","onVisible"])}Us.render=A0;Us.__file="src/components/DynamicScroller.vue";var za={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},emits:["resize"],computed:{id(){if(this.vscrollData.simpleArray)return this.index;if(this.vscrollData.keyField in this.item)return this.item[this.vscrollData.keyField];throw new Error(`keyField '${this.vscrollData.keyField}' not found in your item. You should set a valid keyField prop on your Scroller`)},size(){return this.vscrollData.sizes[this.id]||0},finalActive(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id(a,f){if(this.$el.$_vs_id=this.id,this.size||this.onDataUpdate(),this.$_sizeObserved){const r=this.vscrollData.sizes[f],g=this.vscrollData.sizes[a];r!=null&&r!==g&&this.applySize(r)}},finalActive(a){this.size||(a?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?a?this.observeSize():this.unobserveSize():a&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created(){if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){for(const a in this.sizeDependencies)this.$watch(()=>this.sizeDependencies[a],this.onDataUpdate);this.vscrollParent.$_events.on("vscroll:update",this.onVscrollUpdate)}},mounted(){this.finalActive&&(this.updateSize(),this.observeSize())},beforeUnmount(){this.vscrollParent.$_events.off("vscroll:update",this.onVscrollUpdate),this.unobserveSize()},methods:{updateSize(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData(){this.watchData&&!this.vscrollResizeObserver?this.$_watchData=this.$watch("item",()=>{this.onDataUpdate()},{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate({force:a}){!this.finalActive&&a&&(this.$_pendingVScrollUpdate=this.id),(this.$_forceNextVScrollUpdate===this.id||a||!this.size)&&this.updateSize()},onDataUpdate(){this.updateSize()},computeSize(a){this.$nextTick(()=>{if(this.id===a){const f=this.$el.offsetWidth,r=this.$el.offsetHeight;this.applyWidthHeight(f,r)}this.$_pendingSizeUpdate=null})},applyWidthHeight(a,f){const r=~~(this.vscrollParent.direction==="vertical"?f:a);r&&this.size!==r&&this.applySize(r)},applySize(a){this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.vscrollData.sizes[this.id]=a,this.emitResize&&this.$emit("resize",this.id)},observeSize(){this.vscrollResizeObserver&&(this.$_sizeObserved||(this.vscrollResizeObserver.observe(this.$el),this.$el.$_vs_id=this.id,this.$el.$_vs_onResize=this.onResize,this.$_sizeObserved=!0))},unobserveSize(){this.vscrollResizeObserver&&this.$_sizeObserved&&(this.vscrollResizeObserver.unobserve(this.$el),this.$el.$_vs_onResize=void 0,this.$_sizeObserved=!1)},onResize(a,f,r){this.id===a&&this.applyWidthHeight(f,r)}},render(){return __(this.tag,this.$slots.default())}};za.__file="src/components/DynamicScrollerItem.vue";const $0={class:"flex gap-2"},T0={class:"flex flex-col items-start gap-2"},C0={class:"text-gray-700 font-bold"},z0={class:"bg-blue-100 border border-blue-200 text-gray-700 px-4 py-3 rounded-2xl break-all"},I0=ut({__name:"HumanMessage",props:{account:{type:Object,default:{},required:!0},query:{type:String,default:"",required:!0}},setup(a){const f=a;return(r,g)=>{var O,_;const y=$("a-avatar");return T(),E("div",$0,[h(y,{size:30,shape:"circle",class:"flex-shrink-0","image-url":(O=f.account)==null?void 0:O.avatar},null,8,["image-url"]),v("div",T0,[v("div",C0,de((_=f.account)==null?void 0:_.name),1),v("div",z0,de(f.query),1)])])}}}),R0={},O0={class:"h-5 w-5 flex items-center justify-center"};function k0(a,f){return T(),E("div",O0,f[0]||(f[0]=[v("div",{class:"dot-flashing text"},null,-1)]))}const D0=v_(R0,[["render",k0],["__scopeId","data-v-69ca6368"]]),L0={class:"flex items-center gap-2"},E0={class:""},P0={key:0,class:"text-gray-700"},U0={key:1,class:"text-gray-700"},M0={key:2,class:"text-gray-700"},B0={key:3,class:"text-gray-700"},W0={key:4,class:"text-gray-700"},q0={class:"text-gray-500"},F0={key:0,class:"text-xs text-gray-500 line-clamp-4 break-all"},N0={key:1,class:"text-xs text-gray-500 line-clamp-4 break-all"},H0=ut({__name:"AgentThought",props:{loading:{type:Boolean,default:!1,required:!0},agent_thoughts:{type:Array,default:[],required:!0}},setup(a){const f=a,r=ue(!1);return(g,y)=>{const O=$("icon-list"),_=$("icon-loading"),z=$("icon-up"),A=$("icon-down"),k=$("icon-file"),V=$("icon-language"),Y=$("icon-storage"),G=$("icon-tool"),F=$("icon-message"),ie=$("a-collapse-item"),N=$("a-collapse");return T(),E("div",{class:xt(`flex flex-col rounded-2xl border ${r.value?"w-[320px]":"w-[180px]"}`)},[v("div",{class:xt(`flex items-center justify-between h-10 rounded-2xl bg-gray-100 px-4 text-gray-700 cursor-pointer w-auto ${r.value?"rounded-bl-none rounded-br-none":""}`),onClick:y[0]||(y[0]=M=>r.value=!r.value)},[v("div",L0,[h(O),pe(" "+de(r.value?"隐藏":"显示")+"运行流程 ",1)]),v("div",E0,[f.loading?(T(),Se(_,{key:0})):(T(),E(Ze,{key:1},[r.value?(T(),Se(z,{key:0})):(T(),Se(A,{key:1}))],64))])],2),r.value?(T(),Se(N,{key:0,class:"agent-thought","destroy-on-hide":"",bordered:!1},{default:x(()=>[(T(!0),E(Ze,null,it(f.agent_thoughts.filter(M=>[U(Ye).longTermMemoryRecall,U(Ye).agentThought,U(Ye).datasetRetrieval,U(Ye).agentAction,U(Ye).agentMessage].includes(M.event)),M=>(T(),Se(ie,{key:M.id},{"expand-icon":x(()=>[M.event===U(Ye).longTermMemoryRecall?(T(),Se(k,{key:0})):M.event===U(Ye).agentThought?(T(),Se(V,{key:1})):M.event===U(Ye).datasetRetrieval?(T(),Se(Y,{key:2})):M.event===U(Ye).agentAction?(T(),Se(G,{key:3})):M.event===U(Ye).agentMessage?(T(),Se(F,{key:4})):ye("",!0)]),header:x(()=>[M.event===U(Ye).longTermMemoryRecall?(T(),E("div",P0," 长期记忆召回 ")):ye("",!0),M.event===U(Ye).agentThought?(T(),E("div",U0," 智能体推理 ")):ye("",!0),M.event===U(Ye).datasetRetrieval?(T(),E("div",M0," 搜索知识库 ")):ye("",!0),M.event===U(Ye).agentAction?(T(),E("div",B0," 调用工具 ")):ye("",!0),M.event===U(Ye).agentMessage?(T(),E("div",W0," 智能体消息 ")):ye("",!0)]),extra:x(()=>[v("div",q0,de(M.latency.toFixed(2))+"s",1)]),default:x(()=>[["agent_thought","agent_message"].includes(M.event)?(T(),E("div",F0,de(M.thought||"-"),1)):(T(),E("div",N0,de(M.observation||"-"),1))]),_:2},1024))),128))]),_:1})):ye("",!0)],2)}}}),G0={class:"flex gap-2"},V0={class:"flex flex-col items-start gap-2"},K0={class:"text-gray-700 font-bold"},Y0={class:"bg-gray-100 border border-gray-200 text-gray-700 px-4 py-3 rounded-2xl break-all"},Z0={key:0,class:"flex flex-col gap-2"},Q0=["onClick"],X0=ut({__name:"AiMessage",props:{app:{type:Object,default:{},required:!0},answer:{type:String,default:"",required:!0},loading:{type:Boolean,default:!1,required:!1},agent_thoughts:{type:Array,default:[],required:!0},suggested_questions:{type:Array,default:[],required:!1}},emits:["selectSuggestedQuestion"],setup(a,{emit:f}){const r=a,g=f;return(y,O)=>{var z,A;const _=$("a-avatar");return T(),E("div",G0,[h(_,{size:30,shape:"circle",class:"flex-shrink-0","image-url":(z=r.app)==null?void 0:z.icon},null,8,["image-url"]),v("div",V0,[v("div",K0,de((A=r.app)==null?void 0:A.name),1),h(H0,{agent_thoughts:r.agent_thoughts,loading:r.loading},null,8,["agent_thoughts","loading"]),v("div",Y0,[r.loading&&r.answer.trim()===""?(T(),Se(D0,{key:0})):(T(),E(Ze,{key:1},[pe(de(r.answer),1)],64))]),r.suggested_questions.length>0?(T(),E("div",Z0,[(T(!0),E(Ze,null,it(r.suggested_questions,(k,V)=>(T(),E("div",{key:V,class:"px-4 py-1.5 border rounded-lg text-gray-700 cursor-pointer hover:bg-gray-50",onClick:()=>g("selectSuggestedQuestion",k)},de(k),9,Q0))),128))])):ye("",!0)])])}}}),J0={class:""},j0={key:0,class:"flex flex-col px-6 h-[calc(100vh-238px)]"},e1={class:"flex flex-col gap-6 py-6"},t1={key:0,class:"h-[50px] flex items-center justify-center"},n1={key:1,class:"flex flex-col p-6 gap-2 items-center justify-center h-[calc(100vh-238px)]"},i1={class:"flex flex-col items-center gap-2"},r1={class:"text-lg text-gray-700"},s1={key:0,class:"bg-gray-100 w-full px-4 py-3 rounded-lg text-gray-700"},o1={class:"flex items-center flex-wrap gap-2 w-full"},l1=["onClick"],a1={class:"w-full flex flex-col flex-shrink-0"},u1={class:"px-6 flex items-center gap-4"},f1={class:"h-[50px] flex items-center gap-2 px-4 flex-1 border border-gray-200 rounded-full"},c1=ut({__name:"PreviewDebugChat",props:{app:{type:Object,default:{},required:!0},suggested_after_answer:{type:Object,default:{enable:!0},required:!0},opening_statement:{type:String,default:"",required:!0},opening_questions:{type:Array,default:[],required:!0}},setup(a){const f=ba(),r=a,g=ue(""),y=ue(""),O=ue(""),_=ue(null),z=ue(0),A=m_(),{loading:k,handleDeleteDebugConversation:V}=w_(),{loading:Y,messages:G,paginator:F,loadDebugConversationMessages:ie}=S_(),{loading:N,handleDebugChat:M}=A_(),{loading:ge,handleStopDebugChat:be}=$_(),{suggested_questions:fe,handleGenerateSuggestedQuestions:q}=E_(),L=()=>{z.value=_.value.$el.scrollHeight},Ee=()=>{_.value.$el.scrollTop=_.value.$el.scrollHeight-z.value},se=async D=>{var J;const{scrollTop:X}=D.target;X<=0&&!Y.value&&(L(),await ie((J=f.params)==null?void 0:J.app_id,!1),Ee())},Te=async()=>{var J,Pe;if(g.value.trim()===""){_n.warning("用户提问不能为空");return}if(N.value){_n.warning("上一次提问还未结束，请稍等");return}fe.value=[],y.value="",O.value="",G.value.unshift({id:"",conversation_id:"",query:g.value,answer:"",total_token_count:0,latency:0,agent_thoughts:[],created_at:0});let D=0;const X=g.value;g.value="",await M((J=r.app)==null?void 0:J.id,X,Ue=>{var j;const ze=Ue==null?void 0:Ue.event,I=Ue==null?void 0:Ue.data,Be=I==null?void 0:I.id,We=G.value[0].agent_thoughts;if(y.value===""&&(I!=null&&I.message_id)&&(O.value=I==null?void 0:I.task_id,y.value=I==null?void 0:I.message_id,G.value[0].id=I==null?void 0:I.message_id,G.value[0].conversation_id=I==null?void 0:I.conversation_id),ze!==Ye.ping){if(ze===Ye.agentMessage){const R=We.findIndex(le=>(le==null?void 0:le.id)===Be);R===-1?(D+=1,We.push({id:Be,position:D,event:I==null?void 0:I.event,thought:I==null?void 0:I.thought,observation:I==null?void 0:I.observation,tool:I==null?void 0:I.tool,tool_input:I==null?void 0:I.tool_input,latency:I==null?void 0:I.latency,created_at:0})):We[R]={...We[R],thought:((j=We[R])==null?void 0:j.thought)+(I==null?void 0:I.thought),latency:I==null?void 0:I.latency},G.value[0].answer+=I==null?void 0:I.thought}else D+=1,We.push({id:Be,position:D,event:I==null?void 0:I.event,thought:I==null?void 0:I.thought,observation:I==null?void 0:I.observation,tool:I==null?void 0:I.tool,tool_input:I==null?void 0:I.tool_input,latency:I==null?void 0:I.latency,created_at:0});G.value[0].agent_thoughts=We,_.value.scrollToBottom()}}),(Pe=r.suggested_after_answer)!=null&&Pe.enable&&(await q(y.value),setTimeout(()=>_.value&&_.value.scrollToBottom(),100))},Re=async()=>{var D;O.value===""||!N.value||await be((D=r.app)==null?void 0:D.id,O.value)},B=async D=>{g.value=D,await Te()};return ya(async()=>{var D;await ie(String((D=f.params)==null?void 0:D.app_id),!0),await zn(()=>{_.value&&_.value.scrollToBottom()})}),(D,X)=>{var Be,We;const J=$("icon-poweroff"),Pe=$("a-button"),Ue=$("a-avatar"),ze=$("icon-empty"),I=$("icon-send");return T(),E("div",J0,[U(G).length>0?(T(),E("div",j0,[h(U(Us),{ref_key:"scroller",ref:_,items:U(G).slice().reverse(),"min-item-size":1,onScroll:se,class:"h-full scrollbar-w-none"},{default:x(({item:j,index:R,active:le})=>[h(U(za),{item:j,active:le,"data-index":j.id},{default:x(()=>[v("div",e1,[h(I0,{query:j.query,account:U(A).account},null,8,["query","account"]),h(X0,{agent_thoughts:j.agent_thoughts,answer:j.answer,app:r.app,suggested_questions:j.id===y.value?U(fe):[],loading:j.id===y.value&&U(N),onSelectSuggestedQuestion:B},null,8,["agent_thoughts","answer","app","suggested_questions","loading"])])]),_:2},1032,["item","active","data-index"])]),_:1},8,["items"]),O.value&&U(N)?(T(),E("div",t1,[h(Pe,{loading:U(ge),class:"rounded-lg px-2",onClick:Re},{icon:x(()=>[h(J)]),default:x(()=>[X[2]||(X[2]=pe(" 停止响应 "))]),_:1},8,["loading"])])):ye("",!0)])):(T(),E("div",n1,[v("div",i1,[h(Ue,{size:48,shape:"square",class:"rounded-lg","image-url":(Be=r.app)==null?void 0:Be.icon},null,8,["image-url"]),v("div",r1,de((We=r.app)==null?void 0:We.name),1)]),r.opening_statement?(T(),E("div",s1,de(r.opening_statement),1)):ye("",!0),v("div",o1,[(T(!0),E(Ze,null,it(r.opening_questions.filter(j=>j.trim()!==""),(j,R)=>(T(),E("div",{key:R,class:"px-4 py-1.5 border rounded-lg text-gray-700 cursor-pointer hover:bg-gray-50",onClick:async()=>await B(j)},de(j),9,l1))),128))])])),v("div",a1,[v("div",u1,[h(Pe,{loading:U(k),class:"flex-shrink-0 !text-gray-700",type:"text",shape:"circle",onClick:X[0]||(X[0]=async()=>{var j,R;await Re(),await U(V)((j=r.app)==null?void 0:j.id),await U(ie)((R=r.app)==null?void 0:R.id,!0)})},{icon:x(()=>[h(ze,{size:16})]),_:1},8,["loading"]),v("div",f1,[Es(v("input",{"onUpdate:modelValue":X[1]||(X[1]=j=>g.value=j),type:"text",class:"flex-1 outline-0",onKeyup:y_(Te,["enter"])},null,544),[[va,g.value]]),h(Pe,{loading:U(N),type:"text",shape:"circle",class:"!text-gray-700",onClick:Te},{icon:x(()=>[h(I,{size:16})]),_:1},8,["loading"])])]),X[3]||(X[3]=v("div",{class:"text-center text-gray-500 text-xs py-4"}," 内容由AI生成，无法确保真实准确，仅供参考。 ",-1))])])}}}),d1={class:"flex-1 w-full min-h-0 bg-white"},p1={class:"flex-1 grid grid-cols-[26fr_14fr] h-full w-full"},g1={class:"bg-gray-50 flex flex-col h-full"},h1={class:"grid grid-cols-[13fr_13fr] overflow-hidden h-[calc(100vh-141px)]"},_1={class:"border-r py-4"},v1={class:"min-w-[404px]"},A1=ut({__name:"DetailView",props:{app:{type:Object,default:{},required:!0}},setup(a){var O;const f=ba(),r=a,{draftAppConfigForm:g,loadDraftAppConfig:y}=T_(String((O=f.params)==null?void 0:O.app_id));return vn(),(_,z)=>{var A,k,V,Y;return T(),E("div",d1,[v("div",p1,[v("div",g1,[z[1]||(z[1]=v("div",{class:"flex items-center h-16 border-b p-4"},[v("div",{class:"text-lg text-gray-700"},"应用编排")],-1)),v("div",h1,[v("div",_1,[h(G_,{preset_prompt:U(g).preset_prompt,"onUpdate:preset_prompt":z[0]||(z[0]=G=>U(g).preset_prompt=G),app_id:String((A=U(f).params)==null?void 0:A.app_id)},null,8,["preset_prompt","app_id"])]),h(Xm,{draft_app_config:U(g),app_id:String((k=U(f).params)==null?void 0:k.app_id)},null,8,["draft_app_config","app_id"])])]),v("div",v1,[h(X_,{app_id:String((V=U(f).params)==null?void 0:V.app_id),long_term_memory:U(g).long_term_memory},null,8,["app_id","long_term_memory"]),h(c1,{suggested_after_answer:U(g).suggested_after_answer,opening_questions:U(g).opening_questions,opening_statement:U(g).opening_statement,app:r.app,app_id:(Y=r.app)==null?void 0:Y.id},null,8,["suggested_after_answer","opening_questions","opening_statement","app","app_id"])])])])}}});export{A1 as default};
