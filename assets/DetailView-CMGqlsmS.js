import{d as Dt,b as ge,o as L,f as F,g as _,h,w as b,t as _e,u as N,c as We,a as de,i as De,I as ga,J as e_,s as Yn,r as T,K as t_,L as Zn,n as _a,F as gt,q as _t,N as Tn,O as fr,e as cr,y as Lt,m as Xn,p as va,v as n_,P as fa,Q as i_,R as r_,S as s_,T as o_,U as l_,V as a_,B as hn,W as ca,X as ma,Y as u_,A as f_,Z as c_,$ as d_,a0 as p_,a1 as h_,j as ya}from"./index-_WQ45uP5.js";import{e as gn,f as g_,g as __,h as v_,i as m_,j as y_,k as x_}from"./use-app-BQYJEbRE.js";import{u as b_}from"./use-dataset-DW4c27eX.js";import{b as w_,a as S_}from"./api-tools-DmuKBlF4.js";import{g as A_,b as $_,a as T_}from"./builtin-tool-C5X15CPz.js";import"./dataset-KvHxpGjz.js";const C_={class:"flex flex-col h-[calc(100vh-173px)]"},I_={class:"flex items-center justify-between px-4 mb-4"},z_={class:"flex flex-col"},R_={key:0,class:"mb-4 flex flex-col"},O_={class:"max-h-[321px] overflow-scroll scrollbar-w-none mb-2 text-gray-700 whitespace-pre-line"},L_={class:""},D_={class:"h-[50px] flex items-center gap-2 px-4 flex-1 border border-gray-200 rounded-full"},E_={class:"flex-1"},U_=Dt({__name:"PresetPromptTextarea",props:{app_id:{type:String,required:!0},preset_prompt:{type:String,required:!0}},emits:["update:preset_prompt"],setup(a,{emit:c}){const r=a,g=c,y=ge(!1),O=ge(""),{handleUpdateDraftAppConfig:m}=gn(),{loading:C,optimize_prompt:A,handleOptimizePrompt:I}=g_(),Z=()=>{if(A.value.trim()===""){Yn.warning("优化prompt为空，请重新生成");return}g("update:preset_prompt",A.value),m(r.app_id,{preset_prompt:A.value}),y.value=!1},Y=async()=>{if(O.value.trim()===""){Yn.warning("原始prompt不能为空");return}await I(A.value)};return(j,M)=>{const se=T("icon-sync"),q=T("a-button"),B=T("a-space"),ee=T("icon-send"),me=T("a-card"),oe=T("a-trigger"),P=T("a-textarea");return L(),F("div",C_,[_("div",I_,[M[8]||(M[8]=_("div",{class:"text-gray-700 font-bold"},"人设与回复逻辑",-1)),h(oe,{"popup-visible":y.value,"onUpdate:popupVisible":M[2]||(M[2]=z=>y.value=z),trigger:["click"],position:"bl","popup-translate":[0,8]},{content:b(()=>[h(me,{class:"rounded-lg w-[422px]"},{default:b(()=>[_("div",z_,[O.value?(L(),F("div",R_,[_("div",O_,_e(N(A)),1),N(C)?De("",!0):(L(),We(B,{key:0},{default:b(()=>[h(q,{size:"small",type:"primary",class:"rounded-lg",onClick:Z},{default:b(()=>M[6]||(M[6]=[de(" 替换 ")])),_:1}),h(q,{size:"small",class:"rounded-lg",onClick:M[0]||(M[0]=z=>y.value=!1)},{default:b(()=>M[7]||(M[7]=[de("退出")])),_:1})]),_:1}))])):De("",!0),_("div",L_,[_("div",D_,[ga(_("input",{"onUpdate:modelValue":M[1]||(M[1]=z=>O.value=z),type:"text",class:"flex-1 outline-0",placeholder:"你希望如何编写或优化提示词"},null,512),[[e_,O.value]]),h(q,{loading:N(C),type:"text",shape:"circle",onClick:Y},{icon:b(()=>[h(ee,{size:16,class:"!text-blue-700"})]),_:1},8,["loading"])])])])]),_:1})]),default:b(()=>[h(q,{size:"mini",class:"rounded-lg px-2"},{icon:b(()=>[h(se)]),default:b(()=>[M[5]||(M[5]=de(" 优化 "))]),_:1})]),_:1},8,["popup-visible"])]),_("div",E_,[h(P,{class:"h-full resize-none !bg-transparent !border-0 text-gray-700 px-1 preset-prompt-textarea",placeholder:"请在这里输入Agent的人设与回复逻辑(预设prompt)","max-length":2e3,"show-word-limit":"","model-value":r.preset_prompt,"onUpdate:modelValue":M[3]||(M[3]=z=>g("update:preset_prompt",z)),onBlur:M[4]||(M[4]=async()=>{await N(m)(r.app_id,{preset_prompt:r.preset_prompt})})},null,8,["model-value"])])])}}}),k_={class:""},P_={class:"flex items-center justify-between border-b h-[64px] px-4"},M_={class:"flex items-center justify-between"},B_={class:"pt-6"},W_={class:"flex items-center justify-between"},F_=Dt({__name:"PreviewDebugHeader",props:{app_id:{type:String,required:!0},long_term_memory:{type:Object,required:!0}},setup(a){const c=a,{debug_conversation_summary:r,loadDebugConversationSummary:g}=__(),{loading:y,handleUpdateDebugConversationSummary:O}=v_(),m=ge(!1),C=async()=>{await g(c.app_id),m.value=!0};return(A,I)=>{var B;const Z=T("icon-save"),Y=T("a-button"),j=T("icon-close"),M=T("a-textarea"),se=T("a-space"),q=T("a-modal");return L(),F("div",k_,[_("div",P_,[I[6]||(I[6]=_("div",{class:"text-lg text-gray-700"},"预览与调试",-1)),h(Y,{disabled:!((B=c.long_term_memory)!=null&&B.enable),size:"mini",type:"text",class:"rounded-lg px-1 !text-blue-700",onClick:C},{icon:b(()=>[h(Z)]),default:b(()=>[I[5]||(I[5]=de(" 长期记忆 "))]),_:1},8,["disabled"])]),h(q,{width:520,visible:m.value,"onUpdate:visible":I[4]||(I[4]=ee=>m.value=ee),"hide-title":"",footer:!1,"modal-class":"rounded-xl"},{default:b(()=>[_("div",M_,[I[7]||(I[7]=_("div",{class:"text-lg font-bold text-gray-700"},"长期记忆",-1)),h(Y,{type:"text",class:"!text-gray-700",size:"small",onClick:I[0]||(I[0]=ee=>m.value=!1)},{icon:b(()=>[h(j)]),_:1})]),_("div",B_,[h(M,{"model-value":N(r),"onUpdate:modelValue":I[1]||(I[1]=ee=>t_(r)?r.value=ee:null),placeholder:"请输入当前调试会话长期记忆","show-word-limit":"","max-length":2e3,"auto-size":{minRows:8,maxRows:8}},null,8,["model-value"]),_("div",W_,[I[10]||(I[10]=_("div",{class:""},null,-1)),h(se,{size:16},{default:b(()=>[h(Y,{class:"rounded-lg",onClick:I[2]||(I[2]=ee=>m.value=!1)},{default:b(()=>I[8]||(I[8]=[de("取消")])),_:1}),h(Y,{loading:N(y),type:"primary",class:"rounded-lg",onClick:I[3]||(I[3]=async()=>{await N(O)(c.app_id,N(r)),m.value=!1})},{default:b(()=>I[9]||(I[9]=[de(" 保存 ")])),_:1},8,["loading"])]),_:1})])])]),_:1},8,["visible"])])}}}),q_={class:""},N_=Dt({__name:"LongTermMemoryAbilityItem",props:{app_id:{type:String,default:"",required:!0},long_term_memory:{type:Object,default:{enable:!1},required:!0}},emits:["update:long_term_memory"],setup(a,{emit:c}){const r=a,g=c,{handleUpdateDraftAppConfig:y}=gn();return(O,m)=>{const C=T("icon-down"),A=T("a-button"),I=T("a-doption"),Z=T("a-dropdown"),Y=T("a-collapse-item");return L(),F("div",q_,[h(Y,{key:"long_term_memory",class:"app-ability-item"},{header:b(()=>m[2]||(m[2]=[_("div",{class:"text-gray-700 font-bold"},"长期记忆",-1)])),extra:b(()=>[h(Z,{onSelect:m[1]||(m[1]=async j=>{var M;!!j!==((M=r.long_term_memory)==null?void 0:M.enable)&&(g("update:long_term_memory",{enable:!!j}),await N(y)(r.app_id,{long_term_memory:{enable:!!j}}))})},{content:b(()=>[h(I,{value:1,class:"text-xs py-1.5 text-gray-700"},{default:b(()=>m[3]||(m[3]=[de("开启")])),_:1}),h(I,{value:0,class:"text-xs py-1.5 text-red-700"},{default:b(()=>m[4]||(m[4]=[de("关闭")])),_:1})]),default:b(()=>[h(A,{size:"mini",class:"rounded-lg flex items-center gap-1 px-1",onClick:m[0]||(m[0]=Zn(()=>{},["stop"]))},{default:b(()=>{var j;return[de(_e((j=r.long_term_memory)!=null&&j.enable?"开启":"关闭")+" ",1),h(C)]}),_:1})]),_:1})]),default:b(()=>[m[5]||(m[5]=_("div",{class:"text-xs text-gray-500 leading-[22px]"}," 总结聊天对话内容，并用于更好的响应用户的信息 ",-1))]),_:1})])}}}),H_={class:""},G_={class:"text-xs text-gray-500"},V_={class:"flex flex-col gap-2 mb-2"},K_={class:"flex items-center gap-2"},Y_={class:"flex flex-col gap-2 mb-2"},Z_={class:"flex items-center gap-2"},X_={class:"flex flex-col gap-2"},J_=Dt({__name:"OpeningAbilityItem",props:{app_id:{type:String,default:"",required:!0},opening_statement:{type:String,default:"",required:!0},opening_questions:{type:Array,default:[],required:!0}},emits:["update:opening_statement","update:opening_questions"],setup(a,{emit:c}){const r=a,g=c,{handleUpdateDraftAppConfig:y}=gn(),O=_a({get(){const C=[...r.opening_questions];return C.length<3&&C[C.length-1]!==""&&C.push(""),C},set(C){g("update:opening_questions",C)}}),m=async()=>{await y(r.app_id,{opening_questions:O.value.filter(C=>C.trim()!=="")})};return(C,A)=>{const I=T("icon-exclamation-circle"),Z=T("a-tooltip"),Y=T("a-textarea"),j=T("a-input"),M=T("icon-delete"),se=T("a-button"),q=T("a-collapse-item");return L(),F("div",H_,[h(q,{key:"opening",class:"app-ability-item"},{header:b(()=>A[3]||(A[3]=[_("div",{class:"text-gray-700 font-bold"},"对话开场白",-1)])),default:b(()=>[_("div",G_,[_("div",V_,[_("div",K_,[A[4]||(A[4]=_("div",{class:"text-gray-700"},"开场白文案",-1)),h(Z,{content:"开场白是与Agent应用对话时，Agent默认展示的对话。"},{default:b(()=>[h(I)]),_:1})]),h(Y,{"model-value":r.opening_statement,"onUpdate:modelValue":A[0]||(A[0]=B=>g("update:opening_statement",B)),placeholder:"在此处填写 AI 应用的开场白",class:"bg-white text-gray-700 rounded-lg border border-gray-200","auto-size":{minRows:4,maxRows:4},onBlur:A[1]||(A[1]=async()=>{await N(y)(r.app_id,{opening_statement:r.opening_statement})})},null,8,["model-value"])]),_("div",Y_,[_("div",Z_,[A[5]||(A[5]=_("div",{class:"text-gray-700"},"开场白预设问题",-1)),h(Z,{content:"开场白预设问题是与Agent对话时，初始化提供的建议问题，最多不超过3个"},{default:b(()=>[h(I)]),_:1})]),_("div",X_,[(L(!0),F(gt,null,_t(O.value,(B,ee)=>(L(),F("div",{key:ee,class:"flex items-center gap-2"},[h(j,{"model-value":B,"onUpdate:modelValue":me=>{const oe=[...O.value];oe[ee]=me,O.value=oe},class:"rounded-lg bg-white",placeholder:"输入开场白引导问题",onBlur:A[2]||(A[2]=async()=>await m())},null,8,["model-value","onUpdate:modelValue"]),h(se,{class:"rounded-lg",onClick:async()=>{const me=[...O.value];me.splice(ee,1),g("update:opening_questions",me),await Tn(),await m()}},{icon:b(()=>[h(M)]),_:2},1032,["onClick"])]))),128))])])])]),_:1})])}}}),Q_={class:""},j_=Dt({__name:"SuggestedAfterAnswerAbilityItem",props:{app_id:{type:String,default:"",required:!0},suggested_after_answer:{type:Object,default:{enable:!1},required:!0}},emits:["update:suggested_after_answer"],setup(a,{emit:c}){const r=a,g=c,{handleUpdateDraftAppConfig:y}=gn();return(O,m)=>{const C=T("icon-down"),A=T("a-button"),I=T("a-doption"),Z=T("a-dropdown"),Y=T("a-collapse-item");return L(),F("div",Q_,[h(Y,{key:"suggested_after_answer",class:"app-ability-item"},{header:b(()=>m[2]||(m[2]=[_("div",{class:"text-gray-700 font-bold"},"用户问题建议",-1)])),extra:b(()=>[h(Z,{onSelect:m[1]||(m[1]=async j=>{var M;!!j!==((M=r.suggested_after_answer)==null?void 0:M.enable)&&(g("update:suggested_after_answer",{enable:!!j}),await N(y)(r.app_id,{suggested_after_answer:{enable:!!j}}))})},{content:b(()=>[h(I,{value:1,class:"text-xs py-1.5 text-gray-700"},{default:b(()=>m[3]||(m[3]=[de("开启")])),_:1}),h(I,{value:0,class:"text-xs py-1.5 text-red-700"},{default:b(()=>m[4]||(m[4]=[de("关闭")])),_:1})]),default:b(()=>[h(A,{size:"mini",class:"rounded-lg flex items-center gap-1 px-1",onClick:m[0]||(m[0]=Zn(()=>{},["stop"]))},{default:b(()=>{var j;return[de(_e((j=r.suggested_after_answer)!=null&&j.enable?"开启":"关闭")+" ",1),h(C)]}),_:1})]),_:1})]),default:b(()=>[m[5]||(m[5]=_("div",{class:"text-xs text-gray-500 leading-[22px]"}," 在应用回复后，自动根据对话内容提供 3 条用户提问建议 ",-1))]),_:1})])}}});var hi={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var ev=hi.exports,da;function tv(){return da||(da=1,function(a,c){(function(){var r,g="4.17.21",y=200,O="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",m="Expected a function",C="Invalid `variable` option passed into `_.template`",A="__lodash_hash_undefined__",I=500,Z="__lodash_placeholder__",Y=1,j=2,M=4,se=1,q=2,B=1,ee=2,me=4,oe=8,P=16,z=32,Oe=64,G=128,xe=256,Ie=512,U=30,E="...",ae=800,ie=16,Ke=1,rt=2,Ue=3,we=1/0,Qe=9007199254740991,Et=17976931348623157e292,ze=NaN,R=4294967295,pe=R-1,X=R>>>1,he=[["ary",G],["bind",B],["bindKey",ee],["curry",oe],["curryRight",P],["flip",Ie],["partial",z],["partialRight",Oe],["rearg",xe]],vt="[object Arguments]",st="[object Array]",qt="[object AsyncFunction]",Ut="[object Boolean]",kt="[object Date]",Se="[object DOMException]",ot="[object Error]",mt="[object Function]",Cn="[object GeneratorFunction]",lt="[object Map]",jt="[object Number]",gr="[object Null]",Ct="[object Object]",gi="[object Promise]",_i="[object Proxy]",en="[object RegExp]",at="[object Set]",_n="[object String]",In="[object Symbol]",_r="[object Undefined]",tn="[object WeakMap]",vi="[object WeakSet]",nn="[object ArrayBuffer]",rn="[object DataView]",ue="[object Float32Array]",Ye="[object Float64Array]",He="[object Int8Array]",Pt="[object Int16Array]",zn="[object Int32Array]",Rn="[object Uint8Array]",On="[object Uint8ClampedArray]",Ln="[object Uint16Array]",Dn="[object Uint32Array]",mi=/\b__p \+= '';/g,yi=/\b(__p \+=) '' \+/g,xi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Jn=/&(?:amp|lt|gt|quot|#39);/g,Qn=/[&<>"']/g,je=RegExp(Jn.source),bi=RegExp(Qn.source),Te=/<%-([\s\S]+?)%>/g,Nt=/<%([\s\S]+?)%>/g,ks=/<%=([\s\S]+?)%>/g,Ca=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ia=/^\w*$/,za=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vr=/[\\^$.*+?()[\]{}|]/g,Ra=RegExp(vr.source),mr=/^\s+/,Oa=/\s/,La=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Da=/\{\n\/\* \[wrapped with (.+)\] \*/,Ea=/,? & /,Ua=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ka=/[()=,{}\[\]\/\s]/,Pa=/\\(\\)?/g,Ma=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ps=/\w*$/,Ba=/^[-+]0x[0-9a-f]+$/i,Wa=/^0b[01]+$/i,Fa=/^\[object .+?Constructor\]$/,qa=/^0o[0-7]+$/i,Na=/^(?:0|[1-9]\d*)$/,Ha=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wi=/($^)/,Ga=/['\n\r\u2028\u2029\\]/g,Si="\\ud800-\\udfff",Va="\\u0300-\\u036f",Ka="\\ufe20-\\ufe2f",Ya="\\u20d0-\\u20ff",Ms=Va+Ka+Ya,Bs="\\u2700-\\u27bf",Ws="a-z\\xdf-\\xf6\\xf8-\\xff",Za="\\xac\\xb1\\xd7\\xf7",Xa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ja="\\u2000-\\u206f",Qa=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Fs="A-Z\\xc0-\\xd6\\xd8-\\xde",qs="\\ufe0e\\ufe0f",Ns=Za+Xa+Ja+Qa,yr="['’]",ja="["+Si+"]",Hs="["+Ns+"]",Ai="["+Ms+"]",Gs="\\d+",eu="["+Bs+"]",Vs="["+Ws+"]",Ks="[^"+Si+Ns+Gs+Bs+Ws+Fs+"]",xr="\\ud83c[\\udffb-\\udfff]",tu="(?:"+Ai+"|"+xr+")",Ys="[^"+Si+"]",br="(?:\\ud83c[\\udde6-\\uddff]){2}",wr="[\\ud800-\\udbff][\\udc00-\\udfff]",En="["+Fs+"]",Zs="\\u200d",Xs="(?:"+Vs+"|"+Ks+")",nu="(?:"+En+"|"+Ks+")",Js="(?:"+yr+"(?:d|ll|m|re|s|t|ve))?",Qs="(?:"+yr+"(?:D|LL|M|RE|S|T|VE))?",js=tu+"?",eo="["+qs+"]?",iu="(?:"+Zs+"(?:"+[Ys,br,wr].join("|")+")"+eo+js+")*",ru="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",su="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",to=eo+js+iu,ou="(?:"+[eu,br,wr].join("|")+")"+to,lu="(?:"+[Ys+Ai+"?",Ai,br,wr,ja].join("|")+")",au=RegExp(yr,"g"),uu=RegExp(Ai,"g"),Sr=RegExp(xr+"(?="+xr+")|"+lu+to,"g"),fu=RegExp([En+"?"+Vs+"+"+Js+"(?="+[Hs,En,"$"].join("|")+")",nu+"+"+Qs+"(?="+[Hs,En+Xs,"$"].join("|")+")",En+"?"+Xs+"+"+Js,En+"+"+Qs,su,ru,Gs,ou].join("|"),"g"),cu=RegExp("["+Zs+Si+Ms+qs+"]"),du=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],hu=-1,Ce={};Ce[ue]=Ce[Ye]=Ce[He]=Ce[Pt]=Ce[zn]=Ce[Rn]=Ce[On]=Ce[Ln]=Ce[Dn]=!0,Ce[vt]=Ce[st]=Ce[nn]=Ce[Ut]=Ce[rn]=Ce[kt]=Ce[ot]=Ce[mt]=Ce[lt]=Ce[jt]=Ce[Ct]=Ce[en]=Ce[at]=Ce[_n]=Ce[tn]=!1;var $e={};$e[vt]=$e[st]=$e[nn]=$e[rn]=$e[Ut]=$e[kt]=$e[ue]=$e[Ye]=$e[He]=$e[Pt]=$e[zn]=$e[lt]=$e[jt]=$e[Ct]=$e[en]=$e[at]=$e[_n]=$e[In]=$e[Rn]=$e[On]=$e[Ln]=$e[Dn]=!0,$e[ot]=$e[mt]=$e[tn]=!1;var gu={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},_u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},mu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},yu=parseFloat,xu=parseInt,no=typeof fr=="object"&&fr&&fr.Object===Object&&fr,bu=typeof self=="object"&&self&&self.Object===Object&&self,qe=no||bu||Function("return this")(),Ar=c&&!c.nodeType&&c,vn=Ar&&!0&&a&&!a.nodeType&&a,io=vn&&vn.exports===Ar,$r=io&&no.process,yt=function(){try{var d=vn&&vn.require&&vn.require("util").types;return d||$r&&$r.binding&&$r.binding("util")}catch{}}(),ro=yt&&yt.isArrayBuffer,so=yt&&yt.isDate,oo=yt&&yt.isMap,lo=yt&&yt.isRegExp,ao=yt&&yt.isSet,uo=yt&&yt.isTypedArray;function ut(d,x,v){switch(v.length){case 0:return d.call(x);case 1:return d.call(x,v[0]);case 2:return d.call(x,v[0],v[1]);case 3:return d.call(x,v[0],v[1],v[2])}return d.apply(x,v)}function wu(d,x,v,k){for(var J=-1,ve=d==null?0:d.length;++J<ve;){var Me=d[J];x(k,Me,v(Me),d)}return k}function xt(d,x){for(var v=-1,k=d==null?0:d.length;++v<k&&x(d[v],v,d)!==!1;);return d}function Su(d,x){for(var v=d==null?0:d.length;v--&&x(d[v],v,d)!==!1;);return d}function fo(d,x){for(var v=-1,k=d==null?0:d.length;++v<k;)if(!x(d[v],v,d))return!1;return!0}function sn(d,x){for(var v=-1,k=d==null?0:d.length,J=0,ve=[];++v<k;){var Me=d[v];x(Me,v,d)&&(ve[J++]=Me)}return ve}function $i(d,x){var v=d==null?0:d.length;return!!v&&Un(d,x,0)>-1}function Tr(d,x,v){for(var k=-1,J=d==null?0:d.length;++k<J;)if(v(x,d[k]))return!0;return!1}function Re(d,x){for(var v=-1,k=d==null?0:d.length,J=Array(k);++v<k;)J[v]=x(d[v],v,d);return J}function on(d,x){for(var v=-1,k=x.length,J=d.length;++v<k;)d[J+v]=x[v];return d}function Cr(d,x,v,k){var J=-1,ve=d==null?0:d.length;for(k&&ve&&(v=d[++J]);++J<ve;)v=x(v,d[J],J,d);return v}function Au(d,x,v,k){var J=d==null?0:d.length;for(k&&J&&(v=d[--J]);J--;)v=x(v,d[J],J,d);return v}function Ir(d,x){for(var v=-1,k=d==null?0:d.length;++v<k;)if(x(d[v],v,d))return!0;return!1}var $u=zr("length");function Tu(d){return d.split("")}function Cu(d){return d.match(Ua)||[]}function co(d,x,v){var k;return v(d,function(J,ve,Me){if(x(J,ve,Me))return k=ve,!1}),k}function Ti(d,x,v,k){for(var J=d.length,ve=v+(k?1:-1);k?ve--:++ve<J;)if(x(d[ve],ve,d))return ve;return-1}function Un(d,x,v){return x===x?Bu(d,x,v):Ti(d,po,v)}function Iu(d,x,v,k){for(var J=v-1,ve=d.length;++J<ve;)if(k(d[J],x))return J;return-1}function po(d){return d!==d}function ho(d,x){var v=d==null?0:d.length;return v?Or(d,x)/v:ze}function zr(d){return function(x){return x==null?r:x[d]}}function Rr(d){return function(x){return d==null?r:d[x]}}function go(d,x,v,k,J){return J(d,function(ve,Me,Ae){v=k?(k=!1,ve):x(v,ve,Me,Ae)}),v}function zu(d,x){var v=d.length;for(d.sort(x);v--;)d[v]=d[v].value;return d}function Or(d,x){for(var v,k=-1,J=d.length;++k<J;){var ve=x(d[k]);ve!==r&&(v=v===r?ve:v+ve)}return v}function Lr(d,x){for(var v=-1,k=Array(d);++v<d;)k[v]=x(v);return k}function Ru(d,x){return Re(x,function(v){return[v,d[v]]})}function _o(d){return d&&d.slice(0,xo(d)+1).replace(mr,"")}function ft(d){return function(x){return d(x)}}function Dr(d,x){return Re(x,function(v){return d[v]})}function jn(d,x){return d.has(x)}function vo(d,x){for(var v=-1,k=d.length;++v<k&&Un(x,d[v],0)>-1;);return v}function mo(d,x){for(var v=d.length;v--&&Un(x,d[v],0)>-1;);return v}function Ou(d,x){for(var v=d.length,k=0;v--;)d[v]===x&&++k;return k}var Lu=Rr(gu),Du=Rr(_u);function Eu(d){return"\\"+mu[d]}function Uu(d,x){return d==null?r:d[x]}function kn(d){return cu.test(d)}function ku(d){return du.test(d)}function Pu(d){for(var x,v=[];!(x=d.next()).done;)v.push(x.value);return v}function Er(d){var x=-1,v=Array(d.size);return d.forEach(function(k,J){v[++x]=[J,k]}),v}function yo(d,x){return function(v){return d(x(v))}}function ln(d,x){for(var v=-1,k=d.length,J=0,ve=[];++v<k;){var Me=d[v];(Me===x||Me===Z)&&(d[v]=Z,ve[J++]=v)}return ve}function Ci(d){var x=-1,v=Array(d.size);return d.forEach(function(k){v[++x]=k}),v}function Mu(d){var x=-1,v=Array(d.size);return d.forEach(function(k){v[++x]=[k,k]}),v}function Bu(d,x,v){for(var k=v-1,J=d.length;++k<J;)if(d[k]===x)return k;return-1}function Wu(d,x,v){for(var k=v+1;k--;)if(d[k]===x)return k;return k}function Pn(d){return kn(d)?qu(d):$u(d)}function It(d){return kn(d)?Nu(d):Tu(d)}function xo(d){for(var x=d.length;x--&&Oa.test(d.charAt(x)););return x}var Fu=Rr(vu);function qu(d){for(var x=Sr.lastIndex=0;Sr.test(d);)++x;return x}function Nu(d){return d.match(Sr)||[]}function Hu(d){return d.match(fu)||[]}var Gu=function d(x){x=x==null?qe:Mn.defaults(qe.Object(),x,Mn.pick(qe,pu));var v=x.Array,k=x.Date,J=x.Error,ve=x.Function,Me=x.Math,Ae=x.Object,Ur=x.RegExp,Vu=x.String,bt=x.TypeError,Ii=v.prototype,Ku=ve.prototype,Bn=Ae.prototype,zi=x["__core-js_shared__"],Ri=Ku.toString,be=Bn.hasOwnProperty,Yu=0,bo=function(){var e=/[^.]+$/.exec(zi&&zi.keys&&zi.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Oi=Bn.toString,Zu=Ri.call(Ae),Xu=qe._,Ju=Ur("^"+Ri.call(be).replace(vr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Li=io?x.Buffer:r,an=x.Symbol,Di=x.Uint8Array,wo=Li?Li.allocUnsafe:r,Ei=yo(Ae.getPrototypeOf,Ae),So=Ae.create,Ao=Bn.propertyIsEnumerable,Ui=Ii.splice,$o=an?an.isConcatSpreadable:r,ei=an?an.iterator:r,mn=an?an.toStringTag:r,ki=function(){try{var e=Sn(Ae,"defineProperty");return e({},"",{}),e}catch{}}(),Qu=x.clearTimeout!==qe.clearTimeout&&x.clearTimeout,ju=k&&k.now!==qe.Date.now&&k.now,ef=x.setTimeout!==qe.setTimeout&&x.setTimeout,Pi=Me.ceil,Mi=Me.floor,kr=Ae.getOwnPropertySymbols,tf=Li?Li.isBuffer:r,To=x.isFinite,nf=Ii.join,rf=yo(Ae.keys,Ae),Be=Me.max,Ge=Me.min,sf=k.now,of=x.parseInt,Co=Me.random,lf=Ii.reverse,Pr=Sn(x,"DataView"),ti=Sn(x,"Map"),Mr=Sn(x,"Promise"),Wn=Sn(x,"Set"),ni=Sn(x,"WeakMap"),ii=Sn(Ae,"create"),Bi=ni&&new ni,Fn={},af=An(Pr),uf=An(ti),ff=An(Mr),cf=An(Wn),df=An(ni),Wi=an?an.prototype:r,ri=Wi?Wi.valueOf:r,Io=Wi?Wi.toString:r;function o(e){if(Ee(e)&&!Q(e)&&!(e instanceof fe)){if(e instanceof wt)return e;if(be.call(e,"__wrapped__"))return zl(e)}return new wt(e)}var qn=function(){function e(){}return function(t){if(!Le(t))return{};if(So)return So(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function Fi(){}function wt(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}o.templateSettings={escape:Te,evaluate:Nt,interpolate:ks,variable:"",imports:{_:o}},o.prototype=Fi.prototype,o.prototype.constructor=o,wt.prototype=qn(Fi.prototype),wt.prototype.constructor=wt;function fe(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=R,this.__views__=[]}function pf(){var e=new fe(this.__wrapped__);return e.__actions__=et(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=et(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=et(this.__views__),e}function hf(){if(this.__filtered__){var e=new fe(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function gf(){var e=this.__wrapped__.value(),t=this.__dir__,n=Q(e),i=t<0,s=n?e.length:0,l=Cc(0,s,this.__views__),u=l.start,f=l.end,p=f-u,w=i?f:u-1,S=this.__iteratees__,$=S.length,D=0,W=Ge(p,this.__takeCount__);if(!n||!i&&s==p&&W==p)return Qo(e,this.__actions__);var V=[];e:for(;p--&&D<W;){w+=t;for(var ne=-1,K=e[w];++ne<$;){var le=S[ne],ce=le.iteratee,pt=le.type,Je=ce(K);if(pt==rt)K=Je;else if(!Je){if(pt==Ke)continue e;break e}}V[D++]=K}return V}fe.prototype=qn(Fi.prototype),fe.prototype.constructor=fe;function yn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function _f(){this.__data__=ii?ii(null):{},this.size=0}function vf(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function mf(e){var t=this.__data__;if(ii){var n=t[e];return n===A?r:n}return be.call(t,e)?t[e]:r}function yf(e){var t=this.__data__;return ii?t[e]!==r:be.call(t,e)}function xf(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ii&&t===r?A:t,this}yn.prototype.clear=_f,yn.prototype.delete=vf,yn.prototype.get=mf,yn.prototype.has=yf,yn.prototype.set=xf;function Ht(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function bf(){this.__data__=[],this.size=0}function wf(e){var t=this.__data__,n=qi(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():Ui.call(t,n,1),--this.size,!0}function Sf(e){var t=this.__data__,n=qi(t,e);return n<0?r:t[n][1]}function Af(e){return qi(this.__data__,e)>-1}function $f(e,t){var n=this.__data__,i=qi(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}Ht.prototype.clear=bf,Ht.prototype.delete=wf,Ht.prototype.get=Sf,Ht.prototype.has=Af,Ht.prototype.set=$f;function Gt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Tf(){this.size=0,this.__data__={hash:new yn,map:new(ti||Ht),string:new yn}}function Cf(e){var t=er(this,e).delete(e);return this.size-=t?1:0,t}function If(e){return er(this,e).get(e)}function zf(e){return er(this,e).has(e)}function Rf(e,t){var n=er(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}Gt.prototype.clear=Tf,Gt.prototype.delete=Cf,Gt.prototype.get=If,Gt.prototype.has=zf,Gt.prototype.set=Rf;function xn(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Gt;++t<n;)this.add(e[t])}function Of(e){return this.__data__.set(e,A),this}function Lf(e){return this.__data__.has(e)}xn.prototype.add=xn.prototype.push=Of,xn.prototype.has=Lf;function zt(e){var t=this.__data__=new Ht(e);this.size=t.size}function Df(){this.__data__=new Ht,this.size=0}function Ef(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Uf(e){return this.__data__.get(e)}function kf(e){return this.__data__.has(e)}function Pf(e,t){var n=this.__data__;if(n instanceof Ht){var i=n.__data__;if(!ti||i.length<y-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Gt(i)}return n.set(e,t),this.size=n.size,this}zt.prototype.clear=Df,zt.prototype.delete=Ef,zt.prototype.get=Uf,zt.prototype.has=kf,zt.prototype.set=Pf;function zo(e,t){var n=Q(e),i=!n&&$n(e),s=!n&&!i&&pn(e),l=!n&&!i&&!s&&Vn(e),u=n||i||s||l,f=u?Lr(e.length,Vu):[],p=f.length;for(var w in e)(t||be.call(e,w))&&!(u&&(w=="length"||s&&(w=="offset"||w=="parent")||l&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||Zt(w,p)))&&f.push(w);return f}function Ro(e){var t=e.length;return t?e[Zr(0,t-1)]:r}function Mf(e,t){return tr(et(e),bn(t,0,e.length))}function Bf(e){return tr(et(e))}function Br(e,t,n){(n!==r&&!Rt(e[t],n)||n===r&&!(t in e))&&Vt(e,t,n)}function si(e,t,n){var i=e[t];(!(be.call(e,t)&&Rt(i,n))||n===r&&!(t in e))&&Vt(e,t,n)}function qi(e,t){for(var n=e.length;n--;)if(Rt(e[n][0],t))return n;return-1}function Wf(e,t,n,i){return un(e,function(s,l,u){t(i,s,n(s),u)}),i}function Oo(e,t){return e&&Bt(t,Fe(t),e)}function Ff(e,t){return e&&Bt(t,nt(t),e)}function Vt(e,t,n){t=="__proto__"&&ki?ki(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Wr(e,t){for(var n=-1,i=t.length,s=v(i),l=e==null;++n<i;)s[n]=l?r:xs(e,t[n]);return s}function bn(e,t,n){return e===e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function St(e,t,n,i,s,l){var u,f=t&Y,p=t&j,w=t&M;if(n&&(u=s?n(e,i,s,l):n(e)),u!==r)return u;if(!Le(e))return e;var S=Q(e);if(S){if(u=zc(e),!f)return et(e,u)}else{var $=Ve(e),D=$==mt||$==Cn;if(pn(e))return tl(e,f);if($==Ct||$==vt||D&&!s){if(u=p||D?{}:xl(e),!f)return p?mc(e,Ff(u,e)):vc(e,Oo(u,e))}else{if(!$e[$])return s?e:{};u=Rc(e,$,f)}}l||(l=new zt);var W=l.get(e);if(W)return W;l.set(e,u),Zl(e)?e.forEach(function(K){u.add(St(K,t,n,K,e,l))}):Kl(e)&&e.forEach(function(K,le){u.set(le,St(K,t,n,le,e,l))});var V=w?p?os:ss:p?nt:Fe,ne=S?r:V(e);return xt(ne||e,function(K,le){ne&&(le=K,K=e[le]),si(u,le,St(K,t,n,le,e,l))}),u}function qf(e){var t=Fe(e);return function(n){return Lo(n,e,t)}}function Lo(e,t,n){var i=n.length;if(e==null)return!i;for(e=Ae(e);i--;){var s=n[i],l=t[s],u=e[s];if(u===r&&!(s in e)||!l(u))return!1}return!0}function Do(e,t,n){if(typeof e!="function")throw new bt(m);return di(function(){e.apply(r,n)},t)}function oi(e,t,n,i){var s=-1,l=$i,u=!0,f=e.length,p=[],w=t.length;if(!f)return p;n&&(t=Re(t,ft(n))),i?(l=Tr,u=!1):t.length>=y&&(l=jn,u=!1,t=new xn(t));e:for(;++s<f;){var S=e[s],$=n==null?S:n(S);if(S=i||S!==0?S:0,u&&$===$){for(var D=w;D--;)if(t[D]===$)continue e;p.push(S)}else l(t,$,i)||p.push(S)}return p}var un=ol(Mt),Eo=ol(qr,!0);function Nf(e,t){var n=!0;return un(e,function(i,s,l){return n=!!t(i,s,l),n}),n}function Ni(e,t,n){for(var i=-1,s=e.length;++i<s;){var l=e[i],u=t(l);if(u!=null&&(f===r?u===u&&!dt(u):n(u,f)))var f=u,p=l}return p}function Hf(e,t,n,i){var s=e.length;for(n=te(n),n<0&&(n=-n>s?0:s+n),i=i===r||i>s?s:te(i),i<0&&(i+=s),i=n>i?0:Jl(i);n<i;)e[n++]=t;return e}function Uo(e,t){var n=[];return un(e,function(i,s,l){t(i,s,l)&&n.push(i)}),n}function Ne(e,t,n,i,s){var l=-1,u=e.length;for(n||(n=Lc),s||(s=[]);++l<u;){var f=e[l];t>0&&n(f)?t>1?Ne(f,t-1,n,i,s):on(s,f):i||(s[s.length]=f)}return s}var Fr=ll(),ko=ll(!0);function Mt(e,t){return e&&Fr(e,t,Fe)}function qr(e,t){return e&&ko(e,t,Fe)}function Hi(e,t){return sn(t,function(n){return Xt(e[n])})}function wn(e,t){t=cn(t,e);for(var n=0,i=t.length;e!=null&&n<i;)e=e[Wt(t[n++])];return n&&n==i?e:r}function Po(e,t,n){var i=t(e);return Q(e)?i:on(i,n(e))}function Ze(e){return e==null?e===r?_r:gr:mn&&mn in Ae(e)?Tc(e):Bc(e)}function Nr(e,t){return e>t}function Gf(e,t){return e!=null&&be.call(e,t)}function Vf(e,t){return e!=null&&t in Ae(e)}function Kf(e,t,n){return e>=Ge(t,n)&&e<Be(t,n)}function Hr(e,t,n){for(var i=n?Tr:$i,s=e[0].length,l=e.length,u=l,f=v(l),p=1/0,w=[];u--;){var S=e[u];u&&t&&(S=Re(S,ft(t))),p=Ge(S.length,p),f[u]=!n&&(t||s>=120&&S.length>=120)?new xn(u&&S):r}S=e[0];var $=-1,D=f[0];e:for(;++$<s&&w.length<p;){var W=S[$],V=t?t(W):W;if(W=n||W!==0?W:0,!(D?jn(D,V):i(w,V,n))){for(u=l;--u;){var ne=f[u];if(!(ne?jn(ne,V):i(e[u],V,n)))continue e}D&&D.push(V),w.push(W)}}return w}function Yf(e,t,n,i){return Mt(e,function(s,l,u){t(i,n(s),l,u)}),i}function li(e,t,n){t=cn(t,e),e=Al(e,t);var i=e==null?e:e[Wt($t(t))];return i==null?r:ut(i,e,n)}function Mo(e){return Ee(e)&&Ze(e)==vt}function Zf(e){return Ee(e)&&Ze(e)==nn}function Xf(e){return Ee(e)&&Ze(e)==kt}function ai(e,t,n,i,s){return e===t?!0:e==null||t==null||!Ee(e)&&!Ee(t)?e!==e&&t!==t:Jf(e,t,n,i,ai,s)}function Jf(e,t,n,i,s,l){var u=Q(e),f=Q(t),p=u?st:Ve(e),w=f?st:Ve(t);p=p==vt?Ct:p,w=w==vt?Ct:w;var S=p==Ct,$=w==Ct,D=p==w;if(D&&pn(e)){if(!pn(t))return!1;u=!0,S=!1}if(D&&!S)return l||(l=new zt),u||Vn(e)?vl(e,t,n,i,s,l):Ac(e,t,p,n,i,s,l);if(!(n&se)){var W=S&&be.call(e,"__wrapped__"),V=$&&be.call(t,"__wrapped__");if(W||V){var ne=W?e.value():e,K=V?t.value():t;return l||(l=new zt),s(ne,K,n,i,l)}}return D?(l||(l=new zt),$c(e,t,n,i,s,l)):!1}function Qf(e){return Ee(e)&&Ve(e)==lt}function Gr(e,t,n,i){var s=n.length,l=s,u=!i;if(e==null)return!l;for(e=Ae(e);s--;){var f=n[s];if(u&&f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}for(;++s<l;){f=n[s];var p=f[0],w=e[p],S=f[1];if(u&&f[2]){if(w===r&&!(p in e))return!1}else{var $=new zt;if(i)var D=i(w,S,p,e,t,$);if(!(D===r?ai(S,w,se|q,i,$):D))return!1}}return!0}function Bo(e){if(!Le(e)||Ec(e))return!1;var t=Xt(e)?Ju:Fa;return t.test(An(e))}function jf(e){return Ee(e)&&Ze(e)==en}function ec(e){return Ee(e)&&Ve(e)==at}function tc(e){return Ee(e)&&lr(e.length)&&!!Ce[Ze(e)]}function Wo(e){return typeof e=="function"?e:e==null?it:typeof e=="object"?Q(e)?No(e[0],e[1]):qo(e):aa(e)}function Vr(e){if(!ci(e))return rf(e);var t=[];for(var n in Ae(e))be.call(e,n)&&n!="constructor"&&t.push(n);return t}function nc(e){if(!Le(e))return Mc(e);var t=ci(e),n=[];for(var i in e)i=="constructor"&&(t||!be.call(e,i))||n.push(i);return n}function Kr(e,t){return e<t}function Fo(e,t){var n=-1,i=tt(e)?v(e.length):[];return un(e,function(s,l,u){i[++n]=t(s,l,u)}),i}function qo(e){var t=as(e);return t.length==1&&t[0][2]?wl(t[0][0],t[0][1]):function(n){return n===e||Gr(n,e,t)}}function No(e,t){return fs(e)&&bl(t)?wl(Wt(e),t):function(n){var i=xs(n,e);return i===r&&i===t?bs(n,e):ai(t,i,se|q)}}function Gi(e,t,n,i,s){e!==t&&Fr(t,function(l,u){if(s||(s=new zt),Le(l))ic(e,t,u,n,Gi,i,s);else{var f=i?i(ds(e,u),l,u+"",e,t,s):r;f===r&&(f=l),Br(e,u,f)}},nt)}function ic(e,t,n,i,s,l,u){var f=ds(e,n),p=ds(t,n),w=u.get(p);if(w){Br(e,n,w);return}var S=l?l(f,p,n+"",e,t,u):r,$=S===r;if($){var D=Q(p),W=!D&&pn(p),V=!D&&!W&&Vn(p);S=p,D||W||V?Q(f)?S=f:ke(f)?S=et(f):W?($=!1,S=tl(p,!0)):V?($=!1,S=nl(p,!0)):S=[]:pi(p)||$n(p)?(S=f,$n(f)?S=Ql(f):(!Le(f)||Xt(f))&&(S=xl(p))):$=!1}$&&(u.set(p,S),s(S,p,i,l,u),u.delete(p)),Br(e,n,S)}function Ho(e,t){var n=e.length;if(n)return t+=t<0?n:0,Zt(t,n)?e[t]:r}function Go(e,t,n){t.length?t=Re(t,function(l){return Q(l)?function(u){return wn(u,l.length===1?l[0]:l)}:l}):t=[it];var i=-1;t=Re(t,ft(H()));var s=Fo(e,function(l,u,f){var p=Re(t,function(w){return w(l)});return{criteria:p,index:++i,value:l}});return zu(s,function(l,u){return _c(l,u,n)})}function rc(e,t){return Vo(e,t,function(n,i){return bs(e,i)})}function Vo(e,t,n){for(var i=-1,s=t.length,l={};++i<s;){var u=t[i],f=wn(e,u);n(f,u)&&ui(l,cn(u,e),f)}return l}function sc(e){return function(t){return wn(t,e)}}function Yr(e,t,n,i){var s=i?Iu:Un,l=-1,u=t.length,f=e;for(e===t&&(t=et(t)),n&&(f=Re(e,ft(n)));++l<u;)for(var p=0,w=t[l],S=n?n(w):w;(p=s(f,S,p,i))>-1;)f!==e&&Ui.call(f,p,1),Ui.call(e,p,1);return e}function Ko(e,t){for(var n=e?t.length:0,i=n-1;n--;){var s=t[n];if(n==i||s!==l){var l=s;Zt(s)?Ui.call(e,s,1):Qr(e,s)}}return e}function Zr(e,t){return e+Mi(Co()*(t-e+1))}function oc(e,t,n,i){for(var s=-1,l=Be(Pi((t-e)/(n||1)),0),u=v(l);l--;)u[i?l:++s]=e,e+=n;return u}function Xr(e,t){var n="";if(!e||t<1||t>Qe)return n;do t%2&&(n+=e),t=Mi(t/2),t&&(e+=e);while(t);return n}function re(e,t){return ps(Sl(e,t,it),e+"")}function lc(e){return Ro(Kn(e))}function ac(e,t){var n=Kn(e);return tr(n,bn(t,0,n.length))}function ui(e,t,n,i){if(!Le(e))return e;t=cn(t,e);for(var s=-1,l=t.length,u=l-1,f=e;f!=null&&++s<l;){var p=Wt(t[s]),w=n;if(p==="__proto__"||p==="constructor"||p==="prototype")return e;if(s!=u){var S=f[p];w=i?i(S,p,f):r,w===r&&(w=Le(S)?S:Zt(t[s+1])?[]:{})}si(f,p,w),f=f[p]}return e}var Yo=Bi?function(e,t){return Bi.set(e,t),e}:it,uc=ki?function(e,t){return ki(e,"toString",{configurable:!0,enumerable:!1,value:Ss(t),writable:!0})}:it;function fc(e){return tr(Kn(e))}function At(e,t,n){var i=-1,s=e.length;t<0&&(t=-t>s?0:s+t),n=n>s?s:n,n<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var l=v(s);++i<s;)l[i]=e[i+t];return l}function cc(e,t){var n;return un(e,function(i,s,l){return n=t(i,s,l),!n}),!!n}function Vi(e,t,n){var i=0,s=e==null?i:e.length;if(typeof t=="number"&&t===t&&s<=X){for(;i<s;){var l=i+s>>>1,u=e[l];u!==null&&!dt(u)&&(n?u<=t:u<t)?i=l+1:s=l}return s}return Jr(e,t,it,n)}function Jr(e,t,n,i){var s=0,l=e==null?0:e.length;if(l===0)return 0;t=n(t);for(var u=t!==t,f=t===null,p=dt(t),w=t===r;s<l;){var S=Mi((s+l)/2),$=n(e[S]),D=$!==r,W=$===null,V=$===$,ne=dt($);if(u)var K=i||V;else w?K=V&&(i||D):f?K=V&&D&&(i||!W):p?K=V&&D&&!W&&(i||!ne):W||ne?K=!1:K=i?$<=t:$<t;K?s=S+1:l=S}return Ge(l,pe)}function Zo(e,t){for(var n=-1,i=e.length,s=0,l=[];++n<i;){var u=e[n],f=t?t(u):u;if(!n||!Rt(f,p)){var p=f;l[s++]=u===0?0:u}}return l}function Xo(e){return typeof e=="number"?e:dt(e)?ze:+e}function ct(e){if(typeof e=="string")return e;if(Q(e))return Re(e,ct)+"";if(dt(e))return Io?Io.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function fn(e,t,n){var i=-1,s=$i,l=e.length,u=!0,f=[],p=f;if(n)u=!1,s=Tr;else if(l>=y){var w=t?null:wc(e);if(w)return Ci(w);u=!1,s=jn,p=new xn}else p=t?[]:f;e:for(;++i<l;){var S=e[i],$=t?t(S):S;if(S=n||S!==0?S:0,u&&$===$){for(var D=p.length;D--;)if(p[D]===$)continue e;t&&p.push($),f.push(S)}else s(p,$,n)||(p!==f&&p.push($),f.push(S))}return f}function Qr(e,t){return t=cn(t,e),e=Al(e,t),e==null||delete e[Wt($t(t))]}function Jo(e,t,n,i){return ui(e,t,n(wn(e,t)),i)}function Ki(e,t,n,i){for(var s=e.length,l=i?s:-1;(i?l--:++l<s)&&t(e[l],l,e););return n?At(e,i?0:l,i?l+1:s):At(e,i?l+1:0,i?s:l)}function Qo(e,t){var n=e;return n instanceof fe&&(n=n.value()),Cr(t,function(i,s){return s.func.apply(s.thisArg,on([i],s.args))},n)}function jr(e,t,n){var i=e.length;if(i<2)return i?fn(e[0]):[];for(var s=-1,l=v(i);++s<i;)for(var u=e[s],f=-1;++f<i;)f!=s&&(l[s]=oi(l[s]||u,e[f],t,n));return fn(Ne(l,1),t,n)}function jo(e,t,n){for(var i=-1,s=e.length,l=t.length,u={};++i<s;){var f=i<l?t[i]:r;n(u,e[i],f)}return u}function es(e){return ke(e)?e:[]}function ts(e){return typeof e=="function"?e:it}function cn(e,t){return Q(e)?e:fs(e,t)?[e]:Il(ye(e))}var dc=re;function dn(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:At(e,t,n)}var el=Qu||function(e){return qe.clearTimeout(e)};function tl(e,t){if(t)return e.slice();var n=e.length,i=wo?wo(n):new e.constructor(n);return e.copy(i),i}function ns(e){var t=new e.constructor(e.byteLength);return new Di(t).set(new Di(e)),t}function pc(e,t){var n=t?ns(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function hc(e){var t=new e.constructor(e.source,Ps.exec(e));return t.lastIndex=e.lastIndex,t}function gc(e){return ri?Ae(ri.call(e)):{}}function nl(e,t){var n=t?ns(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function il(e,t){if(e!==t){var n=e!==r,i=e===null,s=e===e,l=dt(e),u=t!==r,f=t===null,p=t===t,w=dt(t);if(!f&&!w&&!l&&e>t||l&&u&&p&&!f&&!w||i&&u&&p||!n&&p||!s)return 1;if(!i&&!l&&!w&&e<t||w&&n&&s&&!i&&!l||f&&n&&s||!u&&s||!p)return-1}return 0}function _c(e,t,n){for(var i=-1,s=e.criteria,l=t.criteria,u=s.length,f=n.length;++i<u;){var p=il(s[i],l[i]);if(p){if(i>=f)return p;var w=n[i];return p*(w=="desc"?-1:1)}}return e.index-t.index}function rl(e,t,n,i){for(var s=-1,l=e.length,u=n.length,f=-1,p=t.length,w=Be(l-u,0),S=v(p+w),$=!i;++f<p;)S[f]=t[f];for(;++s<u;)($||s<l)&&(S[n[s]]=e[s]);for(;w--;)S[f++]=e[s++];return S}function sl(e,t,n,i){for(var s=-1,l=e.length,u=-1,f=n.length,p=-1,w=t.length,S=Be(l-f,0),$=v(S+w),D=!i;++s<S;)$[s]=e[s];for(var W=s;++p<w;)$[W+p]=t[p];for(;++u<f;)(D||s<l)&&($[W+n[u]]=e[s++]);return $}function et(e,t){var n=-1,i=e.length;for(t||(t=v(i));++n<i;)t[n]=e[n];return t}function Bt(e,t,n,i){var s=!n;n||(n={});for(var l=-1,u=t.length;++l<u;){var f=t[l],p=i?i(n[f],e[f],f,n,e):r;p===r&&(p=e[f]),s?Vt(n,f,p):si(n,f,p)}return n}function vc(e,t){return Bt(e,us(e),t)}function mc(e,t){return Bt(e,ml(e),t)}function Yi(e,t){return function(n,i){var s=Q(n)?wu:Wf,l=t?t():{};return s(n,e,H(i,2),l)}}function Nn(e){return re(function(t,n){var i=-1,s=n.length,l=s>1?n[s-1]:r,u=s>2?n[2]:r;for(l=e.length>3&&typeof l=="function"?(s--,l):r,u&&Xe(n[0],n[1],u)&&(l=s<3?r:l,s=1),t=Ae(t);++i<s;){var f=n[i];f&&e(t,f,i,l)}return t})}function ol(e,t){return function(n,i){if(n==null)return n;if(!tt(n))return e(n,i);for(var s=n.length,l=t?s:-1,u=Ae(n);(t?l--:++l<s)&&i(u[l],l,u)!==!1;);return n}}function ll(e){return function(t,n,i){for(var s=-1,l=Ae(t),u=i(t),f=u.length;f--;){var p=u[e?f:++s];if(n(l[p],p,l)===!1)break}return t}}function yc(e,t,n){var i=t&B,s=fi(e);function l(){var u=this&&this!==qe&&this instanceof l?s:e;return u.apply(i?n:this,arguments)}return l}function al(e){return function(t){t=ye(t);var n=kn(t)?It(t):r,i=n?n[0]:t.charAt(0),s=n?dn(n,1).join(""):t.slice(1);return i[e]()+s}}function Hn(e){return function(t){return Cr(oa(sa(t).replace(au,"")),e,"")}}function fi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=qn(e.prototype),i=e.apply(n,t);return Le(i)?i:n}}function xc(e,t,n){var i=fi(e);function s(){for(var l=arguments.length,u=v(l),f=l,p=Gn(s);f--;)u[f]=arguments[f];var w=l<3&&u[0]!==p&&u[l-1]!==p?[]:ln(u,p);if(l-=w.length,l<n)return pl(e,t,Zi,s.placeholder,r,u,w,r,r,n-l);var S=this&&this!==qe&&this instanceof s?i:e;return ut(S,this,u)}return s}function ul(e){return function(t,n,i){var s=Ae(t);if(!tt(t)){var l=H(n,3);t=Fe(t),n=function(f){return l(s[f],f,s)}}var u=e(t,n,i);return u>-1?s[l?t[u]:u]:r}}function fl(e){return Yt(function(t){var n=t.length,i=n,s=wt.prototype.thru;for(e&&t.reverse();i--;){var l=t[i];if(typeof l!="function")throw new bt(m);if(s&&!u&&ji(l)=="wrapper")var u=new wt([],!0)}for(i=u?i:n;++i<n;){l=t[i];var f=ji(l),p=f=="wrapper"?ls(l):r;p&&cs(p[0])&&p[1]==(G|oe|z|xe)&&!p[4].length&&p[9]==1?u=u[ji(p[0])].apply(u,p[3]):u=l.length==1&&cs(l)?u[f]():u.thru(l)}return function(){var w=arguments,S=w[0];if(u&&w.length==1&&Q(S))return u.plant(S).value();for(var $=0,D=n?t[$].apply(this,w):S;++$<n;)D=t[$].call(this,D);return D}})}function Zi(e,t,n,i,s,l,u,f,p,w){var S=t&G,$=t&B,D=t&ee,W=t&(oe|P),V=t&Ie,ne=D?r:fi(e);function K(){for(var le=arguments.length,ce=v(le),pt=le;pt--;)ce[pt]=arguments[pt];if(W)var Je=Gn(K),ht=Ou(ce,Je);if(i&&(ce=rl(ce,i,s,W)),l&&(ce=sl(ce,l,u,W)),le-=ht,W&&le<w){var Pe=ln(ce,Je);return pl(e,t,Zi,K.placeholder,n,ce,Pe,f,p,w-le)}var Ot=$?n:this,Qt=D?Ot[e]:e;return le=ce.length,f?ce=Wc(ce,f):V&&le>1&&ce.reverse(),S&&p<le&&(ce.length=p),this&&this!==qe&&this instanceof K&&(Qt=ne||fi(Qt)),Qt.apply(Ot,ce)}return K}function cl(e,t){return function(n,i){return Yf(n,e,t(i),{})}}function Xi(e,t){return function(n,i){var s;if(n===r&&i===r)return t;if(n!==r&&(s=n),i!==r){if(s===r)return i;typeof n=="string"||typeof i=="string"?(n=ct(n),i=ct(i)):(n=Xo(n),i=Xo(i)),s=e(n,i)}return s}}function is(e){return Yt(function(t){return t=Re(t,ft(H())),re(function(n){var i=this;return e(t,function(s){return ut(s,i,n)})})})}function Ji(e,t){t=t===r?" ":ct(t);var n=t.length;if(n<2)return n?Xr(t,e):t;var i=Xr(t,Pi(e/Pn(t)));return kn(t)?dn(It(i),0,e).join(""):i.slice(0,e)}function bc(e,t,n,i){var s=t&B,l=fi(e);function u(){for(var f=-1,p=arguments.length,w=-1,S=i.length,$=v(S+p),D=this&&this!==qe&&this instanceof u?l:e;++w<S;)$[w]=i[w];for(;p--;)$[w++]=arguments[++f];return ut(D,s?n:this,$)}return u}function dl(e){return function(t,n,i){return i&&typeof i!="number"&&Xe(t,n,i)&&(n=i=r),t=Jt(t),n===r?(n=t,t=0):n=Jt(n),i=i===r?t<n?1:-1:Jt(i),oc(t,n,i,e)}}function Qi(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Tt(t),n=Tt(n)),e(t,n)}}function pl(e,t,n,i,s,l,u,f,p,w){var S=t&oe,$=S?u:r,D=S?r:u,W=S?l:r,V=S?r:l;t|=S?z:Oe,t&=~(S?Oe:z),t&me||(t&=-4);var ne=[e,t,s,W,$,V,D,f,p,w],K=n.apply(r,ne);return cs(e)&&$l(K,ne),K.placeholder=i,Tl(K,e,t)}function rs(e){var t=Me[e];return function(n,i){if(n=Tt(n),i=i==null?0:Ge(te(i),292),i&&To(n)){var s=(ye(n)+"e").split("e"),l=t(s[0]+"e"+(+s[1]+i));return s=(ye(l)+"e").split("e"),+(s[0]+"e"+(+s[1]-i))}return t(n)}}var wc=Wn&&1/Ci(new Wn([,-0]))[1]==we?function(e){return new Wn(e)}:Ts;function hl(e){return function(t){var n=Ve(t);return n==lt?Er(t):n==at?Mu(t):Ru(t,e(t))}}function Kt(e,t,n,i,s,l,u,f){var p=t&ee;if(!p&&typeof e!="function")throw new bt(m);var w=i?i.length:0;if(w||(t&=-97,i=s=r),u=u===r?u:Be(te(u),0),f=f===r?f:te(f),w-=s?s.length:0,t&Oe){var S=i,$=s;i=s=r}var D=p?r:ls(e),W=[e,t,n,i,s,S,$,l,u,f];if(D&&Pc(W,D),e=W[0],t=W[1],n=W[2],i=W[3],s=W[4],f=W[9]=W[9]===r?p?0:e.length:Be(W[9]-w,0),!f&&t&(oe|P)&&(t&=-25),!t||t==B)var V=yc(e,t,n);else t==oe||t==P?V=xc(e,t,f):(t==z||t==(B|z))&&!s.length?V=bc(e,t,n,i):V=Zi.apply(r,W);var ne=D?Yo:$l;return Tl(ne(V,W),e,t)}function gl(e,t,n,i){return e===r||Rt(e,Bn[n])&&!be.call(i,n)?t:e}function _l(e,t,n,i,s,l){return Le(e)&&Le(t)&&(l.set(t,e),Gi(e,t,r,_l,l),l.delete(t)),e}function Sc(e){return pi(e)?r:e}function vl(e,t,n,i,s,l){var u=n&se,f=e.length,p=t.length;if(f!=p&&!(u&&p>f))return!1;var w=l.get(e),S=l.get(t);if(w&&S)return w==t&&S==e;var $=-1,D=!0,W=n&q?new xn:r;for(l.set(e,t),l.set(t,e);++$<f;){var V=e[$],ne=t[$];if(i)var K=u?i(ne,V,$,t,e,l):i(V,ne,$,e,t,l);if(K!==r){if(K)continue;D=!1;break}if(W){if(!Ir(t,function(le,ce){if(!jn(W,ce)&&(V===le||s(V,le,n,i,l)))return W.push(ce)})){D=!1;break}}else if(!(V===ne||s(V,ne,n,i,l))){D=!1;break}}return l.delete(e),l.delete(t),D}function Ac(e,t,n,i,s,l,u){switch(n){case rn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case nn:return!(e.byteLength!=t.byteLength||!l(new Di(e),new Di(t)));case Ut:case kt:case jt:return Rt(+e,+t);case ot:return e.name==t.name&&e.message==t.message;case en:case _n:return e==t+"";case lt:var f=Er;case at:var p=i&se;if(f||(f=Ci),e.size!=t.size&&!p)return!1;var w=u.get(e);if(w)return w==t;i|=q,u.set(e,t);var S=vl(f(e),f(t),i,s,l,u);return u.delete(e),S;case In:if(ri)return ri.call(e)==ri.call(t)}return!1}function $c(e,t,n,i,s,l){var u=n&se,f=ss(e),p=f.length,w=ss(t),S=w.length;if(p!=S&&!u)return!1;for(var $=p;$--;){var D=f[$];if(!(u?D in t:be.call(t,D)))return!1}var W=l.get(e),V=l.get(t);if(W&&V)return W==t&&V==e;var ne=!0;l.set(e,t),l.set(t,e);for(var K=u;++$<p;){D=f[$];var le=e[D],ce=t[D];if(i)var pt=u?i(ce,le,D,t,e,l):i(le,ce,D,e,t,l);if(!(pt===r?le===ce||s(le,ce,n,i,l):pt)){ne=!1;break}K||(K=D=="constructor")}if(ne&&!K){var Je=e.constructor,ht=t.constructor;Je!=ht&&"constructor"in e&&"constructor"in t&&!(typeof Je=="function"&&Je instanceof Je&&typeof ht=="function"&&ht instanceof ht)&&(ne=!1)}return l.delete(e),l.delete(t),ne}function Yt(e){return ps(Sl(e,r,Ll),e+"")}function ss(e){return Po(e,Fe,us)}function os(e){return Po(e,nt,ml)}var ls=Bi?function(e){return Bi.get(e)}:Ts;function ji(e){for(var t=e.name+"",n=Fn[t],i=be.call(Fn,t)?n.length:0;i--;){var s=n[i],l=s.func;if(l==null||l==e)return s.name}return t}function Gn(e){var t=be.call(o,"placeholder")?o:e;return t.placeholder}function H(){var e=o.iteratee||As;return e=e===As?Wo:e,arguments.length?e(arguments[0],arguments[1]):e}function er(e,t){var n=e.__data__;return Dc(t)?n[typeof t=="string"?"string":"hash"]:n.map}function as(e){for(var t=Fe(e),n=t.length;n--;){var i=t[n],s=e[i];t[n]=[i,s,bl(s)]}return t}function Sn(e,t){var n=Uu(e,t);return Bo(n)?n:r}function Tc(e){var t=be.call(e,mn),n=e[mn];try{e[mn]=r;var i=!0}catch{}var s=Oi.call(e);return i&&(t?e[mn]=n:delete e[mn]),s}var us=kr?function(e){return e==null?[]:(e=Ae(e),sn(kr(e),function(t){return Ao.call(e,t)}))}:Cs,ml=kr?function(e){for(var t=[];e;)on(t,us(e)),e=Ei(e);return t}:Cs,Ve=Ze;(Pr&&Ve(new Pr(new ArrayBuffer(1)))!=rn||ti&&Ve(new ti)!=lt||Mr&&Ve(Mr.resolve())!=gi||Wn&&Ve(new Wn)!=at||ni&&Ve(new ni)!=tn)&&(Ve=function(e){var t=Ze(e),n=t==Ct?e.constructor:r,i=n?An(n):"";if(i)switch(i){case af:return rn;case uf:return lt;case ff:return gi;case cf:return at;case df:return tn}return t});function Cc(e,t,n){for(var i=-1,s=n.length;++i<s;){var l=n[i],u=l.size;switch(l.type){case"drop":e+=u;break;case"dropRight":t-=u;break;case"take":t=Ge(t,e+u);break;case"takeRight":e=Be(e,t-u);break}}return{start:e,end:t}}function Ic(e){var t=e.match(Da);return t?t[1].split(Ea):[]}function yl(e,t,n){t=cn(t,e);for(var i=-1,s=t.length,l=!1;++i<s;){var u=Wt(t[i]);if(!(l=e!=null&&n(e,u)))break;e=e[u]}return l||++i!=s?l:(s=e==null?0:e.length,!!s&&lr(s)&&Zt(u,s)&&(Q(e)||$n(e)))}function zc(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&be.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function xl(e){return typeof e.constructor=="function"&&!ci(e)?qn(Ei(e)):{}}function Rc(e,t,n){var i=e.constructor;switch(t){case nn:return ns(e);case Ut:case kt:return new i(+e);case rn:return pc(e,n);case ue:case Ye:case He:case Pt:case zn:case Rn:case On:case Ln:case Dn:return nl(e,n);case lt:return new i;case jt:case _n:return new i(e);case en:return hc(e);case at:return new i;case In:return gc(e)}}function Oc(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(La,`{
/* [wrapped with `+t+`] */
`)}function Lc(e){return Q(e)||$n(e)||!!($o&&e&&e[$o])}function Zt(e,t){var n=typeof e;return t=t??Qe,!!t&&(n=="number"||n!="symbol"&&Na.test(e))&&e>-1&&e%1==0&&e<t}function Xe(e,t,n){if(!Le(n))return!1;var i=typeof t;return(i=="number"?tt(n)&&Zt(t,n.length):i=="string"&&t in n)?Rt(n[t],e):!1}function fs(e,t){if(Q(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||dt(e)?!0:Ia.test(e)||!Ca.test(e)||t!=null&&e in Ae(t)}function Dc(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function cs(e){var t=ji(e),n=o[t];if(typeof n!="function"||!(t in fe.prototype))return!1;if(e===n)return!0;var i=ls(n);return!!i&&e===i[0]}function Ec(e){return!!bo&&bo in e}var Uc=zi?Xt:Is;function ci(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Bn;return e===n}function bl(e){return e===e&&!Le(e)}function wl(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==r||e in Ae(n))}}function kc(e){var t=sr(e,function(i){return n.size===I&&n.clear(),i}),n=t.cache;return t}function Pc(e,t){var n=e[1],i=t[1],s=n|i,l=s<(B|ee|G),u=i==G&&n==oe||i==G&&n==xe&&e[7].length<=t[8]||i==(G|xe)&&t[7].length<=t[8]&&n==oe;if(!(l||u))return e;i&B&&(e[2]=t[2],s|=n&B?0:me);var f=t[3];if(f){var p=e[3];e[3]=p?rl(p,f,t[4]):f,e[4]=p?ln(e[3],Z):t[4]}return f=t[5],f&&(p=e[5],e[5]=p?sl(p,f,t[6]):f,e[6]=p?ln(e[5],Z):t[6]),f=t[7],f&&(e[7]=f),i&G&&(e[8]=e[8]==null?t[8]:Ge(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=s,e}function Mc(e){var t=[];if(e!=null)for(var n in Ae(e))t.push(n);return t}function Bc(e){return Oi.call(e)}function Sl(e,t,n){return t=Be(t===r?e.length-1:t,0),function(){for(var i=arguments,s=-1,l=Be(i.length-t,0),u=v(l);++s<l;)u[s]=i[t+s];s=-1;for(var f=v(t+1);++s<t;)f[s]=i[s];return f[t]=n(u),ut(e,this,f)}}function Al(e,t){return t.length<2?e:wn(e,At(t,0,-1))}function Wc(e,t){for(var n=e.length,i=Ge(t.length,n),s=et(e);i--;){var l=t[i];e[i]=Zt(l,n)?s[l]:r}return e}function ds(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var $l=Cl(Yo),di=ef||function(e,t){return qe.setTimeout(e,t)},ps=Cl(uc);function Tl(e,t,n){var i=t+"";return ps(e,Oc(i,Fc(Ic(i),n)))}function Cl(e){var t=0,n=0;return function(){var i=sf(),s=ie-(i-n);if(n=i,s>0){if(++t>=ae)return arguments[0]}else t=0;return e.apply(r,arguments)}}function tr(e,t){var n=-1,i=e.length,s=i-1;for(t=t===r?i:t;++n<t;){var l=Zr(n,s),u=e[l];e[l]=e[n],e[n]=u}return e.length=t,e}var Il=kc(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(za,function(n,i,s,l){t.push(s?l.replace(Pa,"$1"):i||n)}),t});function Wt(e){if(typeof e=="string"||dt(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function An(e){if(e!=null){try{return Ri.call(e)}catch{}try{return e+""}catch{}}return""}function Fc(e,t){return xt(he,function(n){var i="_."+n[0];t&n[1]&&!$i(e,i)&&e.push(i)}),e.sort()}function zl(e){if(e instanceof fe)return e.clone();var t=new wt(e.__wrapped__,e.__chain__);return t.__actions__=et(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function qc(e,t,n){(n?Xe(e,t,n):t===r)?t=1:t=Be(te(t),0);var i=e==null?0:e.length;if(!i||t<1)return[];for(var s=0,l=0,u=v(Pi(i/t));s<i;)u[l++]=At(e,s,s+=t);return u}function Nc(e){for(var t=-1,n=e==null?0:e.length,i=0,s=[];++t<n;){var l=e[t];l&&(s[i++]=l)}return s}function Hc(){var e=arguments.length;if(!e)return[];for(var t=v(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return on(Q(n)?et(n):[n],Ne(t,1))}var Gc=re(function(e,t){return ke(e)?oi(e,Ne(t,1,ke,!0)):[]}),Vc=re(function(e,t){var n=$t(t);return ke(n)&&(n=r),ke(e)?oi(e,Ne(t,1,ke,!0),H(n,2)):[]}),Kc=re(function(e,t){var n=$t(t);return ke(n)&&(n=r),ke(e)?oi(e,Ne(t,1,ke,!0),r,n):[]});function Yc(e,t,n){var i=e==null?0:e.length;return i?(t=n||t===r?1:te(t),At(e,t<0?0:t,i)):[]}function Zc(e,t,n){var i=e==null?0:e.length;return i?(t=n||t===r?1:te(t),t=i-t,At(e,0,t<0?0:t)):[]}function Xc(e,t){return e&&e.length?Ki(e,H(t,3),!0,!0):[]}function Jc(e,t){return e&&e.length?Ki(e,H(t,3),!0):[]}function Qc(e,t,n,i){var s=e==null?0:e.length;return s?(n&&typeof n!="number"&&Xe(e,t,n)&&(n=0,i=s),Hf(e,t,n,i)):[]}function Rl(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var s=n==null?0:te(n);return s<0&&(s=Be(i+s,0)),Ti(e,H(t,3),s)}function Ol(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var s=i-1;return n!==r&&(s=te(n),s=n<0?Be(i+s,0):Ge(s,i-1)),Ti(e,H(t,3),s,!0)}function Ll(e){var t=e==null?0:e.length;return t?Ne(e,1):[]}function jc(e){var t=e==null?0:e.length;return t?Ne(e,we):[]}function ed(e,t){var n=e==null?0:e.length;return n?(t=t===r?1:te(t),Ne(e,t)):[]}function td(e){for(var t=-1,n=e==null?0:e.length,i={};++t<n;){var s=e[t];i[s[0]]=s[1]}return i}function Dl(e){return e&&e.length?e[0]:r}function nd(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var s=n==null?0:te(n);return s<0&&(s=Be(i+s,0)),Un(e,t,s)}function id(e){var t=e==null?0:e.length;return t?At(e,0,-1):[]}var rd=re(function(e){var t=Re(e,es);return t.length&&t[0]===e[0]?Hr(t):[]}),sd=re(function(e){var t=$t(e),n=Re(e,es);return t===$t(n)?t=r:n.pop(),n.length&&n[0]===e[0]?Hr(n,H(t,2)):[]}),od=re(function(e){var t=$t(e),n=Re(e,es);return t=typeof t=="function"?t:r,t&&n.pop(),n.length&&n[0]===e[0]?Hr(n,r,t):[]});function ld(e,t){return e==null?"":nf.call(e,t)}function $t(e){var t=e==null?0:e.length;return t?e[t-1]:r}function ad(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var s=i;return n!==r&&(s=te(n),s=s<0?Be(i+s,0):Ge(s,i-1)),t===t?Wu(e,t,s):Ti(e,po,s,!0)}function ud(e,t){return e&&e.length?Ho(e,te(t)):r}var fd=re(El);function El(e,t){return e&&e.length&&t&&t.length?Yr(e,t):e}function cd(e,t,n){return e&&e.length&&t&&t.length?Yr(e,t,H(n,2)):e}function dd(e,t,n){return e&&e.length&&t&&t.length?Yr(e,t,r,n):e}var pd=Yt(function(e,t){var n=e==null?0:e.length,i=Wr(e,t);return Ko(e,Re(t,function(s){return Zt(s,n)?+s:s}).sort(il)),i});function hd(e,t){var n=[];if(!(e&&e.length))return n;var i=-1,s=[],l=e.length;for(t=H(t,3);++i<l;){var u=e[i];t(u,i,e)&&(n.push(u),s.push(i))}return Ko(e,s),n}function hs(e){return e==null?e:lf.call(e)}function gd(e,t,n){var i=e==null?0:e.length;return i?(n&&typeof n!="number"&&Xe(e,t,n)?(t=0,n=i):(t=t==null?0:te(t),n=n===r?i:te(n)),At(e,t,n)):[]}function _d(e,t){return Vi(e,t)}function vd(e,t,n){return Jr(e,t,H(n,2))}function md(e,t){var n=e==null?0:e.length;if(n){var i=Vi(e,t);if(i<n&&Rt(e[i],t))return i}return-1}function yd(e,t){return Vi(e,t,!0)}function xd(e,t,n){return Jr(e,t,H(n,2),!0)}function bd(e,t){var n=e==null?0:e.length;if(n){var i=Vi(e,t,!0)-1;if(Rt(e[i],t))return i}return-1}function wd(e){return e&&e.length?Zo(e):[]}function Sd(e,t){return e&&e.length?Zo(e,H(t,2)):[]}function Ad(e){var t=e==null?0:e.length;return t?At(e,1,t):[]}function $d(e,t,n){return e&&e.length?(t=n||t===r?1:te(t),At(e,0,t<0?0:t)):[]}function Td(e,t,n){var i=e==null?0:e.length;return i?(t=n||t===r?1:te(t),t=i-t,At(e,t<0?0:t,i)):[]}function Cd(e,t){return e&&e.length?Ki(e,H(t,3),!1,!0):[]}function Id(e,t){return e&&e.length?Ki(e,H(t,3)):[]}var zd=re(function(e){return fn(Ne(e,1,ke,!0))}),Rd=re(function(e){var t=$t(e);return ke(t)&&(t=r),fn(Ne(e,1,ke,!0),H(t,2))}),Od=re(function(e){var t=$t(e);return t=typeof t=="function"?t:r,fn(Ne(e,1,ke,!0),r,t)});function Ld(e){return e&&e.length?fn(e):[]}function Dd(e,t){return e&&e.length?fn(e,H(t,2)):[]}function Ed(e,t){return t=typeof t=="function"?t:r,e&&e.length?fn(e,r,t):[]}function gs(e){if(!(e&&e.length))return[];var t=0;return e=sn(e,function(n){if(ke(n))return t=Be(n.length,t),!0}),Lr(t,function(n){return Re(e,zr(n))})}function Ul(e,t){if(!(e&&e.length))return[];var n=gs(e);return t==null?n:Re(n,function(i){return ut(t,r,i)})}var Ud=re(function(e,t){return ke(e)?oi(e,t):[]}),kd=re(function(e){return jr(sn(e,ke))}),Pd=re(function(e){var t=$t(e);return ke(t)&&(t=r),jr(sn(e,ke),H(t,2))}),Md=re(function(e){var t=$t(e);return t=typeof t=="function"?t:r,jr(sn(e,ke),r,t)}),Bd=re(gs);function Wd(e,t){return jo(e||[],t||[],si)}function Fd(e,t){return jo(e||[],t||[],ui)}var qd=re(function(e){var t=e.length,n=t>1?e[t-1]:r;return n=typeof n=="function"?(e.pop(),n):r,Ul(e,n)});function kl(e){var t=o(e);return t.__chain__=!0,t}function Nd(e,t){return t(e),e}function nr(e,t){return t(e)}var Hd=Yt(function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,s=function(l){return Wr(l,e)};return t>1||this.__actions__.length||!(i instanceof fe)||!Zt(n)?this.thru(s):(i=i.slice(n,+n+(t?1:0)),i.__actions__.push({func:nr,args:[s],thisArg:r}),new wt(i,this.__chain__).thru(function(l){return t&&!l.length&&l.push(r),l}))});function Gd(){return kl(this)}function Vd(){return new wt(this.value(),this.__chain__)}function Kd(){this.__values__===r&&(this.__values__=Xl(this.value()));var e=this.__index__>=this.__values__.length,t=e?r:this.__values__[this.__index__++];return{done:e,value:t}}function Yd(){return this}function Zd(e){for(var t,n=this;n instanceof Fi;){var i=zl(n);i.__index__=0,i.__values__=r,t?s.__wrapped__=i:t=i;var s=i;n=n.__wrapped__}return s.__wrapped__=e,t}function Xd(){var e=this.__wrapped__;if(e instanceof fe){var t=e;return this.__actions__.length&&(t=new fe(this)),t=t.reverse(),t.__actions__.push({func:nr,args:[hs],thisArg:r}),new wt(t,this.__chain__)}return this.thru(hs)}function Jd(){return Qo(this.__wrapped__,this.__actions__)}var Qd=Yi(function(e,t,n){be.call(e,n)?++e[n]:Vt(e,n,1)});function jd(e,t,n){var i=Q(e)?fo:Nf;return n&&Xe(e,t,n)&&(t=r),i(e,H(t,3))}function ep(e,t){var n=Q(e)?sn:Uo;return n(e,H(t,3))}var tp=ul(Rl),np=ul(Ol);function ip(e,t){return Ne(ir(e,t),1)}function rp(e,t){return Ne(ir(e,t),we)}function sp(e,t,n){return n=n===r?1:te(n),Ne(ir(e,t),n)}function Pl(e,t){var n=Q(e)?xt:un;return n(e,H(t,3))}function Ml(e,t){var n=Q(e)?Su:Eo;return n(e,H(t,3))}var op=Yi(function(e,t,n){be.call(e,n)?e[n].push(t):Vt(e,n,[t])});function lp(e,t,n,i){e=tt(e)?e:Kn(e),n=n&&!i?te(n):0;var s=e.length;return n<0&&(n=Be(s+n,0)),ar(e)?n<=s&&e.indexOf(t,n)>-1:!!s&&Un(e,t,n)>-1}var ap=re(function(e,t,n){var i=-1,s=typeof t=="function",l=tt(e)?v(e.length):[];return un(e,function(u){l[++i]=s?ut(t,u,n):li(u,t,n)}),l}),up=Yi(function(e,t,n){Vt(e,n,t)});function ir(e,t){var n=Q(e)?Re:Fo;return n(e,H(t,3))}function fp(e,t,n,i){return e==null?[]:(Q(t)||(t=t==null?[]:[t]),n=i?r:n,Q(n)||(n=n==null?[]:[n]),Go(e,t,n))}var cp=Yi(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function dp(e,t,n){var i=Q(e)?Cr:go,s=arguments.length<3;return i(e,H(t,4),n,s,un)}function pp(e,t,n){var i=Q(e)?Au:go,s=arguments.length<3;return i(e,H(t,4),n,s,Eo)}function hp(e,t){var n=Q(e)?sn:Uo;return n(e,or(H(t,3)))}function gp(e){var t=Q(e)?Ro:lc;return t(e)}function _p(e,t,n){(n?Xe(e,t,n):t===r)?t=1:t=te(t);var i=Q(e)?Mf:ac;return i(e,t)}function vp(e){var t=Q(e)?Bf:fc;return t(e)}function mp(e){if(e==null)return 0;if(tt(e))return ar(e)?Pn(e):e.length;var t=Ve(e);return t==lt||t==at?e.size:Vr(e).length}function yp(e,t,n){var i=Q(e)?Ir:cc;return n&&Xe(e,t,n)&&(t=r),i(e,H(t,3))}var xp=re(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Xe(e,t[0],t[1])?t=[]:n>2&&Xe(t[0],t[1],t[2])&&(t=[t[0]]),Go(e,Ne(t,1),[])}),rr=ju||function(){return qe.Date.now()};function bp(e,t){if(typeof t!="function")throw new bt(m);return e=te(e),function(){if(--e<1)return t.apply(this,arguments)}}function Bl(e,t,n){return t=n?r:t,t=e&&t==null?e.length:t,Kt(e,G,r,r,r,r,t)}function Wl(e,t){var n;if(typeof t!="function")throw new bt(m);return e=te(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var _s=re(function(e,t,n){var i=B;if(n.length){var s=ln(n,Gn(_s));i|=z}return Kt(e,i,t,n,s)}),Fl=re(function(e,t,n){var i=B|ee;if(n.length){var s=ln(n,Gn(Fl));i|=z}return Kt(t,i,e,n,s)});function ql(e,t,n){t=n?r:t;var i=Kt(e,oe,r,r,r,r,r,t);return i.placeholder=ql.placeholder,i}function Nl(e,t,n){t=n?r:t;var i=Kt(e,P,r,r,r,r,r,t);return i.placeholder=Nl.placeholder,i}function Hl(e,t,n){var i,s,l,u,f,p,w=0,S=!1,$=!1,D=!0;if(typeof e!="function")throw new bt(m);t=Tt(t)||0,Le(n)&&(S=!!n.leading,$="maxWait"in n,l=$?Be(Tt(n.maxWait)||0,t):l,D="trailing"in n?!!n.trailing:D);function W(Pe){var Ot=i,Qt=s;return i=s=r,w=Pe,u=e.apply(Qt,Ot),u}function V(Pe){return w=Pe,f=di(le,t),S?W(Pe):u}function ne(Pe){var Ot=Pe-p,Qt=Pe-w,ua=t-Ot;return $?Ge(ua,l-Qt):ua}function K(Pe){var Ot=Pe-p,Qt=Pe-w;return p===r||Ot>=t||Ot<0||$&&Qt>=l}function le(){var Pe=rr();if(K(Pe))return ce(Pe);f=di(le,ne(Pe))}function ce(Pe){return f=r,D&&i?W(Pe):(i=s=r,u)}function pt(){f!==r&&el(f),w=0,i=p=s=f=r}function Je(){return f===r?u:ce(rr())}function ht(){var Pe=rr(),Ot=K(Pe);if(i=arguments,s=this,p=Pe,Ot){if(f===r)return V(p);if($)return el(f),f=di(le,t),W(p)}return f===r&&(f=di(le,t)),u}return ht.cancel=pt,ht.flush=Je,ht}var wp=re(function(e,t){return Do(e,1,t)}),Sp=re(function(e,t,n){return Do(e,Tt(t)||0,n)});function Ap(e){return Kt(e,Ie)}function sr(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new bt(m);var n=function(){var i=arguments,s=t?t.apply(this,i):i[0],l=n.cache;if(l.has(s))return l.get(s);var u=e.apply(this,i);return n.cache=l.set(s,u)||l,u};return n.cache=new(sr.Cache||Gt),n}sr.Cache=Gt;function or(e){if(typeof e!="function")throw new bt(m);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function $p(e){return Wl(2,e)}var Tp=dc(function(e,t){t=t.length==1&&Q(t[0])?Re(t[0],ft(H())):Re(Ne(t,1),ft(H()));var n=t.length;return re(function(i){for(var s=-1,l=Ge(i.length,n);++s<l;)i[s]=t[s].call(this,i[s]);return ut(e,this,i)})}),vs=re(function(e,t){var n=ln(t,Gn(vs));return Kt(e,z,r,t,n)}),Gl=re(function(e,t){var n=ln(t,Gn(Gl));return Kt(e,Oe,r,t,n)}),Cp=Yt(function(e,t){return Kt(e,xe,r,r,r,t)});function Ip(e,t){if(typeof e!="function")throw new bt(m);return t=t===r?t:te(t),re(e,t)}function zp(e,t){if(typeof e!="function")throw new bt(m);return t=t==null?0:Be(te(t),0),re(function(n){var i=n[t],s=dn(n,0,t);return i&&on(s,i),ut(e,this,s)})}function Rp(e,t,n){var i=!0,s=!0;if(typeof e!="function")throw new bt(m);return Le(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),Hl(e,t,{leading:i,maxWait:t,trailing:s})}function Op(e){return Bl(e,1)}function Lp(e,t){return vs(ts(t),e)}function Dp(){if(!arguments.length)return[];var e=arguments[0];return Q(e)?e:[e]}function Ep(e){return St(e,M)}function Up(e,t){return t=typeof t=="function"?t:r,St(e,M,t)}function kp(e){return St(e,Y|M)}function Pp(e,t){return t=typeof t=="function"?t:r,St(e,Y|M,t)}function Mp(e,t){return t==null||Lo(e,t,Fe(t))}function Rt(e,t){return e===t||e!==e&&t!==t}var Bp=Qi(Nr),Wp=Qi(function(e,t){return e>=t}),$n=Mo(function(){return arguments}())?Mo:function(e){return Ee(e)&&be.call(e,"callee")&&!Ao.call(e,"callee")},Q=v.isArray,Fp=ro?ft(ro):Zf;function tt(e){return e!=null&&lr(e.length)&&!Xt(e)}function ke(e){return Ee(e)&&tt(e)}function qp(e){return e===!0||e===!1||Ee(e)&&Ze(e)==Ut}var pn=tf||Is,Np=so?ft(so):Xf;function Hp(e){return Ee(e)&&e.nodeType===1&&!pi(e)}function Gp(e){if(e==null)return!0;if(tt(e)&&(Q(e)||typeof e=="string"||typeof e.splice=="function"||pn(e)||Vn(e)||$n(e)))return!e.length;var t=Ve(e);if(t==lt||t==at)return!e.size;if(ci(e))return!Vr(e).length;for(var n in e)if(be.call(e,n))return!1;return!0}function Vp(e,t){return ai(e,t)}function Kp(e,t,n){n=typeof n=="function"?n:r;var i=n?n(e,t):r;return i===r?ai(e,t,r,n):!!i}function ms(e){if(!Ee(e))return!1;var t=Ze(e);return t==ot||t==Se||typeof e.message=="string"&&typeof e.name=="string"&&!pi(e)}function Yp(e){return typeof e=="number"&&To(e)}function Xt(e){if(!Le(e))return!1;var t=Ze(e);return t==mt||t==Cn||t==qt||t==_i}function Vl(e){return typeof e=="number"&&e==te(e)}function lr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Qe}function Le(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Ee(e){return e!=null&&typeof e=="object"}var Kl=oo?ft(oo):Qf;function Zp(e,t){return e===t||Gr(e,t,as(t))}function Xp(e,t,n){return n=typeof n=="function"?n:r,Gr(e,t,as(t),n)}function Jp(e){return Yl(e)&&e!=+e}function Qp(e){if(Uc(e))throw new J(O);return Bo(e)}function jp(e){return e===null}function eh(e){return e==null}function Yl(e){return typeof e=="number"||Ee(e)&&Ze(e)==jt}function pi(e){if(!Ee(e)||Ze(e)!=Ct)return!1;var t=Ei(e);if(t===null)return!0;var n=be.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Ri.call(n)==Zu}var ys=lo?ft(lo):jf;function th(e){return Vl(e)&&e>=-9007199254740991&&e<=Qe}var Zl=ao?ft(ao):ec;function ar(e){return typeof e=="string"||!Q(e)&&Ee(e)&&Ze(e)==_n}function dt(e){return typeof e=="symbol"||Ee(e)&&Ze(e)==In}var Vn=uo?ft(uo):tc;function nh(e){return e===r}function ih(e){return Ee(e)&&Ve(e)==tn}function rh(e){return Ee(e)&&Ze(e)==vi}var sh=Qi(Kr),oh=Qi(function(e,t){return e<=t});function Xl(e){if(!e)return[];if(tt(e))return ar(e)?It(e):et(e);if(ei&&e[ei])return Pu(e[ei]());var t=Ve(e),n=t==lt?Er:t==at?Ci:Kn;return n(e)}function Jt(e){if(!e)return e===0?e:0;if(e=Tt(e),e===we||e===-1/0){var t=e<0?-1:1;return t*Et}return e===e?e:0}function te(e){var t=Jt(e),n=t%1;return t===t?n?t-n:t:0}function Jl(e){return e?bn(te(e),0,R):0}function Tt(e){if(typeof e=="number")return e;if(dt(e))return ze;if(Le(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Le(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=_o(e);var n=Wa.test(e);return n||qa.test(e)?xu(e.slice(2),n?2:8):Ba.test(e)?ze:+e}function Ql(e){return Bt(e,nt(e))}function lh(e){return e?bn(te(e),-9007199254740991,Qe):e===0?e:0}function ye(e){return e==null?"":ct(e)}var ah=Nn(function(e,t){if(ci(t)||tt(t)){Bt(t,Fe(t),e);return}for(var n in t)be.call(t,n)&&si(e,n,t[n])}),jl=Nn(function(e,t){Bt(t,nt(t),e)}),ur=Nn(function(e,t,n,i){Bt(t,nt(t),e,i)}),uh=Nn(function(e,t,n,i){Bt(t,Fe(t),e,i)}),fh=Yt(Wr);function ch(e,t){var n=qn(e);return t==null?n:Oo(n,t)}var dh=re(function(e,t){e=Ae(e);var n=-1,i=t.length,s=i>2?t[2]:r;for(s&&Xe(t[0],t[1],s)&&(i=1);++n<i;)for(var l=t[n],u=nt(l),f=-1,p=u.length;++f<p;){var w=u[f],S=e[w];(S===r||Rt(S,Bn[w])&&!be.call(e,w))&&(e[w]=l[w])}return e}),ph=re(function(e){return e.push(r,_l),ut(ea,r,e)});function hh(e,t){return co(e,H(t,3),Mt)}function gh(e,t){return co(e,H(t,3),qr)}function _h(e,t){return e==null?e:Fr(e,H(t,3),nt)}function vh(e,t){return e==null?e:ko(e,H(t,3),nt)}function mh(e,t){return e&&Mt(e,H(t,3))}function yh(e,t){return e&&qr(e,H(t,3))}function xh(e){return e==null?[]:Hi(e,Fe(e))}function bh(e){return e==null?[]:Hi(e,nt(e))}function xs(e,t,n){var i=e==null?r:wn(e,t);return i===r?n:i}function wh(e,t){return e!=null&&yl(e,t,Gf)}function bs(e,t){return e!=null&&yl(e,t,Vf)}var Sh=cl(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=Oi.call(t)),e[t]=n},Ss(it)),Ah=cl(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=Oi.call(t)),be.call(e,t)?e[t].push(n):e[t]=[n]},H),$h=re(li);function Fe(e){return tt(e)?zo(e):Vr(e)}function nt(e){return tt(e)?zo(e,!0):nc(e)}function Th(e,t){var n={};return t=H(t,3),Mt(e,function(i,s,l){Vt(n,t(i,s,l),i)}),n}function Ch(e,t){var n={};return t=H(t,3),Mt(e,function(i,s,l){Vt(n,s,t(i,s,l))}),n}var Ih=Nn(function(e,t,n){Gi(e,t,n)}),ea=Nn(function(e,t,n,i){Gi(e,t,n,i)}),zh=Yt(function(e,t){var n={};if(e==null)return n;var i=!1;t=Re(t,function(l){return l=cn(l,e),i||(i=l.length>1),l}),Bt(e,os(e),n),i&&(n=St(n,Y|j|M,Sc));for(var s=t.length;s--;)Qr(n,t[s]);return n});function Rh(e,t){return ta(e,or(H(t)))}var Oh=Yt(function(e,t){return e==null?{}:rc(e,t)});function ta(e,t){if(e==null)return{};var n=Re(os(e),function(i){return[i]});return t=H(t),Vo(e,n,function(i,s){return t(i,s[0])})}function Lh(e,t,n){t=cn(t,e);var i=-1,s=t.length;for(s||(s=1,e=r);++i<s;){var l=e==null?r:e[Wt(t[i])];l===r&&(i=s,l=n),e=Xt(l)?l.call(e):l}return e}function Dh(e,t,n){return e==null?e:ui(e,t,n)}function Eh(e,t,n,i){return i=typeof i=="function"?i:r,e==null?e:ui(e,t,n,i)}var na=hl(Fe),ia=hl(nt);function Uh(e,t,n){var i=Q(e),s=i||pn(e)||Vn(e);if(t=H(t,4),n==null){var l=e&&e.constructor;s?n=i?new l:[]:Le(e)?n=Xt(l)?qn(Ei(e)):{}:n={}}return(s?xt:Mt)(e,function(u,f,p){return t(n,u,f,p)}),n}function kh(e,t){return e==null?!0:Qr(e,t)}function Ph(e,t,n){return e==null?e:Jo(e,t,ts(n))}function Mh(e,t,n,i){return i=typeof i=="function"?i:r,e==null?e:Jo(e,t,ts(n),i)}function Kn(e){return e==null?[]:Dr(e,Fe(e))}function Bh(e){return e==null?[]:Dr(e,nt(e))}function Wh(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=Tt(n),n=n===n?n:0),t!==r&&(t=Tt(t),t=t===t?t:0),bn(Tt(e),t,n)}function Fh(e,t,n){return t=Jt(t),n===r?(n=t,t=0):n=Jt(n),e=Tt(e),Kf(e,t,n)}function qh(e,t,n){if(n&&typeof n!="boolean"&&Xe(e,t,n)&&(t=n=r),n===r&&(typeof t=="boolean"?(n=t,t=r):typeof e=="boolean"&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=Jt(e),t===r?(t=e,e=0):t=Jt(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var s=Co();return Ge(e+s*(t-e+yu("1e-"+((s+"").length-1))),t)}return Zr(e,t)}var Nh=Hn(function(e,t,n){return t=t.toLowerCase(),e+(n?ra(t):t)});function ra(e){return ws(ye(e).toLowerCase())}function sa(e){return e=ye(e),e&&e.replace(Ha,Lu).replace(uu,"")}function Hh(e,t,n){e=ye(e),t=ct(t);var i=e.length;n=n===r?i:bn(te(n),0,i);var s=n;return n-=t.length,n>=0&&e.slice(n,s)==t}function Gh(e){return e=ye(e),e&&bi.test(e)?e.replace(Qn,Du):e}function Vh(e){return e=ye(e),e&&Ra.test(e)?e.replace(vr,"\\$&"):e}var Kh=Hn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Yh=Hn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Zh=al("toLowerCase");function Xh(e,t,n){e=ye(e),t=te(t);var i=t?Pn(e):0;if(!t||i>=t)return e;var s=(t-i)/2;return Ji(Mi(s),n)+e+Ji(Pi(s),n)}function Jh(e,t,n){e=ye(e),t=te(t);var i=t?Pn(e):0;return t&&i<t?e+Ji(t-i,n):e}function Qh(e,t,n){e=ye(e),t=te(t);var i=t?Pn(e):0;return t&&i<t?Ji(t-i,n)+e:e}function jh(e,t,n){return n||t==null?t=0:t&&(t=+t),of(ye(e).replace(mr,""),t||0)}function eg(e,t,n){return(n?Xe(e,t,n):t===r)?t=1:t=te(t),Xr(ye(e),t)}function tg(){var e=arguments,t=ye(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var ng=Hn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function ig(e,t,n){return n&&typeof n!="number"&&Xe(e,t,n)&&(t=n=r),n=n===r?R:n>>>0,n?(e=ye(e),e&&(typeof t=="string"||t!=null&&!ys(t))&&(t=ct(t),!t&&kn(e))?dn(It(e),0,n):e.split(t,n)):[]}var rg=Hn(function(e,t,n){return e+(n?" ":"")+ws(t)});function sg(e,t,n){return e=ye(e),n=n==null?0:bn(te(n),0,e.length),t=ct(t),e.slice(n,n+t.length)==t}function og(e,t,n){var i=o.templateSettings;n&&Xe(e,t,n)&&(t=r),e=ye(e),t=ur({},t,i,gl);var s=ur({},t.imports,i.imports,gl),l=Fe(s),u=Dr(s,l),f,p,w=0,S=t.interpolate||wi,$="__p += '",D=Ur((t.escape||wi).source+"|"+S.source+"|"+(S===ks?Ma:wi).source+"|"+(t.evaluate||wi).source+"|$","g"),W="//# sourceURL="+(be.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++hu+"]")+`
`;e.replace(D,function(K,le,ce,pt,Je,ht){return ce||(ce=pt),$+=e.slice(w,ht).replace(Ga,Eu),le&&(f=!0,$+=`' +
__e(`+le+`) +
'`),Je&&(p=!0,$+=`';
`+Je+`;
__p += '`),ce&&($+=`' +
((__t = (`+ce+`)) == null ? '' : __t) +
'`),w=ht+K.length,K}),$+=`';
`;var V=be.call(t,"variable")&&t.variable;if(!V)$=`with (obj) {
`+$+`
}
`;else if(ka.test(V))throw new J(C);$=(p?$.replace(mi,""):$).replace(yi,"$1").replace(xi,"$1;"),$="function("+(V||"obj")+`) {
`+(V?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(f?", __e = _.escape":"")+(p?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+$+`return __p
}`;var ne=la(function(){return ve(l,W+"return "+$).apply(r,u)});if(ne.source=$,ms(ne))throw ne;return ne}function lg(e){return ye(e).toLowerCase()}function ag(e){return ye(e).toUpperCase()}function ug(e,t,n){if(e=ye(e),e&&(n||t===r))return _o(e);if(!e||!(t=ct(t)))return e;var i=It(e),s=It(t),l=vo(i,s),u=mo(i,s)+1;return dn(i,l,u).join("")}function fg(e,t,n){if(e=ye(e),e&&(n||t===r))return e.slice(0,xo(e)+1);if(!e||!(t=ct(t)))return e;var i=It(e),s=mo(i,It(t))+1;return dn(i,0,s).join("")}function cg(e,t,n){if(e=ye(e),e&&(n||t===r))return e.replace(mr,"");if(!e||!(t=ct(t)))return e;var i=It(e),s=vo(i,It(t));return dn(i,s).join("")}function dg(e,t){var n=U,i=E;if(Le(t)){var s="separator"in t?t.separator:s;n="length"in t?te(t.length):n,i="omission"in t?ct(t.omission):i}e=ye(e);var l=e.length;if(kn(e)){var u=It(e);l=u.length}if(n>=l)return e;var f=n-Pn(i);if(f<1)return i;var p=u?dn(u,0,f).join(""):e.slice(0,f);if(s===r)return p+i;if(u&&(f+=p.length-f),ys(s)){if(e.slice(f).search(s)){var w,S=p;for(s.global||(s=Ur(s.source,ye(Ps.exec(s))+"g")),s.lastIndex=0;w=s.exec(S);)var $=w.index;p=p.slice(0,$===r?f:$)}}else if(e.indexOf(ct(s),f)!=f){var D=p.lastIndexOf(s);D>-1&&(p=p.slice(0,D))}return p+i}function pg(e){return e=ye(e),e&&je.test(e)?e.replace(Jn,Fu):e}var hg=Hn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),ws=al("toUpperCase");function oa(e,t,n){return e=ye(e),t=n?r:t,t===r?ku(e)?Hu(e):Cu(e):e.match(t)||[]}var la=re(function(e,t){try{return ut(e,r,t)}catch(n){return ms(n)?n:new J(n)}}),gg=Yt(function(e,t){return xt(t,function(n){n=Wt(n),Vt(e,n,_s(e[n],e))}),e});function _g(e){var t=e==null?0:e.length,n=H();return e=t?Re(e,function(i){if(typeof i[1]!="function")throw new bt(m);return[n(i[0]),i[1]]}):[],re(function(i){for(var s=-1;++s<t;){var l=e[s];if(ut(l[0],this,i))return ut(l[1],this,i)}})}function vg(e){return qf(St(e,Y))}function Ss(e){return function(){return e}}function mg(e,t){return e==null||e!==e?t:e}var yg=fl(),xg=fl(!0);function it(e){return e}function As(e){return Wo(typeof e=="function"?e:St(e,Y))}function bg(e){return qo(St(e,Y))}function wg(e,t){return No(e,St(t,Y))}var Sg=re(function(e,t){return function(n){return li(n,e,t)}}),Ag=re(function(e,t){return function(n){return li(e,n,t)}});function $s(e,t,n){var i=Fe(t),s=Hi(t,i);n==null&&!(Le(t)&&(s.length||!i.length))&&(n=t,t=e,e=this,s=Hi(t,Fe(t)));var l=!(Le(n)&&"chain"in n)||!!n.chain,u=Xt(e);return xt(s,function(f){var p=t[f];e[f]=p,u&&(e.prototype[f]=function(){var w=this.__chain__;if(l||w){var S=e(this.__wrapped__),$=S.__actions__=et(this.__actions__);return $.push({func:p,args:arguments,thisArg:e}),S.__chain__=w,S}return p.apply(e,on([this.value()],arguments))})}),e}function $g(){return qe._===this&&(qe._=Xu),this}function Ts(){}function Tg(e){return e=te(e),re(function(t){return Ho(t,e)})}var Cg=is(Re),Ig=is(fo),zg=is(Ir);function aa(e){return fs(e)?zr(Wt(e)):sc(e)}function Rg(e){return function(t){return e==null?r:wn(e,t)}}var Og=dl(),Lg=dl(!0);function Cs(){return[]}function Is(){return!1}function Dg(){return{}}function Eg(){return""}function Ug(){return!0}function kg(e,t){if(e=te(e),e<1||e>Qe)return[];var n=R,i=Ge(e,R);t=H(t),e-=R;for(var s=Lr(i,t);++n<e;)t(n);return s}function Pg(e){return Q(e)?Re(e,Wt):dt(e)?[e]:et(Il(ye(e)))}function Mg(e){var t=++Yu;return ye(e)+t}var Bg=Xi(function(e,t){return e+t},0),Wg=rs("ceil"),Fg=Xi(function(e,t){return e/t},1),qg=rs("floor");function Ng(e){return e&&e.length?Ni(e,it,Nr):r}function Hg(e,t){return e&&e.length?Ni(e,H(t,2),Nr):r}function Gg(e){return ho(e,it)}function Vg(e,t){return ho(e,H(t,2))}function Kg(e){return e&&e.length?Ni(e,it,Kr):r}function Yg(e,t){return e&&e.length?Ni(e,H(t,2),Kr):r}var Zg=Xi(function(e,t){return e*t},1),Xg=rs("round"),Jg=Xi(function(e,t){return e-t},0);function Qg(e){return e&&e.length?Or(e,it):0}function jg(e,t){return e&&e.length?Or(e,H(t,2)):0}return o.after=bp,o.ary=Bl,o.assign=ah,o.assignIn=jl,o.assignInWith=ur,o.assignWith=uh,o.at=fh,o.before=Wl,o.bind=_s,o.bindAll=gg,o.bindKey=Fl,o.castArray=Dp,o.chain=kl,o.chunk=qc,o.compact=Nc,o.concat=Hc,o.cond=_g,o.conforms=vg,o.constant=Ss,o.countBy=Qd,o.create=ch,o.curry=ql,o.curryRight=Nl,o.debounce=Hl,o.defaults=dh,o.defaultsDeep=ph,o.defer=wp,o.delay=Sp,o.difference=Gc,o.differenceBy=Vc,o.differenceWith=Kc,o.drop=Yc,o.dropRight=Zc,o.dropRightWhile=Xc,o.dropWhile=Jc,o.fill=Qc,o.filter=ep,o.flatMap=ip,o.flatMapDeep=rp,o.flatMapDepth=sp,o.flatten=Ll,o.flattenDeep=jc,o.flattenDepth=ed,o.flip=Ap,o.flow=yg,o.flowRight=xg,o.fromPairs=td,o.functions=xh,o.functionsIn=bh,o.groupBy=op,o.initial=id,o.intersection=rd,o.intersectionBy=sd,o.intersectionWith=od,o.invert=Sh,o.invertBy=Ah,o.invokeMap=ap,o.iteratee=As,o.keyBy=up,o.keys=Fe,o.keysIn=nt,o.map=ir,o.mapKeys=Th,o.mapValues=Ch,o.matches=bg,o.matchesProperty=wg,o.memoize=sr,o.merge=Ih,o.mergeWith=ea,o.method=Sg,o.methodOf=Ag,o.mixin=$s,o.negate=or,o.nthArg=Tg,o.omit=zh,o.omitBy=Rh,o.once=$p,o.orderBy=fp,o.over=Cg,o.overArgs=Tp,o.overEvery=Ig,o.overSome=zg,o.partial=vs,o.partialRight=Gl,o.partition=cp,o.pick=Oh,o.pickBy=ta,o.property=aa,o.propertyOf=Rg,o.pull=fd,o.pullAll=El,o.pullAllBy=cd,o.pullAllWith=dd,o.pullAt=pd,o.range=Og,o.rangeRight=Lg,o.rearg=Cp,o.reject=hp,o.remove=hd,o.rest=Ip,o.reverse=hs,o.sampleSize=_p,o.set=Dh,o.setWith=Eh,o.shuffle=vp,o.slice=gd,o.sortBy=xp,o.sortedUniq=wd,o.sortedUniqBy=Sd,o.split=ig,o.spread=zp,o.tail=Ad,o.take=$d,o.takeRight=Td,o.takeRightWhile=Cd,o.takeWhile=Id,o.tap=Nd,o.throttle=Rp,o.thru=nr,o.toArray=Xl,o.toPairs=na,o.toPairsIn=ia,o.toPath=Pg,o.toPlainObject=Ql,o.transform=Uh,o.unary=Op,o.union=zd,o.unionBy=Rd,o.unionWith=Od,o.uniq=Ld,o.uniqBy=Dd,o.uniqWith=Ed,o.unset=kh,o.unzip=gs,o.unzipWith=Ul,o.update=Ph,o.updateWith=Mh,o.values=Kn,o.valuesIn=Bh,o.without=Ud,o.words=oa,o.wrap=Lp,o.xor=kd,o.xorBy=Pd,o.xorWith=Md,o.zip=Bd,o.zipObject=Wd,o.zipObjectDeep=Fd,o.zipWith=qd,o.entries=na,o.entriesIn=ia,o.extend=jl,o.extendWith=ur,$s(o,o),o.add=Bg,o.attempt=la,o.camelCase=Nh,o.capitalize=ra,o.ceil=Wg,o.clamp=Wh,o.clone=Ep,o.cloneDeep=kp,o.cloneDeepWith=Pp,o.cloneWith=Up,o.conformsTo=Mp,o.deburr=sa,o.defaultTo=mg,o.divide=Fg,o.endsWith=Hh,o.eq=Rt,o.escape=Gh,o.escapeRegExp=Vh,o.every=jd,o.find=tp,o.findIndex=Rl,o.findKey=hh,o.findLast=np,o.findLastIndex=Ol,o.findLastKey=gh,o.floor=qg,o.forEach=Pl,o.forEachRight=Ml,o.forIn=_h,o.forInRight=vh,o.forOwn=mh,o.forOwnRight=yh,o.get=xs,o.gt=Bp,o.gte=Wp,o.has=wh,o.hasIn=bs,o.head=Dl,o.identity=it,o.includes=lp,o.indexOf=nd,o.inRange=Fh,o.invoke=$h,o.isArguments=$n,o.isArray=Q,o.isArrayBuffer=Fp,o.isArrayLike=tt,o.isArrayLikeObject=ke,o.isBoolean=qp,o.isBuffer=pn,o.isDate=Np,o.isElement=Hp,o.isEmpty=Gp,o.isEqual=Vp,o.isEqualWith=Kp,o.isError=ms,o.isFinite=Yp,o.isFunction=Xt,o.isInteger=Vl,o.isLength=lr,o.isMap=Kl,o.isMatch=Zp,o.isMatchWith=Xp,o.isNaN=Jp,o.isNative=Qp,o.isNil=eh,o.isNull=jp,o.isNumber=Yl,o.isObject=Le,o.isObjectLike=Ee,o.isPlainObject=pi,o.isRegExp=ys,o.isSafeInteger=th,o.isSet=Zl,o.isString=ar,o.isSymbol=dt,o.isTypedArray=Vn,o.isUndefined=nh,o.isWeakMap=ih,o.isWeakSet=rh,o.join=ld,o.kebabCase=Kh,o.last=$t,o.lastIndexOf=ad,o.lowerCase=Yh,o.lowerFirst=Zh,o.lt=sh,o.lte=oh,o.max=Ng,o.maxBy=Hg,o.mean=Gg,o.meanBy=Vg,o.min=Kg,o.minBy=Yg,o.stubArray=Cs,o.stubFalse=Is,o.stubObject=Dg,o.stubString=Eg,o.stubTrue=Ug,o.multiply=Zg,o.nth=ud,o.noConflict=$g,o.noop=Ts,o.now=rr,o.pad=Xh,o.padEnd=Jh,o.padStart=Qh,o.parseInt=jh,o.random=qh,o.reduce=dp,o.reduceRight=pp,o.repeat=eg,o.replace=tg,o.result=Lh,o.round=Xg,o.runInContext=d,o.sample=gp,o.size=mp,o.snakeCase=ng,o.some=yp,o.sortedIndex=_d,o.sortedIndexBy=vd,o.sortedIndexOf=md,o.sortedLastIndex=yd,o.sortedLastIndexBy=xd,o.sortedLastIndexOf=bd,o.startCase=rg,o.startsWith=sg,o.subtract=Jg,o.sum=Qg,o.sumBy=jg,o.template=og,o.times=kg,o.toFinite=Jt,o.toInteger=te,o.toLength=Jl,o.toLower=lg,o.toNumber=Tt,o.toSafeInteger=lh,o.toString=ye,o.toUpper=ag,o.trim=ug,o.trimEnd=fg,o.trimStart=cg,o.truncate=dg,o.unescape=pg,o.uniqueId=Mg,o.upperCase=hg,o.upperFirst=ws,o.each=Pl,o.eachRight=Ml,o.first=Dl,$s(o,function(){var e={};return Mt(o,function(t,n){be.call(o.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),o.VERSION=g,xt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){o[e].placeholder=o}),xt(["drop","take"],function(e,t){fe.prototype[e]=function(n){n=n===r?1:Be(te(n),0);var i=this.__filtered__&&!t?new fe(this):this.clone();return i.__filtered__?i.__takeCount__=Ge(n,i.__takeCount__):i.__views__.push({size:Ge(n,R),type:e+(i.__dir__<0?"Right":"")}),i},fe.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),xt(["filter","map","takeWhile"],function(e,t){var n=t+1,i=n==Ke||n==Ue;fe.prototype[e]=function(s){var l=this.clone();return l.__iteratees__.push({iteratee:H(s,3),type:n}),l.__filtered__=l.__filtered__||i,l}}),xt(["head","last"],function(e,t){var n="take"+(t?"Right":"");fe.prototype[e]=function(){return this[n](1).value()[0]}}),xt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");fe.prototype[e]=function(){return this.__filtered__?new fe(this):this[n](1)}}),fe.prototype.compact=function(){return this.filter(it)},fe.prototype.find=function(e){return this.filter(e).head()},fe.prototype.findLast=function(e){return this.reverse().find(e)},fe.prototype.invokeMap=re(function(e,t){return typeof e=="function"?new fe(this):this.map(function(n){return li(n,e,t)})}),fe.prototype.reject=function(e){return this.filter(or(H(e)))},fe.prototype.slice=function(e,t){e=te(e);var n=this;return n.__filtered__&&(e>0||t<0)?new fe(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(t=te(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},fe.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},fe.prototype.toArray=function(){return this.take(R)},Mt(fe.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),s=o[i?"take"+(t=="last"?"Right":""):t],l=i||/^find/.test(t);s&&(o.prototype[t]=function(){var u=this.__wrapped__,f=i?[1]:arguments,p=u instanceof fe,w=f[0],S=p||Q(u),$=function(le){var ce=s.apply(o,on([le],f));return i&&D?ce[0]:ce};S&&n&&typeof w=="function"&&w.length!=1&&(p=S=!1);var D=this.__chain__,W=!!this.__actions__.length,V=l&&!D,ne=p&&!W;if(!l&&S){u=ne?u:new fe(this);var K=e.apply(u,f);return K.__actions__.push({func:nr,args:[$],thisArg:r}),new wt(K,D)}return V&&ne?e.apply(this,f):(K=this.thru($),V?i?K.value()[0]:K.value():K)})}),xt(["pop","push","shift","sort","splice","unshift"],function(e){var t=Ii[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);o.prototype[e]=function(){var s=arguments;if(i&&!this.__chain__){var l=this.value();return t.apply(Q(l)?l:[],s)}return this[n](function(u){return t.apply(Q(u)?u:[],s)})}}),Mt(fe.prototype,function(e,t){var n=o[t];if(n){var i=n.name+"";be.call(Fn,i)||(Fn[i]=[]),Fn[i].push({name:t,func:n})}}),Fn[Zi(r,ee).name]=[{name:"wrapper",func:r}],fe.prototype.clone=pf,fe.prototype.reverse=hf,fe.prototype.value=gf,o.prototype.at=Hd,o.prototype.chain=Gd,o.prototype.commit=Vd,o.prototype.next=Kd,o.prototype.plant=Zd,o.prototype.reverse=Xd,o.prototype.toJSON=o.prototype.valueOf=o.prototype.value=Jd,o.prototype.first=o.prototype.head,ei&&(o.prototype[ei]=Yd),o},Mn=Gu();vn?((vn.exports=Mn)._=Mn,Ar._=Mn):qe._=Mn}).call(ev)}(hi,hi.exports)),hi.exports}var Ft=tv();const nv={class:""},iv={class:"group py-2"},rv={class:"flex items-center justify-between"},sv={class:"py-4"},ov={class:"flex flex-col gap-5"},lv={class:"flex flex-col gap-2"},av={class:"flex flex-col gap-2 p-3 bg-gray-50 border border-gray-200 rounded-lg"},uv={class:"flex items-center justify-between"},fv={class:"flex flex-col gap-2"},cv={class:"flex flex-col p-3 bg-gray-50 border border-gray-200 rounded-lg"},dv={class:"flex items-center justify-between"},pv={class:"flex items-center justify-between"},hv=Dt({__name:"ReviewConfigAbilityItem",props:{app_id:{type:String,default:"",required:!0},review_config:{type:Object,default:{},required:!0}},setup(a){var Y,j,M,se,q,B,ee,me,oe;const c=a,{loading:r,handleUpdateDraftAppConfig:g}=gn(),y=ge(!1),O=ge(!1),m=ge({enable:(Y=c.review_config)==null?void 0:Y.enable,keywords:(M=(j=c.review_config)==null?void 0:j.keywords)==null?void 0:M.join(`
`),inputs_config:{enable:(q=(se=c.review_config)==null?void 0:se.inputs_config)==null?void 0:q.enable,preset_response:(ee=(B=c.review_config)==null?void 0:B.inputs_config)==null?void 0:ee.preset_response},outputs_config:{enable:(oe=(me=c.review_config)==null?void 0:me.outputs_config)==null?void 0:oe.enable}}),C=ge({...Ft.cloneDeep(m.value)}),A=()=>Ft.isEqual(C.value,m.value),I=()=>{O.value=!1,m.value=Ft.cloneDeep(C.value)},Z=async()=>{try{await g(c.app_id,{review_config:{enable:m.value.enable,keywords:m.value.keywords.split(/\r?\n/).filter(P=>P.trim()!==""),inputs_config:m.value.inputs_config,outputs_config:m.value.outputs_config}}),C.value=Ft.cloneDeep(m.value),await Tn(),I()}catch{}};return cr(()=>c.review_config,P=>{(!y.value||!A())&&P&&Object.keys(P).length>0&&(m.value=Ft.cloneDeep({...P,keywords:P==null?void 0:P.keywords.join(`
`)}),C.value=Ft.cloneDeep({...P,keywords:P==null?void 0:P.keywords.join(`
`)}),y.value=!0)},{immediate:!0,deep:!0}),(P,z)=>{const Oe=T("icon-down"),G=T("a-button"),xe=T("a-doption"),Ie=T("a-dropdown"),U=T("icon-settings"),E=T("a-collapse-item"),ae=T("icon-close"),ie=T("a-textarea"),Ke=T("a-switch"),rt=T("a-space"),Ue=T("a-modal");return L(),F("div",nv,[h(E,{key:"review_config",class:"app-ability-item review-config-ability-item"},{header:b(()=>z[7]||(z[7]=[_("div",{class:"text-gray-700 font-bold"},"内容审查",-1)])),extra:b(()=>[h(Ie,{onSelect:z[1]||(z[1]=async we=>{if(!!we!==m.value.enable)try{m.value.enable=!!we,await Tn(),await Z()}catch{}})},{content:b(()=>[h(xe,{value:1,class:"text-xs py-1.5 text-gray-700"},{default:b(()=>z[8]||(z[8]=[de("开启")])),_:1}),h(xe,{value:0,class:"text-xs py-1.5 text-red-700"},{default:b(()=>z[9]||(z[9]=[de("关闭")])),_:1})]),default:b(()=>[h(G,{size:"mini",class:"rounded-lg flex items-center gap-1 px-1",onClick:z[0]||(z[0]=Zn(()=>{},["stop"]))},{default:b(()=>[de(_e(m.value.enable?"开启":"关闭")+" ",1),h(Oe)]),_:1})]),_:1})]),default:b(()=>[_("div",iv,[z[11]||(z[11]=_("div",{class:"text-xs text-gray-500 leading-[22px] group-hover:hidden"}," 对用户输入以及大语言模型输出内容进行审查。 ",-1)),h(G,{size:"small",long:"",class:"hidden group-hover:block rounded-lg transition-all",onClick:z[2]||(z[2]=we=>O.value=!0)},{icon:b(()=>[h(U)]),default:b(()=>[z[10]||(z[10]=de(" 设置 "))]),_:1})])]),_:1}),h(Ue,{visible:O.value,"hide-title":"",footer:!1,"modal-class":"rounded-xl",onCancel:I},{default:b(()=>[_("div",rv,[z[12]||(z[12]=_("div",{class:"text-lg font-bold text-gray-700"},"内容审核",-1)),h(G,{type:"text",class:"!text-gray-700",size:"small",onClick:I},{icon:b(()=>[h(ae)]),_:1})]),_("div",sv,[_("div",ov,[_("div",lv,[z[13]||(z[13]=_("div",{class:"flex flex-col"},[_("div",{class:"flex items-center gap-1 text-gray-700"},[de(" 关键词 "),_("div",{class:"text-red-700"},"*")]),_("div",{class:"text-gray-500 text-xs"},"每行一个，用换行符分割，最多填写100个关键词")],-1)),h(ie,{"model-value":m.value.keywords,"onUpdate:modelValue":z[3]||(z[3]=we=>m.value.keywords=we),class:"bg-white rounded-lg border border-gray-200",placeholder:"每行一个，用换行符分隔。","max-length":100,"show-word-limit":"","auto-size":{minRows:4,maxRows:4},"word-length":we=>we.trim()===""?0:we.split(/\r?\n/).length,"word-slice":(we,Qe)=>we.split(/\r?\n/).slice(0,Qe).join(`
`)},null,8,["model-value","word-length","word-slice"])]),_("div",av,[_("div",uv,[z[14]||(z[14]=_("div",{class:"text-gray-700"},"输入审查内容",-1)),h(Ke,{"model-value":m.value.inputs_config.enable,"onUpdate:modelValue":z[4]||(z[4]=we=>m.value.inputs_config.enable=we),size:"small",type:"round","checked-color":"#10b981","unchecked-color":"#556581"},null,8,["model-value"])]),_("div",fv,[z[15]||(z[15]=_("div",{class:"text-gray-700 text-xs"},"预设回复",-1)),h(ie,{"model-value":m.value.inputs_config.preset_response,"onUpdate:modelValue":z[5]||(z[5]=we=>m.value.inputs_config.preset_response=we),placeholder:"这里是预设回复内容",class:"bg-white rounded-lg border border-gray-200","auto-size":{minRows:3,maxRows:3}},null,8,["model-value"])])]),_("div",cv,[_("div",dv,[z[16]||(z[16]=_("div",{class:"text-gray-700"},"输出审查内容",-1)),h(Ke,{"model-value":m.value.outputs_config.enable,"onUpdate:modelValue":z[6]||(z[6]=we=>m.value.outputs_config.enable=we),size:"small",type:"round","checked-color":"#10b981","unchecked-color":"#556581"},null,8,["model-value"])])])])]),_("div",pv,[z[19]||(z[19]=_("div",{class:""},null,-1)),h(rt,{size:16},{default:b(()=>[h(G,{class:"rounded-lg",onClick:I},{default:b(()=>z[17]||(z[17]=[de("取消")])),_:1}),h(G,{loading:N(r),type:"primary",class:"rounded-lg",onClick:Z},{default:b(()=>z[18]||(z[18]=[de(" 保存 ")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["visible"])])}}}),gv={class:""},_v={key:0,class:""},vv={key:1,class:""},mv={key:2,class:""},yv={key:0,class:"flex flex-col gap-1"},xv={class:"flex items-center gap-2"},bv={class:"flex flex-col flex-1 gap-1 h-9"},wv={class:"text-gray-700 font-bold leading-[18px] line-clamp-1 break-all"},Sv={class:"text-gray-500 text-xs line-clamp-1 break-all"},Av={key:1,class:"text-xs text-gray-500 leading-[22px]"},$v={class:"flex items-center justify-between mb-6"},Tv={class:"h-[calc(100vh-180px)] mb-4 overflow-scroll scrollbar-w-none"},Cv={class:"flex flex-col gap-2"},Iv=["onClick"],zv={class:"line-clamp-1 text-gray-500 flex-1"},Rv={class:"flex items-center justify-between"},Ov={class:""},Lv={class:"flex items-center justify-between"},Dv={class:"flex items-center gap-4 w-full pl-3"},Ev={class:"flex items-center gap-4 w-full pl-3"},Uv={class:"flex items-center justify-between"},kv=Dt({__name:"DatasetsAbilityItem",props:{app_id:{type:String,default:"",required:!0},retrieval_config:{type:Object,default:{},required:!0},datasets:{type:Array,default:[],required:!0}},emits:["update:datasets","update:retrieval_config"],setup(a,{emit:c}){const r=a,g=c,{loading:y,handleUpdateDraftAppConfig:O}=gn(),{loading:m,paginator:C,datasets:A,loadDatasets:I}=b_(),Z=ge(!1),Y=ge(!1),j=ge(!1),M=ge([]),se=ge([]),q=ge({}),B=ge({}),ee=ge(!1),me=async U=>{const{scrollTop:E,scrollHeight:ae,clientHeight:ie}=U.target;if(E+ie>=ae-10){if(m.value)return;await I()}},oe=()=>Ft.isEqual(M.value,se.value),P=()=>Ft.isEqual(q.value,B.value),z=()=>{Z.value=!1,M.value=se.value,j.value=!1},Oe=()=>{Y.value=!1,q.value=B.value,ee.value=!1},G=U=>{const E=A[U];if(M.value.some(ae=>ae.id===E.id))M.value=M.value.filter(ae=>ae.id!==E.id);else{if(M.value.length>=5){Yn.warning("关联知识库已超过5个，无法继续关联");return}M.value.push({id:E.id,name:E.name,icon:E.icon,description:E.description})}},xe=async()=>{try{await O(r.app_id,{datasets:M.value.map(U=>U.id)}),se.value=M.value,await Tn(),g("update:datasets",M.value),z()}catch(U){Yn.error(U.message)}},Ie=async()=>{try{await O(r.app_id,{retrieval_config:q.value}),B.value=q.value,g("update:retrieval_config",q.value),Oe()}catch(U){Yn.error(U.message)}};return cr(()=>r.datasets,U=>{if((!j.value||!oe())&&U&&U.length>0){const E=r.datasets.map(ae=>({id:ae.id,name:ae.name,icon:ae.icon,description:ae.description}));M.value=Ft.cloneDeep(E),se.value=Ft.cloneDeep(E),j.value=!0}},{immediate:!0,deep:!0}),cr(()=>r.retrieval_config,U=>{(!ee.value||!P())&&U&&Object.keys(U).length>0&&(q.value={...U},B.value={...U},ee.value=!0)},{immediate:!0,deep:!0}),cr(()=>Z.value,async U=>{U?await I(!0):A.splice(0,A.length)}),(U,E)=>{const ae=T("icon-language"),ie=T("a-button"),Ke=T("icon-plus"),rt=T("a-space"),Ue=T("a-avatar"),we=T("icon-delete"),Qe=T("a-collapse-item"),Et=T("icon-close"),ze=T("a-empty"),R=T("a-spin"),pe=T("a-col"),X=T("a-row"),he=T("a-modal"),vt=T("a-radio-group"),st=T("a-form-item"),qt=T("a-slider"),Ut=T("a-input-number"),kt=T("a-form");return L(),F("div",gv,[h(Qe,{key:"datasets",class:"app-ability-item"},{header:b(()=>E[7]||(E[7]=[_("div",{class:"text-gray-700 font-bold"},"知识库",-1)])),extra:b(()=>[h(rt,null,{default:b(()=>[h(ie,{size:"mini",class:"rounded-lg px-2",onClick:E[0]||(E[0]=Zn(Se=>Y.value=!0,["stop"]))},{icon:b(()=>[h(ae)]),default:b(()=>{var Se,ot;return[((Se=a.retrieval_config)==null?void 0:Se.retrieval_strategy)==="semantic"?(L(),F("div",_v," 相似度检索 ")):((ot=a.retrieval_config)==null?void 0:ot.retrieval_strategy)==="full_text"?(L(),F("div",vv," 全文检索 ")):(L(),F("div",mv,"混合检索"))]}),_:1}),h(ie,{size:"mini",type:"text",class:"!text-gray-700",onClick:E[1]||(E[1]=Zn(Se=>Z.value=!0,["stop"]))},{icon:b(()=>[h(Ke)]),_:1})]),_:1})]),default:b(()=>[r.datasets.length>0?(L(),F("div",yv,[(L(!0),F(gt,null,_t(r.datasets,(Se,ot)=>(L(),F("div",{key:Se.id,class:"flex items-center justify-between bg-white p-3 rounded-lg cursor-pointer hover:shadow-sm group"},[_("div",xv,[h(Ue,{size:36,shape:"square",class:"rounded flex-shrink-0","image-url":Se.icon},null,8,["image-url"]),_("div",bv,[_("div",wv,_e(Se.name),1),_("div",Sv,_e(Se.description),1)])]),h(ie,{size:"mini",type:"text",class:"hidden group-hover:block flex-shrink-0 ml-2 !text-red-700 rounded",onClick:async()=>{const mt=[...r.datasets];mt.splice(ot,1),await N(O)(r.app_id,{datasets:mt.map(Cn=>Cn.id)}),j.value=!1,g("update:datasets",mt)}},{icon:b(()=>[h(we)]),_:2},1032,["onClick"])]))),128))])):(L(),F("div",Av," 引用文本类型的数据，实现知识问答，应用最多支持关联 5 个知识库。 "))]),_:1}),h(he,{visible:Z.value,"hide-title":"",footer:!1,width:400,class:"datasets-modal","modal-class":"h-[calc(100vh-32px)] right-4",onCancel:z},{default:b(()=>[_("div",$v,[E[8]||(E[8]=_("div",{class:"text-lg font-bold text-gray-700"},"选择引用知识库",-1)),h(ie,{type:"text",class:"!text-gray-700",size:"small",onClick:z},{icon:b(()=>[h(Et)]),_:1})]),_("div",Tv,[h(R,{loading:N(m),class:"block h-full scrollbar-w-none overflow-scroll",onScroll:me},{default:b(()=>[_("div",Cv,[(L(!0),F(gt,null,_t(N(A),(Se,ot)=>(L(),F("div",{key:Se.id,class:Lt(`flex items-center gap-2 border px-3 py-2 rounded-lg cursor-pointer hover:bg-blue-50 hover:border-blue-700 ${M.value.some(mt=>mt.id===Se.id)?"bg-blue-50 border-blue-700":""}`),onClick:()=>G(ot)},[h(Ue,{size:24,shape:"square",class:"flex-shrink-0 rounded","image-url":Se.icon},null,8,["image-url"]),_("div",zv,_e(Se.name),1)],10,Iv))),128)),N(A).length===0?(L(),We(ze,{key:0,description:"没有可用知识库",class:"h-[400px] flex flex-col items-center justify-center"})):De("",!0)]),N(C).total_page>=2?(L(),We(X,{key:0},{default:b(()=>[N(C).current_page<=N(C).total_page?(L(),We(pe,{key:0,span:24,class:"!text-center"},{default:b(()=>[h(rt,{class:"my-4"},{default:b(()=>[h(R),E[9]||(E[9]=_("div",{class:"text-gray-400"},"加载中",-1))]),_:1})]),_:1})):(L(),We(pe,{key:1,span:24,class:"!text-center"},{default:b(()=>E[10]||(E[10]=[_("div",{class:"text-gray-400 my-4"},"数据已加载完成",-1)])),_:1}))]),_:1})):De("",!0)]),_:1},8,["loading"])]),_("div",Rv,[_("div",Ov,_e(M.value.length)+"个知识库被选中",1),h(rt,{size:12},{default:b(()=>[h(ie,{class:"rounded-lg",onClick:z},{default:b(()=>E[11]||(E[11]=[de("取消")])),_:1}),h(ie,{loading:N(y),type:"primary",class:"rounded-lg",onClick:xe},{default:b(()=>E[12]||(E[12]=[de(" 添加 ")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["visible"]),h(he,{visible:Y.value,"hide-title":"",footer:!1,"modal-class":"rounded-xl",onCancel:Oe},{default:b(()=>[_("div",Lv,[E[13]||(E[13]=_("div",{class:"text-lg font-bold text-gray-700"},"检索设置",-1)),h(ie,{type:"text",class:"!text-gray-700",size:"small",onClick:Oe},{icon:b(()=>[h(Et)]),_:1})]),h(kt,{model:q.value,onSubmit:Ie,class:"pt-6"},{default:b(()=>[h(st,{field:"retrieval_strategy",label:"检索策略","label-align":"left"},{default:b(()=>[h(vt,{"model-value":q.value.retrieval_strategy,"onUpdate:modelValue":E[2]||(E[2]=Se=>q.value.retrieval_strategy=Se),"default-value":"semantic",options:[{label:"混合策略",value:"hybrid"},{label:"全文检索",value:"full_text"},{label:"相似性检索",value:"semantic"}]},null,8,["model-value"])]),_:1}),h(st,{field:"k",label:"最大召回数量"},{default:b(()=>[_("div",Dv,[h(qt,{"model-value":q.value.k,"onUpdate:modelValue":E[3]||(E[3]=Se=>q.value.k=Se),step:1,min:1,max:10},null,8,["model-value"]),h(Ut,{"model-value":q.value.k,"onUpdate:modelValue":E[4]||(E[4]=Se=>q.value.k=Se),class:"w-[80px]","default-value":4},null,8,["model-value"])])]),_:1}),h(st,{field:"score",label:"最小匹配度"},{default:b(()=>[_("div",Ev,[h(qt,{"model-value":q.value.score,"onUpdate:modelValue":E[5]||(E[5]=Se=>q.value.score=Se),step:.01,min:0,max:.99},null,8,["model-value"]),h(Ut,{"model-value":q.value.score,"onUpdate:modelValue":E[6]||(E[6]=Se=>q.value.score=Se),class:"w-[80px]",min:0,max:.99,step:.01,precision:2,"default-value":.5},null,8,["model-value"])])]),_:1}),_("div",Uv,[E[16]||(E[16]=_("div",{class:""},null,-1)),h(rt,{size:16},{default:b(()=>[h(ie,{class:"rounded-lg",onClick:Oe},{default:b(()=>E[14]||(E[14]=[de("取消")])),_:1}),h(ie,{loading:N(y),type:"primary","html-type":"submit",class:"rounded-lg"},{default:b(()=>E[15]||(E[15]=[de("保存")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["model"])]),_:1},8,["visible"])])}}}),Pv=()=>{const a=ge(!1),c=Xn({});return{loading:a,api_tool:c,loadApiTool:async(g,y)=>{try{a.value=!0;const m=(await w_(g,y)).data;Object.assign(c,m)}finally{a.value=!1}}}},Mv=()=>{const a=ge(!1),c=Xn([]),r={current_page:1,page_size:20,total_page:0,total_record:0},g=Xn({...r}),y=async(m=!1)=>{if(m)Object.assign(g,{...r});else if(g.current_page>g.total_page)return;try{a.value=!0;const A=(await S_(g.current_page,g.page_size,"")).data;O(A),g.current_page<=g.total_page&&(g.current_page+=1),m?c.splice(0,c.length,...A.list):c.push(...A.list)}finally{a.value=!1}},O=m=>{g.current_page=m.paginator.current_page,g.page_size=m.paginator.page_size,g.total_page=m.paginator.total_page,g.total_record=m.paginator.total_record};return{loading:a,api_tool_providers:c,paginator:g,loadApiToolProviders:y}},Bv=()=>{const a=ge(!1),c=Xn([]),r=async()=>{try{a.value=!0;const y=(await A_()).data;c.splice(0,c.length,...y)}finally{a.value=!1}};return va(async()=>await r()),{loading:a,categories:c,loadCategories:r}},Wv=()=>{const a=ge(!1),c=Xn({});return{loading:a,builtin_tool:c,loadBuiltinTool:async(g,y)=>{try{a.value=!0;const m=(await $_(g,y)).data;Object.assign(c,m)}finally{a.value=!1}}}},Fv=()=>{const a=ge(!1),c=Xn([]);return{loading:a,builtin_tools:c,loadBuiltinTools:async()=>{try{a.value=!0;const y=(await T_()).data;c.splice(0,c.length,...y)}finally{a.value=!1}}}},qv={class:""},Nv={key:0,class:"flex flex-col gap-1"},Hv={class:"flex items-center gap-2"},Gv={class:"flex flex-col gap-1 h-9"},Vv={class:"text-gray-700 font-bold leading-[18px] line-clamp-1 break-all"},Kv={class:"text-gray-500 text-xs line-clamp-1 break-all"},Yv={class:"hidden group-hover:flex items-center gap-1 flex-shrink-0 ml-2"},Zv={key:1,class:"text-xs text-gray-500 leading-[22px]"},Xv={class:"flex items-center justify-between mb-6"},Jv={class:"flex items-center"},Qv={class:"flex items-center gap-2"},jv={class:"text-gray-700 font-bold max-w-[200px] line-clamp-1 break-all"},em={class:"mx-4 text-gray-400"},tm={class:"flex items-center gap-6"},nm={key:0,class:"h-[calc(100vh-170px)] pb-4 overflow-scroll scrollbar-w-none"},im={class:"text-gray-500 text-xs"},rm={key:0,class:""},sm={class:"flex flex-col gap-4"},om={class:"flex items-center gap-2 text-xs"},lm={class:"text-gray-900 font-bold"},am={class:"text-gray-500"},um={key:0,class:"text-red-700"},fm={class:"text-xs text-gray-500"},cm={key:1,class:"h-[calc(100vh-170px)] pb-4 overflow-scroll scrollbar-w-none"},dm={class:"flex items-center gap-1"},pm={class:"text-gray-700"},hm={key:0,class:"text-red-700"},gm={class:"flex items-center justify-between"},_m={class:"flex w-full h-full"},vm={class:"flex flex-col flex-shrink-0 bg-gray-50 w-[200px] h-full px-3 py-4 overflow-scroll scrollbar-w-none"},mm={class:"flex flex-col gap-1 mb-4"},ym={key:0,class:""},xm={class:"flex flex-col gap-1"},bm=["onClick"],wm=["innerHTML"],Sm={class:"flex-1 p-4"},Am={class:"w-full flex items-center justify-between gap-2 mb-7"},$m={class:"text-lg font-bold text-gray-700"},Tm={key:0,class:"h-[calc(100vh-130px)] overflow-scroll scrollbar-w-none"},Cm={class:"text-gray-900"},Im={class:"flex flex-col gap-1"},zm={class:"flex items-center gap-2"},Rm={class:"text-gray-900"},Om={key:0,class:""},Lm={key:1},Dm={class:"text-gray-900"},Em={class:"flex flex-col gap-1"},Um={class:"flex items-center gap-2"},km={class:"text-gray-900"},Pm={key:0,class:""},Mm=Dt({__name:"ToolsAbilityItem",props:{app_id:{type:String,default:"",required:!0},tools:{type:Array,default:[],required:!0}},emits:["update:tools"],setup(a,{emit:c}){const r=a,g=c,{loading:y,handleUpdateDraftAppConfig:O}=gn(),{loading:m,api_tool:C,loadApiTool:A}=Pv(),{loading:I,paginator:Z,api_tool_providers:Y,loadApiToolProviders:j}=Mv(),{loading:M,builtin_tool:se,loadBuiltinTool:q}=Wv(),{categories:B}=Bv(),{builtin_tools:ee,loadBuiltinTools:me}=Fv(),oe=ge(!1),P=ge("info"),z=ge({}),Oe=ge(-1),G=ge({}),xe=ge(!1),Ie=ge("api_tool"),U=ge("all"),E=_a(()=>U.value==="all"?ee:ee.filter(ze=>ze.category===U.value)),ae=async ze=>{if(ze===-1)return;Oe.value=ze;const R=r.tools[ze];R.type==="builtin_tool"?(await q(R.provider.name,R.tool.name),z.value={type:"builtin_tool",provider:{id:se.provider.name,icon:se.provider.icon,name:se.provider.name,label:se.provider.label,description:se.provider.description},tool:{id:se.name,name:se.name,label:se.label,description:se.description,inputs:se.inputs,params:se.params}}):(await A(R.provider.id,R.tool.name),z.value={type:"api_tool",provider:{id:C.provider.id,icon:C.provider.icon,name:C.provider.name,label:C.provider.name,description:C.provider.description},tool:{id:C.name,name:C.name,label:C.name,description:C.description,inputs:se.inputs,params:[]}});const pe=R.tool.params;z.value.tool.params.forEach(X=>{G.value[X.name]=pe[X.name]??X.default}),oe.value=!0},ie=()=>{Oe.value=-1,oe.value=!1,P.value="info"},Ke=async()=>{if(r.tools[Oe.value].type==="api_tool"){ie();return}const R=[...r.tools];R[Oe.value].tool.params=G.value,await O(r.app_id,{tools:R.map(pe=>({type:pe.type,params:pe.tool.params,provider_id:pe.provider.id,tool_id:pe.tool.name}))}),g("update:tools",R),ie()},rt=async ze=>{const R=[...r.tools];R.splice(ze,1),await O(r.app_id,{tools:R.map(pe=>({type:pe.type,params:pe.tool.params,provider_id:pe.provider.id,tool_id:pe.tool.name}))}),g("update:tools",R)},Ue=async()=>{xe.value=!0,await j(!0),await me()},we=async ze=>{const{scrollTop:R,scrollHeight:pe,clientHeight:X}=ze.target;if(R+X>=pe-10){if(I.value)return;await j()}},Qe=async(ze,R)=>{let pe={};if(Ie.value==="api_tool"){const X=Y[ze],he=X.tools[R];pe={type:"api_tool",provider:{id:X.id,name:X.name,label:X.name,icon:X.icon,description:X.description},tool:{id:he.name,name:he.name,label:he.name,description:he.description,params:{}}}}else{const X=E.value[ze],he=X.tools[R],vt=he.params;pe={type:"builtin_tool",provider:{id:X.name,name:X.name,label:X.label,icon:`${fa}/builtin-tools/${X.name}/icon`,description:X.description},tool:{id:he.name,name:he.name,label:he.label,description:he.description,params:vt.reduce((st,qt)=>(st[qt.name]=qt.default,st),{})}}}if(r.tools.some(X=>X.provider.id===pe.provider.id&&X.tool.name===pe.tool.name)){const X=[...r.tools].filter(he=>he.provider.id!==pe.provider.id&&he.tool.name!==pe.tool.name);await O(r.app_id,{tools:X.map(he=>({type:he.type,params:he.tool.params,provider_id:he.provider.id,tool_id:he.tool.name}))}),g("update:tools",X);return}else{if(r.tools.length>=5){Yn.warning("一个Agent应用最多关联5个扩展插件");return}const X=[...r.tools];X.push(pe),await O(r.app_id,{tools:X.map(he=>({type:he.type,params:he.tool.params,provider_id:he.provider.id,tool_id:he.tool.name}))}),g("update:tools",X)}},Et=(ze,R)=>r.tools.some(pe=>pe.provider.name===ze.name&&pe.tool.name===R.name);return(ze,R)=>{const pe=T("icon-plus"),X=T("a-button"),he=T("a-avatar"),vt=T("icon-settings"),st=T("icon-delete"),qt=T("a-collapse-item"),Ut=T("icon-oblique-line"),kt=T("icon-close"),Se=T("icon-info-circle"),ot=T("a-tooltip"),mt=T("a-select"),Cn=T("a-input"),lt=T("a-input-number"),jt=T("a-radio"),gr=T("a-radio-group"),Ct=T("a-form-item"),gi=T("a-form"),_i=T("a-space"),en=T("a-modal"),at=T("router-link"),_n=T("icon-code"),In=T("icon-translate"),_r=T("icon-apps"),tn=T("a-empty"),vi=T("a-spin"),nn=T("a-col"),rn=T("a-row");return L(),F("div",qv,[h(qt,{key:"tools",class:"app-ability-item"},{header:b(()=>R[7]||(R[7]=[_("div",{class:"text-gray-700 font-bold"},"扩展插件",-1)])),extra:b(()=>[h(X,{size:"mini",type:"text",class:"!text-gray-700",onClick:Zn(Ue,["stop"])},{icon:b(()=>[h(pe)]),_:1})]),default:b(()=>[r.tools.length>0?(L(),F("div",Nv,[(L(!0),F(gt,null,_t(r.tools,(ue,Ye)=>(L(),F("div",{key:Ye,class:"flex items-center justify-between bg-white p-3 rounded-lg cursor-pointer hover:shadow-sm group"},[_("div",Hv,[h(he,{size:36,shape:"square",class:"rounded flex-shrink-0","image-url":ue.provider.icon},null,8,["image-url"]),_("div",Gv,[_("div",Vv,_e(ue.provider.label)+" / "+_e(ue.tool.label),1),_("div",Kv,_e(ue.tool.description),1)])]),_("div",Yv,[h(X,{loading:N(m)||N(M),size:"mini",type:"text",class:"!text-gray-700 rounded",onClick:async()=>await ae(Ye)},{icon:b(()=>[h(vt)]),_:2},1032,["loading","onClick"]),h(X,{loading:N(y),size:"mini",type:"text",class:"!text-red-700 rounded",onClick:async()=>await rt(Ye)},{icon:b(()=>[h(st)]),_:2},1032,["loading","onClick"])])]))),128))])):(L(),F("div",Zv," 插件能够让智能体调用外部 API，例如搜索信息、浏览网页、生成图片等，扩展智能体的能力和使用场景。 "))]),_:1}),h(en,{visible:oe.value,"hide-title":"",footer:!1,class:"tool-setting-modal","modal-class":"h-[calc(100vh-32px)] right-4",onCancel:ie},{default:b(()=>{var ue,Ye,He,Pt,zn,Rn,On,Ln,Dn,mi,yi,xi,Jn,Qn;return[_("div",Xv,[_("div",Jv,[_("div",Qv,[h(he,{size:24,shape:"circle","image-url":(Ye=(ue=z.value)==null?void 0:ue.provider)==null?void 0:Ye.icon},null,8,["image-url"]),_("div",jv,_e((Pt=(He=z.value)==null?void 0:He.tool)==null?void 0:Pt.label),1)]),_("div",em,[h(Ut,{size:12})]),_("div",tm,[_("div",{class:Lt(`text-gray-700 pt-1 cursor-pointer border-blue-700 hover:border-b-4 hover:font-bold transition-all ${P.value==="info"?"font-bold border-b-4":""}`),onClick:R[0]||(R[0]=je=>P.value="info")}," 信息 ",2),z.value.type==="builtin_tool"&&((On=(Rn=(zn=z.value)==null?void 0:zn.tool)==null?void 0:Rn.params)==null?void 0:On.length)>0?(L(),F("div",{key:0,class:Lt(`text-gray-700 pt-1 cursor-pointer border-blue-700 hover:border-b-4 hover:font-bold transition-all ${P.value==="setting"?"font-bold border-b-4":""}`),onClick:R[1]||(R[1]=je=>P.value="setting")}," 设置 ",2)):De("",!0)])]),h(X,{size:"mini",type:"text",class:"!text-gray-700",onClick:ie},{icon:b(()=>[h(kt)]),_:1})]),P.value==="info"?(L(),F("div",nm,[R[9]||(R[9]=_("div",{class:"text-gray-70 font-bold mb-1"},"工具描述",-1)),_("div",im,_e((Dn=(Ln=z.value)==null?void 0:Ln.tool)==null?void 0:Dn.description),1),((xi=(yi=(mi=z.value)==null?void 0:mi.tool)==null?void 0:yi.inputs)==null?void 0:xi.length)>0?(L(),F("div",rm,[R[8]||(R[8]=_("div",{class:"flex items-center gap-2 my-4"},[_("div",{class:"text-xs font-bold text-gray-500"},"参数"),_("hr",{class:"flex-1"})],-1)),_("div",sm,[(L(!0),F(gt,null,_t((Qn=(Jn=z.value)==null?void 0:Jn.tool)==null?void 0:Qn.inputs,je=>(L(),F("div",{key:je.name,class:"flex flex-col gap-2"},[_("div",om,[_("div",lm,_e(je.name),1),_("div",am,_e(N(n_)[je.type]),1),je.required?(L(),F("div",um,"必填")):De("",!0)]),_("div",fm,_e(je.description),1)]))),128))])])):De("",!0)])):De("",!0),P.value==="setting"?(L(),F("div",cm,[h(gi,{model:G.value,"onUpdate:model":R[2]||(R[2]=je=>G.value=je),layout:"vertical",class:""},{default:b(()=>{var je,bi;return[(L(!0),F(gt,null,_t((bi=(je=z.value)==null?void 0:je.tool)==null?void 0:bi.params,Te=>(L(),We(Ct,{field:Te.name},{label:b(()=>[_("div",dm,[_("div",pm,_e(Te.label),1),Te.required?(L(),F("div",hm,"*")):De("",!0),h(ot,{content:Te.label},{default:b(()=>[h(Se)]),_:2},1032,["content"])])]),default:b(()=>[Te.type==="select"?(L(),We(mt,{key:0,"default-value":Te.default,"model-value":G.value[Te.name],"onUpdate:modelValue":Nt=>G.value[Te.name]=Nt,placeholder:"请输入参数值",options:Te.options},null,8,["default-value","model-value","onUpdate:modelValue","options"])):De("",!0),Te.type==="string"?(L(),We(Cn,{key:1,placeholder:"请输入参数值","model-value":G.value[Te.name],"onUpdate:modelValue":Nt=>G.value[Te.name]=Nt,"default-value":Te.default},null,8,["model-value","onUpdate:modelValue","default-value"])):De("",!0),Te.type==="number"?(L(),We(lt,{key:2,placeholder:"请输入参数值","model-value":G.value[Te.name],"onUpdate:modelValue":Nt=>G.value[Te.name]=Nt,"default-value":Te.default,min:Te.min,max:Te.max},null,8,["model-value","onUpdate:modelValue","default-value","min","max"])):De("",!0),Te.type==="boolean"?(L(),We(gr,{key:3,"model-value":G.value[Te.name],"onUpdate:modelValue":Nt=>G.value[Te.name]=Nt,"default-value":Te.default},{default:b(()=>[h(jt,{value:!0},{default:b(()=>R[10]||(R[10]=[de("开启")])),_:1}),h(jt,{value:!1},{default:b(()=>R[11]||(R[11]=[de("关闭")])),_:1})]),_:2},1032,["model-value","onUpdate:modelValue","default-value"])):De("",!0)]),_:2},1032,["field"]))),256))]}),_:1},8,["model"])])):De("",!0),_("div",gm,[R[14]||(R[14]=_("div",{class:""},null,-1)),h(_i,{size:12},{default:b(()=>[h(X,{class:"rounded-lg",onClick:ie},{default:b(()=>R[12]||(R[12]=[de("取消")])),_:1}),h(X,{loading:N(y),type:"primary",class:"rounded-lg",onClick:Ke},{default:b(()=>R[13]||(R[13]=[de(" 保存 ")])),_:1},8,["loading"])]),_:1})])]}),_:1},8,["visible"]),h(en,{visible:xe.value,"onUpdate:visible":R[6]||(R[6]=ue=>xe.value=ue),"hide-title":"",footer:!1,class:"tools-modal","modal-class":"right-4 h-[calc(100vh-32px)]"},{default:b(()=>[_("div",_m,[_("div",vm,[R[20]||(R[20]=_("div",{class:"text-gray-900 font-bold text-lg mb-4"},"添加插件",-1)),h(at,{to:{name:"space-tools-list"}},{default:b(()=>[h(X,{long:"",type:"primary",class:"rounded-lg mb-5"},{default:b(()=>R[15]||(R[15]=[de("创建自定义插件")])),_:1})]),_:1}),_("div",mm,[_("div",{class:Lt(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${Ie.value==="api_tool"?"text-blue-700 bg-white":"text-gray-700"}`),onClick:R[3]||(R[3]=ue=>Ie.value="api_tool")},[h(_n),R[16]||(R[16]=de(" 自定义插件 "))],2),_("div",{class:Lt(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${Ie.value==="builtin_tool"?"text-blue-700 bg-white":"text-gray-700"}`),onClick:R[4]||(R[4]=ue=>Ie.value="builtin_tool")},[h(In),R[17]||(R[17]=de(" 内置插件 "))],2)]),Ie.value==="builtin_tool"?(L(),F("div",ym,[R[19]||(R[19]=_("div",{class:"text-xs text-gray-500 mb-3"},"类别",-1)),_("div",xm,[_("div",{class:Lt(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${U.value==="all"?"text-blue-700 bg-white":"text-gray-700"}`),onClick:R[5]||(R[5]=ue=>U.value="all")},[h(_r),R[18]||(R[18]=de(" 全部 "))],2),(L(!0),F(gt,null,_t(N(B),ue=>(L(),F("div",{key:ue.name,class:Lt(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${U.value===ue.category?"text-blue-700 bg-white":" text-gray-700"}`),onClick:Ye=>U.value=ue.category},[_("span",{innerHTML:ue.icon},null,8,wm),de(" "+_e(ue.name),1)],10,bm))),128))])])):De("",!0)]),_("div",Sm,[_("div",Am,[_("div",$m,_e(Ie.value==="api_tool"?"自定义插件":"内置插件"),1),h(X,{size:"mini",type:"text",class:"!text-gray-700 ml-6"},{icon:b(()=>[h(kt)]),_:1})]),Ie.value==="builtin_tool"?(L(),F("div",Tm,[(L(!0),F(gt,null,_t(E.value,(ue,Ye)=>(L(),F("div",{key:ue.name,class:"flex flex-col gap-3 mb-3"},[_("div",Cm,_e(ue.label),1),_("div",Im,[(L(!0),F(gt,null,_t(ue.tools,(He,Pt)=>(L(),F("div",{key:He.name,class:Lt(`flex items-center justify-between px-2 h-8 rounded-lg cursor-pointer hover:bg-gray-50 group ${Et(ue,He)?"bg-blue-50 border border-blue-700":""}`)},[_("div",zm,[h(he,{size:20,shape:"circle","image-url":`${N(fa)}/builtin-tools/${ue.name}/icon`},null,8,["image-url"]),_("div",Rm,_e(He.label),1)]),h(X,{size:"mini",class:"hidden group-hover:block rounded px-1.5 flex-shrink-0",onClick:async()=>await Qe(Ye,Pt)},{icon:b(()=>[h(pe)]),default:b(()=>[de(" "+_e(Et(ue,He)?"删除":"添加"),1)]),_:2},1032,["onClick"])],2))),128))])]))),128)),E.value.length===0?(L(),F("div",Om,[h(tn,{description:"没有可用的内置插件",class:"h-[400px] flex flex-col items-center justify-center"})])):De("",!0)])):De("",!0),Ie.value==="api_tool"?(L(),F("div",Lm,[h(vi,{loading:N(I),class:"block h-[calc(100vh-130px)] overflow-scroll scrollbar-w-none",onScroll:we},{default:b(()=>[(L(!0),F(gt,null,_t(N(Y),(ue,Ye)=>(L(),F("div",{key:ue.id,class:"flex flex-col gap-3 mb-3"},[_("div",Dm,_e(ue.name),1),_("div",Em,[(L(!0),F(gt,null,_t(ue.tools,(He,Pt)=>(L(),F("div",{key:He.name,class:Lt(`flex items-center justify-between px-2 h-8 rounded-lg cursor-pointer hover:bg-gray-50 group ${Et(ue,He)?"bg-blue-50 border border-blue-700":""}`)},[_("div",Um,[h(he,{size:20,shape:"circle","image-url":ue.icon},null,8,["image-url"]),_("div",km,_e(He.name),1)]),h(X,{size:"mini",class:"hidden group-hover:block rounded px-1.5 flex-shrink-0",onClick:async()=>await Qe(Ye,Pt)},{icon:b(()=>[h(pe)]),default:b(()=>[de(" "+_e(Et(ue,He)?"删除":"添加"),1)]),_:2},1032,["onClick"])],2))),128))])]))),128)),N(Y).length===0?(L(),F("div",Pm,[h(tn,{description:"没有可用的API插件",class:"h-[400px] flex flex-col items-center justify-center"})])):De("",!0),N(Z).total_page>=2?(L(),We(rn,{key:1},{default:b(()=>[N(Z).current_page<=N(Z).total_page?(L(),We(nn,{key:0,span:24,class:"!text-center"},{default:b(()=>[h(_i,{class:"my-4"},{default:b(()=>[h(vi),R[21]||(R[21]=_("div",{class:"text-gray-400"},"加载中",-1))]),_:1})]),_:1})):(L(),We(nn,{key:1,span:24,class:"!text-center"},{default:b(()=>R[22]||(R[22]=[_("div",{class:"text-gray-400 my-4"},"数据已加载完成",-1)])),_:1}))]),_:1})):De("",!0)]),_:1},8,["loading"])])):De("",!0)])])]),_:1},8,["visible"])])}}}),Bm={class:"flex flex-col h-[calc(100vh-141px)]"},Wm={class:"flex-1 overflow-scroll scrollbar-w-none"},Fm=Dt({__name:"AgentAppAbility",props:{app_id:{type:String,default:"",required:!0},draft_app_config:{type:Object,required:!0}},emits:["update:draft_app_config"],setup(a,{emit:c}){const r=["tools","datasets","long_term_memory","opening","suggested_after_answer","review_config"];return(g,y)=>{const O=T("icon-down"),m=T("icon-right"),C=T("a-collapse");return L(),F("div",Bm,[y[7]||(y[7]=_("div",{class:"p-4 text-gray-700 font-bold"},"应用能力",-1)),_("div",Wm,[h(C,{bordered:!1,"default-active-key":r},{"expand-icon":b(({active:A})=>[A?(L(),We(O,{key:0})):(L(),We(m,{key:1}))]),default:b(()=>[h(Mm,{tools:a.draft_app_config.tools,"onUpdate:tools":y[0]||(y[0]=A=>a.draft_app_config.tools=A),app_id:a.app_id},null,8,["tools","app_id"]),h(kv,{retrieval_config:a.draft_app_config.retrieval_config,"onUpdate:retrieval_config":y[1]||(y[1]=A=>a.draft_app_config.retrieval_config=A),datasets:a.draft_app_config.datasets,"onUpdate:datasets":y[2]||(y[2]=A=>a.draft_app_config.datasets=A),app_id:a.app_id},null,8,["retrieval_config","datasets","app_id"]),h(N_,{long_term_memory:a.draft_app_config.long_term_memory,"onUpdate:long_term_memory":y[3]||(y[3]=A=>a.draft_app_config.long_term_memory=A),app_id:a.app_id},null,8,["long_term_memory","app_id"]),h(J_,{opening_questions:a.draft_app_config.opening_questions,"onUpdate:opening_questions":y[4]||(y[4]=A=>a.draft_app_config.opening_questions=A),opening_statement:a.draft_app_config.opening_statement,"onUpdate:opening_statement":y[5]||(y[5]=A=>a.draft_app_config.opening_statement=A),app_id:a.app_id},null,8,["opening_questions","opening_statement","app_id"]),h(j_,{suggested_after_answer:a.draft_app_config.suggested_after_answer,"onUpdate:suggested_after_answer":y[6]||(y[6]=A=>a.draft_app_config.suggested_after_answer=A),app_id:a.app_id},null,8,["suggested_after_answer","app_id"]),h(hv,{review_config:a.draft_app_config.review_config,app_id:a.app_id},null,8,["review_config","app_id"])]),_:1})])])}}});function qm(){var a=window.navigator.userAgent,c=a.indexOf("MSIE ");if(c>0)return parseInt(a.substring(c+5,a.indexOf(".",c)),10);var r=a.indexOf("Trident/");if(r>0){var g=a.indexOf("rv:");return parseInt(a.substring(g+3,a.indexOf(".",g)),10)}var y=a.indexOf("Edge/");return y>0?parseInt(a.substring(y+5,a.indexOf(".",y)),10):-1}let dr;function Rs(){Rs.init||(Rs.init=!0,dr=qm()!==-1)}var hr={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Rs(),Tn(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const a=document.createElement("object");this._resizeObject=a,a.setAttribute("aria-hidden","true"),a.setAttribute("tabindex",-1),a.onload=this.addResizeHandlers,a.type="text/html",dr&&this.$el.appendChild(a),a.data="about:blank",dr||this.$el.appendChild(a)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!dr&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const Nm=s_();i_("data-v-b329ee4c");const Hm={class:"resize-observer",tabindex:"-1"};r_();const Gm=Nm((a,c,r,g,y,O)=>(L(),We("div",Hm)));hr.render=Gm;hr.__scopeId="data-v-b329ee4c";hr.__file="src/components/ResizeObserver.vue";function pr(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?pr=function(c){return typeof c}:pr=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},pr(a)}function Vm(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function")}function Km(a,c){for(var r=0;r<c.length;r++){var g=c[r];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(a,g.key,g)}}function Ym(a,c,r){return Km(a.prototype,c),a}function pa(a){return Zm(a)||Xm(a)||Jm(a)||Qm()}function Zm(a){if(Array.isArray(a))return Os(a)}function Xm(a){if(typeof Symbol<"u"&&Symbol.iterator in Object(a))return Array.from(a)}function Jm(a,c){if(a){if(typeof a=="string")return Os(a,c);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Os(a,c)}}function Os(a,c){(c==null||c>a.length)&&(c=a.length);for(var r=0,g=new Array(c);r<c;r++)g[r]=a[r];return g}function Qm(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jm(a){var c;return typeof a=="function"?c={callback:a}:c=a,c}function e0(a,c){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},g,y,O,m=function(A){for(var I=arguments.length,Z=new Array(I>1?I-1:0),Y=1;Y<I;Y++)Z[Y-1]=arguments[Y];if(O=Z,!(g&&A===y)){var j=r.leading;typeof j=="function"&&(j=j(A,y)),(!g||A!==y)&&j&&a.apply(void 0,[A].concat(pa(O))),y=A,clearTimeout(g),g=setTimeout(function(){a.apply(void 0,[A].concat(pa(O))),g=0},c)}};return m._clear=function(){clearTimeout(g),g=null},m}function xa(a,c){if(a===c)return!0;if(pr(a)==="object"){for(var r in a)if(!xa(a[r],c[r]))return!1;return!0}return!1}var t0=function(){function a(c,r,g){Vm(this,a),this.el=c,this.observer=null,this.frozen=!1,this.createObserver(r,g)}return Ym(a,[{key:"createObserver",value:function(r,g){var y=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=jm(r),this.callback=function(C,A){y.options.callback(C,A),C&&y.options.once&&(y.frozen=!0,y.destroyObserver())},this.callback&&this.options.throttle){var O=this.options.throttleOptions||{},m=O.leading;this.callback=e0(this.callback,this.options.throttle,{leading:function(A){return m==="both"||m==="visible"&&A||m==="hidden"&&!A}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(C){var A=C[0];if(C.length>1){var I=C.find(function(Y){return Y.isIntersecting});I&&(A=I)}if(y.callback){var Z=A.isIntersecting&&A.intersectionRatio>=y.threshold;if(Z===y.oldResult)return;y.oldResult=Z,y.callback(Z,A)}},this.options.intersection),Tn(function(){y.observer&&y.observer.observe(y.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),a}();function ba(a,c,r){var g=c.value;if(g)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var y=new t0(a,g,r);a._vue_visibilityState=y}}function n0(a,c,r){var g=c.value,y=c.oldValue;if(!xa(g,y)){var O=a._vue_visibilityState;if(!g){wa(a);return}O?O.createObserver(g,r):ba(a,{value:g},r)}}function wa(a){var c=a._vue_visibilityState;c&&(c.destroyObserver(),delete a._vue_visibilityState)}var i0={beforeMount:ba,updated:n0,unmounted:wa};function r0(a){return{all:a=a||new Map,on:function(c,r){var g=a.get(c);g&&g.push(r)||a.set(c,[r])},off:function(c,r){var g=a.get(c);g&&g.splice(g.indexOf(r)>>>0,1)},emit:function(c,r){(a.get(c)||[]).slice().map(function(g){g(r)}),(a.get("*")||[]).slice().map(function(g){g(c,r)})}}}var s0={itemsLimit:1e3},o0=/(auto|scroll)/;function Sa(a,c){return a.parentNode===null?c:Sa(a.parentNode,c.concat([a]))}var zs=function(c,r){return getComputedStyle(c,null).getPropertyValue(r)},l0=function(c){return zs(c,"overflow")+zs(c,"overflow-y")+zs(c,"overflow-x")},a0=function(c){return o0.test(l0(c))};function ha(a){if(a instanceof HTMLElement||a instanceof SVGElement){for(var c=Sa(a.parentNode,[]),r=0;r<c.length;r+=1)if(a0(c[r]))return c[r];return document.scrollingElement||document.documentElement}}function Ls(a){"@babel/helpers - typeof";return Ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},Ls(a)}var Aa={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(c){return["vertical","horizontal"].includes(c)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function $a(){return this.items.length&&Ls(this.items[0])!=="object"}var Ds=!1;if(typeof window<"u"){Ds=!1;try{var u0=Object.defineProperty({},"passive",{get:function(){Ds=!0}});window.addEventListener("test",null,u0)}catch{}}let f0=0;var Es={name:"RecycleScroller",components:{ResizeObserver:hr},directives:{ObserveVisibility:i0},props:{...Aa,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const a={"-1":{accumulator:0}},c=this.items,r=this.sizeField,g=this.minItemSize;let y=1e4,O=0,m;for(let C=0,A=c.length;C<A;C++)m=c[C][r]||g,m<y&&(y=m),O+=m,a[C]={accumulator:O,size:m};return this.$_computedMinItemSize=y,a}return[]},simpleArray:$a,itemIndexByKey(){const{keyField:a,items:c}=this,r={};for(let g=0,y=c.length;g<y;g++)r[c[g][a]]=g;return r}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const a=this.$_lastUpdateScrollPosition;typeof a=="number"&&this.$nextTick(()=>{this.scrollToPosition(a)})},beforeUnmount(){this.removeListeners()},methods:{addView(a,c,r,g,y){const O=o_({id:f0++,index:c,used:!0,key:g,type:y}),m=l_({item:r,position:0,nr:O});return a.push(m),m},unuseView(a,c=!1){const r=this.$_unusedViews,g=a.nr.type;let y=r.get(g);y||(y=[],r.set(g,y)),y.push(a),c||(a.nr.used=!1,a.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(a){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const c=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:r}=this.updateVisibleItems(!1,!0);r||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});c(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&c()},this.updateInterval))}},handleVisibilityChange(a,c){this.ready&&(a||c.boundingClientRect.width!==0||c.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(a,c=!1){const r=this.itemSize,g=this.gridItems||1,y=this.itemSecondarySize||r,O=this.$_computedMinItemSize,m=this.typeField,C=this.simpleArray?null:this.keyField,A=this.items,I=A.length,Z=this.sizes,Y=this.$_views,j=this.$_unusedViews,M=this.pool,se=this.itemIndexByKey;let q,B,ee,me,oe;if(!I)q=B=me=oe=ee=0;else if(this.$_prerender)q=me=0,B=oe=Math.min(this.prerender,A.length),ee=null;else{const U=this.getScroll();if(c){let ie=U.start-this.$_lastUpdateScrollPosition;if(ie<0&&(ie=-ie),r===null&&ie<O||ie<r)return{continuous:!0}}this.$_lastUpdateScrollPosition=U.start;const E=this.buffer;U.start-=E,U.end+=E;let ae=0;if(this.$refs.before&&(ae=this.$refs.before.scrollHeight,U.start-=ae),this.$refs.after){const ie=this.$refs.after.scrollHeight;U.end+=ie}if(r===null){let ie,Ke=0,rt=I-1,Ue=~~(I/2),we;do we=Ue,ie=Z[Ue].accumulator,ie<U.start?Ke=Ue:Ue<I-1&&Z[Ue+1].accumulator>U.start&&(rt=Ue),Ue=~~((Ke+rt)/2);while(Ue!==we);for(Ue<0&&(Ue=0),q=Ue,ee=Z[I-1].accumulator,B=Ue;B<I&&Z[B].accumulator<U.end;B++);for(B===-1?B=A.length-1:(B++,B>I&&(B=I)),me=q;me<I&&ae+Z[me].accumulator<U.start;me++);for(oe=me;oe<I&&ae+Z[oe].accumulator<U.end;oe++);}else{q=~~(U.start/r*g);const ie=q%g;q-=ie,B=Math.ceil(U.end/r*g),me=Math.max(0,Math.floor((U.start-ae)/r*g)),oe=Math.floor((U.end-ae)/r*g),q<0&&(q=0),B>I&&(B=I),me<0&&(me=0),oe>I&&(oe=I),ee=Math.ceil(I/g)*r}}B-q>s0.itemsLimit&&this.itemsLimitError(),this.totalSize=ee;let P;const z=q<=this.$_endIndex&&B>=this.$_startIndex;if(z)for(let U=0,E=M.length;U<E;U++)P=M[U],P.nr.used&&(a&&(P.nr.index=se[P.item[C]]),(P.nr.index==null||P.nr.index<q||P.nr.index>=B)&&this.unuseView(P));const Oe=z?null:new Map;let G,xe,Ie;for(let U=q;U<B;U++){G=A[U];const E=C?G[C]:G;if(E==null)throw new Error(`Key is ${E} on item (keyField is '${C}')`);if(P=Y.get(E),!r&&!Z[U].size){P&&this.unuseView(P);continue}xe=G[m];let ae=j.get(xe),ie=!1;if(!P)z?ae&&ae.length?P=ae.pop():P=this.addView(M,U,G,E,xe):(Ie=Oe.get(xe)||0,(!ae||Ie>=ae.length)&&(P=this.addView(M,U,G,E,xe),this.unuseView(P,!0),ae=j.get(xe)),P=ae[Ie],Oe.set(xe,Ie+1)),Y.delete(P.nr.key),P.nr.used=!0,P.nr.index=U,P.nr.key=E,P.nr.type=xe,Y.set(E,P),ie=!0;else if(!P.nr.used&&(P.nr.used=!0,ie=!0,ae)){const Ke=ae.indexOf(P);Ke!==-1&&ae.splice(Ke,1)}P.item=G,ie&&(U===A.length-1&&this.$emit("scroll-end"),U===0&&this.$emit("scroll-start")),r===null?(P.position=Z[U-1].accumulator,P.offset=0):(P.position=Math.floor(U/g)*r,P.offset=U%g*y)}return this.$_startIndex=q,this.$_endIndex=B,this.emitUpdate&&this.$emit("update",q,B,me,oe),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:z}},getListenerTarget(){let a=ha(this.$el);return window.document&&(a===window.document.documentElement||a===window.document.body)&&(a=window),a},getScroll(){const{$el:a,direction:c}=this,r=c==="vertical";let g;if(this.pageMode){const y=a.getBoundingClientRect(),O=r?y.height:y.width;let m=-(r?y.top:y.left),C=r?window.innerHeight:window.innerWidth;m<0&&(C+=m,m=0),m+C>O&&(C=O-m),g={start:m,end:m+C}}else r?g={start:a.scrollTop,end:a.scrollTop+a.clientHeight}:g={start:a.scrollLeft,end:a.scrollLeft+a.clientWidth};return g},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,Ds?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(a){let c;const r=this.gridItems||1;this.itemSize===null?c=a>0?this.sizes[a-1].accumulator:0:c=Math.floor(a/r)*this.itemSize,this.scrollToPosition(c)},scrollToPosition(a){const c=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let r,g,y;if(this.pageMode){const O=ha(this.$el),m=O.tagName==="HTML"?0:O[c.scroll],C=O.getBoundingClientRect(),I=this.$el.getBoundingClientRect()[c.start]-C[c.start];r=O,g=c.scroll,y=a+m+I}else r=this.$el,g=c.scroll,y=a;r[g]=y},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((a,c)=>a.nr.index-c.nr.index)}}};const c0={key:0,ref:"before",class:"vue-recycle-scroller__slot"},d0={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function p0(a,c,r,g,y,O){const m=T("ResizeObserver"),C=a_("observe-visibility");return ga((L(),F("div",{class:Lt(["vue-recycle-scroller",{ready:y.ready,"page-mode":r.pageMode,[`direction-${a.direction}`]:!0}]),onScrollPassive:c[0]||(c[0]=(...A)=>O.handleScroll&&O.handleScroll(...A))},[a.$slots.before?(L(),F("div",c0,[hn(a.$slots,"before")],512)):De("v-if",!0),(L(),We(ca(r.listTag),{ref:"wrapper",style:f_({[a.direction==="vertical"?"minHeight":"minWidth"]:y.totalSize+"px"}),class:Lt(["vue-recycle-scroller__item-wrapper",r.listClass])},{default:b(()=>[(L(!0),F(gt,null,_t(y.pool,A=>(L(),We(ca(r.itemTag),ma({key:A.nr.id,style:y.ready?{transform:`translate${a.direction==="vertical"?"Y":"X"}(${A.position}px) translate${a.direction==="vertical"?"X":"Y"}(${A.offset}px)`,width:r.gridItems?`${a.direction==="vertical"&&r.itemSecondarySize||r.itemSize}px`:void 0,height:r.gridItems?`${a.direction==="horizontal"&&r.itemSecondarySize||r.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[r.itemClass,{hover:!r.skipHover&&y.hoverKey===A.nr.key}]]},u_(r.skipHover?{}:{mouseenter:()=>{y.hoverKey=A.nr.key},mouseleave:()=>{y.hoverKey=null}})),{default:b(()=>[hn(a.$slots,"default",{item:A.item,index:A.nr.index,active:A.nr.used})]),_:2},1040,["style","class"]))),128)),hn(a.$slots,"empty")]),_:3},8,["style","class"])),a.$slots.after?(L(),F("div",d0,[hn(a.$slots,"after")],512)):De("v-if",!0),h(m,{onNotify:O.handleResize},null,8,["onNotify"])],34)),[[C,O.handleVisibilityChange]])}Es.render=p0;Es.__file="src/components/RecycleScroller.vue";var Us={name:"DynamicScroller",components:{RecycleScroller:Es},provide(){return typeof ResizeObserver<"u"&&(this.$_resizeObserver=new ResizeObserver(a=>{requestAnimationFrame(()=>{if(Array.isArray(a)){for(const c of a)if(c.target&&c.target.$_vs_onResize){let r,g;if(c.borderBoxSize){const y=c.borderBoxSize[0];r=y.inlineSize,g=y.blockSize}else r=c.contentRect.width,g=c.contentRect.height;c.target.$_vs_onResize(c.target.$_vs_id,r,g)}}})})),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},inheritAttrs:!1,props:{...Aa,minItemSize:{type:[Number,String],required:!0}},emits:["resize","visible"],data(){return{vscrollData:{active:!0,sizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray:$a,itemsWithSize(){const a=[],{items:c,keyField:r,simpleArray:g}=this,y=this.vscrollData.sizes,O=c.length;for(let m=0;m<O;m++){const C=c[m],A=g?m:C[r];let I=y[A];typeof I>"u"&&!this.$_undefinedMap[A]&&(I=0),a.push({item:C,id:A,size:I})}return a}},watch:{items(){this.forceUpdate()},simpleArray:{handler(a){this.vscrollData.simpleArray=a},immediate:!0},direction(a){this.forceUpdate(!0)},itemsWithSize(a,c){const r=this.$el.scrollTop;let g=0,y=0;const O=Math.min(a.length,c.length);for(let C=0;C<O&&!(g>=r);C++)g+=c[C].size||this.minItemSize,y+=a[C].size||this.minItemSize;const m=y-g;m!==0&&(this.$el.scrollTop+=m)}},beforeCreate(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={},this.$_events=r0()},activated(){this.vscrollData.active=!0},deactivated(){this.vscrollData.active=!1},unmounted(){this.$_events.all.clear()},methods:{onScrollerResize(){this.$refs.scroller&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible(){this.$_events.emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate(a=!1){(a||this.simpleArray)&&(this.vscrollData.sizes={}),this.$_events.emit("vscroll:update",{force:!0})},scrollToItem(a){const c=this.$refs.scroller;c&&c.scrollToItem(a)},getItemSize(a,c=void 0){const r=this.simpleArray?c??this.items.indexOf(a):a[this.keyField];return this.vscrollData.sizes[r]||0},scrollToBottom(){if(this.$_scrollingToBottom)return;this.$_scrollingToBottom=!0;const a=this.$el;this.$nextTick(()=>{a.scrollTop=a.scrollHeight+5e3;const c=()=>{a.scrollTop=a.scrollHeight+5e3,requestAnimationFrame(()=>{a.scrollTop=a.scrollHeight+5e3,this.$_undefinedSizes===0?this.$_scrollingToBottom=!1:requestAnimationFrame(c)})};requestAnimationFrame(c)})}}};function h0(a,c,r,g,y,O){const m=T("RecycleScroller");return L(),We(m,ma({ref:"scroller",items:O.itemsWithSize,"min-item-size":r.minItemSize,direction:a.direction,"key-field":"id","list-tag":a.listTag,"item-tag":a.itemTag},a.$attrs,{onResize:O.onScrollerResize,onVisible:O.onScrollerVisible}),{default:b(({item:C,index:A,active:I})=>[hn(a.$slots,"default",c_(d_({item:C.item,index:A,active:I,itemWithSize:C})))]),before:b(()=>[hn(a.$slots,"before")]),after:b(()=>[hn(a.$slots,"after")]),empty:b(()=>[hn(a.$slots,"empty")]),_:3},16,["items","min-item-size","direction","list-tag","item-tag","onResize","onVisible"])}Us.render=h0;Us.__file="src/components/DynamicScroller.vue";var Ta={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},emits:["resize"],computed:{id(){if(this.vscrollData.simpleArray)return this.index;if(this.vscrollData.keyField in this.item)return this.item[this.vscrollData.keyField];throw new Error(`keyField '${this.vscrollData.keyField}' not found in your item. You should set a valid keyField prop on your Scroller`)},size(){return this.vscrollData.sizes[this.id]||0},finalActive(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id(a,c){if(this.$el.$_vs_id=this.id,this.size||this.onDataUpdate(),this.$_sizeObserved){const r=this.vscrollData.sizes[c],g=this.vscrollData.sizes[a];r!=null&&r!==g&&this.applySize(r)}},finalActive(a){this.size||(a?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?a?this.observeSize():this.unobserveSize():a&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created(){if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){for(const a in this.sizeDependencies)this.$watch(()=>this.sizeDependencies[a],this.onDataUpdate);this.vscrollParent.$_events.on("vscroll:update",this.onVscrollUpdate)}},mounted(){this.finalActive&&(this.updateSize(),this.observeSize())},beforeUnmount(){this.vscrollParent.$_events.off("vscroll:update",this.onVscrollUpdate),this.unobserveSize()},methods:{updateSize(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData(){this.watchData&&!this.vscrollResizeObserver?this.$_watchData=this.$watch("item",()=>{this.onDataUpdate()},{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate({force:a}){!this.finalActive&&a&&(this.$_pendingVScrollUpdate=this.id),(this.$_forceNextVScrollUpdate===this.id||a||!this.size)&&this.updateSize()},onDataUpdate(){this.updateSize()},computeSize(a){this.$nextTick(()=>{if(this.id===a){const c=this.$el.offsetWidth,r=this.$el.offsetHeight;this.applyWidthHeight(c,r)}this.$_pendingSizeUpdate=null})},applyWidthHeight(a,c){const r=~~(this.vscrollParent.direction==="vertical"?c:a);r&&this.size!==r&&this.applySize(r)},applySize(a){this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.vscrollData.sizes[this.id]=a,this.emitResize&&this.$emit("resize",this.id)},observeSize(){this.vscrollResizeObserver&&(this.$_sizeObserved||(this.vscrollResizeObserver.observe(this.$el),this.$el.$_vs_id=this.id,this.$el.$_vs_onResize=this.onResize,this.$_sizeObserved=!0))},unobserveSize(){this.vscrollResizeObserver&&this.$_sizeObserved&&(this.vscrollResizeObserver.unobserve(this.$el),this.$el.$_vs_onResize=void 0,this.$_sizeObserved=!1)},onResize(a,c,r){this.id===a&&this.applyWidthHeight(c,r)}},render(){return p_(this.tag,this.$slots.default())}};Ta.__file="src/components/DynamicScrollerItem.vue";const g0={class:""},_0={key:0,class:"flex flex-col px-6 h-[calc(100vh-238px)]"},v0={class:"flex flex-col gap-6 py-6"},m0={class:"flex gap-2"},y0={class:"flex flex-col gap-2"},x0={class:"text-gray-700 font-bold"},b0={class:"bg-blue-700 border border-blue-900 text-white px-4 py-3 rounded-2xl break-all"},w0={class:"flex gap-2"},S0={class:"flex flex-col gap-2"},A0={class:"text-gray-700 font-bold"},$0={class:"bg-gray-100 border border-gray-200 text-gray-700 px-4 py-3 rounded-2xl break-all"},T0={key:1,class:"flex flex-col p-6 gap-2 items-center justify-center h-[calc(100vh-238px)]"},C0={class:"flex flex-col items-center gap-2"},I0={class:"text-lg text-gray-700"},z0={key:0,class:"bg-gray-100 w-full px-4 py-3 rounded-lg text-gray-700"},R0={class:"flex items-center flex-wrap gap-2 w-full"},O0={class:"w-full flex flex-col flex-shrink-0"},L0={class:"px-6 flex items-center gap-4"},D0={class:"h-[50px] flex items-center gap-2 px-4 flex-1 border border-gray-200 rounded-full"},E0=Dt({__name:"PreviewDebugChat",props:{app:{type:Object,default:{},required:!0},opening_statement:{type:String,default:"",required:!0},opening_questions:{type:Array,default:[],required:!0}},setup(a){const c=ya(),r=a;ge(""),ge(""),ge("");const g=ge(null),y=ge(0),O=h_(),{loading:m,handleDeleteDebugConversation:C}=m_(),{loading:A,messages:I,paginator:Z,loadDebugConversationMessages:Y}=y_(),j=()=>{y.value=g.value.$el.scrollHeight},M=()=>{g.value.$el.scrollTop=g.value.$el.scrollHeight-y.value},se=async q=>{var ee;const{scrollTop:B}=q.target;B<=0&&!A.value&&(j(),await Y((ee=c.params)==null?void 0:ee.app_id,0,!1),M())};return va(async()=>{var q;await Y((q=c.params)==null?void 0:q.app_id,0,!0),await Tn(()=>{g.value&&g.value.scrollToBottom()})}),(q,B)=>{var z,Oe;const ee=T("a-avatar"),me=T("icon-empty"),oe=T("a-button"),P=T("icon-send");return L(),F("div",g0,[N(I).length>0?(L(),F("div",_0,[h(N(Us),{ref_key:"scroller",ref:g,items:N(I).slice().reverse(),"min-item-size":1,onScroll:se,class:"h-full scrollbar-w-none"},{default:b(({item:G,index:xe,active:Ie})=>[h(N(Ta),{item:G,active:Ie,"data-index":G.id},{default:b(()=>{var U,E;return[_("div",v0,[_("div",m0,[h(ee,{size:30,shape:"circle",class:"flex-shrink-0","image-url":N(O).account.avatar},null,8,["image-url"]),_("div",y0,[_("div",x0,_e(N(O).account.name),1),_("div",b0,_e(G.query),1)])]),_("div",w0,[h(ee,{size:30,shape:"circle",class:"flex-shrink-0","image-url":(U=r.app)==null?void 0:U.icon},null,8,["image-url"]),_("div",S0,[_("div",A0,_e((E=r.app)==null?void 0:E.name),1),_("div",$0,_e(G.answer),1)])])])]}),_:2},1032,["item","active","data-index"])]),_:1},8,["items"])])):(L(),F("div",T0,[_("div",C0,[h(ee,{size:48,shape:"square",class:"rounded-lg","image-url":(z=r.app)==null?void 0:z.icon},null,8,["image-url"]),_("div",I0,_e((Oe=r.app)==null?void 0:Oe.name),1)]),r.opening_statement?(L(),F("div",z0,_e(r.opening_statement),1)):De("",!0),_("div",R0,[(L(!0),F(gt,null,_t(r.opening_questions.filter(G=>G.trim()!==""),(G,xe)=>(L(),F("div",{key:xe,class:"px-4 py-1.5 border rounded-lg text-gray-700 cursor-pointer hover:bg-gray-50"},_e(G),1))),128))])])),_("div",O0,[_("div",L0,[h(oe,{loading:N(m),class:"flex-shrink-0 !text-gray-700",type:"text",shape:"circle",onClick:B[0]||(B[0]=async()=>{var G,xe;await N(C)((G=r.app)==null?void 0:G.id),await N(Y)((xe=r.app)==null?void 0:xe.id,0,!0)})},{icon:b(()=>[h(me,{size:16})]),_:1},8,["loading"]),_("div",D0,[B[1]||(B[1]=_("input",{type:"text",class:"flex-1 outline-0"},null,-1)),h(oe,{type:"text",shape:"circle",class:"!text-gray-700"},{icon:b(()=>[h(P,{size:16})]),_:1})])]),B[2]||(B[2]=_("div",{class:"text-center text-gray-500 text-xs py-4"}," 内容由AI生成，无法确保真实准确，仅供参考 ",-1))])])}}}),U0={class:"flex-1 w-full min-h-0 bg-white"},k0={class:"flex-1 grid grid-cols-[26fr_14fr] h-full w-full"},P0={class:"bg-gray-50 flex flex-col h-full"},M0={class:"grid grid-cols-[13fr_13fr] overflow-hidden h-[calc(100vh-141px)]"},B0={class:"border-r py-4"},W0={class:"min-w-[404px]"},K0=Dt({__name:"DetailView",props:{app:{type:Object,default:{},required:!0}},setup(a){var O;const c=ya(),r=a,{draftAppConfigForm:g,loadDraftAppConfig:y}=x_((O=c.params)==null?void 0:O.app_id);return gn(),(m,C)=>{var A,I,Z;return L(),F("div",U0,[_("div",k0,[_("div",P0,[C[1]||(C[1]=_("div",{class:"flex items-center h-16 border-b p-4"},[_("div",{class:"text-lg text-gray-700"},"应用编排")],-1)),_("div",M0,[_("div",B0,[h(U_,{preset_prompt:N(g).preset_prompt,"onUpdate:preset_prompt":C[0]||(C[0]=Y=>N(g).preset_prompt=Y),app_id:(A=N(c).params)==null?void 0:A.app_id},null,8,["preset_prompt","app_id"])]),h(Fm,{draft_app_config:N(g),app_id:(I=N(c).params)==null?void 0:I.app_id},null,8,["draft_app_config","app_id"])])]),_("div",W0,[h(F_,{app_id:(Z=N(c).params)==null?void 0:Z.app_id,long_term_memory:N(g).long_term_memory},null,8,["app_id","long_term_memory"]),h(E0,{opening_questions:N(g).opening_questions,opening_statement:N(g).opening_statement,app:r.app},null,8,["opening_questions","opening_statement","app"])])])])}}});export{K0 as default};
