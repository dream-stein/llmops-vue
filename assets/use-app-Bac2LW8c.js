import{g as i,p,s as _,r as o,B as v,E as f,o as h,M as u,L as y}from"./index-C-yiiy8W.js";const b=e=>i(`/apps/${e}`),m=e=>p("/apps",{body:e}),C=(e,s)=>p(`/apps/${e}`,{body:s}),A=e=>p(`/apps/${e}/delete`),D=e=>p(`/apps/${e}/copy`),w=e=>i("/apps",{params:e}),P=e=>i(`/apps/${e}/draft-app-config`),$=(e,s)=>p(`/apps/${e}/draft-app-config`,{body:s}),k=e=>i(`/apps/${e}/summary`),W=(e,s)=>p(`/apps/${e}/summary`,{body:{summary:s}}),z=(e,s,t)=>_(`/apps/${e}/conversations`,{body:{query:s}},t),S=(e,s)=>p(`/apps/${e}/conversations/tasks/${s}/stop`),H=(e,s)=>i(`/apps/${e}/conversations/messages`,{params:s}),U=e=>p(`/apps/${e}/conversations/delete-debug-conversation`),M=e=>p(`/apps/${e}/publish`),T=e=>p(`/apps/${e}/cancel-publish`),G=(e,s)=>i(`/apps/${e}/publish-histories`,{params:s}),F=(e,s)=>p(`/apps/${e}/fallback-history`,{body:{app_config_version_id:s}}),O=e=>i(`/apps/${e}/published-config`),R=e=>p(`/apps/${e}/published-config/regenerate-web-app-token`),x=()=>{const e=o(!1),s=o({});return{loading:e,app:s,loadApp:async a=>{try{e.value=!0;const n=await b(a);s.value=n.data}finally{e.value=!1}}}},B=()=>{const e=o(!1),s=o([]),t={current_page:1,page_size:20,total_page:0,total_record:0},a=o({...t});return{loading:e,apps:s,paginator:a,loadApps:async(c=!1,r="")=>{if(c)a.value=t;else if(a.value.current_page>a.value.total_page)return;try{e.value=!0;const l=(await w({current_page:a.value.current_page,page_size:a.value.page_size,search_word:r})).data;a.value=l.paginator,a.value.current_page<=a.value.total_page&&(a.value.current_page+=1),c?s.value=l.list:s.value.push(...l.list)}finally{e.value=!1}}}},E=()=>{const e=v(),s=o(!1);return{loading:s,handleCreateApp:async a=>{try{s.value=!0;const n=await m(a);u.success("新增Agent应用成功"),await e.push({name:"space-apps-detail",params:{app_id:n.data.id}})}finally{s.value=!1}}}},I=()=>{const e=o(!1);return{loading:e,handleUpdateApp:async(t,a)=>{try{e.value=!0;const n=await C(t,a);u.success(n.message)}finally{e.value=!1}}}},L=()=>{const e=v(),s=o(!1);return{loading:s,handleCopyApp:async a=>{try{s.value=!0;const n=await D(a);u.success("创建应用副本成功"),await e.push({name:"space-apps-detail",params:{app_id:n.data.id}})}finally{s.value=!1}}}},J=()=>({handleDeleteApp:async(s,t)=>{y.warning({title:"要删除该应用吗?",content:"删除应用后，发布的WebApp、开放API以及关联的社交媒体平台均无法使用该Agent应用，如果需要暂停应用，可使用取消发布功能。",hideCancel:!1,onOk:async()=>{try{const a=await A(s);u.success(a.message)}finally{t&&t()}}})}}),K=()=>{const e=o(!1);return{loading:e,handlePublish:async t=>{try{e.value=!0;const a=await M(t);u.success(a.message)}finally{e.value=!1}}}},N=()=>{const e=o(!1);return{loading:e,handleCancelPublish:async(t,a)=>{y.warning({title:"要取消发布该Agent应用吗?",content:"取消发布后，WebApp以及发布的社交平台均无法使用该Agent，如需更新WebApp地址，请使用地址重新生成功能",hideCancel:!1,onOk:async()=>{try{e.value=!0;const n=await T(t);u.success(n.message)}finally{e.value=!1,a&&a()}}})}}},Q=()=>{const e=o(!1),s={current_page:1,page_size:20,total_page:0,total_record:0},t=f([]),a=f({...s});return{loading:e,publishHistories:t,paginator:a,loadPublishHistories:async(c,r=!1)=>{try{if(r)Object.assign(a,{...s});else if(a.current_page>a.total_page)return;e.value=!0;const l=(await G(c,{current_page:a.current_page,page_size:a.page_size})).data;a.current_page=l.paginator.current_page,a.page_size=l.paginator.page_size,a.total_page=l.paginator.total_page,a.total_record=l.paginator.total_record,a.current_page<=a.total_page&&(a.current_page+=1),r?t.splice(0,t.length,...l.list):t.push(...l.list)}finally{t.splice(0,a.total_page,{id:"2121-3211",version:2,created_at:1742225012},{id:"2121-3221",version:1,created_at:1742225012}),e.value=!1}}}},V=()=>{const e=o(!1);return{loading:e,handleFallbackHistoryToDraft:async(t,a,n)=>{try{e.value=!0;const c=await F(t,a);u.success(c.message)}finally{e.value=!1,n&&n()}}}},X=e=>{const s=o(!1),t=f({}),a=async n=>{try{s.value=!0;const r=(await P(n)).data;Object.assign(t,{dialog_round:r.dialog_round,model_config:r.model_config,preset_prompt:r.preset_prompt,long_term_memory:r.long_term_memory,opening_statement:r.opening_statement,opening_questions:r.opening_questions,suggested_after_answer:r.suggested_after_answer,review_config:r.review_config,datasets:r.datasets,retrieval_config:r.retrieval_config,tools:r.tools,workflows:r.workflows})}finally{s.value=!1}};return h(async()=>await a(e)),{loading:s,draftAppConfigForm:t,loadDraftAppConfig:a}},Y=()=>{const e=o(!1);return{loading:e,handleUpdateDraftAppConfig:async(t,a)=>{try{e.value=!0;const n=await $(t,a);u.success(n.message)}finally{e.value=!1}}}},Z=()=>{const e=o(!1),s=o("");return{loading:e,debug_conversation_summary:s,loadDebugConversationSummary:async a=>{try{e.value=!0;const c=(await k(a)).data;s.value=c.summary}finally{e.value=!1}}}},ee=()=>{const e=o(!1);return{loading:e,handleUpdateDebugConversationSummary:async(t,a)=>{try{e.value=!0;const n=await W(t,a);u.success(n.message)}finally{e.value=!1}}}},ae=()=>{const e=o(!1);return{loading:e,handleDeleteDebugConversation:async t=>{try{e.value=!0;const a=await U(t);u.success(a.message)}finally{e.value=!1}}}},se=()=>{const e=o(!1),s=o([]),t=o(0),a={current_page:1,page_size:5,total_page:0,total_record:0},n=o({...a});return{loading:e,messages:s,paginator:n,loadDebugConversationMessages:async(r,g=!1)=>{var l;if(g)n.value={...a},t.value=0;else if(n.value.current_page>n.value.total_page)return;try{e.value=!0;const d=(await H(r,{current_page:n.value.current_page,page_size:n.value.page_size,created_at:t.value})).data;n.value=d.paginator,n.value.current_page<=n.value.total_page&&(n.value.current_page+=1),g?s.value=d.list:(s.value.push(...d.list),t.value=((l=d.list[0])==null?void 0:l.created_at)??0)}finally{e.value=!1}}}},te=()=>{const e=o(!1);return{loading:e,handleDebugChat:async(t,a,n)=>{try{e.value=!0,await z(t,a,n)}finally{e.value=!1}}}},ne=()=>{const e=o(!1);return{loading:e,handleStopDebugChat:async(t,a)=>{try{e.value=!0,await S(t,a)}finally{e.value=!1}}}},oe=()=>{const e=o(!1),s=o({});return{loading:e,published_config:s,loadPublishedConfig:async a=>{try{e.value=!0;const n=await O(a);s.value=n.data}finally{e.value=!1}}}},re=()=>{const e=o(!1),s=o("");return{loading:e,token:s,handleRegenerateWebAppToken:async a=>{try{e.value=!0;const n=await R(a);u.success("重新生成WebApp访问链接成功"),s.value=n.data.token}finally{e.value=!1}}}};export{I as a,x as b,L as c,B as d,J as e,Q as f,V as g,K as h,N as i,Y as j,Z as k,ee as l,ae as m,se as n,te as o,ne as p,X as q,oe as r,re as s,E as u};
