import{a as N,r as y,o,c as r,b as s,y as T,F as A,s as D,e as t,w as n,j as g,z as G,A as M,B as P,k as j,v as h,f as i,i as m,g as q,t as _}from"./index-_10x1ktk.js";import{p as F}from"./request-BIcdjMlM.js";const K=(v,a)=>F(`/apps/${v}/debug`,{body:{query:a}}),L={class:"min-h-screen"},S={class:"flex flex-row h-[calc(100vh-74px)]"},E={class:"flex flex-col w-1/3 bg-white h-full"},I={class:"h-full min-h-0 px-6 py-7 overflow-x-hidden overflow-y-scroll scrollbar-w-none"},Q={class:"flex flex-col gap-2"},R={class:"font-semibold text-gray-700"},U={key:0,class:"max-w-max bg-blue-700 text-white border border-blue-800 px-4 py-3 rounded-2xl leading-5"},$={key:1,class:"max-w-max bg-gray-100 text-gray-900 border border-gray-200 px-4 py-3 rounded-2xl leading-5"},H={key:0,class:"mt-[200px] flex flex-col items-center justify-center gap-2"},J={key:1,class:"flex flex-row gap-2 mb-6"},O={class:"flex flex-col gap-2"},W={class:"max-w-max bg-gray-100 text-gray-900 border border-gray-200 px-4 py-3 rounded-2xl leading-5"},X={class:"w-full flex-shrink-0 flex flex-col"},Y={class:"px-6 flex items-center gap-4"},Z={class:"h-[50px] flex items-center gap-2 px-4 flex-1 border border-gray-200 rounded-full"},te=N({__name:"DetailView",setup(v){const a=y(""),d=y([]),x=y(!1),w=j(),k=()=>{d.value=[]},b=async()=>{if(!a.value){h.error("用户提问不能为空");return}if(x.value){h.warning("上一次回复还未结束，请稍等");return}try{const p=a.value;d.value.push({role:"human",content:p}),a.value="",x.value=!0;const c=(await K(w.params.app_id,p)).data.content;d.value.push({role:"ai",content:c})}finally{x.value=!1}};return(p,e)=>{const c=i("a-avatar"),u=i("icon-apps"),C=i("icon-loading"),z=i("icon-empty"),f=i("a-button"),V=i("icon-plus-circle"),B=i("icon-send");return o(),r("div",L,[e[7]||(e[7]=s("header",{class:"flex items-center h-[74px] bg-gray-100 border-b border-gray-200 px-4"}," 顶部导航 ",-1)),s("div",S,[e[6]||(e[6]=T('<div class="w-2/3 bg-gray-50 h-full"><header class="flex items-center h-16 border-b border-gray-200 px-7 text-xl text-gray-700"> 应用编排 </header><div class="flex flex-row h-[calc(100%-64px)]"><div class="flex-1 border-r border-gray-200 p-6">人设与回复逻辑</div><div class="flex-1 p-6">应用能力</div></div></div>',1)),s("div",E,[e[5]||(e[5]=s("header",{class:"flex flex-shrink-0 items-center h-16 px-4 text-xl bg-white border-b border-gray-200 shadow-sm"}," 调试与预览 ",-1)),s("div",I,[(o(!0),r(A,null,D(d.value,l=>(o(),r("div",{class:"flex flex-row gap-2 mb-6",key:l.content},[l.role==="human"?(o(),m(c,{key:0,style:{backgroundColor:"#3370ff"},class:"flex-shrink-0",size:30},{default:n(()=>e[1]||(e[1]=[q(" 慕 ")])),_:1})):(o(),m(c,{key:1,style:{backgroundColor:"#00d0b6"},class:"flex-shrink-0",size:30},{default:n(()=>[t(u)]),_:1})),s("div",Q,[s("div",R,_(l.role==="human"?"慕小课":"ChatGPT聊天机器人"),1),l.role==="human"?(o(),r("div",U,_(l.content),1)):(o(),r("div",$,_(l.content),1))])]))),128)),d.value.length?g("",!0):(o(),r("div",H,[t(c,{size:70,shape:"square",style:{backgroundColor:"#00d0b6"}},{default:n(()=>[t(u)]),_:1}),e[2]||(e[2]=s("div",{class:"text-2xl font-semibold text-gray-900"},"ChatGPT聊天机器人",-1))])),x.value?(o(),r("div",J,[t(c,{style:{backgroundColor:"#00d0b6"},class:"flex-shrink-0",size:30},{default:n(()=>[t(u)]),_:1}),s("div",O,[e[3]||(e[3]=s("div",{class:"font-semibold text-gray-700"},"ChatGPT聊天机器人",-1)),s("div",W,[t(C)])])])):g("",!0)]),s("div",X,[s("div",Y,[t(f,{class:"flex-shrink-0",type:"text",shape:"circle",onClick:k},{icon:n(()=>[t(z,{size:"16",style:{color:"#374151"}})]),_:1}),s("div",Z,[G(s("input",{type:"text",class:"flex-1 outline-0","onUpdate:modelValue":e[0]||(e[0]=l=>a.value=l),onKeyup:P(b,["enter"])},null,544),[[M,a.value]]),t(f,{type:"text",shape:"circle"},{icon:n(()=>[t(V,{size:"16",style:{color:"#374151"}})]),_:1}),t(f,{type:"text",shape:"circle",onClick:b},{icon:n(()=>[t(B,{size:"16",style:{color:"#1d4ed8"}})]),_:1})])]),e[4]||(e[4]=s("div",{class:"text-center text-gray-500 text-xs py-4"}," 内容由AI生成，无法确保真实准确，仅供参考。 ",-1))])])])])}}});export{te as default};
