import{m as O}from"./moment-D1OzZJgh.js";import{u as P,a as W,b as E}from"./use-app-1yu2DDUj.js";import{d as j,r as s,o as i,c as d,w as e,g as l,t as p,h as t,b as V,l as G,m as R,e as B,u as n,j as J,f as K,n as Q,a as f,F as X,i as D}from"./index-DCxUY7Ou.js";const Y={class:"flex items-center justify-between"},Z={class:"text-lg font-bold text-gray-700"},ee=j({__name:"CreateOrUpdateAppModal",props:{app_id:{type:String,default:"",required:!1},visible:{type:Boolean,required:!0},callback:{type:Function,required:!1}},emits:["update:visible","update:app_id"],setup(h,{emit:C}){const g=h,u=C,c=()=>u("update:visible",!1);return(A,S)=>{const y=s("icon-close"),x=s("a-button"),_=s("a-modal");return i(),d(_,{width:520,visible:g.visible,"hide-title":"",footer:!1,"modal-class":"rounded-xl",onCancel:c},{default:e(()=>[l("div",Y,[l("div",Z,p(g.app_id===""?"创建 AI 应用":"编辑 AI 应用"),1),t(x,{type:"text",class:"!text-gray-700",size:"small",onClick:c},{icon:e(()=>[t(y)]),_:1})])]),_:1},8,["visible"])}}}),te={class:"flex items-center gap-3 mb-3"},ae={class:"flex flex-1 justify-between"},oe={class:"flex flex-col"},se={class:"text-xs text-gray-500 line-clamp-1"},ne={class:"leading-[18px] text-gray-500 h-[72px] line-clamp-4 mb-2 break-all"},le={class:"flex items-center gap-1.5"},ie={class:"text-xs text-gray-400"},pe=j({__name:"ListView",props:{createType:{type:String,default:"",required:!0}},setup(h){const C=J(),g=h,u=V(!1),c=V(""),A=G(),{handleCopyApp:S}=P(),{loading:y,apps:x,paginator:_,loadApps:m}=W(),{handleDeleteApp:z}=E(),H=async r=>{const{scrollTop:a,scrollHeight:v,clientHeight:b}=r.target;if(a+b>=v-10){if(y.value)return;await m()}};return R(async()=>{await m(!0)}),B(()=>g.createType,r=>{r==="app"&&(c.value="",u.value=!0)}),B(()=>{var r;return(r=C.query)==null?void 0:r.search_word},async()=>await m(!0)),(r,a)=>{const v=s("a-avatar"),b=s("router-link"),N=s("icon-more"),T=s("a-button"),k=s("a-doption"),U=s("a-dropdown"),F=s("icon-user"),I=s("a-card"),w=s("a-col"),L=s("a-empty"),q=s("a-row"),M=s("a-spin"),$=s("a-space");return i(),d(M,{loading:n(y),class:"block h-full w-full scrollbar-w-none overflow-scroll",onScroll:H},{default:e(()=>[t(q,{gutter:[20,20],class:"flex-1"},{default:e(()=>[(i(!0),K(X,null,Q(n(x),o=>(i(),d(w,{key:o.id,span:6},{default:e(()=>[t(I,{hoverable:"",class:"cursor-pointer rounded-lg"},{default:e(()=>[l("div",te,[t(v,{size:40,shape:"square","image-url":o.icon},null,8,["image-url"]),l("div",ae,[l("div",oe,[t(b,{to:{name:"space-apps-detail",params:{app_id:o.id}},class:"text-base text-gray-900 font-bold"},{default:e(()=>[f(p(o.name),1)]),_:2},1032,["to"]),l("div",se,p(o.model_config.provider)+" · "+p(o.model_config.model),1)]),t(U,{position:"br"},{content:e(()=>[t(b,{to:{name:"space-apps-analysis",params:{app_id:o.id}}},{default:e(()=>[t(k,null,{default:e(()=>a[2]||(a[2]=[f("分析")])),_:1})]),_:2},1032,["to"]),t(k,{onClick:()=>{c.value=o.id,u.value=!0}},{default:e(()=>a[3]||(a[3]=[f(" 编辑应用 ")])),_:2},1032,["onClick"]),t(k,{onClick:async()=>await n(S)(o.id)},{default:e(()=>a[4]||(a[4]=[f("创建副本")])),_:2},1032,["onClick"]),t(k,{onClick:async()=>await n(z)(o.id,async()=>await n(m)(!0))},{default:e(()=>a[5]||(a[5]=[f(" 删除 ")])),_:2},1032,["onClick"])]),default:e(()=>[t(T,{type:"text",size:"small",class:"rounded-lg !text-gray-700"},{icon:e(()=>[t(N)]),_:1})]),_:2},1024)])]),l("div",ne,p(o.description.trim()===""?o.preset_prompt:o.description),1),l("div",le,[t(v,{size:18,class:"bg-blue-700"},{default:e(()=>[t(F)]),_:1}),l("div",ie,p(n(A).account.name)+" · 最近编辑 "+p(n(O)(o.created_at*1e3).format("MM-DD HH:mm")),1)])]),_:2},1024)]),_:2},1024))),128)),n(x).length===0?(i(),d(w,{key:0,span:24},{default:e(()=>[t(L,{description:"没有可用的Agent智能体",class:"h-[400px] flex flex-col items-center justify-center"})]),_:1})):D("",!0)]),_:1}),n(_).total_page>=2?(i(),d(q,{key:0},{default:e(()=>[n(_).current_page<=n(_).total_page?(i(),d(w,{key:0,span:24,align:"center"},{default:e(()=>[t($,{class:"my-4"},{default:e(()=>[t(M),a[6]||(a[6]=l("div",{class:"text-gray-400"},"加载中",-1))]),_:1})]),_:1})):(i(),d(w,{key:1,span:24,align:"center"},{default:e(()=>a[7]||(a[7]=[l("div",{class:"text-gray-400 my-4"},"数据已加载完成",-1)])),_:1}))]),_:1})):D("",!0),t(ee,{visible:u.value,"onUpdate:visible":a[0]||(a[0]=o=>u.value=o),app_id:c.value,"onUpdate:app_id":a[1]||(a[1]=o=>c.value=o),callback:async()=>await n(m)(!0)},null,8,["visible","app_id","callback"])]),_:1},8,["loading"])}}});export{pe as default};
