import{j as m,b as p,n as l,s as b,e as h,x as _,M as y}from"./index-CXYQFNDG.js";import{j as D,k as P,l as v,g as O,m as z,a as S,n as j,o as M,p as U,q,r as L,s as W}from"./dataset-CS7d5omV.js";const E=()=>{const i=m(),s=p(!1),a=l([]),t={current_page:1,page_size:20,total_page:0,total_record:0},e=l({...t}),n=async(r=!1)=>{var o;if(r)c();else if(e.current_page>e.total_page)return;try{s.value=!0;const g=(await D(e.current_page,e.page_size,String(((o=i.query)==null?void 0:o.search_word)??""))).data;d(g),e.current_page<=e.total_page&&(e.current_page+=1),r?a.splice(0,a.length,...g.list):a.push(...g.list)}finally{Object.assign(a,[{id:"46db30d1-3199-4e79-a0cd-abf12fa6858f",name:"慕课LLMOps知识库",icon:"https://cdn.imooc.com/dataset.png",description:"JavaScript是一种高级编程语言，用于创建交互式网页和动态效果，JavaScript在前端开发中扮演着非常重要的角色，因此学习 JavaScript 对于初级前端工程师来说非常必要。JavaScrip...",document_count:10,character_count:14651,related_app_count:2,updated_at:1721460914,created_at:1721460914}]),s.value=!1}},c=()=>{Object.assign(e,{...t})},d=r=>{e.current_page=r.current_page,e.page_size=r.page_size,e.total_page=r.total_page,e.total_record=r.total_record};return b(async()=>{await n(!0)}),h(()=>{var r;return(r=i.query)==null?void 0:r.search_word},async()=>{await n(!0)}),{loading:s,datasets:a,paginator:e,loadDatasets:n}},J=()=>({handleDelete:(s,a)=>{y.warning({title:"要删除知识库吗?",content:"删除知识库后，关联该知识库的应用将无法再使用该知识库，所有的提示配置和文档都将被永久删除",hideCancel:!1,onOk:async()=>{try{const t=await M(s);_.success(t.message)}finally{a&&a()}}})}}),k=()=>{const i=p(!1),a=l({...{fileList:[],icon:"",name:"",description:""}}),t=p(),e=p(!1);return{loading:i,form:a,formRef:t,saveDataset:async d=>{try{if(i.value=!0,d!==void 0&&d!==""){const r=await P(d,{icon:a.icon,name:a.name,description:a.description});_.success(r.message)}else{const r=await v({icon:a.icon,name:a.name,description:a.description});_.success(r.message)}}finally{i.value=!1}},showUpdateModal:e,updateShowUpdateModal:(d,r)=>{e.value=d,r&&r()}}},x=i=>{const s=p(!1),a=l({}),t=async e=>{try{s.value=!0;const c=(await O(e)).data;Object.assign(a,{...c})}finally{Object.assign(a,{id:"46db30d1-3199-4e79-a0cd-abf12fa6858f",name:"慕课LLMOps知识库",icon:"https://cdn.imooc.com/dataset.png",description:"",document_count:10,character_count:14651,hit_count:10,related_app_count:2,updated_at:1721460914,created_at:1721460914}),s.value=!1}};return b(()=>t(i)),{loading:s,dataset:a,loadDataset:t}},F=i=>{const s=m(),a=p(!1),t=l([]),e={current_page:1,page_size:20,total_page:0,total_record:0},n=l({...e}),c=async(o=!1)=>{var u,g,f;if(!(!o&&n.current_page>n.total_page))try{a.value=!0;const w=(await z(i,{current_page:((u=s.query)==null?void 0:u.current_page)||1,page_size:((g=s.query)==null?void 0:g.page_size)||20,search_word:((f=s.query)==null?void 0:f.search_word)||""})).data;r(w),t.splice(0,t.length,...w.list)}finally{t.push({id:"bde70d64-cbcc-47e7-a0f5-b51200b87c7c",name:"LLMOps项目提示词",character_count:4700,hit_count:0,position:21,enabled:!0,disabled_at:0,status:"completed",error:"",updated_at:1726949586,created_at:1726949586},{id:"bde70d64-cbcc-47e7-a0f5-b51200b87c7c",name:"embedding提示",character_count:2310,hit_count:0,position:11,enabled:!1,disabled_at:0,status:"error",error:"",updated_at:1726949586,created_at:1726949586}),Object.assign(n,{current_page:1,page_size:20,total_page:1,total_record:2}),a.value=!1}},d=()=>{Object.assign(n,{...e})},r=o=>{n.current_page=o.paginator.current_page,n.page_size=o.paginator.page_size,n.total_page=o.paginator.total_page,n.total_record=o.paginator.total_record};return b(async()=>{await c(!0)}),h(()=>s.query,async(o,u)=>{o.search_word!==u.search_word?(d(),await c(!0)):o.current_page!==u.current_page&&await c()}),{loading:a,documents:t,paginator:n,loadDocuments:c}},R=()=>({handleDelete:(s,a,t)=>{y.warning({title:"要删除该文档吗?",content:"删除文档后，数据库/向量数据库将无法检索到该文档，如需暂时关闭该文档的检索，可以选择禁言功能",hideCancel:!1,onOk:async()=>{try{const e=await U(s,a);_.success(e.message)}finally{t&&t()}}})}}),B=()=>({handleUpdate:async(s,a,t,e)=>{try{const n=await q(s,a,t);_.success(n.message)}finally{e&&e()}}}),H=(i,s)=>{const a=p(!1),t=l({}),e=async(n,c)=>{try{a.value=!0;const r=(await S(n,c)).data;Object.assign(t,{...r})}finally{Object.assign(t,{id:"6196a3bc-2c81-40b8-83a5-25ad837f5a84",dataset_id:"bde70d64-cbcc-47e7-a0f5-b51200b87c7c",name:"基于工具调用的智能体设计与实现.md",segment_count:15,character_count:4700,hit_count:2,position:21,enabled:!0,disabled_at:0,status:"completed",error:"",updated_at:1726949586,created_at:1726949586}),a.value=!1}};return b(async()=>await e(i,s)),{loading:a,document:t,loadDocument:e}},I=(i,s)=>{const a=m(),t=p(!1),e=l([]),n={current_page:1,page_size:20,total_page:0,total_record:0},c=l({...n}),d=async(o=!1)=>{var u;if(o)Object.assign(c,{...n});else if(c.current_page>c.total_page)return;try{t.value=!0;const f=(await j(i,s,{current_page:c.current_page,page_size:c.page_size,search_word:String(((u=a.query)==null?void 0:u.search_word)||"")})).data;r(f),c.current_page<=c.total_page&&(c.current_page+=1),o?e.splice(0,e.length,...f.list):e.push(...f.list)}finally{e.push({id:"b7087193-8e1b-4e88-8ae4-48a0f90a8ad5",document_id:"6a266b4b-d03b-4066-a4bb-f64abfe23b9d",dataset_id:"bde70d64-cbcc-47e7-a0f5-b51200b87c7c",position:12,content:"为了提倡社交产品的流量，让用户主动分享APP中的内容到社交平台来达到拉新和促活的目的，市场上的绝大多数APP都有第三发分享的功能，它是内容分发的最有效途径，并且大大降低了企...",keywords:["社交","App","成本","功能","内容分发"],character_count:487,token_count:407,hit_count:1,enabled:!0,disabled_at:0,status:"completed",error:"",updated_at:1726858854,created_at:1726858854},{id:"b7087193-8e1b-4e88-8ae4-48a0f90a8ad4",document_id:"6a266b4b-d03b-4066-a4bb-f64abfe23b9d",dataset_id:"bde70d64-cbcc-47e7-a0f5-b51200b87c7c",position:1,content:"为了提倡社交产品的流量，让用户主动分享APP中的内容到社交平台来达到拉新和促活的目的，市场上的绝大多数APP都有第三发分享的功能，它是内容分发的最有效途径，并且大大降低了企...",keywords:["llm","内容分发"],character_count:487,token_count:407,hit_count:1,enabled:!1,disabled_at:0,status:"completed",error:"",updated_at:1726858854,created_at:1726858854}),t.value=!1}},r=o=>{c.current_page=o.paginator.current_page,c.page_size=o.paginator.page_size,c.total_page=o.paginator.total_page,c.total_record=o.paginator.total_record};return b(async()=>{await d(!0)}),h(()=>{var o;return(o=a.query)==null?void 0:o.search_word},async()=>{await d(!0)}),{loading:t,segments:e,paginator:c,loadSegments:d}},K=()=>({handleDelete:async(s,a,t,e)=>{y.warning({title:"要删除该文档片段吗？",content:"删除文档片段后，知识库/向量知识库将无法检索到该文档，如需暂时关闭该文档的检索，可以选择禁用功能。",hideCancel:!1,onOk:async()=>{try{const n=await L(s,a,t);_.success(n.message)}finally{e&&e()}}})}}),N=()=>({handleUpdate:async(s,a,t,e,n)=>{try{const c=await W(s,a,t,e);_.success(c.message)}finally{n&&n()}}});export{k as a,J as b,x as c,F as d,R as e,B as f,H as g,I as h,K as i,N as j,E as u};
