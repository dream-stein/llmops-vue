import{k as B,r as C,p as S,q as H,h as J,a as L,o as _,i as f,w as a,u as p,f as n,e as o,c as N,s as O,b as c,t as m,g as z,F,j as D}from"./index-BvuoEs5u.js";import{g as T}from"./request-DPrmwDor.js";import{h as W}from"./moment-C5S46NFB.js";const E=(x=1,l=10,r="")=>T("/datasets",{params:{current_page:x,page_size:l,search_word:r}}),G=()=>{const x=B(),l=C(!1),r=S([]),d={current_page:1,page_size:20,total_page:0,total_record:0},t=S({...d}),y=async(e=!1)=>{var u;if(e)h();else if(t.current_page>t.total_page)return;try{l.value=!0;const g=(await E(t.current_page,t.page_size,String(((u=x.query)==null?void 0:u.search_word)??""))).data;s(g),t.current_page<=t.total_page&&(t.current_page+=1),e?r.splice(0,r.length,...g.list):r.push(...g.list)}finally{Object.assign(r,[{id:"46db30d1-3199-4e79-a0cd-abf12fa6858f",name:"慕课LLMOps知识库",icon:"https://cdn.imooc.com/dataset.png",description:"JavaScript是一种高级编程语言，用于创建交互式网页和动态效果，JavaScript在前端开发中扮演着非常重要的角色，因此学习 JavaScript 对于初级前端工程师来说非常必要。JavaScrip...",document_count:10,character_count:14651,related_app_count:2,updated_at:1721460914,created_at:1721460914}]),l.value=!1}},h=()=>{Object.assign(t,{...d})},s=e=>{t.current_page=e.current_page,t.page_size=e.page_size,t.total_page=e.total_page,t.total_record=e.total_record};return H(async()=>{await y(!0)}),J(()=>{var e;return(e=x.query)==null?void 0:e.search_word},async()=>{await y(!0)}),{loading:l,datasets:r,paginator:t,loadDatasets:y}},R={class:"flex items-center gap-3 mb-3"},A={class:"flex flex-1 justify-between"},I={class:"flex flex-col"},K={class:"text-base text-gray-900 font-bold"},Q={class:"text-xs text-gray-500 line-clamp-1"},U={class:"leading-[18px] text-gray-500 h-[72px] line-clamp-4 mb-2"},X={class:"flex items-center gap-1.5"},Y={class:"text-xs text-gray-400"},et=L({__name:"ListView",setup(x){const{loading:l,datasets:r,paginator:d,loadDatasets:t}=G(),y=async h=>{const{scrollTop:s,scrollHeight:e,clientHeight:u}=h.target;if(s+u>=e-10){if(l.value)return;await t()}};return(h,s)=>{const e=n("a-avatar"),u=n("icon-more"),b=n("a-button"),g=n("a-doption"),j=n("a-dropdown"),M=n("icon-user"),P=n("a-card"),v=n("a-col"),V=n("a-empty"),w=n("a-row"),k=n("a-spin"),q=n("a-space");return _(),f(k,{loading:p(l),class:"block h-full w-full scrollbar-w-none overflow-scroll",onScroll:y},{default:a(()=>[o(w,{gutter:[20,20],class:"flex-1"},{default:a(()=>[(_(!0),N(F,null,O(p(r),i=>(_(),f(v,{key:i.id,span:6},{default:a(()=>[o(P,{hoverable:"",class:"cursor-pointer rounded-lg"},{default:a(()=>[c("div",R,[o(e,{size:40,shape:"square","image-url":i.icon},null,8,["image-url"]),c("div",A,[c("div",I,[c("div",K,m(i.name),1),c("div",Q,m(i.document_count)+" 文档 · "+m(Math.round(i.character_count/1e3))+" 千字符 · "+m(i.related_app_count)+" 关联应用 ",1)]),o(j,{position:"br"},{content:a(()=>[o(g,null,{default:a(()=>s[0]||(s[0]=[z("设置")])),_:1}),o(g,{class:"!text-red-500"},{default:a(()=>s[1]||(s[1]=[z("删除")])),_:1})]),default:a(()=>[o(b,{type:"text",size:"small",class:"rounded-lg !text-gray-700"},{icon:a(()=>[o(u)]),_:1})]),_:1})])]),c("div",U,m(i.description),1),c("div",X,[o(e,{size:18,class:"bg-blue-700"},{default:a(()=>[o(M)]),_:1}),c("div",Y," 慕小课 · 最近编辑 "+m(p(W)(i.created_at).format("MM-DD HH:mm")),1)])]),_:2},1024)]),_:2},1024))),128)),p(r).length===0?(_(),f(v,{key:0,span:24},{default:a(()=>[o(V,{description:"没有可用的知识库",class:"h-[400px] flex flex-col items-center justify-center"})]),_:1})):D("",!0)]),_:1}),p(d).total_page>=2?(_(),f(w,{key:0},{default:a(()=>[p(d).current_page<=p(d).total_page?(_(),f(v,{key:0,span:24,align:"center"},{default:a(()=>[o(q,{class:"my-4"},{default:a(()=>[o(k),s[2]||(s[2]=c("div",{class:"text-gray-400"},"加载中",-1))]),_:1})]),_:1})):(_(),f(v,{key:1,span:24,align:"center"},{default:a(()=>s[3]||(s[3]=[c("div",{class:"text-gray-400 my-4"},"数据已加载完成",-1)])),_:1}))]),_:1})):D("",!0)]),_:1},8,["loading"])}}});export{et as default};
