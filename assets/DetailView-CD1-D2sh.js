import{a as D,r as h,o,c as n,b as t,B as N,F as T,s as I,e as a,w as i,j as g,C as M,D as P,E as j,k as q,v as w,f as d,i as k,g as C,t as _,_ as A}from"./index-DGwnYLwc.js";import{s as E}from"./request-DcNozaMm.js";const F=(m,r,s)=>E(`/apps/${m}/debug`,{body:{query:r}},s),G={class:"min-h-screen"},K={class:"flex flex-row h-[calc(100vh-74px)]"},L={class:"flex flex-col w-1/3 bg-white h-full"},S={class:"h-full min-h-0 px-6 py-7 overflow-x-hidden overflow-y-scroll scrollbar-w-none"},Q={class:"flex flex-col gap-2"},R={class:"font-semibold text-gray-700"},U={key:0,class:"max-w-max bg-blue-700 text-white border border-blue-800 px-4 py-3 rounded-2xl leading-5"},$={key:1,class:"max-w-max bg-gray-100 text-gray-900 border border-gray-200 px-4 py-3 rounded-2xl leading-5"},H={key:0,class:"cursor"},J={key:0,class:"mt-[200px] flex flex-col items-center justify-center gap-2"},O={class:"w-full flex-shrink-0 flex flex-col"},W={class:"px-6 flex items-center gap-4"},X={class:"h-[50px] flex items-center gap-2 px-4 flex-1 border border-gray-200 rounded-full"},Y=D({__name:"DetailView",setup(m){const r=h(""),s=h([]),f=h(!1),V=q(),z=()=>{s.value=[]},b=async()=>{if(!r.value){w.error("用户提问不能为空");return}if(f.value){w.warning("上一次回复还未结束，请稍等");return}try{const v=r.value;s.value.push({role:"human",content:v}),r.value="",f.value=!0,s.value.push({role:"ai",content:""}),await F(V.params.app_id,v,e=>{const u=e==null?void 0:e.evnet,c=e==null?void 0:e.data,p=s.value.length-1,x=s.value[p];if(u==="agent_message"){const y=c==null?void 0:c.data;s.value[p].constructor=x.content+y}})}finally{f.value=!1}};return(v,e)=>{const u=d("a-avatar"),c=d("icon-apps"),p=d("icon-empty"),x=d("a-button"),y=d("icon-plus-circle"),B=d("icon-send");return o(),n("div",G,[e[6]||(e[6]=t("header",{class:"flex items-center h-[74px] bg-gray-100 border-b border-gray-200 px-4"}," 顶部导航 ",-1)),t("div",K,[e[5]||(e[5]=N('<div class="w-2/3 bg-gray-50 h-full" data-v-0de4643f><header class="flex items-center h-16 border-b border-gray-200 px-7 text-xl text-gray-700" data-v-0de4643f> 应用编排 </header><div class="flex flex-row h-[calc(100%-64px)]" data-v-0de4643f><div class="flex-1 border-r border-gray-200 p-6" data-v-0de4643f>人设与回复逻辑</div><div class="flex-1 p-6" data-v-0de4643f>应用能力</div></div></div>',1)),t("div",L,[e[4]||(e[4]=t("header",{class:"flex flex-shrink-0 items-center h-16 px-4 text-xl bg-white border-b border-gray-200 shadow-sm"}," 调试与预览 ",-1)),t("div",S,[(o(!0),n(T,null,I(s.value,l=>(o(),n("div",{class:"flex flex-row gap-2 mb-6",key:l.content},[l.role==="human"?(o(),k(u,{key:0,style:{backgroundColor:"#3370ff"},class:"flex-shrink-0",size:30},{default:i(()=>e[1]||(e[1]=[C(" 慕 ")])),_:1})):(o(),k(u,{key:1,style:{backgroundColor:"#00d0b6"},class:"flex-shrink-0",size:30},{default:i(()=>[a(c)]),_:1})),t("div",Q,[t("div",R,_(l.role==="human"?"慕小课":"ChatGPT聊天机器人"),1),l.role==="human"?(o(),n("div",U,_(l.content),1)):(o(),n("div",$,[C(_(l.content)+" ",1),f.value?(o(),n("div",H)):g("",!0)]))])]))),128)),s.value.length?g("",!0):(o(),n("div",J,[a(u,{size:70,shape:"square",style:{backgroundColor:"#00d0b6"}},{default:i(()=>[a(c)]),_:1}),e[2]||(e[2]=t("div",{class:"text-2xl font-semibold text-gray-900"},"ChatGPT聊天机器人",-1))]))]),t("div",O,[t("div",W,[a(x,{class:"flex-shrink-0",type:"text",shape:"circle",onClick:z},{icon:i(()=>[a(p,{size:"16",style:{color:"#374151"}})]),_:1}),t("div",X,[M(t("input",{type:"text",class:"flex-1 outline-0","onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l),onKeyup:j(b,["enter"])},null,544),[[P,r.value]]),a(x,{type:"text",shape:"circle"},{icon:i(()=>[a(y,{size:"16",style:{color:"#374151"}})]),_:1}),a(x,{type:"text",shape:"circle",onClick:b},{icon:i(()=>[a(B,{size:"16",style:{color:"#1d4ed8"}})]),_:1})])]),e[3]||(e[3]=t("div",{class:"text-center text-gray-500 text-xs py-4"}," 内容由AI生成，无法确保真实准确，仅供参考。 ",-1))])])])])}}}),te=A(Y,[["__scopeId","data-v-0de4643f"]]);export{te as default};
