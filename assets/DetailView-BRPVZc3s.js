import{c as Lc,m as U1}from"./moment-D6abmm6s.js";import{A as Se,d as Ee,a0 as Re,r as $e,G as ve,o as gt,y as A,c as K,O as it,b as Z,e as Fe,Y as ir,K as G1,a1 as s_,a2 as l_,a3 as en,J as H1,f as x,w as j,q as at,T as Yn,X as j1,a4 as Y1,n as St,W as an,a5 as X1,a6 as K1,V as Dr,a as h,z as re,h as se,F as _e,k as xe,_ as u_,a7 as W1,B as fe,a8 as c_,a9 as Cr,aa as Ne,$ as qe,x as F,ab as Ke,ac as Z1,ad as Fc,ae as zr,af as d_,j as we,Z as J1,ag as Q1,ah as vr,N as e0,ai as Ft,M as Qe,L as Un,C as t0}from"./index-CN7x7Znw.js";import{l as ye}from"./lodash-D3H_dXdZ.js";import{e as n0,b as r0,f as o0,g as i0,h as a0,i as s0}from"./use-workflow-ilCwIrvA.js";import{g as sn,a as l0}from"./helper-QRapnIPA.js";import{c as u0,d as c0,u as d0,b as f0,a as p0}from"./use-language-model-Dv4iFNq_.js";import{a as h0}from"./use-dataset-noSJmV7F.js";import{a as v0,f as g0}from"./use-tools-D5_xCb-v.js";import"./builtin-tool-B6MPIYKw.js";function no(e){return c_()?(Cr(e),!0):!1}function wt(e){return typeof e=="function"?e():Z(e)}const m0=typeof window<"u"&&typeof document<"u",_0=e=>typeof e<"u",y0=Object.prototype.toString,b0=e=>y0.call(e)==="[object Object]",x0=()=>{};function w0(e,t){function n(...r){return new Promise((o,i)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(o).catch(i)})}return n}const f_=e=>e();function $0(e=f_){const t=$e(!0);function n(){t.value=!1}function r(){t.value=!0}const o=(...i)=>{t.value&&e(...i)};return{isActive:Z1(t),pause:n,resume:r,eventFilter:o}}function Td(e,t=!1,n="Timeout"){return new Promise((r,o)=>{setTimeout(t?()=>o(n):r,e)})}function E0(e,t,n={}){const{eventFilter:r=f_,...o}=n;return Se(e,w0(r,t),o)}function fn(e,t,n={}){const{eventFilter:r,...o}=n,{eventFilter:i,pause:a,resume:s,isActive:l}=$0(r);return{stop:E0(e,t,{...o,eventFilter:i}),pause:a,resume:s,isActive:l}}function k0(e,t={}){if(!Yn(e))return j1(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const r in e.value)n[r]=Y1(()=>({get(){return e.value[r]},set(o){var i;if((i=wt(t.replaceRef))!=null?i:!0)if(Array.isArray(e.value)){const s=[...e.value];s[r]=o,e.value=s}else{const s={...e.value,[r]:o};Object.setPrototypeOf(s,Object.getPrototypeOf(e.value)),e.value=s}else e.value[r]=o}}));return n}function vc(e,t=!1){function n(d,{flush:f="sync",deep:p=!1,timeout:g,throwOnTimeout:m}={}){let y=null;const _=[new Promise(b=>{y=Se(e,$=>{d($)!==t&&(y==null||y(),b($))},{flush:f,deep:p,immediate:!0})})];return g!=null&&_.push(Td(g,m).then(()=>wt(e)).finally(()=>y==null?void 0:y())),Promise.race(_)}function r(d,f){if(!Yn(d))return n($=>$===d,f);const{flush:p="sync",deep:g=!1,timeout:m,throwOnTimeout:y}=f??{};let v=null;const b=[new Promise($=>{v=Se([e,d],([k,P])=>{t!==(k===P)&&(v==null||v(),$(k))},{flush:p,deep:g,immediate:!0})})];return m!=null&&b.push(Td(m,y).then(()=>wt(e)).finally(()=>(v==null||v(),wt(e)))),Promise.race(b)}function o(d){return n(f=>!!f,d)}function i(d){return r(null,d)}function a(d){return r(void 0,d)}function s(d){return n(Number.isNaN,d)}function l(d,f){return n(p=>{const g=Array.from(p);return g.includes(d)||g.includes(wt(d))},f)}function u(d){return c(1,d)}function c(d=1,f){let p=-1;return n(()=>(p+=1,p>=d),f)}return Array.isArray(wt(e))?{toMatch:n,toContains:l,changed:u,changedTimes:c,get not(){return vc(e,!t)}}:{toMatch:n,toBe:r,toBeTruthy:o,toBeNull:i,toBeNaN:s,toBeUndefined:a,changed:u,changedTimes:c,get not(){return vc(e,!t)}}}function gc(e){return vc(e)}function S0(e){var t;const n=wt(e);return(t=n==null?void 0:n.$el)!=null?t:n}const p_=m0?window:void 0;function h_(...e){let t,n,r,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,o]=e,t=p_):[t,n,r,o]=e,!t)return x0;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const i=[],a=()=>{i.forEach(c=>c()),i.length=0},s=(c,d,f,p)=>(c.addEventListener(d,f,p),()=>c.removeEventListener(d,f,p)),l=Se(()=>[S0(t),wt(o)],([c,d])=>{if(a(),!c)return;const f=b0(d)?{...d}:d;i.push(...n.flatMap(p=>r.map(g=>s(c,p,g,f))))},{immediate:!0,flush:"post"}),u=()=>{l(),a()};return no(u),u}function C0(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Rd(...e){let t,n,r={};e.length===3?(t=e[0],n=e[1],r=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],r=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:o=p_,eventName:i="keydown",passive:a=!1,dedupe:s=!1}=r,l=C0(t);return h_(o,i,c=>{c.repeat&&wt(s)||l(c)&&n(c)},a)}function N0(e){return JSON.parse(JSON.stringify(e))}function Oo(e,t,n,r={}){var o,i,a;const{clone:s=!1,passive:l=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:f}=r,p=ir(),g=n||(p==null?void 0:p.emit)||((o=p==null?void 0:p.$emit)==null?void 0:o.bind(p))||((a=(i=p==null?void 0:p.proxy)==null?void 0:i.$emit)==null?void 0:a.bind(p==null?void 0:p.proxy));let m=u;t||(t="modelValue"),m=m||`update:${t.toString()}`;const y=b=>s?typeof s=="function"?s(b):N0(b):b,v=()=>_0(e[t])?y(e[t]):d,_=b=>{f?f(b)&&g(m,b):g(m,b)};if(l){const b=v(),$=$e(b);let k=!1;return Se(()=>e[t],P=>{k||(k=!0,$.value=y(P),St(()=>k=!1))}),Se($,P=>{!k&&(P!==e[t]||c)&&_(P)},{deep:c}),$}else return ve({get(){return v()},set(b){_(b)}})}var I0={value:()=>{}};function ro(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Nr(n)}function Nr(e){this._=e}function q0(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Nr.prototype=ro.prototype={constructor:Nr,on:function(e,t){var n=this._,r=q0(e+"",n),o,i=-1,a=r.length;if(arguments.length<2){for(;++i<a;)if((o=(e=r[i]).type)&&(o=T0(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(o=(e=r[i]).type)n[o]=Ad(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Ad(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Nr(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function T0(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Ad(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=I0,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var mc="http://www.w3.org/1999/xhtml";const Md={svg:"http://www.w3.org/2000/svg",xhtml:mc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function oo(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Md.hasOwnProperty(t)?{space:Md[t],local:e}:e}function R0(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===mc&&t.documentElement.namespaceURI===mc?t.createElement(e):t.createElementNS(n,e)}}function A0(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function v_(e){var t=oo(e);return(t.local?A0:R0)(t)}function M0(){}function Uc(e){return e==null?M0:function(){return this.querySelector(e)}}function P0(e){typeof e!="function"&&(e=Uc(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,s=r[o]=new Array(a),l,u,c=0;c<a;++c)(l=i[c])&&(u=e.call(l,l.__data__,c,i))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new We(r,this._parents)}function O0(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function D0(){return[]}function g_(e){return e==null?D0:function(){return this.querySelectorAll(e)}}function z0(e){return function(){return O0(e.apply(this,arguments))}}function V0(e){typeof e=="function"?e=z0(e):e=g_(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var a=t[i],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(r.push(e.call(l,l.__data__,u,a)),o.push(l));return new We(r,o)}function m_(e){return function(){return this.matches(e)}}function __(e){return function(t){return t.matches(e)}}var B0=Array.prototype.find;function L0(e){return function(){return B0.call(this.children,e)}}function F0(){return this.firstElementChild}function U0(e){return this.select(e==null?F0:L0(typeof e=="function"?e:__(e)))}var G0=Array.prototype.filter;function H0(){return Array.from(this.children)}function j0(e){return function(){return G0.call(this.children,e)}}function Y0(e){return this.selectAll(e==null?H0:j0(typeof e=="function"?e:__(e)))}function X0(e){typeof e!="function"&&(e=m_(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,s=r[o]=[],l,u=0;u<a;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&s.push(l);return new We(r,this._parents)}function y_(e){return new Array(e.length)}function K0(){return new We(this._enter||this._groups.map(y_),this._parents)}function Vr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Vr.prototype={constructor:Vr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function W0(e){return function(){return e}}function Z0(e,t,n,r,o,i){for(var a=0,s,l=t.length,u=i.length;a<u;++a)(s=t[a])?(s.__data__=i[a],r[a]=s):n[a]=new Vr(e,i[a]);for(;a<l;++a)(s=t[a])&&(o[a]=s)}function J0(e,t,n,r,o,i,a){var s,l,u=new Map,c=t.length,d=i.length,f=new Array(c),p;for(s=0;s<c;++s)(l=t[s])&&(f[s]=p=a.call(l,l.__data__,s,t)+"",u.has(p)?o[s]=l:u.set(p,l));for(s=0;s<d;++s)p=a.call(e,i[s],s,i)+"",(l=u.get(p))?(r[s]=l,l.__data__=i[s],u.delete(p)):n[s]=new Vr(e,i[s]);for(s=0;s<c;++s)(l=t[s])&&u.get(f[s])===l&&(o[s]=l)}function Q0(e){return e.__data__}function eb(e,t){if(!arguments.length)return Array.from(this,Q0);var n=t?J0:Z0,r=this._parents,o=this._groups;typeof e!="function"&&(e=W0(e));for(var i=o.length,a=new Array(i),s=new Array(i),l=new Array(i),u=0;u<i;++u){var c=r[u],d=o[u],f=d.length,p=tb(e.call(c,c&&c.__data__,u,r)),g=p.length,m=s[u]=new Array(g),y=a[u]=new Array(g),v=l[u]=new Array(f);n(c,d,m,y,v,p,t);for(var _=0,b=0,$,k;_<g;++_)if($=m[_]){for(_>=b&&(b=_+1);!(k=y[b])&&++b<g;);$._next=k||null}}return a=new We(a,r),a._enter=s,a._exit=l,a}function tb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function nb(){return new We(this._exit||this._groups.map(y_),this._parents)}function rb(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function ob(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,a=Math.min(o,i),s=new Array(o),l=0;l<a;++l)for(var u=n[l],c=r[l],d=u.length,f=s[l]=new Array(d),p,g=0;g<d;++g)(p=u[g]||c[g])&&(f[g]=p);for(;l<o;++l)s[l]=n[l];return new We(s,this._parents)}function ib(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],a;--o>=0;)(a=r[o])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function ab(e){e||(e=sb);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a=n[i],s=a.length,l=o[i]=new Array(s),u,c=0;c<s;++c)(u=a[c])&&(l[c]=u);l.sort(t)}return new We(o,this._parents).order()}function sb(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function lb(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ub(){return Array.from(this)}function cb(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null}function db(){let e=0;for(const t of this)++e;return e}function fb(){return!this.node()}function pb(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,a=o.length,s;i<a;++i)(s=o[i])&&e.call(s,s.__data__,i,o);return this}function hb(e){return function(){this.removeAttribute(e)}}function vb(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gb(e,t){return function(){this.setAttribute(e,t)}}function mb(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function _b(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function yb(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function bb(e,t){var n=oo(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?vb:hb:typeof t=="function"?n.local?yb:_b:n.local?mb:gb)(n,t))}function b_(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function xb(e){return function(){this.style.removeProperty(e)}}function wb(e,t,n){return function(){this.style.setProperty(e,t,n)}}function $b(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Eb(e,t,n){return arguments.length>1?this.each((t==null?xb:typeof t=="function"?$b:wb)(e,t,n??"")):mn(this.node(),e)}function mn(e,t){return e.style.getPropertyValue(t)||b_(e).getComputedStyle(e,null).getPropertyValue(t)}function kb(e){return function(){delete this[e]}}function Sb(e,t){return function(){this[e]=t}}function Cb(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Nb(e,t){return arguments.length>1?this.each((t==null?kb:typeof t=="function"?Cb:Sb)(e,t)):this.node()[e]}function x_(e){return e.trim().split(/^|\s+/)}function Gc(e){return e.classList||new w_(e)}function w_(e){this._node=e,this._names=x_(e.getAttribute("class")||"")}w_.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function $_(e,t){for(var n=Gc(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function E_(e,t){for(var n=Gc(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Ib(e){return function(){$_(this,e)}}function qb(e){return function(){E_(this,e)}}function Tb(e,t){return function(){(t.apply(this,arguments)?$_:E_)(this,e)}}function Rb(e,t){var n=x_(e+"");if(arguments.length<2){for(var r=Gc(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?Tb:t?Ib:qb)(n,t))}function Ab(){this.textContent=""}function Mb(e){return function(){this.textContent=e}}function Pb(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ob(e){return arguments.length?this.each(e==null?Ab:(typeof e=="function"?Pb:Mb)(e)):this.node().textContent}function Db(){this.innerHTML=""}function zb(e){return function(){this.innerHTML=e}}function Vb(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Bb(e){return arguments.length?this.each(e==null?Db:(typeof e=="function"?Vb:zb)(e)):this.node().innerHTML}function Lb(){this.nextSibling&&this.parentNode.appendChild(this)}function Fb(){return this.each(Lb)}function Ub(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Gb(){return this.each(Ub)}function Hb(e){var t=typeof e=="function"?e:v_(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function jb(){return null}function Yb(e,t){var n=typeof e=="function"?e:v_(e),r=t==null?jb:typeof t=="function"?t:Uc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Xb(){var e=this.parentNode;e&&e.removeChild(this)}function Kb(){return this.each(Xb)}function Wb(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Zb(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Jb(e){return this.select(e?Zb:Wb)}function Qb(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ex(e){return function(t){e.call(this,t,this.__data__)}}function tx(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function nx(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function rx(e,t,n){return function(){var r=this.__on,o,i=ex(t);if(r){for(var a=0,s=r.length;a<s;++a)if((o=r[a]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function ox(e,t,n){var r=tx(e+""),o,i=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(o=0,c=s[l];o<i;++o)if((a=r[o]).type===c.type&&a.name===c.name)return c.value}return}for(s=t?rx:nx,o=0;o<i;++o)this.each(s(r[o],t,n));return this}function k_(e,t,n){var r=b_(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function ix(e,t){return function(){return k_(this,e,t)}}function ax(e,t){return function(){return k_(this,e,t.apply(this,arguments))}}function sx(e,t){return this.each((typeof t=="function"?ax:ix)(e,t))}function*lx(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,a;o<i;++o)(a=r[o])&&(yield a)}var S_=[null];function We(e,t){this._groups=e,this._parents=t}function ar(){return new We([[document.documentElement]],S_)}function ux(){return this}We.prototype=ar.prototype={constructor:We,select:P0,selectAll:V0,selectChild:U0,selectChildren:Y0,filter:X0,data:eb,enter:K0,exit:nb,join:rb,merge:ob,selection:ux,order:ib,sort:ab,call:lb,nodes:ub,node:cb,size:db,empty:fb,each:pb,attr:bb,style:Eb,property:Nb,classed:Rb,text:Ob,html:Bb,raise:Fb,lower:Gb,append:Hb,insert:Yb,remove:Kb,clone:Jb,datum:Qb,on:ox,dispatch:sx,[Symbol.iterator]:lx};function nt(e){return typeof e=="string"?new We([[document.querySelector(e)]],[document.documentElement]):new We([[e]],S_)}function cx(e){let t;for(;t=e.sourceEvent;)e=t;return e}function dt(e,t){if(e=cx(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const dx={passive:!1},Xn={capture:!0,passive:!1};function Do(e){e.stopImmediatePropagation()}function pn(e){e.preventDefault(),e.stopImmediatePropagation()}function C_(e){var t=e.document.documentElement,n=nt(e).on("dragstart.drag",pn,Xn);"onselectstart"in t?n.on("selectstart.drag",pn,Xn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function N_(e,t){var n=e.document.documentElement,r=nt(e).on("dragstart.drag",null);t&&(r.on("click.drag",pn,Xn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const gr=e=>()=>e;function _c(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:a,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}_c.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function fx(e){return!e.ctrlKey&&!e.button}function px(){return this.parentNode}function hx(e,t){return t??{x:e.x,y:e.y}}function vx(){return navigator.maxTouchPoints||"ontouchstart"in this}function gx(){var e=fx,t=px,n=hx,r=vx,o={},i=ro("start","drag","end"),a=0,s,l,u,c,d=0;function f($){$.on("mousedown.drag",p).filter(r).on("touchstart.drag",y).on("touchmove.drag",v,dx).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p($,k){if(!(c||!e.call(this,$,k))){var P=b(this,t.call(this,$,k),$,k,"mouse");P&&(nt($.view).on("mousemove.drag",g,Xn).on("mouseup.drag",m,Xn),C_($.view),Do($),u=!1,s=$.clientX,l=$.clientY,P("start",$))}}function g($){if(pn($),!u){var k=$.clientX-s,P=$.clientY-l;u=k*k+P*P>d}o.mouse("drag",$)}function m($){nt($.view).on("mousemove.drag mouseup.drag",null),N_($.view,u),pn($),o.mouse("end",$)}function y($,k){if(e.call(this,$,k)){var P=$.changedTouches,q=t.call(this,$,k),G=P.length,Y,B;for(Y=0;Y<G;++Y)(B=b(this,q,$,k,P[Y].identifier,P[Y]))&&(Do($),B("start",$,P[Y]))}}function v($){var k=$.changedTouches,P=k.length,q,G;for(q=0;q<P;++q)(G=o[k[q].identifier])&&(pn($),G("drag",$,k[q]))}function _($){var k=$.changedTouches,P=k.length,q,G;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),q=0;q<P;++q)(G=o[k[q].identifier])&&(Do($),G("end",$,k[q]))}function b($,k,P,q,G,Y){var B=i.copy(),R=dt(Y||P,k),S,W,w;if((w=n.call($,new _c("beforestart",{sourceEvent:P,target:f,identifier:G,active:a,x:R[0],y:R[1],dx:0,dy:0,dispatch:B}),q))!=null)return S=w.x-R[0]||0,W=w.y-R[1]||0,function I(E,O,U){var z=R,V;switch(E){case"start":o[G]=I,V=a++;break;case"end":delete o[G],--a;case"drag":R=dt(U||O,k),V=a;break}B.call(E,$,new _c(E,{sourceEvent:O,subject:w,target:f,identifier:G,active:V,x:R[0]+S,y:R[1]+W,dx:R[0]-z[0],dy:R[1]-z[1],dispatch:B}),q)}}return f.filter=function($){return arguments.length?(e=typeof $=="function"?$:gr(!!$),f):e},f.container=function($){return arguments.length?(t=typeof $=="function"?$:gr($),f):t},f.subject=function($){return arguments.length?(n=typeof $=="function"?$:gr($),f):n},f.touchable=function($){return arguments.length?(r=typeof $=="function"?$:gr(!!$),f):r},f.on=function(){var $=i.on.apply(i,arguments);return $===i?f:$},f.clickDistance=function($){return arguments.length?(d=($=+$)*$,f):Math.sqrt(d)},f}function Hc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function I_(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function sr(){}var Kn=.7,Br=1/Kn,hn="\\s*([+-]?\\d+)\\s*",Wn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ht="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mx=/^#([0-9a-f]{3,8})$/,_x=new RegExp(`^rgb\\(${hn},${hn},${hn}\\)$`),yx=new RegExp(`^rgb\\(${ht},${ht},${ht}\\)$`),bx=new RegExp(`^rgba\\(${hn},${hn},${hn},${Wn}\\)$`),xx=new RegExp(`^rgba\\(${ht},${ht},${ht},${Wn}\\)$`),wx=new RegExp(`^hsl\\(${Wn},${ht},${ht}\\)$`),$x=new RegExp(`^hsla\\(${Wn},${ht},${ht},${Wn}\\)$`),Pd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hc(sr,tn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Od,formatHex:Od,formatHex8:Ex,formatHsl:kx,formatRgb:Dd,toString:Dd});function Od(){return this.rgb().formatHex()}function Ex(){return this.rgb().formatHex8()}function kx(){return q_(this).formatHsl()}function Dd(){return this.rgb().formatRgb()}function tn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=mx.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?zd(t):n===3?new Ge(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?mr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?mr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=_x.exec(e))?new Ge(t[1],t[2],t[3],1):(t=yx.exec(e))?new Ge(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=bx.exec(e))?mr(t[1],t[2],t[3],t[4]):(t=xx.exec(e))?mr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=wx.exec(e))?Ld(t[1],t[2]/100,t[3]/100,1):(t=$x.exec(e))?Ld(t[1],t[2]/100,t[3]/100,t[4]):Pd.hasOwnProperty(e)?zd(Pd[e]):e==="transparent"?new Ge(NaN,NaN,NaN,0):null}function zd(e){return new Ge(e>>16&255,e>>8&255,e&255,1)}function mr(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ge(e,t,n,r)}function Sx(e){return e instanceof sr||(e=tn(e)),e?(e=e.rgb(),new Ge(e.r,e.g,e.b,e.opacity)):new Ge}function yc(e,t,n,r){return arguments.length===1?Sx(e):new Ge(e,t,n,r??1)}function Ge(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Hc(Ge,yc,I_(sr,{brighter(e){return e=e==null?Br:Math.pow(Br,e),new Ge(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Kn:Math.pow(Kn,e),new Ge(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ge(Zt(this.r),Zt(this.g),Zt(this.b),Lr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vd,formatHex:Vd,formatHex8:Cx,formatRgb:Bd,toString:Bd}));function Vd(){return`#${Kt(this.r)}${Kt(this.g)}${Kt(this.b)}`}function Cx(){return`#${Kt(this.r)}${Kt(this.g)}${Kt(this.b)}${Kt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Bd(){const e=Lr(this.opacity);return`${e===1?"rgb(":"rgba("}${Zt(this.r)}, ${Zt(this.g)}, ${Zt(this.b)}${e===1?")":`, ${e})`}`}function Lr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Zt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Kt(e){return e=Zt(e),(e<16?"0":"")+e.toString(16)}function Ld(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new rt(e,t,n,r)}function q_(e){if(e instanceof rt)return new rt(e.h,e.s,e.l,e.opacity);if(e instanceof sr||(e=tn(e)),!e)return new rt;if(e instanceof rt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),a=NaN,s=i-o,l=(i+o)/2;return s?(t===i?a=(n-r)/s+(n<r)*6:n===i?a=(r-t)/s+2:a=(t-n)/s+4,s/=l<.5?i+o:2-i-o,a*=60):s=l>0&&l<1?0:a,new rt(a,s,l,e.opacity)}function Nx(e,t,n,r){return arguments.length===1?q_(e):new rt(e,t,n,r??1)}function rt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Hc(rt,Nx,I_(sr,{brighter(e){return e=e==null?Br:Math.pow(Br,e),new rt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Kn:Math.pow(Kn,e),new rt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Ge(zo(e>=240?e-240:e+120,o,r),zo(e,o,r),zo(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new rt(Fd(this.h),_r(this.s),_r(this.l),Lr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Lr(this.opacity);return`${e===1?"hsl(":"hsla("}${Fd(this.h)}, ${_r(this.s)*100}%, ${_r(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Fd(e){return e=(e||0)%360,e<0?e+360:e}function _r(e){return Math.max(0,Math.min(1,e||0))}function zo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const jc=e=>()=>e;function Ix(e,t){return function(n){return e+n*t}}function qx(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Tx(e){return(e=+e)==1?T_:function(t,n){return n-t?qx(t,n,e):jc(isNaN(t)?n:t)}}function T_(e,t){var n=t-e;return n?Ix(e,n):jc(isNaN(e)?t:e)}const Fr=function e(t){var n=Tx(t);function r(o,i){var a=n((o=yc(o)).r,(i=yc(i)).r),s=n(o.g,i.g),l=n(o.b,i.b),u=T_(o.opacity,i.opacity);return function(c){return o.r=a(c),o.g=s(c),o.b=l(c),o.opacity=u(c),o+""}}return r.gamma=e,r}(1);function Rx(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),o;return function(i){for(o=0;o<n;++o)r[o]=e[o]*(1-i)+t[o]*i;return r}}function Ax(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Mx(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,o=new Array(r),i=new Array(n),a;for(a=0;a<r;++a)o[a]=Gn(e[a],t[a]);for(;a<n;++a)i[a]=t[a];return function(s){for(a=0;a<r;++a)i[a]=o[a](s);return i}}function Px(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ft(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ox(e,t){var n={},r={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=Gn(e[o],t[o]):r[o]=t[o];return function(i){for(o in n)r[o]=n[o](i);return r}}var bc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vo=new RegExp(bc.source,"g");function Dx(e){return function(){return e}}function zx(e){return function(t){return e(t)+""}}function R_(e,t){var n=bc.lastIndex=Vo.lastIndex=0,r,o,i,a=-1,s=[],l=[];for(e=e+"",t=t+"";(r=bc.exec(e))&&(o=Vo.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),s[a]?s[a]+=i:s[++a]=i),(r=r[0])===(o=o[0])?s[a]?s[a]+=o:s[++a]=o:(s[++a]=null,l.push({i:a,x:ft(r,o)})),n=Vo.lastIndex;return n<t.length&&(i=t.slice(n),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?zx(l[0].x):Dx(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)s[(d=l[c]).i]=d.x(u);return s.join("")})}function Gn(e,t){var n=typeof t,r;return t==null||n==="boolean"?jc(t):(n==="number"?ft:n==="string"?(r=tn(t))?(t=r,Fr):R_:t instanceof tn?Fr:t instanceof Date?Px:Ax(t)?Rx:Array.isArray(t)?Mx:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ox:ft)(e,t)}var Ud=180/Math.PI,xc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function A_(e,t,n,r,o,i){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*Ud,skewX:Math.atan(l)*Ud,scaleX:a,scaleY:s}}var yr;function Vx(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?xc:A_(t.a,t.b,t.c,t.d,t.e,t.f)}function Bx(e){return e==null||(yr||(yr=document.createElementNS("http://www.w3.org/2000/svg","g")),yr.setAttribute("transform",e),!(e=yr.transform.baseVal.consolidate()))?xc:(e=e.matrix,A_(e.a,e.b,e.c,e.d,e.e,e.f))}function M_(e,t,n,r){function o(u){return u.length?u.pop()+" ":""}function i(u,c,d,f,p,g){if(u!==d||c!==f){var m=p.push("translate(",null,t,null,n);g.push({i:m-4,x:ft(u,d)},{i:m-2,x:ft(c,f)})}else(d||f)&&p.push("translate("+d+t+f+n)}function a(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(o(d)+"rotate(",null,r)-2,x:ft(u,c)})):c&&d.push(o(d)+"rotate("+c+r)}function s(u,c,d,f){u!==c?f.push({i:d.push(o(d)+"skewX(",null,r)-2,x:ft(u,c)}):c&&d.push(o(d)+"skewX("+c+r)}function l(u,c,d,f,p,g){if(u!==d||c!==f){var m=p.push(o(p)+"scale(",null,",",null,")");g.push({i:m-4,x:ft(u,d)},{i:m-2,x:ft(c,f)})}else(d!==1||f!==1)&&p.push(o(p)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),i(u.translateX,u.translateY,c.translateX,c.translateY,d,f),a(u.rotate,c.rotate,d,f),s(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(p){for(var g=-1,m=f.length,y;++g<m;)d[(y=f[g]).i]=y.x(p);return d.join("")}}}var Lx=M_(Vx,"px, ","px)","deg)"),Fx=M_(Bx,", ",")",")"),Ux=1e-12;function Gd(e){return((e=Math.exp(e))+1/e)/2}function Gx(e){return((e=Math.exp(e))-1/e)/2}function Hx(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ir=function e(t,n,r){function o(i,a){var s=i[0],l=i[1],u=i[2],c=a[0],d=a[1],f=a[2],p=c-s,g=d-l,m=p*p+g*g,y,v;if(m<Ux)v=Math.log(f/u)/t,y=function(q){return[s+q*p,l+q*g,u*Math.exp(t*q*v)]};else{var _=Math.sqrt(m),b=(f*f-u*u+r*m)/(2*u*n*_),$=(f*f-u*u-r*m)/(2*f*n*_),k=Math.log(Math.sqrt(b*b+1)-b),P=Math.log(Math.sqrt($*$+1)-$);v=(P-k)/t,y=function(q){var G=q*v,Y=Gd(k),B=u/(n*_)*(Y*Hx(t*G+k)-Gx(k));return[s+B*p,l+B*g,u*Y/Gd(t*G+k)]}}return y.duration=v*1e3*t/Math.SQRT2,y}return o.rho=function(i){var a=Math.max(.001,+i),s=a*a,l=s*s;return e(a,s,l)},o}(Math.SQRT2,2,4);var _n=0,Pn=0,Tn=0,P_=1e3,Ur,On,Gr=0,nn=0,io=0,Zn=typeof performance=="object"&&performance.now?performance:Date,O_=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Yc(){return nn||(O_(jx),nn=Zn.now()+io)}function jx(){nn=0}function Hr(){this._call=this._time=this._next=null}Hr.prototype=D_.prototype={constructor:Hr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Yc():+n)+(t==null?0:+t),!this._next&&On!==this&&(On?On._next=this:Ur=this,On=this),this._call=e,this._time=n,wc()},stop:function(){this._call&&(this._call=null,this._time=1/0,wc())}};function D_(e,t,n){var r=new Hr;return r.restart(e,t,n),r}function Yx(){Yc(),++_n;for(var e=Ur,t;e;)(t=nn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--_n}function Hd(){nn=(Gr=Zn.now())+io,_n=Pn=0;try{Yx()}finally{_n=0,Kx(),nn=0}}function Xx(){var e=Zn.now(),t=e-Gr;t>P_&&(io-=t,Gr=e)}function Kx(){for(var e,t=Ur,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ur=n);On=e,wc(r)}function wc(e){if(!_n){Pn&&(Pn=clearTimeout(Pn));var t=e-nn;t>24?(e<1/0&&(Pn=setTimeout(Hd,e-Zn.now()-io)),Tn&&(Tn=clearInterval(Tn))):(Tn||(Gr=Zn.now(),Tn=setInterval(Xx,P_)),_n=1,O_(Hd))}}function jd(e,t,n){var r=new Hr;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var Wx=ro("start","end","cancel","interrupt"),Zx=[],z_=0,Yd=1,$c=2,qr=3,Xd=4,Ec=5,Tr=6;function ao(e,t,n,r,o,i){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Jx(e,n,{name:t,index:r,group:o,on:Wx,tween:Zx,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:z_})}function Xc(e,t){var n=lt(e,t);if(n.state>z_)throw new Error("too late; already scheduled");return n}function mt(e,t){var n=lt(e,t);if(n.state>qr)throw new Error("too late; already running");return n}function lt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Jx(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=D_(i,0,n.time);function i(u){n.state=Yd,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,d,f,p;if(n.state!==Yd)return l();for(c in r)if(p=r[c],p.name===n.name){if(p.state===qr)return jd(a);p.state===Xd?(p.state=Tr,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[c]):+c<t&&(p.state=Tr,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[c])}if(jd(function(){n.state===qr&&(n.state=Xd,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=$c,n.on.call("start",e,e.__data__,n.index,n.group),n.state===$c){for(n.state=qr,o=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=p);o.length=d+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Ec,1),d=-1,f=o.length;++d<f;)o[d].call(e,c);n.state===Ec&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Tr,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Rr(e,t){var n=e.__transition,r,o,i=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){i=!1;continue}o=r.state>$c&&r.state<Ec,r.state=Tr,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}i&&delete e.__transition}}function Qx(e){return this.each(function(){Rr(this,e)})}function ew(e,t){var n,r;return function(){var o=mt(this,e),i=o.tween;if(i!==n){r=n=i;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}o.tween=r}}function tw(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=mt(this,e),a=i.tween;if(a!==r){o=(r=a).slice();for(var s={name:t,value:n},l=0,u=o.length;l<u;++l)if(o[l].name===t){o[l]=s;break}l===u&&o.push(s)}i.tween=o}}function nw(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=lt(this.node(),n).tween,o=0,i=r.length,a;o<i;++o)if((a=r[o]).name===e)return a.value;return null}return this.each((t==null?ew:tw)(n,e,t))}function Kc(e,t,n){var r=e._id;return e.each(function(){var o=mt(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return lt(o,r).value[t]}}function V_(e,t){var n;return(typeof t=="number"?ft:t instanceof tn?Fr:(n=tn(t))?(t=n,Fr):R_)(e,t)}function rw(e){return function(){this.removeAttribute(e)}}function ow(e){return function(){this.removeAttributeNS(e.space,e.local)}}function iw(e,t,n){var r,o=n+"",i;return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function aw(e,t,n){var r,o=n+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function sw(e,t,n){var r,o,i;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===r&&l===o?i:(o=l,i=t(r=a,s)))}}function lw(e,t,n){var r,o,i;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===r&&l===o?i:(o=l,i=t(r=a,s)))}}function uw(e,t){var n=oo(e),r=n==="transform"?Fx:V_;return this.attrTween(e,typeof t=="function"?(n.local?lw:sw)(n,r,Kc(this,"attr."+e,t)):t==null?(n.local?ow:rw)(n):(n.local?aw:iw)(n,r,t))}function cw(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function dw(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function fw(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&dw(e,i)),n}return o._value=t,o}function pw(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&cw(e,i)),n}return o._value=t,o}function hw(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=oo(e);return this.tween(n,(r.local?fw:pw)(r,t))}function vw(e,t){return function(){Xc(this,e).delay=+t.apply(this,arguments)}}function gw(e,t){return t=+t,function(){Xc(this,e).delay=t}}function mw(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?vw:gw)(t,e)):lt(this.node(),t).delay}function _w(e,t){return function(){mt(this,e).duration=+t.apply(this,arguments)}}function yw(e,t){return t=+t,function(){mt(this,e).duration=t}}function bw(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_w:yw)(t,e)):lt(this.node(),t).duration}function xw(e,t){if(typeof t!="function")throw new Error;return function(){mt(this,e).ease=t}}function ww(e){var t=this._id;return arguments.length?this.each(xw(t,e)):lt(this.node(),t).ease}function $w(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;mt(this,e).ease=n}}function Ew(e){if(typeof e!="function")throw new Error;return this.each($w(this._id,e))}function kw(e){typeof e!="function"&&(e=m_(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,s=r[o]=[],l,u=0;u<a;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&s.push(l);return new Ct(r,this._parents,this._name,this._id)}function Sw(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var l=t[s],u=n[s],c=l.length,d=a[s]=new Array(c),f,p=0;p<c;++p)(f=l[p]||u[p])&&(d[p]=f);for(;s<r;++s)a[s]=t[s];return new Ct(a,this._parents,this._name,this._id)}function Cw(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Nw(e,t,n){var r,o,i=Cw(t)?Xc:mt;return function(){var a=i(this,e),s=a.on;s!==r&&(o=(r=s).copy()).on(t,n),a.on=o}}function Iw(e,t){var n=this._id;return arguments.length<2?lt(this.node(),n).on.on(e):this.each(Nw(n,e,t))}function qw(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Tw(){return this.on("end.remove",qw(this._id))}function Rw(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Uc(e));for(var r=this._groups,o=r.length,i=new Array(o),a=0;a<o;++a)for(var s=r[a],l=s.length,u=i[a]=new Array(l),c,d,f=0;f<l;++f)(c=s[f])&&(d=e.call(c,c.__data__,f,s))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,ao(u[f],t,n,f,u,lt(c,n)));return new Ct(i,this._parents,t,n)}function Aw(e){var t=this._name,n=this._id;typeof e!="function"&&(e=g_(e));for(var r=this._groups,o=r.length,i=[],a=[],s=0;s<o;++s)for(var l=r[s],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),p,g=lt(c,n),m=0,y=f.length;m<y;++m)(p=f[m])&&ao(p,t,n,m,f,g);i.push(f),a.push(c)}return new Ct(i,a,t,n)}var Mw=ar.prototype.constructor;function Pw(){return new Mw(this._groups,this._parents)}function Ow(e,t){var n,r,o;return function(){var i=mn(this,e),a=(this.style.removeProperty(e),mn(this,e));return i===a?null:i===n&&a===r?o:o=t(n=i,r=a)}}function B_(e){return function(){this.style.removeProperty(e)}}function Dw(e,t,n){var r,o=n+"",i;return function(){var a=mn(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}function zw(e,t,n){var r,o,i;return function(){var a=mn(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),mn(this,e))),a===l?null:a===r&&l===o?i:(o=l,i=t(r=a,s))}}function Vw(e,t){var n,r,o,i="style."+t,a="end."+i,s;return function(){var l=mt(this,e),u=l.on,c=l.value[i]==null?s||(s=B_(t)):void 0;(u!==n||o!==c)&&(r=(n=u).copy()).on(a,o=c),l.on=r}}function Bw(e,t,n){var r=(e+="")=="transform"?Lx:V_;return t==null?this.styleTween(e,Ow(e,r)).on("end.style."+e,B_(e)):typeof t=="function"?this.styleTween(e,zw(e,r,Kc(this,"style."+e,t))).each(Vw(this._id,e)):this.styleTween(e,Dw(e,r,t),n).on("end.style."+e,null)}function Lw(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Fw(e,t,n){var r,o;function i(){var a=t.apply(this,arguments);return a!==o&&(r=(o=a)&&Lw(e,a,n)),r}return i._value=t,i}function Uw(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Fw(e,t,n??""))}function Gw(e){return function(){this.textContent=e}}function Hw(e){return function(){var t=e(this);this.textContent=t??""}}function jw(e){return this.tween("text",typeof e=="function"?Hw(Kc(this,"text",e)):Gw(e==null?"":e+""))}function Yw(e){return function(t){this.textContent=e.call(this,t)}}function Xw(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&Yw(o)),t}return r._value=e,r}function Kw(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Xw(e))}function Ww(){for(var e=this._name,t=this._id,n=L_(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a=r[i],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var c=lt(l,t);ao(l,e,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ct(r,this._parents,e,n)}function Zw(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,a){var s={value:a},l={value:function(){--o===0&&i()}};n.each(function(){var u=mt(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),o===0&&i()})}var Jw=0;function Ct(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function L_(){return++Jw}var bt=ar.prototype;Ct.prototype={constructor:Ct,select:Rw,selectAll:Aw,selectChild:bt.selectChild,selectChildren:bt.selectChildren,filter:kw,merge:Sw,selection:Pw,transition:Ww,call:bt.call,nodes:bt.nodes,node:bt.node,size:bt.size,empty:bt.empty,each:bt.each,on:Iw,attr:uw,attrTween:hw,style:Bw,styleTween:Uw,text:jw,textTween:Kw,remove:Tw,tween:nw,delay:mw,duration:bw,ease:ww,easeVarying:Ew,end:Zw,[Symbol.iterator]:bt[Symbol.iterator]};function Qw(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var e2={time:null,delay:0,duration:250,ease:Qw};function t2(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function n2(e){var t,n;e instanceof Ct?(t=e._id,e=e._name):(t=L_(),(n=e2).time=Yc(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a=r[i],s=a.length,l,u=0;u<s;++u)(l=a[u])&&ao(l,e,t,u,a,n||t2(l,t));return new Ct(r,this._parents,e,t)}ar.prototype.interrupt=Qx;ar.prototype.transition=n2;const br=e=>()=>e;function r2(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function $t(e,t,n){this.k=e,this.x=t,this.y=n}$t.prototype={constructor:$t,scale:function(e){return e===1?this:new $t(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new $t(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var yn=new $t(1,0,0);$t.prototype;function Bo(e){e.stopImmediatePropagation()}function Rn(e){e.preventDefault(),e.stopImmediatePropagation()}function o2(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function i2(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Kd(){return this.__zoom||yn}function a2(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function s2(){return navigator.maxTouchPoints||"ontouchstart"in this}function l2(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function u2(){var e=o2,t=i2,n=l2,r=a2,o=s2,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Ir,u=ro("start","zoom","end"),c,d,f,p=500,g=150,m=0,y=10;function v(w){w.property("__zoom",Kd).on("wheel.zoom",G,{passive:!1}).on("mousedown.zoom",Y).on("dblclick.zoom",B).filter(o).on("touchstart.zoom",R).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",W).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(w,I,E,O){var U=w.selection?w.selection():w;U.property("__zoom",Kd),w!==U?k(w,I,E,O):U.interrupt().each(function(){P(this,arguments).event(O).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},v.scaleBy=function(w,I,E,O){v.scaleTo(w,function(){var U=this.__zoom.k,z=typeof I=="function"?I.apply(this,arguments):I;return U*z},E,O)},v.scaleTo=function(w,I,E,O){v.transform(w,function(){var U=t.apply(this,arguments),z=this.__zoom,V=E==null?$(U):typeof E=="function"?E.apply(this,arguments):E,C=z.invert(V),ee=typeof I=="function"?I.apply(this,arguments):I;return n(b(_(z,ee),V,C),U,a)},E,O)},v.translateBy=function(w,I,E,O){v.transform(w,function(){return n(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof E=="function"?E.apply(this,arguments):E),t.apply(this,arguments),a)},null,O)},v.translateTo=function(w,I,E,O,U){v.transform(w,function(){var z=t.apply(this,arguments),V=this.__zoom,C=O==null?$(z):typeof O=="function"?O.apply(this,arguments):O;return n(yn.translate(C[0],C[1]).scale(V.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof E=="function"?-E.apply(this,arguments):-E),z,a)},O,U)};function _(w,I){return I=Math.max(i[0],Math.min(i[1],I)),I===w.k?w:new $t(I,w.x,w.y)}function b(w,I,E){var O=I[0]-E[0]*w.k,U=I[1]-E[1]*w.k;return O===w.x&&U===w.y?w:new $t(w.k,O,U)}function $(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function k(w,I,E,O){w.on("start.zoom",function(){P(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){P(this,arguments).event(O).end()}).tween("zoom",function(){var U=this,z=arguments,V=P(U,z).event(O),C=t.apply(U,z),ee=E==null?$(C):typeof E=="function"?E.apply(U,z):E,oe=Math.max(C[1][0]-C[0][0],C[1][1]-C[0][1]),M=U.__zoom,D=typeof I=="function"?I.apply(U,z):I,H=l(M.invert(ee).concat(oe/M.k),D.invert(ee).concat(oe/D.k));return function(J){if(J===1)J=D;else{var Q=H(J),ie=oe/Q[2];J=new $t(ie,ee[0]-Q[0]*ie,ee[1]-Q[1]*ie)}V.zoom(null,J)}})}function P(w,I,E){return!E&&w.__zooming||new q(w,I)}function q(w,I){this.that=w,this.args=I,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,I),this.taps=0}q.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,I){return this.mouse&&w!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var I=nt(this.that).datum();u.call(w,this.that,new r2(w,{sourceEvent:this.sourceEvent,target:v,type:w,transform:this.that.__zoom,dispatch:u}),I)}};function G(w,...I){if(!e.apply(this,arguments))return;var E=P(this,I).event(w),O=this.__zoom,U=Math.max(i[0],Math.min(i[1],O.k*Math.pow(2,r.apply(this,arguments)))),z=dt(w);if(E.wheel)(E.mouse[0][0]!==z[0]||E.mouse[0][1]!==z[1])&&(E.mouse[1]=O.invert(E.mouse[0]=z)),clearTimeout(E.wheel);else{if(O.k===U)return;E.mouse=[z,O.invert(z)],Rr(this),E.start()}Rn(w),E.wheel=setTimeout(V,g),E.zoom("mouse",n(b(_(O,U),E.mouse[0],E.mouse[1]),E.extent,a));function V(){E.wheel=null,E.end()}}function Y(w,...I){if(f||!e.apply(this,arguments))return;var E=w.currentTarget,O=P(this,I,!0).event(w),U=nt(w.view).on("mousemove.zoom",ee,!0).on("mouseup.zoom",oe,!0),z=dt(w,E),V=w.clientX,C=w.clientY;C_(w.view),Bo(w),O.mouse=[z,this.__zoom.invert(z)],Rr(this),O.start();function ee(M){if(Rn(M),!O.moved){var D=M.clientX-V,H=M.clientY-C;O.moved=D*D+H*H>m}O.event(M).zoom("mouse",n(b(O.that.__zoom,O.mouse[0]=dt(M,E),O.mouse[1]),O.extent,a))}function oe(M){U.on("mousemove.zoom mouseup.zoom",null),N_(M.view,O.moved),Rn(M),O.event(M).end()}}function B(w,...I){if(e.apply(this,arguments)){var E=this.__zoom,O=dt(w.changedTouches?w.changedTouches[0]:w,this),U=E.invert(O),z=E.k*(w.shiftKey?.5:2),V=n(b(_(E,z),O,U),t.apply(this,I),a);Rn(w),s>0?nt(this).transition().duration(s).call(k,V,O,w):nt(this).call(v.transform,V,O,w)}}function R(w,...I){if(e.apply(this,arguments)){var E=w.touches,O=E.length,U=P(this,I,w.changedTouches.length===O).event(w),z,V,C,ee;for(Bo(w),V=0;V<O;++V)C=E[V],ee=dt(C,this),ee=[ee,this.__zoom.invert(ee),C.identifier],U.touch0?!U.touch1&&U.touch0[2]!==ee[2]&&(U.touch1=ee,U.taps=0):(U.touch0=ee,z=!0,U.taps=1+!!c);c&&(c=clearTimeout(c)),z&&(U.taps<2&&(d=ee[0],c=setTimeout(function(){c=null},p)),Rr(this),U.start())}}function S(w,...I){if(this.__zooming){var E=P(this,I).event(w),O=w.changedTouches,U=O.length,z,V,C,ee;for(Rn(w),z=0;z<U;++z)V=O[z],C=dt(V,this),E.touch0&&E.touch0[2]===V.identifier?E.touch0[0]=C:E.touch1&&E.touch1[2]===V.identifier&&(E.touch1[0]=C);if(V=E.that.__zoom,E.touch1){var oe=E.touch0[0],M=E.touch0[1],D=E.touch1[0],H=E.touch1[1],J=(J=D[0]-oe[0])*J+(J=D[1]-oe[1])*J,Q=(Q=H[0]-M[0])*Q+(Q=H[1]-M[1])*Q;V=_(V,Math.sqrt(J/Q)),C=[(oe[0]+D[0])/2,(oe[1]+D[1])/2],ee=[(M[0]+H[0])/2,(M[1]+H[1])/2]}else if(E.touch0)C=E.touch0[0],ee=E.touch0[1];else return;E.zoom("touch",n(b(V,C,ee),E.extent,a))}}function W(w,...I){if(this.__zooming){var E=P(this,I).event(w),O=w.changedTouches,U=O.length,z,V;for(Bo(w),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),z=0;z<U;++z)V=O[z],E.touch0&&E.touch0[2]===V.identifier?delete E.touch0:E.touch1&&E.touch1[2]===V.identifier&&delete E.touch1;if(E.touch1&&!E.touch0&&(E.touch0=E.touch1,delete E.touch1),E.touch0)E.touch0[1]=this.__zoom.invert(E.touch0[0]);else if(E.end(),E.taps===2&&(V=dt(V,this),Math.hypot(d[0]-V[0],d[1]-V[1])<y)){var C=nt(this).on("dblclick.zoom");C&&C.apply(this,arguments)}}}return v.wheelDelta=function(w){return arguments.length?(r=typeof w=="function"?w:br(+w),v):r},v.filter=function(w){return arguments.length?(e=typeof w=="function"?w:br(!!w),v):e},v.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:br(!!w),v):o},v.extent=function(w){return arguments.length?(t=typeof w=="function"?w:br([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),v):t},v.scaleExtent=function(w){return arguments.length?(i[0]=+w[0],i[1]=+w[1],v):[i[0],i[1]]},v.translateExtent=function(w){return arguments.length?(a[0][0]=+w[0][0],a[1][0]=+w[1][0],a[0][1]=+w[0][1],a[1][1]=+w[1][1],v):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},v.constrain=function(w){return arguments.length?(n=w,v):n},v.duration=function(w){return arguments.length?(s=+w,v):s},v.interpolate=function(w){return arguments.length?(l=w,v):l},v.on=function(){var w=u.on.apply(u,arguments);return w===u?v:w},v.clickDistance=function(w){return arguments.length?(m=(w=+w)*w,v):Math.sqrt(m)},v.tapDistance=function(w){return arguments.length?(y=+w,v):y},v}var le=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(le||{}),Wc=(e=>(e.Partial="partial",e.Full="full",e))(Wc||{}),jt=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(jt||{}),Nt=(e=>(e.Strict="strict",e.Loose="loose",e))(Nt||{}),kc=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(kc||{}),Hn=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Hn||{});const c2=["INPUT","SELECT","TEXTAREA"],d2=typeof document<"u"?document:null;function Sc(e){var t,n;const r=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,o=typeof(r==null?void 0:r.hasAttribute)=="function"?r.hasAttribute("contenteditable"):!1,i=typeof(r==null?void 0:r.closest)=="function"?r.closest(".nokey"):null;return c2.includes(r==null?void 0:r.nodeName)||o||!!i}function f2(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function Wd(e,t,n,r){const o=t.replace("+",`
`).replace(`

`,`
+`).split(`
`).map(a=>a.trim().toLowerCase());if(o.length===1)return e.toLowerCase()===t.toLowerCase();r||n.add(e.toLowerCase());const i=o.every((a,s)=>n.has(a)&&Array.from(n.values())[s]===o[s]);return r&&n.delete(e.toLowerCase()),i}function p2(e,t){return n=>{if(!n.code&&!n.key)return!1;const r=h2(n.code,e);return Array.isArray(e)?e.some(o=>Wd(n[r],o,t,n.type==="keyup")):Wd(n[r],e,t,n.type==="keyup")}}function h2(e,t){return t.includes(e)?"code":"key"}function jn(e,t){const n=ve(()=>Ne(t==null?void 0:t.target)??d2),r=Dr(Ne(e)===!0);let o=!1;const i=new Set;let a=l(Ne(e));Se(()=>Ne(e),(u,c)=>{typeof c=="boolean"&&typeof u!="boolean"&&s(),a=l(u)},{immediate:!0}),h_(["blur","contextmenu"],s),Rd((...u)=>a(...u),u=>{var c,d;const f=Ne(t==null?void 0:t.actInsideInputWithModifier)??!0,p=Ne(t==null?void 0:t.preventDefault)??!1;if(o=f2(u),(!o||o&&!f)&&Sc(u))return;const m=((d=(c=u.composedPath)==null?void 0:c.call(u))==null?void 0:d[0])||u.target,y=(m==null?void 0:m.nodeName)==="BUTTON"||(m==null?void 0:m.nodeName)==="A";!p&&(o||!y)&&u.preventDefault(),r.value=!0},{eventName:"keydown",target:n}),Rd((...u)=>a(...u),u=>{const c=Ne(t==null?void 0:t.actInsideInputWithModifier)??!0;if(r.value){if((!o||o&&!c)&&Sc(u))return;o=!1,r.value=!1}},{eventName:"keyup",target:n});function s(){o=!1,i.clear(),r.value=Ne(e)===!0}function l(u){return u===null?(s(),()=>!1):typeof u=="boolean"?(s(),r.value=u,()=>!1):Array.isArray(u)||typeof u=="string"?p2(u,i):u}return r}const F_="vue-flow__node-desc",U_="vue-flow__edge-desc",v2="vue-flow__aria-live",G_=["Enter"," ","Escape"],vn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function jr(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function Yr(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)}function so(e){return{width:e.offsetWidth,height:e.offsetHeight}}function rn(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function H_(e,t){return{x:rn(e.x,t[0][0],t[1][0]),y:rn(e.y,t[0][1],t[1][1])}}function Zd(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function Lt(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function Jt(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!Lt(e)}function Dn(e){return Jt(e)&&"computedPosition"in e}function xr(e){return!Number.isNaN(e)&&Number.isFinite(e)}function g2(e){return xr(e.width)&&xr(e.height)&&xr(e.x)&&xr(e.y)}function m2(e,t,n){const r={id:e.id.toString(),type:e.type??"default",dimensions:Ke({width:0,height:0}),computedPosition:Ke({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Me(e.data)?e.data:{},events:Ke(Me(e.events)?e.events:{})};return Object.assign(t??r,e,{id:e.id.toString(),parentNode:n})}function j_(e,t,n){var r,o;const i={id:e.id.toString(),type:e.type??(t==null?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(r=e.sourceHandle)==null?void 0:r.toString(),targetHandle:(o=e.targetHandle)==null?void 0:o.toString(),updatable:e.updatable??(n==null?void 0:n.updatable),selectable:e.selectable??(n==null?void 0:n.selectable),focusable:e.focusable??(n==null?void 0:n.focusable),data:Me(e.data)?e.data:{},events:Ke(Me(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(n==null?void 0:n.interactionWidth),...n??{}};return Object.assign(t??i,e,{id:e.id.toString()})}function Y_(e,t,n,r){const o=typeof e=="string"?e:e.id,i=new Set,a=r==="source"?"target":"source";for(const s of n)s[a]===o&&i.add(s[r]);return t.filter(s=>i.has(s.id))}function _2(...e){if(e.length===3){const[i,a,s]=e;return Y_(i,a,s,"target")}const[t,n]=e,r=typeof t=="string"?t:t.id;return n.filter(i=>Lt(i)&&i.source===r).map(i=>n.find(a=>Jt(a)&&a.id===i.target))}function y2(...e){if(e.length===3){const[i,a,s]=e;return Y_(i,a,s,"source")}const[t,n]=e,r=typeof t=="string"?t:t.id;return n.filter(i=>Lt(i)&&i.target===r).map(i=>n.find(a=>Jt(a)&&a.id===i.source))}function X_({source:e,sourceHandle:t,target:n,targetHandle:r}){return`vueflow__edge-${e}${t??""}-${n}${r??""}`}function b2(e,t){return t.some(n=>Lt(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function Cc({x:e,y:t},{x:n,y:r,zoom:o}){return{x:e*o+n,y:t*o+r}}function Jn({x:e,y:t},{x:n,y:r,zoom:o},i=!1,a=[1,1]){const s={x:(e-n)/o,y:(t-r)/o};return i?lo(s,a):s}function K_(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Xr({x:e,y:t,width:n,height:r}){return{x:e,y:t,x2:e+n,y2:t+r}}function W_({x:e,y:t,x2:n,y2:r}){return{x:e,y:t,width:n-e,height:r-t}}function x2(e,t){return W_(K_(Xr(e),Xr(t)))}function Zc(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const r=e[n];t=K_(t,Xr({...r.computedPosition,...r.dimensions}))}return W_(t)}function Z_(e,t,n={x:0,y:0,zoom:1},r=!1,o=!1){const i={...Jn(t,n),width:t.width/n.zoom,height:t.height/n.zoom},a=[];for(const s of e){const{dimensions:l,selectable:u=!0,hidden:c=!1}=s,d=l.width??s.width??null,f=l.height??s.height??null;if(o&&!u||c)continue;const p=Yr(i,jr(s)),g=d===null||f===null,m=r&&p>0,y=(d??0)*(f??0);(g||m||p>=y||s.dragging)&&a.push(s)}return a}function Yt(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const r of e)n.add(r.id);return t.filter(r=>n.has(r.source)||n.has(r.target))}function Jd(e,t,n,r,o,i=.1,a={x:0,y:0}){const s=t/(e.width*(1+i)),l=n/(e.height*(1+i)),u=Math.min(s,l),c=rn(u,r,o),d=e.x+e.width/2,f=e.y+e.height/2,p=t/2-d*c+(a.x??0),g=n/2-f*c+(a.y??0);return{x:p,y:g,zoom:c}}function w2(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function J_(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:J_(n,t):!1}function Qn(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`}function Nc(e){const t=e.ctrlKey&&er()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t}function Qd(e,t,n){return e<t?rn(Math.abs(e-t),1,t)/t:e>n?-rn(Math.abs(e-n),1,t)/t:0}function Q_(e,t,n=15,r=40){const o=Qd(e.x,r,t.width-r)*n,i=Qd(e.y,r,t.height-r)*n;return[o,i]}function Lo(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,r=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||r>0||e.position.x<0||e.position.y<0){let o={};if(typeof t.style=="function"?o={...t.style(t)}:t.style&&(o={...t.style}),o.width=o.width??`${t.dimensions.width}px`,o.height=o.height??`${t.dimensions.height}px`,n>0)if(typeof o.width=="string"){const i=Number(o.width.replace("px",""));o.width=`${i+n}px`}else o.width+=n;if(r>0)if(typeof o.height=="string"){const i=Number(o.height.replace("px",""));o.height=`${i+r}px`}else o.height+=r;if(e.position.x<0){const i=Math.abs(e.position.x);if(t.position.x=t.position.x-i,typeof o.width=="string"){const a=Number(o.width.replace("px",""));o.width=`${a+i}px`}else o.width+=i;e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);if(t.position.y=t.position.y-i,typeof o.height=="string"){const a=Number(o.height.replace("px",""));o.height=`${a+i}px`}else o.height+=i;e.position.y=0}t.dimensions.width=Number(o.width.toString().replace("px","")),t.dimensions.height=Number(o.height.toString().replace("px","")),typeof t.style=="function"?t.style=i=>{const a=t.style;return{...a(i),...o}}:t.style={...t.style,...o}}}}function ef(e,t){var n,r;const o=e.filter(a=>a.type==="add"||a.type==="remove");for(const a of o)if(a.type==="add")t.findIndex(l=>l.id===a.item.id)===-1&&t.push(a.item);else if(a.type==="remove"){const s=t.findIndex(l=>l.id===a.id);s!==-1&&t.splice(s,1)}const i=t.map(a=>a.id);for(const a of t)for(const s of e)if(s.id===a.id)switch(s.type){case"select":a.selected=s.selected;break;case"position":if(Dn(a)&&(typeof s.position<"u"&&(a.position=s.position),typeof s.dragging<"u"&&(a.dragging=s.dragging),a.expandParent&&a.parentNode)){const l=t[i.indexOf(a.parentNode)];l&&Dn(l)&&Lo(a,l)}break;case"dimensions":if(Dn(a)&&(typeof s.dimensions<"u"&&(a.dimensions=s.dimensions),typeof s.updateStyle<"u"&&s.updateStyle&&(a.style={...a.style||{},width:`${(n=s.dimensions)==null?void 0:n.width}px`,height:`${(r=s.dimensions)==null?void 0:r.height}px`}),typeof s.resizing<"u"&&(a.resizing=s.resizing),a.expandParent&&a.parentNode)){const l=t[i.indexOf(a.parentNode)];l&&Dn(l)&&(!!l.dimensions.width&&!!l.dimensions.height?Lo(a,l):St(()=>{Lo(a,l)}))}break}return t}function Ot(e,t){return{id:e,type:"select",selected:t}}function tf(e){return{item:e,type:"add"}}function nf(e){return{id:e,type:"remove"}}function rf(e,t,n,r,o){return{id:e,source:t,target:n,sourceHandle:r||null,targetHandle:o||null,type:"remove"}}function zt(e,t=new Set,n=!1){const r=[];for(const[o,i]of e){const a=t.has(o);!(i.selected===void 0&&!a)&&i.selected!==a&&(n&&(i.selected=a),r.push(Ot(i.id,a)))}return r}function ce(e){const t=new Set;let n=!1;const r=()=>t.size>0;e&&(n=!0,t.add(e));const o=s=>{t.delete(s)};return{on:s=>{e&&n&&t.delete(e),t.add(s);const l=()=>{o(s),e&&n&&t.add(e)};return no(l),{off:l}},off:o,trigger:s=>Promise.all(Array.from(t).map(l=>l(s))),hasListeners:r,fns:t}}function of(e,t,n){let r=e;do{if(r&&r.matches(t))return!0;if(r===n)return!1;r=r.parentElement}while(r);return!1}function $2(e,t,n,r,o){var i,a;const s=[];for(const l of e)(l.selected||l.id===o)&&(!l.parentNode||!J_(l,r))&&(l.draggable||t&&typeof l.draggable>"u")&&s.push(Ke({id:l.id,position:l.position||{x:0,y:0},distance:{x:n.x-((i=l.computedPosition)==null?void 0:i.x)||0,y:n.y-((a=l.computedPosition)==null?void 0:a.y)||0},from:l.computedPosition,extent:l.extent,parentNode:l.parentNode,dimensions:l.dimensions,expandParent:l.expandParent}));return s}function Fo({id:e,dragItems:t,findNode:n}){const r=[];for(const o of t){const i=n(o.id);i&&r.push(i)}return[e?r.find(o=>o.id===e):r[0],r]}function ey(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function E2(e,t,n){const[r,o,i,a]=typeof e!="string"?ey(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+a,n.computedPosition.y+r],[n.computedPosition.x+n.dimensions.width-o,n.computedPosition.y+n.dimensions.height-i]]:!1}function k2(e,t,n,r){let o=e.extent||n;if((o==="parent"||!Array.isArray(o)&&(o==null?void 0:o.range)==="parent")&&!e.expandParent)if(e.parentNode&&r&&e.dimensions.width&&e.dimensions.height){const i=E2(o,e,r);i&&(o=i)}else t(new De(Pe.NODE_EXTENT_INVALID,e.id)),o=n;else if(Array.isArray(o)){const i=(r==null?void 0:r.computedPosition.x)||0,a=(r==null?void 0:r.computedPosition.y)||0;o=[[o[0][0]+i,o[0][1]+a],[o[1][0]+i,o[1][1]+a]]}else if(o!=="parent"&&(o!=null&&o.range)&&Array.isArray(o.range)){const[i,a,s,l]=ey(o.padding),u=(r==null?void 0:r.computedPosition.x)||0,c=(r==null?void 0:r.computedPosition.y)||0;o=[[o.range[0][0]+u+l,o.range[0][1]+c+i],[o.range[1][0]+u-a,o.range[1][1]+c-s]]}return o==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:o}function S2({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function Jc(e,t,n,r,o){const i=S2(e.dimensions,k2(e,n,r,o)),a=H_(t,i);return{position:{x:a.x-((o==null?void 0:o.computedPosition.x)||0),y:a.y-((o==null?void 0:o.computedPosition.y)||0)},computedPosition:a}}function bn(e,t,n=le.Left,r=!1){const o=((t==null?void 0:t.x)??0)+e.computedPosition.x,i=((t==null?void 0:t.y)??0)+e.computedPosition.y,{width:a,height:s}=t??q2(e);if(r)return{x:o+a/2,y:i+s/2};switch((t==null?void 0:t.position)??n){case le.Top:return{x:o+a/2,y:i};case le.Right:return{x:o+a,y:i+s/2};case le.Bottom:return{x:o+a/2,y:i+s};case le.Left:return{x:o,y:i+s/2}}}function af(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function C2({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:i,width:a,height:s,viewport:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Xr({x:(0-l.x)/l.zoom,y:(0-l.y)/l.zoom,width:a/l.zoom,height:s/l.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),f=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*f)>0}function N2(e,t,n=!1){const r=typeof e.zIndex=="number";let o=r?e.zIndex:0;const i=t(e.source),a=t(e.target);return!i||!a?0:(n&&(o=r?e.zIndex:Math.max(i.computedPosition.z||0,a.computedPosition.z||0)),o)}var Pe=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Pe||{});const sf={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class De extends Error{constructor(t,...n){var r;super((r=sf[t])==null?void 0:r.call(sf,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function Qc(e){return"clientX"in e}function I2(e){return"sourceEvent"in e}function pt(e,t){const n=Qc(e);let r,o;return n?(r=e.clientX,o=e.clientY):"touches"in e&&e.touches.length>0?(r=e.touches[0].clientX,o=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(r=e.changedTouches[0].clientX,o=e.changedTouches[0].clientY):(r=0,o=0),{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}}const er=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function q2(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function lo(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const T2=()=>!0;function Uo(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function R2(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())Yr(o,jr(i))>0&&r.push(i);return r}const A2=250;function M2(e,t,n,r){var o,i;let a=[],s=Number.POSITIVE_INFINITY;const l=R2(e,n,t+A2);for(const u of l){const c=[...((o=u.handleBounds)==null?void 0:o.source)??[],...((i=u.handleBounds)==null?void 0:i.target)??[]];for(const d of c){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:f,y:p}=bn(u,d,d.position,!0),g=Math.sqrt((f-e.x)**2+(p-e.y)**2);g>t||(g<s?(a=[{...d,x:f,y:p}],s=g):g===s&&a.push({...d,x:f,y:p}))}}if(!a.length)return null;if(a.length>1){const u=r.type==="source"?"target":"source";return a.find(c=>c.type===u)??a[0]}return a[0]}function lf(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:i,doc:a,lib:s,flowId:l,isValidConnection:u=T2},c,d,f){const p=i==="target",g=t?a.querySelector(`.${s}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:m,y}=pt(e),v=a.elementFromPoint(m,y),_=v!=null&&v.classList.contains(`${s}-flow__handle`)?v:g,b={handleDomNode:_,isValid:!1,connection:null,toHandle:null};if(_){const $=ty(void 0,_),k=_.getAttribute("data-nodeid"),P=_.getAttribute("data-handleid"),q=_.classList.contains("connectable"),G=_.classList.contains("connectableend");if(!k||!$)return b;const Y={source:p?k:r,sourceHandle:p?P:o,target:p?r:k,targetHandle:p?o:P};b.connection=Y;const R=q&&G&&(n===Nt.Strict?p&&$==="source"||!p&&$==="target":k!==r||P!==o);b.isValid=R&&u(Y,{nodes:d,edges:c,sourceNode:f(Y.source),targetNode:f(Y.target)}),b.toHandle=t}return b}function ty(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function P2(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function O2(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function D2(e,t,n,r,o,i=!1){var a,s,l;const u=r.get(e);if(!u)return null;const c=o===Nt.Strict?(a=u.handleBounds)==null?void 0:a[t]:[...((s=u.handleBounds)==null?void 0:s.source)??[],...((l=u.handleBounds)==null?void 0:l.target)??[]],d=(n?c==null?void 0:c.find(f=>f.id===n):c==null?void 0:c[0])??null;return d&&i?{...d,...bn(u,d,d.position,!0)}:d}const Ic={[le.Left]:le.Right,[le.Right]:le.Left,[le.Top]:le.Bottom,[le.Bottom]:le.Top},z2=["production","prod"];function uo(e,...t){ny()&&console.warn(`[Vue Flow]: ${e}`,...t)}function ny(){return!z2.includes("production")}function uf(e,t,n,r,o){const i=t.querySelectorAll(`.vue-flow__handle.${e}`);return i!=null&&i.length?Array.from(i).map(a=>{const s=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),type:e,nodeId:o,position:a.getAttribute("data-handlepos"),x:(s.left-n.left)/r,y:(s.top-n.top)/r,...so(a)}}):null}function qc(e,t,n,r,o,i=!1,a){o.value=!1,e.selected?(i||e.selected&&t)&&(r([e]),St(()=>{a.blur()})):n([e])}function Me(e){return typeof Z(e)<"u"}function V2(e,t,n,r){if(!e||!e.source||!e.target)return n(new De(Pe.EDGE_INVALID,(e==null?void 0:e.id)??"[ID UNKNOWN]")),!1;let o;return Lt(e)?o=e:o={...e,id:X_(e)},o=j_(o,void 0,r),b2(o,t)?!1:o}function B2(e,t,n,r,o){if(!t.source||!t.target)return o(new De(Pe.EDGE_INVALID,e.id)),!1;if(!n)return o(new De(Pe.EDGE_NOT_FOUND,e.id)),!1;const{id:i,...a}=e;return{...a,id:r?X_(t):i,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function cf(e,t,n){const r={},o=[];for(let i=0;i<e.length;++i){const a=e[i];if(!Jt(a)){n(new De(Pe.NODE_INVALID,a==null?void 0:a.id)||`[ID UNKNOWN|INDEX ${i}]`);continue}const s=m2(a,t(a.id),a.parentNode);a.parentNode&&(r[a.parentNode]=!0),o[i]=s}for(const i of o){const a=t(i.parentNode)||o.find(s=>s.id===i.parentNode);i.parentNode&&!a&&n(new De(Pe.NODE_MISSING_PARENT,i.id,i.parentNode)),(i.parentNode||r[i.id])&&(r[i.id]&&(i.isParent=!0),a&&(a.isParent=!0))}return o}function df(e,t,n,r,o,i){let a=o;const s=r.get(a)||new Map;r.set(a,s.set(n,t)),a=`${o}-${e}`;const l=r.get(a)||new Map;if(r.set(a,l.set(n,t)),i){a=`${o}-${e}-${i}`;const u=r.get(a)||new Map;r.set(a,u.set(n,t))}}function Go(e,t,n){e.clear();for(const r of n){const{source:o,target:i,sourceHandle:a=null,targetHandle:s=null}=r,l={edgeId:r.id,source:o,target:i,sourceHandle:a,targetHandle:s},u=`${o}-${a}--${i}-${s}`,c=`${i}-${s}--${o}-${a}`;df("source",l,c,e,o,a),df("target",l,u,e,i,s)}}function ff(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Ho(e,t,n,r,o,i,a,s){const l=[];for(const u of e){const c=Lt(u)?u:V2(u,s,o,i);if(!c)continue;const d=n(c.source),f=n(c.target);if(!d||!f){o(new De(Pe.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){o(new De(Pe.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!f){o(new De(Pe.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:s,nodes:a,sourceNode:d,targetNode:f})){o(new De(Pe.EDGE_INVALID,c.id));continue}const p=r(c.id);l.push({...j_(c,p,i),sourceNode:d,targetNode:f})}return l}const pf=Symbol("vueFlow"),ry=Symbol("nodeId"),oy=Symbol("nodeRef"),L2=Symbol("edgeId"),F2=Symbol("edgeRef"),co=Symbol("slots");function iy(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:r,noDragClassName:o,nodes:i,nodeExtent:a,nodeDragThreshold:s,viewport:l,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:d,panBy:f,findNode:p,multiSelectionActive:g,nodesSelectionActive:m,selectNodesOnDrag:y,removeSelectedElements:v,addSelectedNodes:_,updateNodePositions:b,emits:$}=Ie(),{onStart:k,onDrag:P,onStop:q,onClick:G,el:Y,disabled:B,id:R,selectable:S,dragHandle:W}=e,w=Dr(!1);let I=[],E,O=null,U={x:void 0,y:void 0},z={x:0,y:0},V=null,C=!1,ee=0,oe=!1;const M=H2(),D=({x:pe,y:be})=>{U={x:pe,y:be};let ge=!1;if(I=I.map(L=>{const T={x:pe-L.distance.x,y:be-L.distance.y},{computedPosition:N}=Jc(L,n.value?lo(T,r.value):T,$.error,a.value,L.parentNode?p(L.parentNode):void 0);return ge=ge||L.position.x!==N.x||L.position.y!==N.y,L.position=N,L}),!!ge&&(b(I,!0,!0),w.value=!0,V)){const[L,T]=Fo({id:R,dragItems:I,findNode:p});P({event:V,node:L,nodes:T})}},H=()=>{if(!O)return;const[pe,be]=Q_(z,O,c.value);if(pe!==0||be!==0){const ge={x:(U.x??0)-pe/l.value.zoom,y:(U.y??0)-be/l.value.zoom};f({x:pe,y:be})&&D(ge)}ee=requestAnimationFrame(H)},J=(pe,be)=>{C=!0;const ge=p(R);!y.value&&!g.value&&ge&&(ge.selected||v()),ge&&Ne(S)&&y.value&&qc(ge,g.value,_,v,m,!1,be);const L=M(pe.sourceEvent);if(U=L,I=$2(i.value,d.value,L,p,R),I.length){const[T,N]=Fo({id:R,dragItems:I,findNode:p});k({event:pe.sourceEvent,node:T,nodes:N})}},Q=(pe,be)=>{var ge;pe.sourceEvent.type==="touchmove"&&pe.sourceEvent.touches.length>1||(s.value===0&&J(pe,be),U=M(pe.sourceEvent),O=((ge=t.value)==null?void 0:ge.getBoundingClientRect())||null,z=pt(pe.sourceEvent,O))},ie=(pe,be)=>{const ge=M(pe.sourceEvent);if(!oe&&C&&u.value&&(oe=!0,H()),!C){const L=ge.xSnapped-(U.x??0),T=ge.ySnapped-(U.y??0);Math.sqrt(L*L+T*T)>s.value&&J(pe,be)}(U.x!==ge.xSnapped||U.y!==ge.ySnapped)&&I.length&&C&&(V=pe.sourceEvent,z=pt(pe.sourceEvent,O),D(ge))},he=pe=>{let be=!1;if(!C&&!w.value&&!g.value){const ge=pe.sourceEvent,L=M(ge),T=L.xSnapped-(U.x??0),N=L.ySnapped-(U.y??0),X=Math.sqrt(T*T+N*N);X!==0&&X<=s.value&&(G==null||G(ge),be=!0)}if(I.length&&!be){b(I,!1,!1);const[ge,L]=Fo({id:R,dragItems:I,findNode:p});q({event:pe.sourceEvent,node:ge,nodes:L})}I=[],w.value=!1,oe=!1,C=!1,U={x:void 0,y:void 0},cancelAnimationFrame(ee)};return Se([()=>Ne(B),Y],([pe,be],ge,L)=>{if(be){const T=nt(be);pe||(E=gx().on("start",N=>Q(N,be)).on("drag",N=>ie(N,be)).on("end",N=>he(N)).filter(N=>{const X=N.target,ne=Ne(W);return!N.button&&(!o.value||!of(X,`.${o.value}`,be)&&(!ne||of(X,ne,be)))}),T.call(E)),L(()=>{T.on(".drag",null),E&&(E.on("start",null),E.on("drag",null),E.on("end",null))})}}),w}function U2(){return{doubleClick:ce(),click:ce(),mouseEnter:ce(),mouseMove:ce(),mouseLeave:ce(),contextMenu:ce(),updateStart:ce(),update:ce(),updateEnd:ce()}}function G2(e,t){const n=U2();return n.doubleClick.on(r=>{var o,i;t.edgeDoubleClick(r),(i=(o=e.events)==null?void 0:o.doubleClick)==null||i.call(o,r)}),n.click.on(r=>{var o,i;t.edgeClick(r),(i=(o=e.events)==null?void 0:o.click)==null||i.call(o,r)}),n.mouseEnter.on(r=>{var o,i;t.edgeMouseEnter(r),(i=(o=e.events)==null?void 0:o.mouseEnter)==null||i.call(o,r)}),n.mouseMove.on(r=>{var o,i;t.edgeMouseMove(r),(i=(o=e.events)==null?void 0:o.mouseMove)==null||i.call(o,r)}),n.mouseLeave.on(r=>{var o,i;t.edgeMouseLeave(r),(i=(o=e.events)==null?void 0:o.mouseLeave)==null||i.call(o,r)}),n.contextMenu.on(r=>{var o,i;t.edgeContextMenu(r),(i=(o=e.events)==null?void 0:o.contextMenu)==null||i.call(o,r)}),n.updateStart.on(r=>{var o,i;t.edgeUpdateStart(r),(i=(o=e.events)==null?void 0:o.updateStart)==null||i.call(o,r)}),n.update.on(r=>{var o,i;t.edgeUpdate(r),(i=(o=e.events)==null?void 0:o.update)==null||i.call(o,r)}),n.updateEnd.on(r=>{var o,i;t.edgeUpdateEnd(r),(i=(o=e.events)==null?void 0:o.updateEnd)==null||i.call(o,r)}),Object.entries(n).reduce((r,[o,i])=>(r.emit[o]=i.trigger,r.on[o]=i.on,r),{emit:{},on:{}})}function H2(){const{viewport:e,snapGrid:t,snapToGrid:n,vueFlowRef:r}=Ie();return o=>{var i;const a=((i=r.value)==null?void 0:i.getBoundingClientRect())??{left:0,top:0},s=I2(o)?o.sourceEvent:o,{x:l,y:u}=pt(s,a),c=Jn({x:l,y:u},e.value),{x:d,y:f}=n.value?lo(c,t.value):c;return{xSnapped:d,ySnapped:f,...c}}}function hf(){return!0}function ay({handleId:e,nodeId:t,type:n,isValidConnection:r,edgeUpdaterType:o,onEdgeUpdate:i,onEdgeUpdateEnd:a}){const{id:s,vueFlowRef:l,connectionMode:u,connectionRadius:c,connectOnClick:d,connectionClickStartHandle:f,nodesConnectable:p,autoPanOnConnect:g,autoPanSpeed:m,findNode:y,panBy:v,startConnection:_,updateConnection:b,endConnection:$,emits:k,viewport:P,edges:q,nodes:G,isValidConnection:Y,nodeLookup:B}=Ie();let R=null,S=!1,W=null;function w(E){var O;const U=Ne(n)==="target",z=Qc(E),V=Zd(E.target),C=E.currentTarget;if(C&&(z&&E.button===0||!z)){let ee=function(ue){ge=pt(ue,he),D=M2(Jn(ge,P.value,!1,[1,1]),c.value,B.value,N),L||(T(),L=!0);const ae=lf(ue,{handle:D,connectionMode:u.value,fromNodeId:Ne(t),fromHandleId:Ne(e),fromType:U?"target":"source",isValidConnection:M,doc:V,lib:"vue",flowId:s,nodeLookup:B.value},q.value,G.value,y);W=ae.handleDomNode,R=ae.connection,S=O2(!!D,ae.isValid);const me={...te,isValid:S,to:ae.toHandle&&S?Cc({x:ae.toHandle.x,y:ae.toHandle.y},P.value):ge,toHandle:ae.toHandle,toPosition:S&&ae.toHandle?ae.toHandle.position:Ic[N.position],toNode:ae.toHandle?B.value.get(ae.toHandle.nodeId):null};if(!(S&&D&&(te!=null&&te.toHandle)&&me.toHandle&&te.toHandle.type===me.toHandle.type&&te.toHandle.nodeId===me.toHandle.nodeId&&te.toHandle.id===me.toHandle.id&&te.to.x===me.to.x&&te.to.y===me.to.y)){if(b(D&&S?Cc({x:D.x,y:D.y},P.value):ge,ae.toHandle,P2(!!D,S)),te=me,!D&&!S&&!W)return Uo(be);R&&R.source!==R.target&&W&&(Uo(be),be=W,W.classList.add("connecting","vue-flow__handle-connecting"),W.classList.toggle("valid",!!S),W.classList.toggle("vue-flow__handle-valid",!!S))}},oe=function(ue){(D||W)&&R&&S&&(i?i(ue,R):k.connect(R)),k.connectEnd(ue),o&&(a==null||a(ue)),Uo(be),cancelAnimationFrame(H),$(ue),L=!1,S=!1,R=null,W=null,V.removeEventListener("mousemove",ee),V.removeEventListener("mouseup",oe),V.removeEventListener("touchmove",ee),V.removeEventListener("touchend",oe)};y(Ne(t));let M=Ne(r)||Y.value||hf,D,H=0;const{x:J,y:Q}=pt(E),ie=ty(Ne(o),C),he=(O=l.value)==null?void 0:O.getBoundingClientRect();if(!he||!ie)return;const pe=D2(Ne(t),ie,Ne(e),B.value,u.value);if(!pe)return;let be,ge=pt(E,he),L=!1;const T=()=>{if(!g.value)return;const[ue,ae]=Q_(ge,he,m.value);v({x:ue,y:ae}),H=requestAnimationFrame(T)},N={...pe,nodeId:Ne(t),type:ie,position:pe.position},X=B.value.get(Ne(t)),de={inProgress:!0,isValid:null,from:bn(X,N,le.Left,!0),fromHandle:N,fromPosition:N.position,fromNode:X,to:ge,toHandle:null,toPosition:Ic[N.position],toNode:null};_({nodeId:Ne(t),id:Ne(e),type:ie,position:(C==null?void 0:C.getAttribute("data-handlepos"))||le.Top,...ge},{x:J-he.left,y:Q-he.top}),k.connectStart({event:E,nodeId:Ne(t),handleId:Ne(e),handleType:ie});let te=de;V.addEventListener("mousemove",ee),V.addEventListener("mouseup",oe),V.addEventListener("touchmove",ee),V.addEventListener("touchend",oe)}}function I(E){var O,U;if(!d.value)return;if(Ne(n),!f.value){k.clickConnectStart({event:E,nodeId:Ne(t),handleId:Ne(e)}),_({nodeId:Ne(t),type:Ne(n),id:Ne(e),position:le.Top,...pt(E)},void 0,!0);return}let z=Ne(r)||Y.value||hf;const V=y(Ne(t));if(V&&(typeof V.connectable>"u"?p.value:V.connectable)===!1)return;const C=Zd(E.target),ee=lf(E,{handle:{nodeId:Ne(t),id:Ne(e),type:Ne(n),position:le.Top,...pt(E)},connectionMode:u.value,fromNodeId:f.value.nodeId,fromHandleId:f.value.id??null,fromType:f.value.type,isValidConnection:z,doc:C,lib:"vue",flowId:s,nodeLookup:B.value},q.value,G.value,y),oe=((O=ee.connection)==null?void 0:O.source)===((U=ee.connection)==null?void 0:U.target);ee.isValid&&ee.connection&&!oe&&k.connect(ee.connection),k.clickConnectEnd(E),$(E,!0)}return{handlePointerDown:w,handleClick:I}}function j2(){return an(ry,"")}function sy(e){const t=e??j2()??"",n=an(oy,$e(null)),{findNode:r,edges:o,emits:i}=Ie(),a=r(t);return a||i.error(new De(Pe.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:a,parentNode:ve(()=>r(a.parentNode)),connectedEdges:ve(()=>Yt([a],o.value))}}function Y2(){return{doubleClick:ce(),click:ce(),mouseEnter:ce(),mouseMove:ce(),mouseLeave:ce(),contextMenu:ce(),dragStart:ce(),drag:ce(),dragStop:ce()}}function X2(e,t){const n=Y2();return n.doubleClick.on(r=>{var o,i;t.nodeDoubleClick(r),(i=(o=e.events)==null?void 0:o.doubleClick)==null||i.call(o,r)}),n.click.on(r=>{var o,i;t.nodeClick(r),(i=(o=e.events)==null?void 0:o.click)==null||i.call(o,r)}),n.mouseEnter.on(r=>{var o,i;t.nodeMouseEnter(r),(i=(o=e.events)==null?void 0:o.mouseEnter)==null||i.call(o,r)}),n.mouseMove.on(r=>{var o,i;t.nodeMouseMove(r),(i=(o=e.events)==null?void 0:o.mouseMove)==null||i.call(o,r)}),n.mouseLeave.on(r=>{var o,i;t.nodeMouseLeave(r),(i=(o=e.events)==null?void 0:o.mouseLeave)==null||i.call(o,r)}),n.contextMenu.on(r=>{var o,i;t.nodeContextMenu(r),(i=(o=e.events)==null?void 0:o.contextMenu)==null||i.call(o,r)}),n.dragStart.on(r=>{var o,i;t.nodeDragStart(r),(i=(o=e.events)==null?void 0:o.dragStart)==null||i.call(o,r)}),n.drag.on(r=>{var o,i;t.nodeDrag(r),(i=(o=e.events)==null?void 0:o.drag)==null||i.call(o,r)}),n.dragStop.on(r=>{var o,i;t.nodeDragStop(r),(i=(o=e.events)==null?void 0:o.dragStop)==null||i.call(o,r)}),Object.entries(n).reduce((r,[o,i])=>(r.emit[o]=i.trigger,r.on[o]=i.on,r),{emit:{},on:{}})}function ly(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:r,snapGrid:o,snapToGrid:i,nodesDraggable:a,emits:s}=Ie();return(l,u=!1)=>{const c=i.value?o.value[0]:5,d=i.value?o.value[1]:5,f=u?4:1,p=l.x*c*f,g=l.y*d*f,m=[];for(const y of e.value)if(y.draggable||a&&typeof y.draggable>"u"){const v={x:y.computedPosition.x+p,y:y.computedPosition.y+g},{computedPosition:_}=Jc(y,v,s.error,t.value,y.parentNode?r(y.parentNode):void 0);m.push({id:y.id,position:_,from:y.position,distance:{x:l.x,y:l.y},dimensions:y.dimensions})}n(m,!0,!1)}}const jo=.1,K2=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function Pt(){return uo("Viewport not initialized yet."),Promise.resolve(!1)}const W2={zoomIn:Pt,zoomOut:Pt,zoomTo:Pt,fitView:Pt,setCenter:Pt,fitBounds:Pt,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:Pt,setTransform:Pt,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function Z2(e){function t(r,o){return new Promise(i=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate((o==null?void 0:o.interpolate)==="linear"?Gn:Ir).scaleBy(Yo(e.d3Selection,o==null?void 0:o.duration,o==null?void 0:o.ease,()=>{i(!0)}),r):i(!1)})}function n(r,o,i,a){return new Promise(s=>{var l;const{x:u,y:c}=H_({x:-r,y:-o},e.translateExtent),d=yn.translate(-u,-c).scale(i);e.d3Selection&&e.d3Zoom?(l=e.d3Zoom)==null||l.interpolate((a==null?void 0:a.interpolate)==="linear"?Gn:Ir).transform(Yo(e.d3Selection,a==null?void 0:a.duration,a==null?void 0:a.ease,()=>{s(!0)}),d):s(!1)})}return ve(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:o=>t(1.2,o),zoomOut:o=>t(1/1.2,o),zoomTo:(o,i)=>new Promise(a=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate((i==null?void 0:i.interpolate)==="linear"?Gn:Ir).scaleTo(Yo(e.d3Selection,i==null?void 0:i.duration,i==null?void 0:i.ease,()=>{a(!0)}),o):a(!1)}),setViewport:(o,i)=>n(o.x,o.y,o.zoom,i),setTransform:(o,i)=>n(o.x,o.y,o.zoom,i),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(o={padding:jo,includeHiddenNodes:!1,duration:0})=>{var i,a;const s=[];for(const f of e.nodes)f.dimensions.width&&f.dimensions.height&&((o==null?void 0:o.includeHiddenNodes)||!f.hidden)&&(!((i=o.nodes)!=null&&i.length)||(a=o.nodes)!=null&&a.length&&o.nodes.includes(f.id))&&s.push(f);if(!s.length)return Promise.resolve(!1);const l=Zc(s),{x:u,y:c,zoom:d}=Jd(l,e.dimensions.width,e.dimensions.height,o.minZoom??e.minZoom,o.maxZoom??e.maxZoom,o.padding??jo,o.offset);return n(u,c,d,o)},setCenter:(o,i,a)=>{const s=typeof(a==null?void 0:a.zoom)<"u"?a.zoom:e.maxZoom,l=e.dimensions.width/2-o*s,u=e.dimensions.height/2-i*s;return n(l,u,s,a)},fitBounds:(o,i={padding:jo})=>{const{x:a,y:s,zoom:l}=Jd(o,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,i.padding);return n(a,s,l,i)},project:o=>Jn(o,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:o=>{if(e.vueFlowRef){const{x:i,y:a}=e.vueFlowRef.getBoundingClientRect(),s={x:o.x-i,y:o.y-a};return Jn(s,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:o=>{if(e.vueFlowRef){const{x:i,y:a}=e.vueFlowRef.getBoundingClientRect(),s={x:o.x+i,y:o.y+a};return Cc(s,e.viewport)}return{x:0,y:0}}}:W2)}function Yo(e,t=0,n=K2,r=()=>{}){const o=typeof t=="number"&&t>0;return o||r(),o?e.transition().duration(t).ease(n).on("end",r):e}function J2(e,t,n){const r=s_(!0);return r.run(()=>{const o=()=>{r.run(()=>{let m,y,v=!!(n.nodes.value.length||n.edges.value.length);m=fn([e.modelValue,()=>{var _,b;return(b=(_=e.modelValue)==null?void 0:_.value)==null?void 0:b.length}],([_])=>{_&&Array.isArray(_)&&(y==null||y.pause(),n.setElements(_),!y&&!v&&_.length?v=!0:y==null||y.resume())}),y=fn([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([_,b])=>{var $;($=e.modelValue)!=null&&$.value&&Array.isArray(e.modelValue.value)&&(m==null||m.pause(),e.modelValue.value=[..._,...b],St(()=>{m==null||m.resume()}))},{immediate:v}),Cr(()=>{m==null||m.stop(),y==null||y.stop()})})},i=()=>{r.run(()=>{let m,y,v=!!n.nodes.value.length;m=fn([e.nodes,()=>{var _,b;return(b=(_=e.nodes)==null?void 0:_.value)==null?void 0:b.length}],([_])=>{_&&Array.isArray(_)&&(y==null||y.pause(),n.setNodes(_),!y&&!v&&_.length?v=!0:y==null||y.resume())}),y=fn([n.nodes,()=>n.nodes.value.length],([_])=>{var b;(b=e.nodes)!=null&&b.value&&Array.isArray(e.nodes.value)&&(m==null||m.pause(),e.nodes.value=[..._],St(()=>{m==null||m.resume()}))},{immediate:v}),Cr(()=>{m==null||m.stop(),y==null||y.stop()})})},a=()=>{r.run(()=>{let m,y,v=!!n.edges.value.length;m=fn([e.edges,()=>{var _,b;return(b=(_=e.edges)==null?void 0:_.value)==null?void 0:b.length}],([_])=>{_&&Array.isArray(_)&&(y==null||y.pause(),n.setEdges(_),!y&&!v&&_.length?v=!0:y==null||y.resume())}),y=fn([n.edges,()=>n.edges.value.length],([_])=>{var b;(b=e.edges)!=null&&b.value&&Array.isArray(e.edges.value)&&(m==null||m.pause(),e.edges.value=[..._],St(()=>{m==null||m.resume()}))},{immediate:v}),Cr(()=>{m==null||m.stop(),y==null||y.stop()})})},s=()=>{r.run(()=>{Se(()=>t.maxZoom,()=>{t.maxZoom&&Me(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},l=()=>{r.run(()=>{Se(()=>t.minZoom,()=>{t.minZoom&&Me(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{r.run(()=>{Se(()=>t.translateExtent,()=>{t.translateExtent&&Me(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{r.run(()=>{Se(()=>t.nodeExtent,()=>{t.nodeExtent&&Me(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{r.run(()=>{Se(()=>t.applyDefault,()=>{Me(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},f=()=>{r.run(()=>{const m=async y=>{let v=y;typeof t.autoConnect=="function"&&(v=await t.autoConnect(y)),v!==!1&&n.addEdges([v])};Se(()=>t.autoConnect,()=>{Me(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),Se(n.autoConnect,(y,v,_)=>{y?n.onConnect(m):n.hooks.value.connect.off(m),_(()=>{n.hooks.value.connect.off(m)})},{immediate:!0})})},p=()=>{const m=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const y of Object.keys(t)){const v=y;if(!m.includes(v)){const _=Re(()=>t[v]),b=n[v];Yn(b)&&r.run(()=>{Se(_,$=>{Me($)&&(b.value=$)},{immediate:!0})})}}};(()=>{o(),i(),a(),l(),s(),u(),c(),d(),f(),p()})()}),()=>r.stop()}function Q2(){return{edgesChange:ce(),nodesChange:ce(),nodeDoubleClick:ce(),nodeClick:ce(),nodeMouseEnter:ce(),nodeMouseMove:ce(),nodeMouseLeave:ce(),nodeContextMenu:ce(),nodeDragStart:ce(),nodeDrag:ce(),nodeDragStop:ce(),nodesInitialized:ce(),miniMapNodeClick:ce(),miniMapNodeDoubleClick:ce(),miniMapNodeMouseEnter:ce(),miniMapNodeMouseMove:ce(),miniMapNodeMouseLeave:ce(),connect:ce(),connectStart:ce(),connectEnd:ce(),clickConnectStart:ce(),clickConnectEnd:ce(),paneReady:ce(),init:ce(),move:ce(),moveStart:ce(),moveEnd:ce(),selectionDragStart:ce(),selectionDrag:ce(),selectionDragStop:ce(),selectionContextMenu:ce(),selectionStart:ce(),selectionEnd:ce(),viewportChangeStart:ce(),viewportChange:ce(),viewportChangeEnd:ce(),paneScroll:ce(),paneClick:ce(),paneContextMenu:ce(),paneMouseEnter:ce(),paneMouseMove:ce(),paneMouseLeave:ce(),edgeContextMenu:ce(),edgeMouseEnter:ce(),edgeMouseMove:ce(),edgeMouseLeave:ce(),edgeDoubleClick:ce(),edgeClick:ce(),edgeUpdateStart:ce(),edgeUpdate:ce(),edgeUpdateEnd:ce(),updateNodeInternals:ce(),error:ce(e=>uo(e.message))}}function e$(e,t){X1(()=>{for(const[n,r]of Object.entries(t.value)){const o=i=>{e(n,i)};r.fns.add(o),no(()=>{r.off(o)})}})}function uy(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:Wc.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Hn.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:jt.Bezier,style:{}},connectionMode:Nt.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:er()?"Meta":"Control",zoomActivationKeyCode:er()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:Q2(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const t$=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function n$(e,t,n){const r=Z2(e),o=L=>{const T=L??[];e.hooks.updateNodeInternals.trigger(T)},i=L=>y2(L,e.nodes,e.edges),a=L=>_2(L,e.nodes,e.edges),s=L=>Yt(L,e.edges),l=({id:L,type:T,nodeId:N})=>{var X;const ne=L?`-${T}-${L}`:`-${T}`;return Array.from(((X=e.connectionLookup.get(`${N}${ne}`))==null?void 0:X.values())??[])},u=L=>{if(L)return t.value.get(L)},c=L=>{if(L)return n.value.get(L)},d=(L,T,N)=>{var X,ne;const de=[];for(const te of L){const ue={id:te.id,type:"position",dragging:N,from:te.from};if(T&&(ue.position=te.position,te.parentNode)){const ae=u(te.parentNode);ue.position={x:ue.position.x-(((X=ae==null?void 0:ae.computedPosition)==null?void 0:X.x)??0),y:ue.position.y-(((ne=ae==null?void 0:ae.computedPosition)==null?void 0:ne.y)??0)}}de.push(ue)}de!=null&&de.length&&e.hooks.nodesChange.trigger(de)},f=L=>{if(!e.vueFlowRef)return;const T=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!T)return;const N=window.getComputedStyle(T),{m22:X}=new window.DOMMatrixReadOnly(N.transform),ne=[];for(const de of L){const te=de,ue=u(te.id);if(ue){const ae=so(te.nodeElement);if(!!(ae.width&&ae.height&&(ue.dimensions.width!==ae.width||ue.dimensions.height!==ae.height||te.forceUpdate))){const ke=te.nodeElement.getBoundingClientRect();ue.dimensions=ae,ue.handleBounds.source=uf("source",te.nodeElement,ke,X,ue.id),ue.handleBounds.target=uf("target",te.nodeElement,ke,X,ue.id),ne.push({id:ue.id,type:"dimensions",dimensions:ae})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&r.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),ne.length&&e.hooks.nodesChange.trigger(ne)},p=(L,T)=>{const N=new Set,X=new Set;for(const te of L)Jt(te)?N.add(te.id):Lt(te)&&X.add(te.id);const ne=zt(t.value,N,!0),de=zt(n.value,X);if(e.multiSelectionActive){for(const te of N)ne.push(Ot(te,T));for(const te of X)de.push(Ot(te,T))}ne.length&&e.hooks.nodesChange.trigger(ne),de.length&&e.hooks.edgesChange.trigger(de)},g=L=>{if(e.multiSelectionActive){const T=L.map(N=>Ot(N.id,!0));e.hooks.nodesChange.trigger(T);return}e.hooks.nodesChange.trigger(zt(t.value,new Set(L.map(T=>T.id)),!0)),e.hooks.edgesChange.trigger(zt(n.value))},m=L=>{if(e.multiSelectionActive){const T=L.map(N=>Ot(N.id,!0));e.hooks.edgesChange.trigger(T);return}e.hooks.edgesChange.trigger(zt(n.value,new Set(L.map(T=>T.id)))),e.hooks.nodesChange.trigger(zt(t.value,new Set,!0))},y=L=>{p(L,!0)},v=L=>{const N=(L||e.nodes).map(X=>(X.selected=!1,Ot(X.id,!1)));e.hooks.nodesChange.trigger(N)},_=L=>{const N=(L||e.edges).map(X=>(X.selected=!1,Ot(X.id,!1)));e.hooks.edgesChange.trigger(N)},b=L=>{if(!L||!L.length)return p([],!1);const T=L.reduce((N,X)=>{const ne=Ot(X.id,!1);return Jt(X)?N.nodes.push(ne):N.edges.push(ne),N},{nodes:[],edges:[]});T.nodes.length&&e.hooks.nodesChange.trigger(T.nodes),T.edges.length&&e.hooks.edgesChange.trigger(T.edges)},$=L=>{var T;(T=e.d3Zoom)==null||T.scaleExtent([L,e.maxZoom]),e.minZoom=L},k=L=>{var T;(T=e.d3Zoom)==null||T.scaleExtent([e.minZoom,L]),e.maxZoom=L},P=L=>{var T;(T=e.d3Zoom)==null||T.translateExtent(L),e.translateExtent=L},q=L=>{e.nodeExtent=L,o()},G=L=>{var T;(T=e.d3Zoom)==null||T.clickDistance(L)},Y=L=>{e.nodesDraggable=L,e.nodesConnectable=L,e.elementsSelectable=L},B=L=>{const T=L instanceof Function?L(e.nodes):L;!e.initialized&&!T.length||(e.nodes=cf(T,u,e.hooks.error.trigger))},R=L=>{const T=L instanceof Function?L(e.edges):L;if(!e.initialized&&!T.length)return;const N=Ho(T,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);Go(e.connectionLookup,n.value,N),e.edges=N},S=L=>{const T=L instanceof Function?L([...e.nodes,...e.edges]):L;!e.initialized&&!T.length||(B(T.filter(Jt)),R(T.filter(Lt)))},W=L=>{let T=L instanceof Function?L(e.nodes):L;T=Array.isArray(T)?T:[T];const N=cf(T,u,e.hooks.error.trigger),X=[];for(const ne of N)X.push(tf(ne));X.length&&e.hooks.nodesChange.trigger(X)},w=L=>{let T=L instanceof Function?L(e.edges):L;T=Array.isArray(T)?T:[T];const N=Ho(T,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),X=[];for(const ne of N)X.push(tf(ne));X.length&&e.hooks.edgesChange.trigger(X)},I=(L,T=!0,N=!1)=>{const X=L instanceof Function?L(e.nodes):L,ne=Array.isArray(X)?X:[X],de=[],te=[];function ue(me){const ke=s(me);for(const Ce of ke)(!Me(Ce.deletable)||Ce.deletable)&&te.push(rf(Ce.id,Ce.source,Ce.target,Ce.sourceHandle,Ce.targetHandle))}function ae(me){const ke=[];for(const Ce of e.nodes)Ce.parentNode===me&&ke.push(Ce);if(ke.length){for(const Ce of ke)de.push(nf(Ce.id));T&&ue(ke);for(const Ce of ke)ae(Ce.id)}}for(const me of ne){const ke=typeof me=="string"?u(me):me;ke&&(Me(ke.deletable)&&!ke.deletable||(de.push(nf(ke.id)),T&&ue([ke]),N&&ae(ke.id)))}te.length&&e.hooks.edgesChange.trigger(te),de.length&&e.hooks.nodesChange.trigger(de)},E=L=>{const T=L instanceof Function?L(e.edges):L,N=Array.isArray(T)?T:[T],X=[];for(const ne of N){const de=typeof ne=="string"?c(ne):ne;de&&(Me(de.deletable)&&!de.deletable||X.push(rf(typeof ne=="string"?ne:ne.id,de.source,de.target,de.sourceHandle,de.targetHandle)))}e.hooks.edgesChange.trigger(X)},O=(L,T,N=!0)=>{const X=c(L.id);if(!X)return!1;const ne=e.edges.indexOf(X),de=B2(L,T,X,N,e.hooks.error.trigger);if(de){const[te]=Ho([de],e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((ue,ae)=>ae===ne?te:ue),Go(e.connectionLookup,n.value,[te]),te}return!1},U=(L,T,N={replace:!1})=>{const X=c(L);if(!X)return;const ne=typeof T=="function"?T(X):T;X.data=N.replace?ne:{...X.data,...ne}},z=L=>ef(L,e.nodes),V=L=>{const T=ef(L,e.edges);return Go(e.connectionLookup,n.value,T),T},C=(L,T,N={replace:!1})=>{const X=u(L);if(!X)return;const ne=typeof T=="function"?T(X):T;N.replace?e.nodes.splice(e.nodes.indexOf(X),1,ne):Object.assign(X,ne)},ee=(L,T,N={replace:!1})=>{const X=u(L);if(!X)return;const ne=typeof T=="function"?T(X):T;X.data=N.replace?ne:{...X.data,...ne}},oe=(L,T,N=!1)=>{N?e.connectionClickStartHandle=L:e.connectionStartHandle=L,e.connectionEndHandle=null,e.connectionStatus=null,T&&(e.connectionPosition=T)},M=(L,T=null,N=null)=>{e.connectionStartHandle&&(e.connectionPosition=L,e.connectionEndHandle=T,e.connectionStatus=N)},D=(L,T)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,T?e.connectionClickStartHandle=null:e.connectionStartHandle=null},H=L=>{const T=g2(L),N=T?null:Dn(L)?L:u(L.id);return!T&&!N?[null,null,T]:[T?L:jr(N),N,T]},J=(L,T=!0,N=e.nodes)=>{const[X,ne,de]=H(L);if(!X)return[];const te=[];for(const ue of N||e.nodes){if(!de&&(ue.id===ne.id||!ue.computedPosition))continue;const ae=jr(ue),me=Yr(ae,X);(T&&me>0||me>=ae.width*ae.height||me>=Number(X.width)*Number(X.height))&&te.push(ue)}return te},Q=(L,T,N=!0)=>{const[X]=H(L);if(!X)return!1;const ne=Yr(X,T);return N&&ne>0||ne>=Number(X.width)*Number(X.height)},ie=L=>{const{viewport:T,dimensions:N,d3Zoom:X,d3Selection:ne,translateExtent:de}=e;if(!X||!ne||!L.x&&!L.y)return!1;const te=yn.translate(T.x+L.x,T.y+L.y).scale(T.zoom),ue=[[0,0],[N.width,N.height]],ae=X.constrain()(te,ue,de),me=e.viewport.x!==ae.x||e.viewport.y!==ae.y||e.viewport.zoom!==ae.k;return X.transform(ne,ae),me},he=L=>{const T=L instanceof Function?L(e):L,N=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Me(T.defaultEdgeOptions)&&(e.defaultEdgeOptions=T.defaultEdgeOptions);const X=T.modelValue||T.nodes||T.edges?[]:void 0;X&&(T.modelValue&&X.push(...T.modelValue),T.nodes&&X.push(...T.nodes),T.edges&&X.push(...T.edges),S(X));const ne=()=>{Me(T.maxZoom)&&k(T.maxZoom),Me(T.minZoom)&&$(T.minZoom),Me(T.translateExtent)&&P(T.translateExtent)};for(const de of Object.keys(T)){const te=de,ue=T[te];![...t$,...N].includes(te)&&Me(ue)&&(e[te]=ue)}gc(()=>e.d3Zoom).not.toBeNull().then(ne),e.initialized||(e.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:f,setElements:S,setNodes:B,setEdges:R,addNodes:W,addEdges:w,removeNodes:I,removeEdges:E,findNode:u,findEdge:c,updateEdge:O,updateEdgeData:U,updateNode:C,updateNodeData:ee,applyEdgeChanges:V,applyNodeChanges:z,addSelectedElements:y,addSelectedNodes:g,addSelectedEdges:m,setMinZoom:$,setMaxZoom:k,setTranslateExtent:P,setNodeExtent:q,setPaneClickDistance:G,removeSelectedElements:b,removeSelectedNodes:v,removeSelectedEdges:_,startConnection:oe,updateConnection:M,endConnection:D,setInteractive:Y,setState:he,getIntersectingNodes:J,getIncomers:i,getOutgoers:a,getConnectedEdges:s,getHandleConnections:l,isNodeIntersecting:Q,panBy:ie,fitView:L=>r.value.fitView(L),zoomIn:L=>r.value.zoomIn(L),zoomOut:L=>r.value.zoomOut(L),zoomTo:(L,T)=>r.value.zoomTo(L,T),setViewport:(L,T)=>r.value.setViewport(L,T),setTransform:(L,T)=>r.value.setTransform(L,T),getViewport:()=>r.value.getViewport(),getTransform:()=>r.value.getTransform(),setCenter:(L,T,N)=>r.value.setCenter(L,T,N),fitBounds:(L,T)=>r.value.fitBounds(L,T),project:L=>r.value.project(L),screenToFlowCoordinate:L=>r.value.screenToFlowCoordinate(L),flowToScreenCoordinate:L=>r.value.flowToScreenCoordinate(L),toObject:()=>{const L=[],T=[];for(const N of e.nodes){const{computedPosition:X,handleBounds:ne,selected:de,dimensions:te,isParent:ue,resizing:ae,dragging:me,events:ke,...Ce}=N;L.push(Ce)}for(const N of e.edges){const{selected:X,sourceNode:ne,targetNode:de,events:te,...ue}=N;T.push(ue)}return JSON.parse(JSON.stringify({nodes:L,edges:T,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:L=>new Promise(T=>{const{nodes:N,edges:X,position:ne,zoom:de,viewport:te}=L;if(N&&B(N),X&&R(X),te!=null&&te.x&&(te!=null&&te.y)||ne){const ue=(te==null?void 0:te.x)||ne[0],ae=(te==null?void 0:te.y)||ne[1],me=(te==null?void 0:te.zoom)||de||e.viewport.zoom;return gc(()=>r.value.viewportInitialized).toBe(!0).then(()=>{r.value.setViewport({x:ue,y:ae,zoom:me}).then(()=>{T(!0)})})}else T(!0)}),updateNodeInternals:o,viewportHelper:r,$reset:()=>{const L=uy();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const T=yn.translate(L.defaultViewport.x??0,L.defaultViewport.y??0).scale(rn(L.defaultViewport.zoom??1,L.minZoom,L.maxZoom)),N=e.viewportRef.getBoundingClientRect(),X=[[0,0],[N.width,N.height]],ne=e.d3Zoom.constrain()(T,X,L.translateExtent);e.d3Zoom.transform(e.d3Selection,ne)}he(L)},$destroy:()=>{}}}const r$=["data-id","data-handleid","data-nodeid","data-handlepos"],o$={name:"Handle",compatConfig:{MODE:3}},Ve=Ee({...o$,props:{id:{default:null},type:{},position:{default:()=>le.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=K1(e,["position","connectable","connectableStart","connectableEnd","id"]),r=Re(()=>n.type??"source"),o=Re(()=>n.isValidConnection??null),{id:i,connectionStartHandle:a,connectionClickStartHandle:s,connectionEndHandle:l,vueFlowRef:u,nodesConnectable:c,noDragClassName:d,noPanClassName:f}=Ie(),{id:p,node:g,nodeEl:m,connectedEdges:y}=sy(),v=$e(),_=Re(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),b=Re(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),$=Re(()=>{var R,S,W,w,I,E;return((R=a.value)==null?void 0:R.nodeId)===p&&((S=a.value)==null?void 0:S.id)===e.id&&((W=a.value)==null?void 0:W.type)===r.value||((w=l.value)==null?void 0:w.nodeId)===p&&((I=l.value)==null?void 0:I.id)===e.id&&((E=l.value)==null?void 0:E.type)===r.value}),k=Re(()=>{var R,S,W;return((R=s.value)==null?void 0:R.nodeId)===p&&((S=s.value)==null?void 0:S.id)===e.id&&((W=s.value)==null?void 0:W.type)===r.value}),{handlePointerDown:P,handleClick:q}=ay({nodeId:p,handleId:e.id,isValidConnection:o,type:r}),G=ve(()=>typeof e.connectable=="string"&&e.connectable==="single"?!y.value.some(R=>{const S=R[`${r.value}Handle`];return R[r.value]!==p?!1:S?S===e.id:!0}):typeof e.connectable=="number"?y.value.filter(R=>{const S=R[`${r.value}Handle`];return R[r.value]!==p?!1:S?S===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(g,y.value):Me(e.connectable)?e.connectable:c.value);gt(()=>{var R;if(!g.dimensions.width||!g.dimensions.height)return;const S=(R=g.handleBounds[r.value])==null?void 0:R.find(z=>z.id===e.id);if(!u.value||S)return;const W=u.value.querySelector(".vue-flow__transformationpane");if(!m.value||!v.value||!W||!e.id)return;const w=m.value.getBoundingClientRect(),I=v.value.getBoundingClientRect(),E=window.getComputedStyle(W),{m22:O}=new window.DOMMatrixReadOnly(E.transform),U={id:e.id,position:e.position,x:(I.left-w.left)/O,y:(I.top-w.top)/O,type:r.value,nodeId:p,...so(v.value)};g.handleBounds[r.value]=[...g.handleBounds[r.value]??[],U]});function Y(R){const S=Qc(R);G.value&&_.value&&(S&&R.button===0||!S)&&P(R)}function B(R){!p||!s.value&&!_.value||G.value&&q(R)}return t({handleClick:q,handlePointerDown:P,onClick:B,onPointerDown:Y}),(R,S)=>(A(),K("div",{ref_key:"handle",ref:v,"data-id":`${Z(i)}-${Z(p)}-${e.id}-${r.value}`,"data-handleid":e.id,"data-nodeid":Z(p),"data-handlepos":R.position,class:Fe(["vue-flow__handle",[`vue-flow__handle-${R.position}`,`vue-flow__handle-${e.id}`,Z(d),Z(f),r.value,{connectable:G.value,connecting:k.value,connectablestart:_.value,connectableend:b.value,connectionindicator:G.value&&(_.value&&!$.value||b.value&&$.value)}]]),onMousedown:Y,onTouchstartPassive:Y,onClick:B},[it(R.$slots,"default",{id:R.id})],42,r$))}}),fo=function({sourcePosition:e=le.Bottom,targetPosition:t=le.Top,label:n,connectable:r=!0,isValidTargetPos:o,isValidSourcePos:i,data:a}){const s=a.label??n;return[qe(Ve,{type:"target",position:t,connectable:r,isValidConnection:o}),typeof s!="string"&&s?qe(s):qe(_e,[s]),qe(Ve,{type:"source",position:e,connectable:r,isValidConnection:i})]};fo.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];fo.inheritAttrs=!1;fo.compatConfig={MODE:3};const i$=fo,po=function({targetPosition:e=le.Top,label:t,connectable:n=!0,isValidTargetPos:r,data:o}){const i=o.label??t;return[qe(Ve,{type:"target",position:e,connectable:n,isValidConnection:r}),typeof i!="string"&&i?qe(i):qe(_e,[i])]};po.props=["targetPosition","label","isValidTargetPos","connectable","data"];po.inheritAttrs=!1;po.compatConfig={MODE:3};const a$=po,ho=function({sourcePosition:e=le.Bottom,label:t,connectable:n=!0,isValidSourcePos:r,data:o}){const i=o.label??t;return[typeof i!="string"&&i?qe(i):qe(_e,[i]),qe(Ve,{type:"source",position:e,connectable:n,isValidConnection:r})]};ho.props=["sourcePosition","label","isValidSourcePos","connectable","data"];ho.inheritAttrs=!1;ho.compatConfig={MODE:3};const s$=ho,l$=["transform"],u$=["width","height","x","y","rx","ry"],c$=["y"],d$={name:"EdgeText",compatConfig:{MODE:3}},f$=Ee({...d$,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=$e({x:0,y:0,width:0,height:0}),n=$e(null),r=ve(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);gt(o),Se([()=>e.x,()=>e.y,n,()=>e.label],o);function o(){if(!n.value)return;const i=n.value.getBBox();(i.width!==t.value.width||i.height!==t.value.height)&&(t.value=i)}return(i,a)=>(A(),K("g",{transform:r.value,class:"vue-flow__edge-textwrapper"},[i.labelShowBg?(A(),K("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*i.labelBgPadding[0]}px`,height:`${t.value.height+2*i.labelBgPadding[1]}px`,x:-i.labelBgPadding[0],y:-i.labelBgPadding[1],style:at(i.labelBgStyle),rx:i.labelBgBorderRadius,ry:i.labelBgBorderRadius},null,12,u$)):se("",!0),h("text",zr(i.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:i.labelStyle}),[it(i.$slots,"default",{},()=>[typeof i.label!="string"?(A(),fe(d_(i.label),{key:0})):(A(),K(_e,{key:1},[we(re(i.label),1)],64))])],16,c$)],8,l$))}}),p$=["id","d","marker-end","marker-start"],h$=["d","stroke-width"],v$={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},vo=Ee({...v$,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=$e(null),r=$e(null),o=$e(null),i=Fc();return t({pathEl:n,interactionEl:r,labelEl:o}),(a,s)=>(A(),K(_e,null,[h("path",zr(Z(i),{id:a.id,ref_key:"pathEl",ref:n,d:a.path,class:"vue-flow__edge-path","marker-end":a.markerEnd,"marker-start":a.markerStart}),null,16,p$),a.interactionWidth?(A(),K("path",{key:0,ref_key:"interactionEl",ref:r,fill:"none",d:a.path,"stroke-width":a.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,h$)):se("",!0),a.label&&a.labelX&&a.labelY?(A(),fe(f$,{key:1,ref_key:"labelEl",ref:o,x:a.labelX,y:a.labelY,label:a.label,"label-show-bg":a.labelShowBg,"label-bg-style":a.labelBgStyle,"label-bg-padding":a.labelBgPadding,"label-bg-border-radius":a.labelBgBorderRadius,"label-style":a.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):se("",!0)],64))}});function cy({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,a=Math.abs(r-t)/2,s=r<t?r+a:r-a;return[i,s,o,a]}function dy({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:a,targetControlY:s}){const l=e*.125+o*.375+a*.375+n*.125,u=t*.125+i*.375+s*.375+r*.125,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}function wr(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function vf({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){let a,s;switch(e){case le.Left:a=t-wr(t-r,i),s=n;break;case le.Right:a=t+wr(r-t,i),s=n;break;case le.Top:a=t,s=n-wr(n-o,i);break;case le.Bottom:a=t,s=n+wr(o-n,i);break}return[a,s]}function fy(e){const{sourceX:t,sourceY:n,sourcePosition:r=le.Bottom,targetX:o,targetY:i,targetPosition:a=le.Top,curvature:s=.25}=e,[l,u]=vf({pos:r,x1:t,y1:n,x2:o,y2:i,c:s}),[c,d]=vf({pos:a,x1:o,y1:i,x2:t,y2:n,c:s}),[f,p,g,m]=dy({sourceX:t,sourceY:n,targetX:o,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${l},${u} ${c},${d} ${o},${i}`,f,p,g,m]}function gf({pos:e,x1:t,y1:n,x2:r,y2:o}){let i,a;switch(e){case le.Left:case le.Right:i=.5*(t+r),a=n;break;case le.Top:case le.Bottom:i=t,a=.5*(n+o);break}return[i,a]}function py(e){const{sourceX:t,sourceY:n,sourcePosition:r=le.Bottom,targetX:o,targetY:i,targetPosition:a=le.Top}=e,[s,l]=gf({pos:r,x1:t,y1:n,x2:o,y2:i}),[u,c]=gf({pos:a,x1:o,y1:i,x2:t,y2:n}),[d,f,p,g]=dy({sourceX:t,sourceY:n,targetX:o,targetY:i,sourceControlX:s,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${t},${n} C${s},${l} ${u},${c} ${o},${i}`,d,f,p,g]}const mf={[le.Left]:{x:-1,y:0},[le.Right]:{x:1,y:0},[le.Top]:{x:0,y:-1},[le.Bottom]:{x:0,y:1}};function g$({source:e,sourcePosition:t=le.Bottom,target:n}){return t===le.Left||t===le.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function _f(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function m$({source:e,sourcePosition:t=le.Bottom,target:n,targetPosition:r=le.Top,center:o,offset:i}){const a=mf[t],s=mf[r],l={x:e.x+a.x*i,y:e.y+a.y*i},u={x:n.x+s.x*i,y:n.y+s.y*i},c=g$({source:l,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let p,g,m;const y={x:0,y:0},v={x:0,y:0},[_,b,$,k]=cy({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*s[d]===-1){g=o.x??_,m=o.y??b;const q=[{x:g,y:l.y},{x:g,y:u.y}],G=[{x:l.x,y:m},{x:u.x,y:m}];a[d]===f?p=d==="x"?q:G:p=d==="x"?G:q}else{const q=[{x:l.x,y:u.y}],G=[{x:u.x,y:l.y}];if(d==="x"?p=a.x===f?G:q:p=a.y===f?q:G,t===r){const W=Math.abs(e[d]-n[d]);if(W<=i){const w=Math.min(i-1,i-W);a[d]===f?y[d]=(l[d]>e[d]?-1:1)*w:v[d]=(u[d]>n[d]?-1:1)*w}}if(t!==r){const W=d==="x"?"y":"x",w=a[d]===s[W],I=l[W]>u[W],E=l[W]<u[W];(a[d]===1&&(!w&&I||w&&E)||a[d]!==1&&(!w&&E||w&&I))&&(p=d==="x"?q:G)}const Y={x:l.x+y.x,y:l.y+y.y},B={x:u.x+v.x,y:u.y+v.y},R=Math.max(Math.abs(Y.x-p[0].x),Math.abs(B.x-p[0].x)),S=Math.max(Math.abs(Y.y-p[0].y),Math.abs(B.y-p[0].y));R>=S?(g=(Y.x+B.x)/2,m=p[0].y):(g=p[0].x,m=(Y.y+B.y)/2)}return[[e,{x:l.x+y.x,y:l.y+y.y},...p,{x:u.x+v.x,y:u.y+v.y},n],g,m,$,k]}function _$(e,t,n,r){const o=Math.min(_f(e,t)/2,_f(t,n)/2,r),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${i+o*u},${a}Q ${i},${a} ${i},${a+o*c}`}const s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${i},${a+o*l}Q ${i},${a} ${i+o*s},${a}`}function Tc(e){const{sourceX:t,sourceY:n,sourcePosition:r=le.Bottom,targetX:o,targetY:i,targetPosition:a=le.Top,borderRadius:s=5,centerX:l,centerY:u,offset:c=20}=e,[d,f,p,g,m]=m$({source:{x:t,y:n},sourcePosition:r,target:{x:o,y:i},targetPosition:a,center:{x:l,y:u},offset:c});return[d.reduce((v,_,b)=>{let $;return b>0&&b<d.length-1?$=_$(d[b-1],_,d[b+1],s):$=`${b===0?"M":"L"}${_.x} ${_.y}`,v+=$,v},""),f,p,g,m]}function y$(e){const{sourceX:t,sourceY:n,targetX:r,targetY:o}=e,[i,a,s,l]=cy({sourceX:t,sourceY:n,targetX:r,targetY:o});return[`M ${t},${n}L ${r},${o}`,i,a,s,l]}const b$=Ee({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,r,o]=y$(e);return qe(vo,{path:n,labelX:r,labelY:o,...t,...e})}}}),x$=b$,w$=Ee({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,r,o]=Tc({...e,sourcePosition:e.sourcePosition??le.Bottom,targetPosition:e.targetPosition??le.Top});return qe(vo,{path:n,labelX:r,labelY:o,...t,...e})}}}),hy=w$,$$=Ee({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>qe(hy,{...e,...t,borderRadius:0})}}),E$=$$,k$=Ee({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,r,o]=fy({...e,sourcePosition:e.sourcePosition??le.Bottom,targetPosition:e.targetPosition??le.Top});return qe(vo,{path:n,labelX:r,labelY:o,...t,...e})}}}),S$=k$,C$=Ee({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,r,o]=py({...e,sourcePosition:e.sourcePosition??le.Bottom,targetPosition:e.targetPosition??le.Top});return qe(vo,{path:n,labelX:r,labelY:o,...t,...e})}}}),N$=C$,I$={input:s$,default:i$,output:a$},q$={default:S$,straight:x$,step:E$,smoothstep:hy,simplebezier:N$};function T$(e,t,n){const r=ve(()=>m=>t.value.get(m)),o=ve(()=>m=>n.value.get(m)),i=ve(()=>{const m={...q$,...e.edgeTypes},y=Object.keys(m);for(const v of e.edges)v.type&&!y.includes(v.type)&&(m[v.type]=v.type);return m}),a=ve(()=>{const m={...I$,...e.nodeTypes},y=Object.keys(m);for(const v of e.nodes)v.type&&!y.includes(v.type)&&(m[v.type]=v.type);return m}),s=ve(()=>e.onlyRenderVisibleElements?Z_(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),l=ve(()=>{if(e.onlyRenderVisibleElements){const m=[];for(const y of e.edges){const v=t.value.get(y.source),_=t.value.get(y.target);C2({sourcePos:v.computedPosition||{x:0,y:0},targetPos:_.computedPosition||{x:0,y:0},sourceWidth:v.dimensions.width,sourceHeight:v.dimensions.height,targetWidth:_.dimensions.width,targetHeight:_.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&m.push(y)}return m}return e.edges}),u=ve(()=>[...s.value,...l.value]),c=ve(()=>{const m=[];for(const y of e.nodes)y.selected&&m.push(y);return m}),d=ve(()=>{const m=[];for(const y of e.edges)y.selected&&m.push(y);return m}),f=ve(()=>[...c.value,...d.value]),p=ve(()=>{const m=[];for(const y of e.nodes)y.dimensions.width&&y.dimensions.height&&y.handleBounds!==void 0&&m.push(y);return m}),g=ve(()=>s.value.length>0&&p.value.length===s.value.length);return{getNode:r,getEdge:o,getElements:u,getEdgeTypes:i,getNodeTypes:a,getEdges:l,getNodes:s,getSelectedElements:f,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:p,areNodesInitialized:g}}class Xt{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=ir())==null?void 0:t.appContext.app,r=(n==null?void 0:n.config.globalProperties.$vueFlowStorage)??Xt.instance;return Xt.instance=r??new Xt,n&&(n.config.globalProperties.$vueFlowStorage=Xt.instance),Xt.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const r=uy(),o=G1(r),i={};for(const[f,p]of Object.entries(o.hooks)){const g=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;i[g]=p.on}const a={};for(const[f,p]of Object.entries(o.hooks))a[f]=p.trigger;const s=ve(()=>{const f=new Map;for(const p of o.nodes)f.set(p.id,p);return f}),l=ve(()=>{const f=new Map;for(const p of o.edges)f.set(p.id,p);return f}),u=T$(o,s,l),c=n$(o,s,l);c.setState({...o,...n});const d={...i,...u,...c,...k0(o),nodeLookup:s,edgeLookup:l,emits:a,id:t,vueFlowVersion:"1.46.0",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function Ie(e){const t=Xt.getInstance(),n=c_(),r=typeof e=="object",o=r?e:{id:e},i=o.id,a=i??(n==null?void 0:n.vueFlowId);let s;if(n){const l=an(pf,null);typeof l<"u"&&l!==null&&(!a||l.id===a)&&(s=l)}if(s||a&&(s=t.get(a)),!s||a&&s.id!==a){const l=i??t.getId(),u=t.create(l,o);s=u,(n??s_(!0)).run(()=>{Se(u.applyDefault,(d,f,p)=>{const g=y=>{u.applyNodeChanges(y)},m=y=>{u.applyEdgeChanges(y)};d?(u.onNodesChange(g),u.onEdgesChange(m)):(u.hooks.value.nodesChange.off(g),u.hooks.value.edgesChange.off(m)),p(()=>{u.hooks.value.nodesChange.off(g),u.hooks.value.edgesChange.off(m)})},{immediate:!0}),no(()=>{if(s){const d=t.get(s.id);d?d.$destroy():uo(`No store instance found for id ${s.id} in storage.`)}})})}else r&&s.setState(o);if(n&&(en(pf,s),n.vueFlowId=s.id),r){const l=ir();(l==null?void 0:l.type.name)!=="VueFlow"&&s.emits.error(new De(Pe.USEVUEFLOW_OPTIONS))}return s}function R$(e){const{emits:t,dimensions:n}=Ie();let r;gt(()=>{const o=e.value,i=()=>{if(!o)return;const a=so(o);(a.width===0||a.height===0)&&t.error(new De(Pe.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:a.width||500,height:a.height||500}};i(),window.addEventListener("resize",i),o&&(r=new ResizeObserver(()=>i()),r.observe(o)),u_(()=>{window.removeEventListener("resize",i),r&&o&&r.unobserve(o)})})}const A$={name:"UserSelection",compatConfig:{MODE:3}},M$=Ee({...A$,props:{userSelectionRect:{}},setup(e){return(t,n)=>(A(),K("div",{class:"vue-flow__selection vue-flow__container",style:at({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),P$=["tabIndex"],O$={name:"NodesSelection",compatConfig:{MODE:3}},D$=Ee({...O$,setup(e){const{emits:t,viewport:n,getSelectedNodes:r,noPanClassName:o,disableKeyboardA11y:i,userSelectionActive:a}=Ie(),s=ly(),l=$e(null),u=iy({el:l,onStart(g){t.selectionDragStart(g),t.nodeDragStart(g)},onDrag(g){t.selectionDrag(g),t.nodeDrag(g)},onStop(g){t.selectionDragStop(g),t.nodeDragStop(g)}});gt(()=>{var g;i.value||(g=l.value)==null||g.focus({preventScroll:!0})});const c=ve(()=>Zc(r.value)),d=ve(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function f(g){t.selectionContextMenu({event:g,nodes:r.value})}function p(g){i||vn[g.key]&&(g.preventDefault(),s({x:vn[g.key].x,y:vn[g.key].y},g.shiftKey))}return(g,m)=>!Z(a)&&c.value.width&&c.value.height?(A(),K("div",{key:0,class:Fe(["vue-flow__nodesselection vue-flow__container",Z(o)]),style:at({transform:`translate(${Z(n).x}px,${Z(n).y}px) scale(${Z(n).zoom})`})},[h("div",{ref_key:"el",ref:l,class:Fe([{dragging:Z(u)},"vue-flow__nodesselection-rect"]),style:at(d.value),tabIndex:Z(i)?void 0:-1,onContextmenu:f,onKeydown:p},null,46,P$)],6)):se("",!0)}});function z$(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const V$={name:"Pane",compatConfig:{MODE:3}},B$=Ee({...V$,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:r,emits:o,userSelectionActive:i,removeSelectedElements:a,userSelectionRect:s,elementsSelectable:l,nodesSelectionActive:u,getSelectedEdges:c,getSelectedNodes:d,removeNodes:f,removeEdges:p,selectionMode:g,deleteKeyCode:m,multiSelectionKeyCode:y,multiSelectionActive:v,edgeLookup:_,nodeLookup:b,connectionLookup:$,defaultEdgeOptions:k,connectionStartHandle:P}=Ie(),q=$e(null),G=$e(new Set),Y=$e(new Set),B=$e(),R=Re(()=>l.value&&(e.isSelecting||i.value)),S=Re(()=>P.value!==null);let W=!1,w=!1;const I=jn(m,{actInsideInputWithModifier:!1}),E=jn(y);Se(I,M=>{M&&(f(d.value),p(c.value),u.value=!1)}),Se(E,M=>{v.value=M});function O(M,D){return H=>{H.target===D&&(M==null||M(H))}}function U(M){if(W||S.value){W=!1;return}o.paneClick(M),a(),u.value=!1}function z(M){M.preventDefault(),M.stopPropagation(),o.paneContextMenu(M)}function V(M){o.paneScroll(M)}function C(M){var D,H,J;if(B.value=(D=t.value)==null?void 0:D.getBoundingClientRect(),!l.value||!e.isSelecting||M.button!==0||M.target!==q.value||!B.value)return;(J=(H=M.target)==null?void 0:H.setPointerCapture)==null||J.call(H,M.pointerId);const{x:Q,y:ie}=z$(M,B.value);w=!0,W=!1,a(),s.value={width:0,height:0,startX:Q,startY:ie,x:Q,y:ie},o.selectionStart(M)}function ee(M){var D;if(!B.value||!s.value)return;W=!0;const{x:H,y:J}=pt(M,B.value),{startX:Q=0,startY:ie=0}=s.value,he={startX:Q,startY:ie,x:H<Q?H:Q,y:J<ie?J:ie,width:Math.abs(H-Q),height:Math.abs(J-ie)},pe=G.value,be=Y.value;G.value=new Set(Z_(n.value,he,r.value,g.value===Wc.Partial,!0).map(L=>L.id)),Y.value=new Set;const ge=((D=k.value)==null?void 0:D.selectable)??!0;for(const L of G.value){const T=$.value.get(L);if(T)for(const{edgeId:N}of T.values()){const X=_.value.get(N);X&&(X.selectable??ge)&&Y.value.add(N)}}if(!ff(pe,G.value)){const L=zt(b.value,G.value,!0);o.nodesChange(L)}if(!ff(be,Y.value)){const L=zt(_.value,Y.value);o.edgesChange(L)}s.value=he,i.value=!0,u.value=!1}function oe(M){var D;M.button!==0||!w||((D=M.target)==null||D.releasePointerCapture(M.pointerId),!i.value&&s.value&&M.target===q.value&&U(M),i.value=!1,s.value=null,u.value=G.value.size>0,o.selectionEnd(M),e.selectionKeyPressed&&(W=!1),w=!1)}return(M,D)=>(A(),K("div",{ref_key:"container",ref:q,class:Fe(["vue-flow__pane vue-flow__container",{selection:M.isSelecting}]),onClick:D[0]||(D[0]=H=>R.value?void 0:O(U,q.value)(H)),onContextmenu:D[1]||(D[1]=H=>O(z,q.value)(H)),onWheelPassive:D[2]||(D[2]=H=>O(V,q.value)(H)),onPointerenter:D[3]||(D[3]=H=>R.value?void 0:Z(o).paneMouseEnter(H)),onPointerdown:D[4]||(D[4]=H=>R.value?C(H):Z(o).paneMouseMove(H)),onPointermove:D[5]||(D[5]=H=>R.value?ee(H):Z(o).paneMouseMove(H)),onPointerup:D[6]||(D[6]=H=>R.value?oe(H):void 0),onPointerleave:D[7]||(D[7]=H=>Z(o).paneMouseLeave(H))},[it(M.$slots,"default"),Z(i)&&Z(s)?(A(),fe(M$,{key:0,"user-selection-rect":Z(s)},null,8,["user-selection-rect"])):se("",!0),Z(u)&&Z(d).length?(A(),fe(D$,{key:1})):se("",!0)],34))}}),L$={name:"Transform",compatConfig:{MODE:3}},F$=Ee({...L$,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:r}=Ie(),o=ve(()=>n.value?!r.value:!1),i=ve(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(a,s)=>(A(),K("div",{class:"vue-flow__transformationpane vue-flow__container",style:at({transform:i.value,opacity:o.value?0:void 0})},[it(a.$slots,"default")],4))}}),U$={name:"Viewport",compatConfig:{MODE:3}},G$=Ee({...U$,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:r,translateExtent:o,zoomActivationKeyCode:i,selectionKeyCode:a,panActivationKeyCode:s,panOnScroll:l,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:f,zoomOnPinch:p,zoomOnScroll:g,preventScrolling:m,noWheelClassName:y,noPanClassName:v,emits:_,connectionStartHandle:b,userSelectionActive:$,paneDragging:k,d3Zoom:P,d3Selection:q,d3ZoomHandler:G,viewport:Y,viewportRef:B,paneClickDistance:R}=Ie();R$(B);const S=Dr(!1),W=Dr(!1);let w=null,I=!1,E=0,O={x:0,y:0,zoom:0};const U=jn(s),z=jn(a),V=jn(i),C=Re(()=>(!z.value||z.value&&a.value===!0)&&(U.value||d.value)),ee=Re(()=>U.value||l.value),oe=Re(()=>z.value||a.value===!0&&C.value!==!0);gt(()=>{if(!B.value){uo("Viewport element is missing");return}const Q=B.value,ie=Q.getBoundingClientRect(),he=u2().clickDistance(R.value).scaleExtent([t.value,n.value]).translateExtent(o.value),pe=nt(Q).call(he),be=pe.on("wheel.zoom"),ge=yn.translate(r.value.x??0,r.value.y??0).scale(rn(r.value.zoom??1,t.value,n.value)),L=[[0,0],[ie.width,ie.height]],T=he.constrain()(ge,L,o.value);he.transform(pe,T),he.wheelDelta(Nc),P.value=he,q.value=pe,G.value=be,Y.value={x:T.x,y:T.y,zoom:T.k},he.on("start",N=>{var X;if(!N.sourceEvent)return null;E=N.sourceEvent.button,S.value=!0;const ne=H(N.transform);((X=N.sourceEvent)==null?void 0:X.type)==="mousedown"&&(k.value=!0),O=ne,_.viewportChangeStart(ne),_.moveStart({event:N,flowTransform:ne})}),he.on("end",N=>{if(!N.sourceEvent)return null;if(S.value=!1,k.value=!1,M(C.value,E??0)&&!I&&_.paneContextMenu(N.sourceEvent),I=!1,D(O,N.transform)){const X=H(N.transform);O=X,_.viewportChangeEnd(X),_.moveEnd({event:N,flowTransform:X})}}),he.filter(N=>{var X;const ne=V.value||g.value,de=p.value&&N.ctrlKey,te=N.button;if(te===1&&N.type==="mousedown"&&(J(N,"vue-flow__node")||J(N,"vue-flow__edge")))return!0;if(!C.value&&!ne&&!ee.value&&!f.value&&!p.value||$.value||!f.value&&N.type==="dblclick"||J(N,y.value)&&N.type==="wheel"||J(N,v.value)&&(N.type!=="wheel"||ee.value&&N.type==="wheel"&&!V.value)||!p.value&&N.ctrlKey&&N.type==="wheel"||!ne&&!ee.value&&!de&&N.type==="wheel")return!1;if(!p&&N.type==="touchstart"&&((X=N.touches)==null?void 0:X.length)>1)return N.preventDefault(),!1;if(!C.value&&(N.type==="mousedown"||N.type==="touchstart")||a.value===!0&&Array.isArray(d.value)&&d.value.includes(0)&&te===0||Array.isArray(d.value)&&!d.value.includes(te)&&(N.type==="mousedown"||N.type==="touchstart"))return!1;const ue=Array.isArray(d.value)&&d.value.includes(te)||a.value===!0&&Array.isArray(d.value)&&!d.value.includes(0)||!te||te<=1;return(!N.ctrlKey||U.value||N.type==="wheel")&&ue}),Se([$,C],()=>{$.value&&!S.value?he.on("zoom",null):$.value||he.on("zoom",N=>{Y.value={x:N.transform.x,y:N.transform.y,zoom:N.transform.k};const X=H(N.transform);I=M(C.value,E??0),_.viewportChange(X),_.move({event:N,flowTransform:X})})},{immediate:!0}),Se([$,ee,u,V,p,m,y],()=>{ee.value&&!V.value&&!$.value?pe.on("wheel.zoom",N=>{if(J(N,y.value))return!1;const X=V.value||g.value,ne=p.value&&N.ctrlKey;if(!(!m.value||ee.value||X||ne))return!1;N.preventDefault(),N.stopImmediatePropagation();const te=pe.property("__zoom").k||1,ue=er();if(!U.value&&N.ctrlKey&&p.value&&ue){const Je=dt(N),Ye=Nc(N),ze=te*2**Ye;he.scaleTo(pe,ze,Je,N);return}const ae=N.deltaMode===1?20:1;let me=u.value===Hn.Vertical?0:N.deltaX*ae,ke=u.value===Hn.Horizontal?0:N.deltaY*ae;!ue&&N.shiftKey&&u.value!==Hn.Vertical&&!me&&ke&&(me=ke,ke=0),he.translateBy(pe,-(me/te)*c.value,-(ke/te)*c.value);const Ce=H(pe.property("__zoom"));w&&clearTimeout(w),W.value?(_.move({event:N,flowTransform:Ce}),_.viewportChange(Ce),w=setTimeout(()=>{_.moveEnd({event:N,flowTransform:Ce}),_.viewportChangeEnd(Ce),W.value=!1},150)):(W.value=!0,_.moveStart({event:N,flowTransform:Ce}),_.viewportChangeStart(Ce))},{passive:!1}):typeof be<"u"&&pe.on("wheel.zoom",function(N,X){const ne=!m.value&&N.type==="wheel"&&!N.ctrlKey,de=V.value||g.value,te=p.value&&N.ctrlKey;if(!de&&!l.value&&!te&&N.type==="wheel"||ne||J(N,y.value))return null;N.preventDefault(),be.call(this,N,X)},{passive:!1})},{immediate:!0})});function M(Q,ie){return ie===2&&Array.isArray(Q)&&Q.includes(2)}function D(Q,ie){return Q.x!==ie.x&&!Number.isNaN(ie.x)||Q.y!==ie.y&&!Number.isNaN(ie.y)||Q.zoom!==ie.k&&!Number.isNaN(ie.k)}function H(Q){return{x:Q.x,y:Q.y,zoom:Q.k}}function J(Q,ie){return Q.target.closest(`.${ie}`)}return(Q,ie)=>(A(),K("div",{ref_key:"viewportRef",ref:B,class:"vue-flow__viewport vue-flow__container"},[x(B$,{"is-selecting":oe.value,"selection-key-pressed":Z(z),class:Fe({connecting:!!Z(b),dragging:Z(k),draggable:Z(d)===!0||Array.isArray(Z(d))&&Z(d).includes(0)})},{default:j(()=>[x(F$,null,{default:j(()=>[it(Q.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),H$=["id"],j$=["id"],Y$=["id"],X$={name:"A11yDescriptions",compatConfig:{MODE:3}},K$=Ee({...X$,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:r}=Ie();return(o,i)=>(A(),K(_e,null,[h("div",{id:`${Z(F_)}-${Z(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+re(Z(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,H$),h("div",{id:`${Z(U_)}-${Z(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,j$),Z(n)?se("",!0):(A(),K("div",{key:0,id:`${Z(v2)}-${Z(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},re(Z(r)),9,Y$))],64))}});function W$(){const e=Ie();Se(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function Z$(e,t,n){return n===le.Left?e-t:n===le.Right?e+t:e}function J$(e,t,n){return n===le.Top?e-t:n===le.Bottom?e+t:e}const ed=function({radius:e=10,centerX:t=0,centerY:n=0,position:r=le.Top,type:o}){return qe("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${o}`,cx:Z$(t,e,r),cy:J$(n,e,r),r:e,stroke:"transparent",fill:"transparent"})};ed.props=["radius","centerX","centerY","position","type"];ed.compatConfig={MODE:3};const yf=ed,Q$=Ee({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:r,edgeUpdaterRadius:o,emits:i,nodesSelectionActive:a,noPanClassName:s,getEdgeTypes:l,removeSelectedEdges:u,findEdge:c,findNode:d,isValidConnection:f,multiSelectionActive:p,disableKeyboardA11y:g,elementsSelectable:m,edgesUpdatable:y,edgesFocusable:v,hooks:_}=Ie(),b=ve(()=>c(e.id)),{emit:$,on:k}=G2(b.value,i),P=an(co),q=ir(),G=$e(!1),Y=$e(!1),B=$e(""),R=$e(null),S=$e("source"),W=$e(null),w=Re(()=>typeof b.value.selectable>"u"?m.value:b.value.selectable),I=Re(()=>typeof b.value.updatable>"u"?y.value:b.value.updatable),E=Re(()=>typeof b.value.focusable>"u"?v.value:b.value.focusable);en(L2,e.id),en(F2,W);const O=ve(()=>b.value.class instanceof Function?b.value.class(b.value):b.value.class),U=ve(()=>b.value.style instanceof Function?b.value.style(b.value):b.value.style),z=ve(()=>{const T=b.value.type||"default",N=P==null?void 0:P[`edge-${T}`];if(N)return N;let X=b.value.template??l.value[T];if(typeof X=="string"&&q){const ne=Object.keys(q.appContext.components);ne&&ne.includes(T)&&(X=F(T,!1))}return X&&typeof X!="string"?X:(i.error(new De(Pe.EDGE_TYPE_MISSING,X)),!1)}),{handlePointerDown:V}=ay({nodeId:B,handleId:R,type:S,isValidConnection:f,edgeUpdaterType:S,onEdgeUpdate:oe,onEdgeUpdateEnd:M});return()=>{const T=d(b.value.source),N=d(b.value.target),X="pathOptions"in b.value?b.value.pathOptions:{};if(!T&&!N)return i.error(new De(Pe.EDGE_SOURCE_TARGET_MISSING,b.value.id,b.value.source,b.value.target)),null;if(!T)return i.error(new De(Pe.EDGE_SOURCE_MISSING,b.value.id,b.value.source)),null;if(!N)return i.error(new De(Pe.EDGE_TARGET_MISSING,b.value.id,b.value.target)),null;if(!b.value||b.value.hidden||T.hidden||N.hidden)return null;let ne;r.value===Nt.Strict?ne=T.handleBounds.source:ne=[...T.handleBounds.source||[],...T.handleBounds.target||[]];const de=af(ne,b.value.sourceHandle);let te;r.value===Nt.Strict?te=N.handleBounds.target:te=[...N.handleBounds.target||[],...N.handleBounds.source||[]];const ue=af(te,b.value.targetHandle),ae=(de==null?void 0:de.position)||le.Bottom,me=(ue==null?void 0:ue.position)||le.Top,{x:ke,y:Ce}=bn(T,de,ae),{x:Je,y:Ye}=bn(N,ue,me);return b.value.sourceX=ke,b.value.sourceY=Ce,b.value.targetX=Je,b.value.targetY=Ye,qe("g",{ref:W,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${z.value===!1?"default":b.value.type||"default"}`,s.value,O.value,{updating:G.value,selected:b.value.selected,animated:b.value.animated,inactive:!w.value&&!_.value.edgeClick.hasListeners()}],tabIndex:E.value?0:void 0,"aria-label":b.value.ariaLabel===null?void 0:b.value.ariaLabel??`Edge from ${b.value.source} to ${b.value.target}`,"aria-describedby":E.value?`${U_}-${t}`:void 0,"aria-roledescription":"edge",role:E.value?"group":"img",...b.value.domAttributes,onClick:H,onContextmenu:J,onDblclick:Q,onMouseenter:ie,onMousemove:he,onMouseleave:pe,onKeyDown:E.value?L:void 0},[Y.value?null:qe(z.value===!1?l.value.default:z.value,{id:e.id,sourceNode:T,targetNode:N,source:b.value.source,target:b.value.target,type:b.value.type,updatable:I.value,selected:b.value.selected,animated:b.value.animated,label:b.value.label,labelStyle:b.value.labelStyle,labelShowBg:b.value.labelShowBg,labelBgStyle:b.value.labelBgStyle,labelBgPadding:b.value.labelBgPadding,labelBgBorderRadius:b.value.labelBgBorderRadius,data:b.value.data,events:{...b.value.events,...k},style:U.value,markerStart:`url('#${Qn(b.value.markerStart,t)}')`,markerEnd:`url('#${Qn(b.value.markerEnd,t)}')`,sourcePosition:ae,targetPosition:me,sourceX:ke,sourceY:Ce,targetX:Je,targetY:Ye,sourceHandleId:b.value.sourceHandle,targetHandleId:b.value.targetHandle,interactionWidth:b.value.interactionWidth,...X}),[I.value==="source"||I.value===!0?[qe("g",{onMousedown:be,onMouseenter:C,onMouseout:ee},qe(yf,{position:ae,centerX:ke,centerY:Ce,radius:o.value,type:"source","data-type":"source"}))]:null,I.value==="target"||I.value===!0?[qe("g",{onMousedown:ge,onMouseenter:C,onMouseout:ee},qe(yf,{position:me,centerX:Je,centerY:Ye,radius:o.value,type:"target","data-type":"target"}))]:null]])};function C(){G.value=!0}function ee(){G.value=!1}function oe(T,N){$.update({event:T,edge:b.value,connection:N})}function M(T){$.updateEnd({event:T,edge:b.value}),Y.value=!1}function D(T,N){T.button===0&&(Y.value=!0,B.value=N?b.value.target:b.value.source,R.value=(N?b.value.targetHandle:b.value.sourceHandle)??null,S.value=N?"target":"source",$.updateStart({event:T,edge:b.value}),V(T))}function H(T){var N;const X={event:T,edge:b.value};w.value&&(a.value=!1,b.value.selected&&p.value?(u([b.value]),(N=W.value)==null||N.blur()):n([b.value])),$.click(X)}function J(T){$.contextMenu({event:T,edge:b.value})}function Q(T){$.doubleClick({event:T,edge:b.value})}function ie(T){$.mouseEnter({event:T,edge:b.value})}function he(T){$.mouseMove({event:T,edge:b.value})}function pe(T){$.mouseLeave({event:T,edge:b.value})}function be(T){D(T,!0)}function ge(T){D(T,!1)}function L(T){var N;!g.value&&G_.includes(T.key)&&w.value&&(T.key==="Escape"?((N=W.value)==null||N.blur(),u([c(e.id)])):n([c(e.id)]))}}}),eE=Q$,tE=Ee({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:r,connectionEndHandle:o,connectionPosition:i,connectionLineType:a,connectionLineStyle:s,connectionLineOptions:l,connectionStatus:u,viewport:c,findNode:d}=Ie(),f=(e=an(co))==null?void 0:e["connection-line"],p=ve(()=>{var _;return d((_=r.value)==null?void 0:_.nodeId)}),g=ve(()=>{var _;return d((_=o.value)==null?void 0:_.nodeId)??null}),m=ve(()=>({x:(i.value.x-c.value.x)/c.value.zoom,y:(i.value.y-c.value.y)/c.value.zoom})),y=ve(()=>l.value.markerStart?`url(#${Qn(l.value.markerStart,t)})`:""),v=ve(()=>l.value.markerEnd?`url(#${Qn(l.value.markerEnd,t)})`:"");return()=>{var _,b,$;if(!p.value||!r.value)return null;const k=r.value.id,P=r.value.type,q=p.value.handleBounds;let G=(q==null?void 0:q[P])??[];if(n.value===Nt.Loose){const U=(q==null?void 0:q[P==="source"?"target":"source"])??[];G=[...G,...U]}if(!G)return null;const Y=(k?G.find(U=>U.id===k):G[0])??null,B=(Y==null?void 0:Y.position)??le.Top,{x:R,y:S}=bn(p.value,Y,B);let W=null;g.value&&(n.value===Nt.Strict?W=((_=g.value.handleBounds[P==="source"?"target":"source"])==null?void 0:_.find(U=>{var z;return U.id===((z=o.value)==null?void 0:z.id)}))||null:W=((b=[...g.value.handleBounds.source??[],...g.value.handleBounds.target??[]])==null?void 0:b.find(U=>{var z;return U.id===((z=o.value)==null?void 0:z.id)}))||null);const w=(($=o.value)==null?void 0:$.position)??(B?Ic[B]:null);if(!B||!w)return null;const I=a.value??l.value.type??jt.Bezier;let E="";const O={sourceX:R,sourceY:S,sourcePosition:B,targetX:m.value.x,targetY:m.value.y,targetPosition:w};return I===jt.Bezier?[E]=fy(O):I===jt.Step?[E]=Tc({...O,borderRadius:0}):I===jt.SmoothStep?[E]=Tc(O):I===jt.SimpleBezier?[E]=py(O):E=`M${R},${S} ${m.value.x},${m.value.y}`,qe("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},qe("g",{class:"vue-flow__connection"},f?qe(f,{sourceX:R,sourceY:S,sourcePosition:B,targetX:m.value.x,targetY:m.value.y,targetPosition:w,sourceNode:p.value,sourceHandle:Y,targetNode:g.value,targetHandle:W,markerEnd:v.value,markerStart:y.value,connectionStatus:u.value}):qe("path",{d:E,class:[l.value.class,u,"vue-flow__connection-path"],style:{...s.value,...l.value.style},"marker-end":v.value,"marker-start":y.value})))}}}),nE=tE,rE=["id","markerWidth","markerHeight","markerUnits","orient"],oE={name:"MarkerType",compatConfig:{MODE:3}},iE=Ee({...oE,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(A(),K("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===Z(kc).ArrowClosed?(A(),K("polyline",{key:0,style:at({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):se("",!0),t.type===Z(kc).Arrow?(A(),K("polyline",{key:1,style:at({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):se("",!0)],8,rE))}}),aE={class:"vue-flow__marker vue-flow__container","aria-hidden":"true"},sE={name:"MarkerDefinitions",compatConfig:{MODE:3}},lE=Ee({...sE,setup(e){const{id:t,edges:n,connectionLineOptions:r,defaultMarkerColor:o}=Ie(),i=ve(()=>{const a=new Set,s=[],l=u=>{if(u){const c=Qn(u,t);a.has(c)||(typeof u=="object"?s.push({...u,id:c,color:u.color||o.value}):s.push({id:c,color:o.value,type:u}),a.add(c))}};for(const u of[r.value.markerEnd,r.value.markerStart])l(u);for(const u of n.value)for(const c of[u.markerStart,u.markerEnd])l(c);return s.sort((u,c)=>u.id.localeCompare(c.id))});return(a,s)=>(A(),K("svg",aE,[h("defs",null,[(A(!0),K(_e,null,xe(i.value,l=>(A(),fe(iE,{id:l.id,key:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,"stroke-width":l.strokeWidth,orient:l.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),uE={name:"Edges",compatConfig:{MODE:3}},cE=Ee({...uE,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:r}=Ie();return(o,i)=>(A(),K(_e,null,[x(lE),(A(!0),K(_e,null,xe(Z(n),a=>(A(),K("svg",{key:a.id,class:"vue-flow__edges vue-flow__container",style:at({zIndex:Z(N2)(a,Z(t),Z(r))})},[x(Z(eE),{id:a.id},null,8,["id"])],4))),128)),x(Z(nE))],64))}}),dE=Ee({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:r,nodesSelectionActive:o,multiSelectionActive:i,emits:a,removeSelectedNodes:s,addSelectedNodes:l,updateNodeDimensions:u,onUpdateNodeInternals:c,getNodeTypes:d,nodeExtent:f,elevateNodesOnSelect:p,disableKeyboardA11y:g,ariaLiveMessage:m,snapToGrid:y,snapGrid:v,nodeDragThreshold:_,nodesDraggable:b,elementsSelectable:$,nodesConnectable:k,nodesFocusable:P,hooks:q}=Ie(),G=$e(null);en(oy,G),en(ry,e.id);const Y=an(co),B=ir(),R=ly(),{node:S,parentNode:W}=sy(e.id),{emit:w,on:I}=X2(S,a),E=Re(()=>typeof S.draggable>"u"?b.value:S.draggable),O=Re(()=>typeof S.selectable>"u"?$.value:S.selectable),U=Re(()=>typeof S.connectable>"u"?k.value:S.connectable),z=Re(()=>typeof S.focusable>"u"?P.value:S.focusable),V=ve(()=>O.value||E.value||q.value.nodeClick.hasListeners()||q.value.nodeDoubleClick.hasListeners()||q.value.nodeMouseEnter.hasListeners()||q.value.nodeMouseMove.hasListeners()||q.value.nodeMouseLeave.hasListeners()),C=Re(()=>!!S.dimensions.width&&!!S.dimensions.height),ee=ve(()=>{const N=S.type||"default",X=Y==null?void 0:Y[`node-${N}`];if(X)return X;let ne=S.template||d.value[N];if(typeof ne=="string"&&B){const de=Object.keys(B.appContext.components);de&&de.includes(N)&&(ne=F(N,!1))}return ne&&typeof ne!="string"?ne:(a.error(new De(Pe.NODE_TYPE_MISSING,ne)),!1)}),oe=iy({id:e.id,el:G,disabled:()=>!E.value,selectable:O,dragHandle:()=>S.dragHandle,onStart(N){w.dragStart(N)},onDrag(N){w.drag(N)},onStop(N){w.dragStop(N)},onClick(N){L(N)}}),M=ve(()=>S.class instanceof Function?S.class(S):S.class),D=ve(()=>{const N=(S.style instanceof Function?S.style(S):S.style)||{},X=S.width instanceof Function?S.width(S):S.width,ne=S.height instanceof Function?S.height(S):S.height;return!N.width&&X&&(N.width=typeof X=="string"?X:`${X}px`),!N.height&&ne&&(N.height=typeof ne=="string"?ne:`${ne}px`),N}),H=Re(()=>Number(S.zIndex??D.value.zIndex??0));return c(N=>{(N.includes(e.id)||!N.length)&&Q()}),gt(()=>{Se(()=>S.hidden,(N=!1,X,ne)=>{!N&&G.value&&(e.resizeObserver.observe(G.value),ne(()=>{G.value&&e.resizeObserver.unobserve(G.value)}))},{immediate:!0,flush:"post"})}),Se([()=>S.type,()=>S.sourcePosition,()=>S.targetPosition],()=>{St(()=>{u([{id:e.id,nodeElement:G.value,forceUpdate:!0}])})}),Se([()=>S.position.x,()=>S.position.y,()=>{var N;return(N=W.value)==null?void 0:N.computedPosition.x},()=>{var N;return(N=W.value)==null?void 0:N.computedPosition.y},()=>{var N;return(N=W.value)==null?void 0:N.computedPosition.z},H,()=>S.selected,()=>S.dimensions.height,()=>S.dimensions.width,()=>{var N;return(N=W.value)==null?void 0:N.dimensions.height},()=>{var N;return(N=W.value)==null?void 0:N.dimensions.width}],([N,X,ne,de,te,ue])=>{const ae={x:N,y:X,z:ue+(p.value&&S.selected?1e3:0)};typeof ne<"u"&&typeof de<"u"?S.computedPosition=w2({x:ne,y:de,z:te},ae):S.computedPosition=ae},{flush:"post",immediate:!0}),Se([()=>S.extent,f],([N,X],[ne,de])=>{(N!==ne||X!==de)&&J()}),S.extent==="parent"||typeof S.extent=="object"&&"range"in S.extent&&S.extent.range==="parent"?gc(()=>C).toBe(!0).then(J):J(),()=>S.hidden?null:qe("div",{ref:G,"data-id":S.id,class:["vue-flow__node",`vue-flow__node-${ee.value===!1?"default":S.type||"default"}`,{[n.value]:E.value,dragging:oe==null?void 0:oe.value,draggable:E.value,selected:S.selected,selectable:O.value,parent:S.isParent},M.value],style:{visibility:C.value?"visible":"hidden",zIndex:S.computedPosition.z??H.value,transform:`translate(${S.computedPosition.x}px,${S.computedPosition.y}px)`,pointerEvents:V.value?"all":"none",...D.value},tabIndex:z.value?0:void 0,role:z.value?"group":void 0,"aria-describedby":g.value?void 0:`${F_}-${t}`,"aria-label":S.ariaLabel,"aria-roledescription":"node",...S.domAttributes,onMouseenter:ie,onMousemove:he,onMouseleave:pe,onContextmenu:be,onClick:L,onDblclick:ge,onKeydown:T},[qe(ee.value===!1?d.value.default:ee.value,{id:S.id,type:S.type,data:S.data,events:{...S.events,...I},selected:S.selected,resizing:S.resizing,dragging:oe.value,connectable:U.value,position:S.computedPosition,dimensions:S.dimensions,isValidTargetPos:S.isValidTargetPos,isValidSourcePos:S.isValidSourcePos,parent:S.parentNode,parentNodeId:S.parentNode,zIndex:S.computedPosition.z??H.value,targetPosition:S.targetPosition,sourcePosition:S.sourcePosition,label:S.label,dragHandle:S.dragHandle,onUpdateNodeInternals:Q})]);function J(){const N=S.computedPosition,{computedPosition:X,position:ne}=Jc(S,y.value?lo(N,v.value):N,a.error,f.value,W.value);(S.computedPosition.x!==X.x||S.computedPosition.y!==X.y)&&(S.computedPosition={...S.computedPosition,...X}),(S.position.x!==ne.x||S.position.y!==ne.y)&&(S.position=ne)}function Q(){G.value&&u([{id:e.id,nodeElement:G.value,forceUpdate:!0}])}function ie(N){oe!=null&&oe.value||w.mouseEnter({event:N,node:S})}function he(N){oe!=null&&oe.value||w.mouseMove({event:N,node:S})}function pe(N){oe!=null&&oe.value||w.mouseLeave({event:N,node:S})}function be(N){return w.contextMenu({event:N,node:S})}function ge(N){return w.doubleClick({event:N,node:S})}function L(N){O.value&&(!r.value||!E.value||_.value>0)&&qc(S,i.value,l,s,o,!1,G.value),w.click({event:N,node:S})}function T(N){if(!(Sc(N)||g.value))if(G_.includes(N.key)&&O.value){const X=N.key==="Escape";qc(S,i.value,l,s,o,X,G.value)}else E.value&&S.selected&&vn[N.key]&&(N.preventDefault(),m.value=`Moved selected node ${N.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~S.position.x}, y: ${~~S.position.y}`,R({x:vn[N.key].x,y:vn[N.key].y},N.shiftKey))}}}),fE=dE;function pE(e={includeHiddenNodes:!1}){const{nodes:t}=Ie();return ve(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const hE={class:"vue-flow__nodes vue-flow__container"},vE={name:"Nodes",compatConfig:{MODE:3}},gE=Ee({...vE,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:r}=Ie(),o=pE(),i=$e();return Se(o,a=>{a&&St(()=>{r.nodesInitialized(t.value)})},{immediate:!0}),gt(()=>{i.value=new ResizeObserver(a=>{const s=a.map(l=>({id:l.target.getAttribute("data-id"),nodeElement:l.target,forceUpdate:!0}));St(()=>n(s))})}),u_(()=>{var a;return(a=i.value)==null?void 0:a.disconnect()}),(a,s)=>(A(),K("div",hE,[i.value?(A(!0),K(_e,{key:0},xe(Z(t),(l,u,c,d)=>{const f=[l.id];if(d&&d.key===l.id&&W1(d,f))return d;const p=(A(),fe(Z(fE),{id:l.id,key:l.id,"resize-observer":i.value},null,8,["id","resize-observer"]));return p.memo=f,p},s,0),128)):se("",!0)]))}});function mE(){const{emits:e}=Ie();gt(()=>{if(ny()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new De(Pe.MISSING_STYLES))}})}const _E=h("div",{class:"vue-flow__edge-labels"},null,-1),yE={name:"VueFlow",compatConfig:{MODE:3}},bE=Ee({...yE,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const r=e,o=l_(),i=Oo(r,"modelValue",n),a=Oo(r,"nodes",n),s=Oo(r,"edges",n),l=Ie(r),u=J2({modelValue:i,nodes:a,edges:s},r,l);return e$(n,l.hooks),W$(),mE(),en(co,o),H1(()=>{u()}),t(l),(c,d)=>(A(),K("div",{ref:Z(l).vueFlowRef,class:"vue-flow"},[x(G$,null,{default:j(()=>[x(cE),_E,x(gE),it(c.$slots,"zoom-pane")]),_:3}),it(c.$slots,"default"),x(K$)],512))}}),xE={name:"Panel",compatConfig:{MODE:3}},vy=Ee({...xE,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=Ie(),r=ve(()=>`${t.position}`.split("-"));return(o,i)=>(A(),K("div",{class:Fe(["vue-flow__panel",r.value]),style:at({pointerEvents:Z(n)?"none":"all"})},[it(o.$slots,"default")],6))}});var Et=(e=>(e.Lines="lines",e.Dots="dots",e))(Et||{});const gy=function({dimensions:e,size:t,color:n}){return qe("path",{stroke:n,"stroke-width":t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})},my=function({radius:e,color:t}){return qe("circle",{cx:e,cy:e,r:e,fill:t})};Et.Lines+"",Et.Dots+"";const wE={[Et.Dots]:"#81818a",[Et.Lines]:"#eee"},$E=["id","x","y","width","height","patternTransform"],EE={key:2,height:"100",width:"100"},kE=["fill"],SE=["x","y","fill"],CE={name:"Background",compatConfig:{MODE:3}},NE=Ee({...CE,props:{id:{},variant:{default:()=>Et.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:0}},setup(e){const{id:t,viewport:n}=Ie(),r=ve(()=>{const a=n.value.zoom,[s,l]=Array.isArray(e.gap)?e.gap:[e.gap,e.gap],u=[s*a||1,l*a||1],c=e.size*a,[d,f]=Array.isArray(e.offset)?e.offset:[e.offset,e.offset],p=[d*a||1+u[0]/2,f*a||1+u[1]/2];return{scaledGap:u,offset:p,size:c}}),o=Re(()=>`pattern-${t}${e.id?`-${e.id}`:""}`),i=Re(()=>e.color||e.patternColor||wE[e.variant||Et.Dots]);return(a,s)=>(A(),K("svg",{class:"vue-flow__background vue-flow__container",style:at({height:`${a.height>100?100:a.height}%`,width:`${a.width>100?100:a.width}%`})},[it(a.$slots,"pattern-container",{id:o.value},()=>[h("pattern",{id:o.value,x:Z(n).x%r.value.scaledGap[0],y:Z(n).y%r.value.scaledGap[1],width:r.value.scaledGap[0],height:r.value.scaledGap[1],patternTransform:`translate(-${r.value.offset[0]},-${r.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[it(a.$slots,"pattern",{},()=>[a.variant===Z(Et).Lines?(A(),fe(Z(gy),{key:0,size:a.lineWidth,color:i.value,dimensions:r.value.scaledGap},null,8,["size","color","dimensions"])):a.variant===Z(Et).Dots?(A(),fe(Z(my),{key:1,color:i.value,radius:r.value.size/2},null,8,["color","radius"])):se("",!0),a.bgColor?(A(),K("svg",EE,[h("rect",{width:"100%",height:"100%",fill:a.bgColor},null,8,kE)])):se("",!0)])],8,$E)]),h("rect",{x:a.x,y:a.y,width:"100%",height:"100%",fill:`url(#${o.value})`},null,8,SE),it(a.$slots,"default",{id:o.value})],4))}});var IE={value:()=>{}};function td(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ar(n)}function Ar(e){this._=e}function qE(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ar.prototype=td.prototype={constructor:Ar,on:function(e,t){var n=this._,r=qE(e+"",n),o,i=-1,a=r.length;if(arguments.length<2){for(;++i<a;)if((o=(e=r[i]).type)&&(o=TE(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(o=(e=r[i]).type)n[o]=bf(n[o],e.name,t);else if(t==null)for(o in n)n[o]=bf(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ar(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function TE(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function bf(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=IE,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Rc="http://www.w3.org/1999/xhtml";const xf={svg:"http://www.w3.org/2000/svg",xhtml:Rc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function go(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),xf.hasOwnProperty(t)?{space:xf[t],local:e}:e}function RE(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Rc&&t.documentElement.namespaceURI===Rc?t.createElement(e):t.createElementNS(n,e)}}function AE(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function _y(e){var t=go(e);return(t.local?AE:RE)(t)}function ME(){}function nd(e){return e==null?ME:function(){return this.querySelector(e)}}function PE(e){typeof e!="function"&&(e=nd(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,s=r[o]=new Array(a),l,u,c=0;c<a;++c)(l=i[c])&&(u=e.call(l,l.__data__,c,i))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new Ze(r,this._parents)}function OE(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function DE(){return[]}function yy(e){return e==null?DE:function(){return this.querySelectorAll(e)}}function zE(e){return function(){return OE(e.apply(this,arguments))}}function VE(e){typeof e=="function"?e=zE(e):e=yy(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var a=t[i],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(r.push(e.call(l,l.__data__,u,a)),o.push(l));return new Ze(r,o)}function by(e){return function(){return this.matches(e)}}function xy(e){return function(t){return t.matches(e)}}var BE=Array.prototype.find;function LE(e){return function(){return BE.call(this.children,e)}}function FE(){return this.firstElementChild}function UE(e){return this.select(e==null?FE:LE(typeof e=="function"?e:xy(e)))}var GE=Array.prototype.filter;function HE(){return Array.from(this.children)}function jE(e){return function(){return GE.call(this.children,e)}}function YE(e){return this.selectAll(e==null?HE:jE(typeof e=="function"?e:xy(e)))}function XE(e){typeof e!="function"&&(e=by(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,s=r[o]=[],l,u=0;u<a;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&s.push(l);return new Ze(r,this._parents)}function wy(e){return new Array(e.length)}function KE(){return new Ze(this._enter||this._groups.map(wy),this._parents)}function Kr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Kr.prototype={constructor:Kr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function WE(e){return function(){return e}}function ZE(e,t,n,r,o,i){for(var a=0,s,l=t.length,u=i.length;a<u;++a)(s=t[a])?(s.__data__=i[a],r[a]=s):n[a]=new Kr(e,i[a]);for(;a<l;++a)(s=t[a])&&(o[a]=s)}function JE(e,t,n,r,o,i,a){var s,l,u=new Map,c=t.length,d=i.length,f=new Array(c),p;for(s=0;s<c;++s)(l=t[s])&&(f[s]=p=a.call(l,l.__data__,s,t)+"",u.has(p)?o[s]=l:u.set(p,l));for(s=0;s<d;++s)p=a.call(e,i[s],s,i)+"",(l=u.get(p))?(r[s]=l,l.__data__=i[s],u.delete(p)):n[s]=new Kr(e,i[s]);for(s=0;s<c;++s)(l=t[s])&&u.get(f[s])===l&&(o[s]=l)}function QE(e){return e.__data__}function ek(e,t){if(!arguments.length)return Array.from(this,QE);var n=t?JE:ZE,r=this._parents,o=this._groups;typeof e!="function"&&(e=WE(e));for(var i=o.length,a=new Array(i),s=new Array(i),l=new Array(i),u=0;u<i;++u){var c=r[u],d=o[u],f=d.length,p=tk(e.call(c,c&&c.__data__,u,r)),g=p.length,m=s[u]=new Array(g),y=a[u]=new Array(g),v=l[u]=new Array(f);n(c,d,m,y,v,p,t);for(var _=0,b=0,$,k;_<g;++_)if($=m[_]){for(_>=b&&(b=_+1);!(k=y[b])&&++b<g;);$._next=k||null}}return a=new Ze(a,r),a._enter=s,a._exit=l,a}function tk(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function nk(){return new Ze(this._exit||this._groups.map(wy),this._parents)}function rk(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function ok(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,a=Math.min(o,i),s=new Array(o),l=0;l<a;++l)for(var u=n[l],c=r[l],d=u.length,f=s[l]=new Array(d),p,g=0;g<d;++g)(p=u[g]||c[g])&&(f[g]=p);for(;l<o;++l)s[l]=n[l];return new Ze(s,this._parents)}function ik(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],a;--o>=0;)(a=r[o])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function ak(e){e||(e=sk);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a=n[i],s=a.length,l=o[i]=new Array(s),u,c=0;c<s;++c)(u=a[c])&&(l[c]=u);l.sort(t)}return new Ze(o,this._parents).order()}function sk(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function lk(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function uk(){return Array.from(this)}function ck(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null}function dk(){let e=0;for(const t of this)++e;return e}function fk(){return!this.node()}function pk(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,a=o.length,s;i<a;++i)(s=o[i])&&e.call(s,s.__data__,i,o);return this}function hk(e){return function(){this.removeAttribute(e)}}function vk(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gk(e,t){return function(){this.setAttribute(e,t)}}function mk(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function _k(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function yk(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function bk(e,t){var n=go(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?vk:hk:typeof t=="function"?n.local?yk:_k:n.local?mk:gk)(n,t))}function $y(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function xk(e){return function(){this.style.removeProperty(e)}}function wk(e,t,n){return function(){this.style.setProperty(e,t,n)}}function $k(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Ek(e,t,n){return arguments.length>1?this.each((t==null?xk:typeof t=="function"?$k:wk)(e,t,n??"")):xn(this.node(),e)}function xn(e,t){return e.style.getPropertyValue(t)||$y(e).getComputedStyle(e,null).getPropertyValue(t)}function kk(e){return function(){delete this[e]}}function Sk(e,t){return function(){this[e]=t}}function Ck(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Nk(e,t){return arguments.length>1?this.each((t==null?kk:typeof t=="function"?Ck:Sk)(e,t)):this.node()[e]}function Ey(e){return e.trim().split(/^|\s+/)}function rd(e){return e.classList||new ky(e)}function ky(e){this._node=e,this._names=Ey(e.getAttribute("class")||"")}ky.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Sy(e,t){for(var n=rd(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Cy(e,t){for(var n=rd(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Ik(e){return function(){Sy(this,e)}}function qk(e){return function(){Cy(this,e)}}function Tk(e,t){return function(){(t.apply(this,arguments)?Sy:Cy)(this,e)}}function Rk(e,t){var n=Ey(e+"");if(arguments.length<2){for(var r=rd(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?Tk:t?Ik:qk)(n,t))}function Ak(){this.textContent=""}function Mk(e){return function(){this.textContent=e}}function Pk(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ok(e){return arguments.length?this.each(e==null?Ak:(typeof e=="function"?Pk:Mk)(e)):this.node().textContent}function Dk(){this.innerHTML=""}function zk(e){return function(){this.innerHTML=e}}function Vk(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Bk(e){return arguments.length?this.each(e==null?Dk:(typeof e=="function"?Vk:zk)(e)):this.node().innerHTML}function Lk(){this.nextSibling&&this.parentNode.appendChild(this)}function Fk(){return this.each(Lk)}function Uk(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Gk(){return this.each(Uk)}function Hk(e){var t=typeof e=="function"?e:_y(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function jk(){return null}function Yk(e,t){var n=typeof e=="function"?e:_y(e),r=t==null?jk:typeof t=="function"?t:nd(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Xk(){var e=this.parentNode;e&&e.removeChild(this)}function Kk(){return this.each(Xk)}function Wk(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Zk(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Jk(e){return this.select(e?Zk:Wk)}function Qk(e){return arguments.length?this.property("__data__",e):this.node().__data__}function eS(e){return function(t){e.call(this,t,this.__data__)}}function tS(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function nS(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function rS(e,t,n){return function(){var r=this.__on,o,i=eS(t);if(r){for(var a=0,s=r.length;a<s;++a)if((o=r[a]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function oS(e,t,n){var r=tS(e+""),o,i=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(o=0,c=s[l];o<i;++o)if((a=r[o]).type===c.type&&a.name===c.name)return c.value}return}for(s=t?rS:nS,o=0;o<i;++o)this.each(s(r[o],t,n));return this}function Ny(e,t,n){var r=$y(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function iS(e,t){return function(){return Ny(this,e,t)}}function aS(e,t){return function(){return Ny(this,e,t.apply(this,arguments))}}function sS(e,t){return this.each((typeof t=="function"?aS:iS)(e,t))}function*lS(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,a;o<i;++o)(a=r[o])&&(yield a)}var Iy=[null];function Ze(e,t){this._groups=e,this._parents=t}function lr(){return new Ze([[document.documentElement]],Iy)}function uS(){return this}Ze.prototype=lr.prototype={constructor:Ze,select:PE,selectAll:VE,selectChild:UE,selectChildren:YE,filter:XE,data:ek,enter:KE,exit:nk,join:rk,merge:ok,selection:uS,order:ik,sort:ak,call:lk,nodes:uk,node:ck,size:dk,empty:fk,each:pk,attr:bk,style:Ek,property:Nk,classed:Rk,text:Ok,html:Bk,raise:Fk,lower:Gk,append:Hk,insert:Yk,remove:Kk,clone:Jk,datum:Qk,on:oS,dispatch:sS,[Symbol.iterator]:lS};function Bt(e){return typeof e=="string"?new Ze([[document.querySelector(e)]],[document.documentElement]):new Ze([[e]],Iy)}function cS(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Dt(e,t){if(e=cS(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const Ac={capture:!0,passive:!1};function Mc(e){e.preventDefault(),e.stopImmediatePropagation()}function dS(e){var t=e.document.documentElement,n=Bt(e).on("dragstart.drag",Mc,Ac);"onselectstart"in t?n.on("selectstart.drag",Mc,Ac):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function fS(e,t){var n=e.document.documentElement,r=Bt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Mc,Ac),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function od(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function qy(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ur(){}var tr=.7,Wr=1/tr,gn="\\s*([+-]?\\d+)\\s*",nr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pS=/^#([0-9a-f]{3,8})$/,hS=new RegExp(`^rgb\\(${gn},${gn},${gn}\\)$`),vS=new RegExp(`^rgb\\(${vt},${vt},${vt}\\)$`),gS=new RegExp(`^rgba\\(${gn},${gn},${gn},${nr}\\)$`),mS=new RegExp(`^rgba\\(${vt},${vt},${vt},${nr}\\)$`),_S=new RegExp(`^hsl\\(${nr},${vt},${vt}\\)$`),yS=new RegExp(`^hsla\\(${nr},${vt},${vt},${nr}\\)$`),wf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};od(ur,rr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$f,formatHex:$f,formatHex8:bS,formatHsl:xS,formatRgb:Ef,toString:Ef});function $f(){return this.rgb().formatHex()}function bS(){return this.rgb().formatHex8()}function xS(){return Ty(this).formatHsl()}function Ef(){return this.rgb().formatRgb()}function rr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=pS.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?kf(t):n===3?new He(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?$r(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?$r(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hS.exec(e))?new He(t[1],t[2],t[3],1):(t=vS.exec(e))?new He(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=gS.exec(e))?$r(t[1],t[2],t[3],t[4]):(t=mS.exec(e))?$r(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_S.exec(e))?Nf(t[1],t[2]/100,t[3]/100,1):(t=yS.exec(e))?Nf(t[1],t[2]/100,t[3]/100,t[4]):wf.hasOwnProperty(e)?kf(wf[e]):e==="transparent"?new He(NaN,NaN,NaN,0):null}function kf(e){return new He(e>>16&255,e>>8&255,e&255,1)}function $r(e,t,n,r){return r<=0&&(e=t=n=NaN),new He(e,t,n,r)}function wS(e){return e instanceof ur||(e=rr(e)),e?(e=e.rgb(),new He(e.r,e.g,e.b,e.opacity)):new He}function Pc(e,t,n,r){return arguments.length===1?wS(e):new He(e,t,n,r??1)}function He(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}od(He,Pc,qy(ur,{brighter(e){return e=e==null?Wr:Math.pow(Wr,e),new He(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?tr:Math.pow(tr,e),new He(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new He(Qt(this.r),Qt(this.g),Qt(this.b),Zr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Sf,formatHex:Sf,formatHex8:$S,formatRgb:Cf,toString:Cf}));function Sf(){return`#${Wt(this.r)}${Wt(this.g)}${Wt(this.b)}`}function $S(){return`#${Wt(this.r)}${Wt(this.g)}${Wt(this.b)}${Wt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Cf(){const e=Zr(this.opacity);return`${e===1?"rgb(":"rgba("}${Qt(this.r)}, ${Qt(this.g)}, ${Qt(this.b)}${e===1?")":`, ${e})`}`}function Zr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Qt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Wt(e){return e=Qt(e),(e<16?"0":"")+e.toString(16)}function Nf(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ot(e,t,n,r)}function Ty(e){if(e instanceof ot)return new ot(e.h,e.s,e.l,e.opacity);if(e instanceof ur||(e=rr(e)),!e)return new ot;if(e instanceof ot)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),a=NaN,s=i-o,l=(i+o)/2;return s?(t===i?a=(n-r)/s+(n<r)*6:n===i?a=(r-t)/s+2:a=(t-n)/s+4,s/=l<.5?i+o:2-i-o,a*=60):s=l>0&&l<1?0:a,new ot(a,s,l,e.opacity)}function ES(e,t,n,r){return arguments.length===1?Ty(e):new ot(e,t,n,r??1)}function ot(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}od(ot,ES,qy(ur,{brighter(e){return e=e==null?Wr:Math.pow(Wr,e),new ot(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?tr:Math.pow(tr,e),new ot(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new He(Xo(e>=240?e-240:e+120,o,r),Xo(e,o,r),Xo(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new ot(If(this.h),Er(this.s),Er(this.l),Zr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Zr(this.opacity);return`${e===1?"hsl(":"hsla("}${If(this.h)}, ${Er(this.s)*100}%, ${Er(this.l)*100}%${e===1?")":`, ${e})`}`}}));function If(e){return e=(e||0)%360,e<0?e+360:e}function Er(e){return Math.max(0,Math.min(1,e||0))}function Xo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ry=e=>()=>e;function kS(e,t){return function(n){return e+n*t}}function SS(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function CS(e){return(e=+e)==1?Ay:function(t,n){return n-t?SS(t,n,e):Ry(isNaN(t)?n:t)}}function Ay(e,t){var n=t-e;return n?kS(e,n):Ry(isNaN(e)?t:e)}const qf=function e(t){var n=CS(t);function r(o,i){var a=n((o=Pc(o)).r,(i=Pc(i)).r),s=n(o.g,i.g),l=n(o.b,i.b),u=Ay(o.opacity,i.opacity);return function(c){return o.r=a(c),o.g=s(c),o.b=l(c),o.opacity=u(c),o+""}}return r.gamma=e,r}(1);function Vt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Oc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ko=new RegExp(Oc.source,"g");function NS(e){return function(){return e}}function IS(e){return function(t){return e(t)+""}}function qS(e,t){var n=Oc.lastIndex=Ko.lastIndex=0,r,o,i,a=-1,s=[],l=[];for(e=e+"",t=t+"";(r=Oc.exec(e))&&(o=Ko.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),s[a]?s[a]+=i:s[++a]=i),(r=r[0])===(o=o[0])?s[a]?s[a]+=o:s[++a]=o:(s[++a]=null,l.push({i:a,x:Vt(r,o)})),n=Ko.lastIndex;return n<t.length&&(i=t.slice(n),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?IS(l[0].x):NS(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)s[(d=l[c]).i]=d.x(u);return s.join("")})}var Tf=180/Math.PI,Dc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function My(e,t,n,r,o,i){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*Tf,skewX:Math.atan(l)*Tf,scaleX:a,scaleY:s}}var kr;function TS(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Dc:My(t.a,t.b,t.c,t.d,t.e,t.f)}function RS(e){return e==null||(kr||(kr=document.createElementNS("http://www.w3.org/2000/svg","g")),kr.setAttribute("transform",e),!(e=kr.transform.baseVal.consolidate()))?Dc:(e=e.matrix,My(e.a,e.b,e.c,e.d,e.e,e.f))}function Py(e,t,n,r){function o(u){return u.length?u.pop()+" ":""}function i(u,c,d,f,p,g){if(u!==d||c!==f){var m=p.push("translate(",null,t,null,n);g.push({i:m-4,x:Vt(u,d)},{i:m-2,x:Vt(c,f)})}else(d||f)&&p.push("translate("+d+t+f+n)}function a(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(o(d)+"rotate(",null,r)-2,x:Vt(u,c)})):c&&d.push(o(d)+"rotate("+c+r)}function s(u,c,d,f){u!==c?f.push({i:d.push(o(d)+"skewX(",null,r)-2,x:Vt(u,c)}):c&&d.push(o(d)+"skewX("+c+r)}function l(u,c,d,f,p,g){if(u!==d||c!==f){var m=p.push(o(p)+"scale(",null,",",null,")");g.push({i:m-4,x:Vt(u,d)},{i:m-2,x:Vt(c,f)})}else(d!==1||f!==1)&&p.push(o(p)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),i(u.translateX,u.translateY,c.translateX,c.translateY,d,f),a(u.rotate,c.rotate,d,f),s(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(p){for(var g=-1,m=f.length,y;++g<m;)d[(y=f[g]).i]=y.x(p);return d.join("")}}}var AS=Py(TS,"px, ","px)","deg)"),MS=Py(RS,", ",")",")"),PS=1e-12;function Rf(e){return((e=Math.exp(e))+1/e)/2}function OS(e){return((e=Math.exp(e))-1/e)/2}function DS(e){return((e=Math.exp(2*e))-1)/(e+1)}const zS=function e(t,n,r){function o(i,a){var s=i[0],l=i[1],u=i[2],c=a[0],d=a[1],f=a[2],p=c-s,g=d-l,m=p*p+g*g,y,v;if(m<PS)v=Math.log(f/u)/t,y=function(q){return[s+q*p,l+q*g,u*Math.exp(t*q*v)]};else{var _=Math.sqrt(m),b=(f*f-u*u+r*m)/(2*u*n*_),$=(f*f-u*u-r*m)/(2*f*n*_),k=Math.log(Math.sqrt(b*b+1)-b),P=Math.log(Math.sqrt($*$+1)-$);v=(P-k)/t,y=function(q){var G=q*v,Y=Rf(k),B=u/(n*_)*(Y*DS(t*G+k)-OS(k));return[s+B*p,l+B*g,u*Y/Rf(t*G+k)]}}return y.duration=v*1e3*t/Math.SQRT2,y}return o.rho=function(i){var a=Math.max(.001,+i),s=a*a,l=s*s;return e(a,s,l)},o}(Math.SQRT2,2,4);var wn=0,zn=0,An=0,Oy=1e3,Jr,Vn,Qr=0,on=0,mo=0,or=typeof performance=="object"&&performance.now?performance:Date,Dy=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function id(){return on||(Dy(VS),on=or.now()+mo)}function VS(){on=0}function eo(){this._call=this._time=this._next=null}eo.prototype=zy.prototype={constructor:eo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?id():+n)+(t==null?0:+t),!this._next&&Vn!==this&&(Vn?Vn._next=this:Jr=this,Vn=this),this._call=e,this._time=n,zc()},stop:function(){this._call&&(this._call=null,this._time=1/0,zc())}};function zy(e,t,n){var r=new eo;return r.restart(e,t,n),r}function BS(){id(),++wn;for(var e=Jr,t;e;)(t=on-e._time)>=0&&e._call.call(void 0,t),e=e._next;--wn}function Af(){on=(Qr=or.now())+mo,wn=zn=0;try{BS()}finally{wn=0,FS(),on=0}}function LS(){var e=or.now(),t=e-Qr;t>Oy&&(mo-=t,Qr=e)}function FS(){for(var e,t=Jr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Jr=n);Vn=e,zc(r)}function zc(e){if(!wn){zn&&(zn=clearTimeout(zn));var t=e-on;t>24?(e<1/0&&(zn=setTimeout(Af,e-or.now()-mo)),An&&(An=clearInterval(An))):(An||(Qr=or.now(),An=setInterval(LS,Oy)),wn=1,Dy(Af))}}function Mf(e,t,n){var r=new eo;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var US=td("start","end","cancel","interrupt"),GS=[],Vy=0,Pf=1,Vc=2,Mr=3,Of=4,Bc=5,Pr=6;function _o(e,t,n,r,o,i){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;HS(e,n,{name:t,index:r,group:o,on:US,tween:GS,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Vy})}function ad(e,t){var n=ut(e,t);if(n.state>Vy)throw new Error("too late; already scheduled");return n}function _t(e,t){var n=ut(e,t);if(n.state>Mr)throw new Error("too late; already running");return n}function ut(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function HS(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=zy(i,0,n.time);function i(u){n.state=Pf,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,d,f,p;if(n.state!==Pf)return l();for(c in r)if(p=r[c],p.name===n.name){if(p.state===Mr)return Mf(a);p.state===Of?(p.state=Pr,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[c]):+c<t&&(p.state=Pr,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[c])}if(Mf(function(){n.state===Mr&&(n.state=Of,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Vc,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Vc){for(n.state=Mr,o=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=p);o.length=d+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Bc,1),d=-1,f=o.length;++d<f;)o[d].call(e,c);n.state===Bc&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Pr,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Or(e,t){var n=e.__transition,r,o,i=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){i=!1;continue}o=r.state>Vc&&r.state<Bc,r.state=Pr,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}i&&delete e.__transition}}function jS(e){return this.each(function(){Or(this,e)})}function YS(e,t){var n,r;return function(){var o=_t(this,e),i=o.tween;if(i!==n){r=n=i;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}o.tween=r}}function XS(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=_t(this,e),a=i.tween;if(a!==r){o=(r=a).slice();for(var s={name:t,value:n},l=0,u=o.length;l<u;++l)if(o[l].name===t){o[l]=s;break}l===u&&o.push(s)}i.tween=o}}function KS(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ut(this.node(),n).tween,o=0,i=r.length,a;o<i;++o)if((a=r[o]).name===e)return a.value;return null}return this.each((t==null?YS:XS)(n,e,t))}function sd(e,t,n){var r=e._id;return e.each(function(){var o=_t(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return ut(o,r).value[t]}}function By(e,t){var n;return(typeof t=="number"?Vt:t instanceof rr?qf:(n=rr(t))?(t=n,qf):qS)(e,t)}function WS(e){return function(){this.removeAttribute(e)}}function ZS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function JS(e,t,n){var r,o=n+"",i;return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function QS(e,t,n){var r,o=n+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function eC(e,t,n){var r,o,i;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===r&&l===o?i:(o=l,i=t(r=a,s)))}}function tC(e,t,n){var r,o,i;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===r&&l===o?i:(o=l,i=t(r=a,s)))}}function nC(e,t){var n=go(e),r=n==="transform"?MS:By;return this.attrTween(e,typeof t=="function"?(n.local?tC:eC)(n,r,sd(this,"attr."+e,t)):t==null?(n.local?ZS:WS)(n):(n.local?QS:JS)(n,r,t))}function rC(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function oC(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function iC(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&oC(e,i)),n}return o._value=t,o}function aC(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&rC(e,i)),n}return o._value=t,o}function sC(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=go(e);return this.tween(n,(r.local?iC:aC)(r,t))}function lC(e,t){return function(){ad(this,e).delay=+t.apply(this,arguments)}}function uC(e,t){return t=+t,function(){ad(this,e).delay=t}}function cC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?lC:uC)(t,e)):ut(this.node(),t).delay}function dC(e,t){return function(){_t(this,e).duration=+t.apply(this,arguments)}}function fC(e,t){return t=+t,function(){_t(this,e).duration=t}}function pC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?dC:fC)(t,e)):ut(this.node(),t).duration}function hC(e,t){if(typeof t!="function")throw new Error;return function(){_t(this,e).ease=t}}function vC(e){var t=this._id;return arguments.length?this.each(hC(t,e)):ut(this.node(),t).ease}function gC(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;_t(this,e).ease=n}}function mC(e){if(typeof e!="function")throw new Error;return this.each(gC(this._id,e))}function _C(e){typeof e!="function"&&(e=by(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,s=r[o]=[],l,u=0;u<a;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&s.push(l);return new It(r,this._parents,this._name,this._id)}function yC(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var l=t[s],u=n[s],c=l.length,d=a[s]=new Array(c),f,p=0;p<c;++p)(f=l[p]||u[p])&&(d[p]=f);for(;s<r;++s)a[s]=t[s];return new It(a,this._parents,this._name,this._id)}function bC(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function xC(e,t,n){var r,o,i=bC(t)?ad:_t;return function(){var a=i(this,e),s=a.on;s!==r&&(o=(r=s).copy()).on(t,n),a.on=o}}function wC(e,t){var n=this._id;return arguments.length<2?ut(this.node(),n).on.on(e):this.each(xC(n,e,t))}function $C(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function EC(){return this.on("end.remove",$C(this._id))}function kC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=nd(e));for(var r=this._groups,o=r.length,i=new Array(o),a=0;a<o;++a)for(var s=r[a],l=s.length,u=i[a]=new Array(l),c,d,f=0;f<l;++f)(c=s[f])&&(d=e.call(c,c.__data__,f,s))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,_o(u[f],t,n,f,u,ut(c,n)));return new It(i,this._parents,t,n)}function SC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=yy(e));for(var r=this._groups,o=r.length,i=[],a=[],s=0;s<o;++s)for(var l=r[s],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),p,g=ut(c,n),m=0,y=f.length;m<y;++m)(p=f[m])&&_o(p,t,n,m,f,g);i.push(f),a.push(c)}return new It(i,a,t,n)}var CC=lr.prototype.constructor;function NC(){return new CC(this._groups,this._parents)}function IC(e,t){var n,r,o;return function(){var i=xn(this,e),a=(this.style.removeProperty(e),xn(this,e));return i===a?null:i===n&&a===r?o:o=t(n=i,r=a)}}function Ly(e){return function(){this.style.removeProperty(e)}}function qC(e,t,n){var r,o=n+"",i;return function(){var a=xn(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}function TC(e,t,n){var r,o,i;return function(){var a=xn(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),xn(this,e))),a===l?null:a===r&&l===o?i:(o=l,i=t(r=a,s))}}function RC(e,t){var n,r,o,i="style."+t,a="end."+i,s;return function(){var l=_t(this,e),u=l.on,c=l.value[i]==null?s||(s=Ly(t)):void 0;(u!==n||o!==c)&&(r=(n=u).copy()).on(a,o=c),l.on=r}}function AC(e,t,n){var r=(e+="")=="transform"?AS:By;return t==null?this.styleTween(e,IC(e,r)).on("end.style."+e,Ly(e)):typeof t=="function"?this.styleTween(e,TC(e,r,sd(this,"style."+e,t))).each(RC(this._id,e)):this.styleTween(e,qC(e,r,t),n).on("end.style."+e,null)}function MC(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function PC(e,t,n){var r,o;function i(){var a=t.apply(this,arguments);return a!==o&&(r=(o=a)&&MC(e,a,n)),r}return i._value=t,i}function OC(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,PC(e,t,n??""))}function DC(e){return function(){this.textContent=e}}function zC(e){return function(){var t=e(this);this.textContent=t??""}}function VC(e){return this.tween("text",typeof e=="function"?zC(sd(this,"text",e)):DC(e==null?"":e+""))}function BC(e){return function(t){this.textContent=e.call(this,t)}}function LC(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&BC(o)),t}return r._value=e,r}function FC(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,LC(e))}function UC(){for(var e=this._name,t=this._id,n=Fy(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a=r[i],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var c=ut(l,t);_o(l,e,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new It(r,this._parents,e,n)}function GC(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,a){var s={value:a},l={value:function(){--o===0&&i()}};n.each(function(){var u=_t(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),o===0&&i()})}var HC=0;function It(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Fy(){return++HC}var xt=lr.prototype;It.prototype={constructor:It,select:kC,selectAll:SC,selectChild:xt.selectChild,selectChildren:xt.selectChildren,filter:_C,merge:yC,selection:NC,transition:UC,call:xt.call,nodes:xt.nodes,node:xt.node,size:xt.size,empty:xt.empty,each:xt.each,on:wC,attr:nC,attrTween:sC,style:AC,styleTween:OC,text:VC,textTween:FC,remove:EC,tween:KS,delay:cC,duration:pC,ease:vC,easeVarying:mC,end:GC,[Symbol.iterator]:xt[Symbol.iterator]};function jC(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var YC={time:null,delay:0,duration:250,ease:jC};function XC(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function KC(e){var t,n;e instanceof It?(t=e._id,e=e._name):(t=Fy(),(n=YC).time=id(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a=r[i],s=a.length,l,u=0;u<s;++u)(l=a[u])&&_o(l,e,t,u,a,n||XC(l,t));return new It(r,this._parents,e,t)}lr.prototype.interrupt=jS;lr.prototype.transition=KC;const Sr=e=>()=>e;function WC(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function kt(e,t,n){this.k=e,this.x=t,this.y=n}kt.prototype={constructor:kt,scale:function(e){return e===1?this:new kt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new kt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ld=new kt(1,0,0);kt.prototype;function Wo(e){e.stopImmediatePropagation()}function Mn(e){e.preventDefault(),e.stopImmediatePropagation()}function ZC(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function JC(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Df(){return this.__zoom||ld}function QC(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function eN(){return navigator.maxTouchPoints||"ontouchstart"in this}function tN(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function nN(){var e=ZC,t=JC,n=tN,r=QC,o=eN,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=zS,u=td("start","zoom","end"),c,d,f,p=500,g=150,m=0,y=10;function v(w){w.property("__zoom",Df).on("wheel.zoom",G,{passive:!1}).on("mousedown.zoom",Y).on("dblclick.zoom",B).filter(o).on("touchstart.zoom",R).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",W).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(w,I,E,O){var U=w.selection?w.selection():w;U.property("__zoom",Df),w!==U?k(w,I,E,O):U.interrupt().each(function(){P(this,arguments).event(O).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},v.scaleBy=function(w,I,E,O){v.scaleTo(w,function(){var U=this.__zoom.k,z=typeof I=="function"?I.apply(this,arguments):I;return U*z},E,O)},v.scaleTo=function(w,I,E,O){v.transform(w,function(){var U=t.apply(this,arguments),z=this.__zoom,V=E==null?$(U):typeof E=="function"?E.apply(this,arguments):E,C=z.invert(V),ee=typeof I=="function"?I.apply(this,arguments):I;return n(b(_(z,ee),V,C),U,a)},E,O)},v.translateBy=function(w,I,E,O){v.transform(w,function(){return n(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof E=="function"?E.apply(this,arguments):E),t.apply(this,arguments),a)},null,O)},v.translateTo=function(w,I,E,O,U){v.transform(w,function(){var z=t.apply(this,arguments),V=this.__zoom,C=O==null?$(z):typeof O=="function"?O.apply(this,arguments):O;return n(ld.translate(C[0],C[1]).scale(V.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof E=="function"?-E.apply(this,arguments):-E),z,a)},O,U)};function _(w,I){return I=Math.max(i[0],Math.min(i[1],I)),I===w.k?w:new kt(I,w.x,w.y)}function b(w,I,E){var O=I[0]-E[0]*w.k,U=I[1]-E[1]*w.k;return O===w.x&&U===w.y?w:new kt(w.k,O,U)}function $(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function k(w,I,E,O){w.on("start.zoom",function(){P(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){P(this,arguments).event(O).end()}).tween("zoom",function(){var U=this,z=arguments,V=P(U,z).event(O),C=t.apply(U,z),ee=E==null?$(C):typeof E=="function"?E.apply(U,z):E,oe=Math.max(C[1][0]-C[0][0],C[1][1]-C[0][1]),M=U.__zoom,D=typeof I=="function"?I.apply(U,z):I,H=l(M.invert(ee).concat(oe/M.k),D.invert(ee).concat(oe/D.k));return function(J){if(J===1)J=D;else{var Q=H(J),ie=oe/Q[2];J=new kt(ie,ee[0]-Q[0]*ie,ee[1]-Q[1]*ie)}V.zoom(null,J)}})}function P(w,I,E){return!E&&w.__zooming||new q(w,I)}function q(w,I){this.that=w,this.args=I,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,I),this.taps=0}q.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,I){return this.mouse&&w!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var I=Bt(this.that).datum();u.call(w,this.that,new WC(w,{sourceEvent:this.sourceEvent,target:v,type:w,transform:this.that.__zoom,dispatch:u}),I)}};function G(w,...I){if(!e.apply(this,arguments))return;var E=P(this,I).event(w),O=this.__zoom,U=Math.max(i[0],Math.min(i[1],O.k*Math.pow(2,r.apply(this,arguments)))),z=Dt(w);if(E.wheel)(E.mouse[0][0]!==z[0]||E.mouse[0][1]!==z[1])&&(E.mouse[1]=O.invert(E.mouse[0]=z)),clearTimeout(E.wheel);else{if(O.k===U)return;E.mouse=[z,O.invert(z)],Or(this),E.start()}Mn(w),E.wheel=setTimeout(V,g),E.zoom("mouse",n(b(_(O,U),E.mouse[0],E.mouse[1]),E.extent,a));function V(){E.wheel=null,E.end()}}function Y(w,...I){if(f||!e.apply(this,arguments))return;var E=w.currentTarget,O=P(this,I,!0).event(w),U=Bt(w.view).on("mousemove.zoom",ee,!0).on("mouseup.zoom",oe,!0),z=Dt(w,E),V=w.clientX,C=w.clientY;dS(w.view),Wo(w),O.mouse=[z,this.__zoom.invert(z)],Or(this),O.start();function ee(M){if(Mn(M),!O.moved){var D=M.clientX-V,H=M.clientY-C;O.moved=D*D+H*H>m}O.event(M).zoom("mouse",n(b(O.that.__zoom,O.mouse[0]=Dt(M,E),O.mouse[1]),O.extent,a))}function oe(M){U.on("mousemove.zoom mouseup.zoom",null),fS(M.view,O.moved),Mn(M),O.event(M).end()}}function B(w,...I){if(e.apply(this,arguments)){var E=this.__zoom,O=Dt(w.changedTouches?w.changedTouches[0]:w,this),U=E.invert(O),z=E.k*(w.shiftKey?.5:2),V=n(b(_(E,z),O,U),t.apply(this,I),a);Mn(w),s>0?Bt(this).transition().duration(s).call(k,V,O,w):Bt(this).call(v.transform,V,O,w)}}function R(w,...I){if(e.apply(this,arguments)){var E=w.touches,O=E.length,U=P(this,I,w.changedTouches.length===O).event(w),z,V,C,ee;for(Wo(w),V=0;V<O;++V)C=E[V],ee=Dt(C,this),ee=[ee,this.__zoom.invert(ee),C.identifier],U.touch0?!U.touch1&&U.touch0[2]!==ee[2]&&(U.touch1=ee,U.taps=0):(U.touch0=ee,z=!0,U.taps=1+!!c);c&&(c=clearTimeout(c)),z&&(U.taps<2&&(d=ee[0],c=setTimeout(function(){c=null},p)),Or(this),U.start())}}function S(w,...I){if(this.__zooming){var E=P(this,I).event(w),O=w.changedTouches,U=O.length,z,V,C,ee;for(Mn(w),z=0;z<U;++z)V=O[z],C=Dt(V,this),E.touch0&&E.touch0[2]===V.identifier?E.touch0[0]=C:E.touch1&&E.touch1[2]===V.identifier&&(E.touch1[0]=C);if(V=E.that.__zoom,E.touch1){var oe=E.touch0[0],M=E.touch0[1],D=E.touch1[0],H=E.touch1[1],J=(J=D[0]-oe[0])*J+(J=D[1]-oe[1])*J,Q=(Q=H[0]-M[0])*Q+(Q=H[1]-M[1])*Q;V=_(V,Math.sqrt(J/Q)),C=[(oe[0]+D[0])/2,(oe[1]+D[1])/2],ee=[(M[0]+H[0])/2,(M[1]+H[1])/2]}else if(E.touch0)C=E.touch0[0],ee=E.touch0[1];else return;E.zoom("touch",n(b(V,C,ee),E.extent,a))}}function W(w,...I){if(this.__zooming){var E=P(this,I).event(w),O=w.changedTouches,U=O.length,z,V;for(Wo(w),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),z=0;z<U;++z)V=O[z],E.touch0&&E.touch0[2]===V.identifier?delete E.touch0:E.touch1&&E.touch1[2]===V.identifier&&delete E.touch1;if(E.touch1&&!E.touch0&&(E.touch0=E.touch1,delete E.touch1),E.touch0)E.touch0[1]=this.__zoom.invert(E.touch0[0]);else if(E.end(),E.taps===2&&(V=Dt(V,this),Math.hypot(d[0]-V[0],d[1]-V[1])<y)){var C=Bt(this).on("dblclick.zoom");C&&C.apply(this,arguments)}}}return v.wheelDelta=function(w){return arguments.length?(r=typeof w=="function"?w:Sr(+w),v):r},v.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Sr(!!w),v):e},v.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:Sr(!!w),v):o},v.extent=function(w){return arguments.length?(t=typeof w=="function"?w:Sr([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),v):t},v.scaleExtent=function(w){return arguments.length?(i[0]=+w[0],i[1]=+w[1],v):[i[0],i[1]]},v.translateExtent=function(w){return arguments.length?(a[0][0]=+w[0][0],a[1][0]=+w[1][0],a[0][1]=+w[0][1],a[1][1]=+w[1][1],v):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},v.constrain=function(w){return arguments.length?(n=w,v):n},v.duration=function(w){return arguments.length?(s=+w,v):s},v.interpolate=function(w){return arguments.length?(l=w,v):l},v.on=function(){var w=u.on.apply(u,arguments);return w===u?v:w},v.clickDistance=function(w){return arguments.length?(m=(w=+w)*w,v):Math.sqrt(m)},v.tapDistance=function(w){return arguments.length?(y=+w,v):y},v}const Uy=Symbol("MiniMapSlots"),rN=["id","x","y","rx","ry","width","height","fill","stroke","stroke-width","shape-rendering"],oN={name:"MiniMapNode",compatConfig:{MODE:3},inheritAttrs:!1},iN=Ee({...oN,props:{id:{},type:{},selected:{type:Boolean},dragging:{type:Boolean},position:{},dimensions:{},borderRadius:{},color:{},shapeRendering:{},strokeColor:{},strokeWidth:{},hidden:{type:Boolean}},emits:["click","dblclick","mouseenter","mousemove","mouseleave"],setup(e,{emit:t}){const n=e,r=an(Uy),o=Fc(),i=Re(()=>o.style??{});function a(d){t("click",d)}function s(d){t("dblclick",d)}function l(d){t("mouseenter",d)}function u(d){t("mousemove",d)}function c(d){t("mouseleave",d)}return(d,f)=>!d.hidden&&d.dimensions.width!==0&&d.dimensions.height!==0?(A(),K(_e,{key:0},[Z(r)[`node-${n.type}`]?(A(),fe(d_(Z(r)[`node-${n.type}`]),Q1(zr({key:0},{...n,...d.$attrs})),null,16)):(A(),K("rect",zr({key:1,id:d.id},d.$attrs,{class:["vue-flow__minimap-node",{selected:d.selected,dragging:d.dragging}],x:d.position.x,y:d.position.y,rx:d.borderRadius,ry:d.borderRadius,width:d.dimensions.width,height:d.dimensions.height,fill:d.color||i.value.background||i.value.backgroundColor,stroke:d.strokeColor,"stroke-width":d.strokeWidth,"shape-rendering":d.shapeRendering,onClick:a,onDblclick:s,onMouseenter:l,onMousemove:u,onMouseleave:c}),null,16,rN))],64)):se("",!0)}}),aN=["width","height","viewBox","aria-labelledby"],sN=["id"],lN=["d","fill","stroke","stroke-width"],uN={name:"MiniMap",compatConfig:{MODE:3}},cN=Ee({...uN,props:{nodeColor:{type:[String,Function],default:"#e2e2e2"},nodeStrokeColor:{type:[String,Function],default:"transparent"},nodeClassName:{type:[String,Function]},nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 240, 240, 0.6)"},maskStrokeColor:{default:"none"},maskStrokeWidth:{default:1},position:{default:"bottom-right"},pannable:{type:Boolean,default:!1},zoomable:{type:Boolean,default:!1},width:{},height:{},ariaLabel:{default:"Vue Flow mini map"},inversePan:{type:Boolean,default:!1},zoomStep:{default:1},offsetScale:{default:5},maskBorderRadius:{default:0}},emits:["click","nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(e,{emit:t}){const n=l_(),r=Fc(),o=200,i=150,{id:a,edges:s,viewport:l,translateExtent:u,dimensions:c,emits:d,d3Selection:f,d3Zoom:p,getNodesInitialized:g}=Ie(),m=$e();en(Uy,n);const y=Re(()=>{var U;return e.width??((U=r.style)==null?void 0:U.width)??o}),v=Re(()=>{var U;return e.height??((U=r.style)==null?void 0:U.height)??i}),_=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",b=ve(()=>typeof e.nodeColor=="string"?()=>e.nodeColor:e.nodeColor),$=ve(()=>typeof e.nodeStrokeColor=="string"?()=>e.nodeStrokeColor:e.nodeStrokeColor),k=ve(()=>typeof e.nodeClassName=="string"?()=>e.nodeClassName:typeof e.nodeClassName=="function"?e.nodeClassName:()=>""),P=ve(()=>Zc(g.value.filter(U=>!U.hidden))),q=ve(()=>({x:-l.value.x/l.value.zoom,y:-l.value.y/l.value.zoom,width:c.value.width/l.value.zoom,height:c.value.height/l.value.zoom})),G=ve(()=>g.value&&g.value.length?x2(P.value,q.value):q.value),Y=ve(()=>{const U=G.value.width/y.value,z=G.value.height/v.value;return Math.max(U,z)}),B=ve(()=>{const U=Y.value*y.value,z=Y.value*v.value,V=e.offsetScale*Y.value;return{offset:V,x:G.value.x-(U-G.value.width)/2-V,y:G.value.y-(z-G.value.height)/2-V,width:U+V*2,height:z+V*2}}),R=ve(()=>!B.value.x||!B.value.y?"":`
    M${B.value.x-B.value.offset},${B.value.y-B.value.offset}
    h${B.value.width+B.value.offset*2}
    v${B.value.height+B.value.offset*2}
    h${-B.value.width-B.value.offset*2}z
    M${q.value.x+e.maskBorderRadius},${q.value.y}
    h${q.value.width-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},${e.maskBorderRadius}
    v${q.value.height-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},${e.maskBorderRadius}
    h${-(q.value.width-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},-${e.maskBorderRadius}
    v${-(q.value.height-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},-${e.maskBorderRadius}z`);J1(U=>{if(m.value){const z=Bt(m.value),V=oe=>{if(oe.sourceEvent.type!=="wheel"||!f.value||!p.value)return;const M=oe.sourceEvent.ctrlKey&&er()?10:1,D=-oe.sourceEvent.deltaY*(oe.sourceEvent.deltaMode===1?.05:oe.sourceEvent.deltaMode?1:.002)*e.zoomStep,H=l.value.zoom*2**(D*M);p.value.scaleTo(f.value,H)},C=oe=>{if(oe.sourceEvent.type!=="mousemove"||!f.value||!p.value)return;const M=Y.value*Math.max(1,l.value.zoom)*(e.inversePan?-1:1),D={x:l.value.x-oe.sourceEvent.movementX*M,y:l.value.y-oe.sourceEvent.movementY*M},H=[[0,0],[c.value.width,c.value.height]],J=ld.translate(D.x,D.y).scale(l.value.zoom),Q=p.value.constrain()(J,H,u.value);p.value.transform(f.value,Q)},ee=nN().wheelDelta(oe=>Nc(oe)*(e.zoomStep/10)).on("zoom",e.pannable?C:()=>{}).on("zoom.wheel",e.zoomable?V:()=>{});z.call(ee),U(()=>{z.on("zoom",null)})}},{flush:"post"});function S(U){const[z,V]=Dt(U);t("click",{event:U,position:{x:z,y:V}})}function W(U,z){const V={event:U,node:z,connectedEdges:Yt([z],s.value)};d.miniMapNodeClick(V),t("nodeClick",V)}function w(U,z){const V={event:U,node:z,connectedEdges:Yt([z],s.value)};d.miniMapNodeDoubleClick(V),t("nodeDblclick",V)}function I(U,z){const V={event:U,node:z,connectedEdges:Yt([z],s.value)};d.miniMapNodeMouseEnter(V),t("nodeMouseenter",V)}function E(U,z){const V={event:U,node:z,connectedEdges:Yt([z],s.value)};d.miniMapNodeMouseMove(V),t("nodeMousemove",V)}function O(U,z){const V={event:U,node:z,connectedEdges:Yt([z],s.value)};d.miniMapNodeMouseLeave(V),t("nodeMouseleave",V)}return(U,z)=>(A(),fe(Z(vy),{position:U.position,class:Fe(["vue-flow__minimap",{pannable:U.pannable,zoomable:U.zoomable}])},{default:j(()=>[(A(),K("svg",{ref_key:"el",ref:m,width:y.value,height:v.value,viewBox:[B.value.x,B.value.y,B.value.width,B.value.height].join(" "),role:"img","aria-labelledby":`vue-flow__minimap-${Z(a)}`,onClick:S},[U.ariaLabel?(A(),K("title",{key:0,id:`vue-flow__minimap-${Z(a)}`},re(U.ariaLabel),9,sN)):se("",!0),(A(!0),K(_e,null,xe(Z(g),V=>(A(),fe(iN,{id:V.id,key:V.id,f:"",position:V.computedPosition,dimensions:V.dimensions,selected:V.selected,dragging:V.dragging,style:at(V.style),class:Fe(k.value(V)),color:b.value(V),"border-radius":U.nodeBorderRadius,"stroke-color":$.value(V),"stroke-width":U.nodeStrokeWidth,"shape-rendering":Z(_),type:V.type,hidden:V.hidden,onClick:C=>W(C,V),onDblclick:C=>w(C,V),onMouseenter:C=>I(C,V),onMousemove:C=>E(C,V),onMouseleave:C=>O(C,V)},null,8,["id","position","dimensions","selected","dragging","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","type","hidden","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"]))),128)),h("path",{class:"vue-flow__minimap-mask",d:R.value,fill:U.maskColor,stroke:U.maskStrokeColor,"stroke-width":U.maskStrokeWidth,"fill-rule":"evenodd"},null,8,lN)],8,aN))]),_:1},8,["position","class"]))}});var Zo,zf;function dN(){if(zf)return Zo;zf=1;function e(){this.__data__=[],this.size=0}return Zo=e,Zo}var Jo,Vf;function $n(){if(Vf)return Jo;Vf=1;function e(t,n){return t===n||t!==t&&n!==n}return Jo=e,Jo}var Qo,Bf;function yo(){if(Bf)return Qo;Bf=1;var e=$n();function t(n,r){for(var o=n.length;o--;)if(e(n[o][0],r))return o;return-1}return Qo=t,Qo}var ei,Lf;function fN(){if(Lf)return ei;Lf=1;var e=yo(),t=Array.prototype,n=t.splice;function r(o){var i=this.__data__,a=e(i,o);if(a<0)return!1;var s=i.length-1;return a==s?i.pop():n.call(i,a,1),--this.size,!0}return ei=r,ei}var ti,Ff;function pN(){if(Ff)return ti;Ff=1;var e=yo();function t(n){var r=this.__data__,o=e(r,n);return o<0?void 0:r[o][1]}return ti=t,ti}var ni,Uf;function hN(){if(Uf)return ni;Uf=1;var e=yo();function t(n){return e(this.__data__,n)>-1}return ni=t,ni}var ri,Gf;function vN(){if(Gf)return ri;Gf=1;var e=yo();function t(n,r){var o=this.__data__,i=e(o,n);return i<0?(++this.size,o.push([n,r])):o[i][1]=r,this}return ri=t,ri}var oi,Hf;function bo(){if(Hf)return oi;Hf=1;var e=dN(),t=fN(),n=pN(),r=hN(),o=vN();function i(a){var s=-1,l=a==null?0:a.length;for(this.clear();++s<l;){var u=a[s];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=o,oi=i,oi}var ii,jf;function gN(){if(jf)return ii;jf=1;var e=bo();function t(){this.__data__=new e,this.size=0}return ii=t,ii}var ai,Yf;function mN(){if(Yf)return ai;Yf=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return ai=e,ai}var si,Xf;function _N(){if(Xf)return si;Xf=1;function e(t){return this.__data__.get(t)}return si=e,si}var li,Kf;function yN(){if(Kf)return li;Kf=1;function e(t){return this.__data__.has(t)}return li=e,li}var ui,Wf;function Gy(){if(Wf)return ui;Wf=1;var e=typeof vr=="object"&&vr&&vr.Object===Object&&vr;return ui=e,ui}var ci,Zf;function ct(){if(Zf)return ci;Zf=1;var e=Gy(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return ci=n,ci}var di,Jf;function En(){if(Jf)return di;Jf=1;var e=ct(),t=e.Symbol;return di=t,di}var fi,Qf;function bN(){if(Qf)return fi;Qf=1;var e=En(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,o=e?e.toStringTag:void 0;function i(a){var s=n.call(a,o),l=a[o];try{a[o]=void 0;var u=!0}catch{}var c=r.call(a);return u&&(s?a[o]=l:delete a[o]),c}return fi=i,fi}var pi,ep;function xN(){if(ep)return pi;ep=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return pi=n,pi}var hi,tp;function ln(){if(tp)return hi;tp=1;var e=En(),t=bN(),n=xN(),r="[object Null]",o="[object Undefined]",i=e?e.toStringTag:void 0;function a(s){return s==null?s===void 0?o:r:i&&i in Object(s)?t(s):n(s)}return hi=a,hi}var vi,np;function et(){if(np)return vi;np=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return vi=e,vi}var gi,rp;function cr(){if(rp)return gi;rp=1;var e=ln(),t=et(),n="[object AsyncFunction]",r="[object Function]",o="[object GeneratorFunction]",i="[object Proxy]";function a(s){if(!t(s))return!1;var l=e(s);return l==r||l==o||l==n||l==i}return gi=a,gi}var mi,op;function wN(){if(op)return mi;op=1;var e=ct(),t=e["__core-js_shared__"];return mi=t,mi}var _i,ip;function $N(){if(ip)return _i;ip=1;var e=wN(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return _i=n,_i}var yi,ap;function Hy(){if(ap)return yi;ap=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return yi=n,yi}var bi,sp;function EN(){if(sp)return bi;sp=1;var e=cr(),t=$N(),n=et(),r=Hy(),o=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,a=Function.prototype,s=Object.prototype,l=a.toString,u=s.hasOwnProperty,c=RegExp("^"+l.call(u).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!n(f)||t(f))return!1;var p=e(f)?c:i;return p.test(r(f))}return bi=d,bi}var xi,lp;function kN(){if(lp)return xi;lp=1;function e(t,n){return t==null?void 0:t[n]}return xi=e,xi}var wi,up;function un(){if(up)return wi;up=1;var e=EN(),t=kN();function n(r,o){var i=t(r,o);return e(i)?i:void 0}return wi=n,wi}var $i,cp;function ud(){if(cp)return $i;cp=1;var e=un(),t=ct(),n=e(t,"Map");return $i=n,$i}var Ei,dp;function xo(){if(dp)return Ei;dp=1;var e=un(),t=e(Object,"create");return Ei=t,Ei}var ki,fp;function SN(){if(fp)return ki;fp=1;var e=xo();function t(){this.__data__=e?e(null):{},this.size=0}return ki=t,ki}var Si,pp;function CN(){if(pp)return Si;pp=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Si=e,Si}var Ci,hp;function NN(){if(hp)return Ci;hp=1;var e=xo(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function o(i){var a=this.__data__;if(e){var s=a[i];return s===t?void 0:s}return r.call(a,i)?a[i]:void 0}return Ci=o,Ci}var Ni,vp;function IN(){if(vp)return Ni;vp=1;var e=xo(),t=Object.prototype,n=t.hasOwnProperty;function r(o){var i=this.__data__;return e?i[o]!==void 0:n.call(i,o)}return Ni=r,Ni}var Ii,gp;function qN(){if(gp)return Ii;gp=1;var e=xo(),t="__lodash_hash_undefined__";function n(r,o){var i=this.__data__;return this.size+=this.has(r)?0:1,i[r]=e&&o===void 0?t:o,this}return Ii=n,Ii}var qi,mp;function TN(){if(mp)return qi;mp=1;var e=SN(),t=CN(),n=NN(),r=IN(),o=qN();function i(a){var s=-1,l=a==null?0:a.length;for(this.clear();++s<l;){var u=a[s];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=o,qi=i,qi}var Ti,_p;function RN(){if(_p)return Ti;_p=1;var e=TN(),t=bo(),n=ud();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Ti=r,Ti}var Ri,yp;function AN(){if(yp)return Ri;yp=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Ri=e,Ri}var Ai,bp;function wo(){if(bp)return Ai;bp=1;var e=AN();function t(n,r){var o=n.__data__;return e(r)?o[typeof r=="string"?"string":"hash"]:o.map}return Ai=t,Ai}var Mi,xp;function MN(){if(xp)return Mi;xp=1;var e=wo();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return Mi=t,Mi}var Pi,wp;function PN(){if(wp)return Pi;wp=1;var e=wo();function t(n){return e(this,n).get(n)}return Pi=t,Pi}var Oi,$p;function ON(){if($p)return Oi;$p=1;var e=wo();function t(n){return e(this,n).has(n)}return Oi=t,Oi}var Di,Ep;function DN(){if(Ep)return Di;Ep=1;var e=wo();function t(n,r){var o=e(this,n),i=o.size;return o.set(n,r),this.size+=o.size==i?0:1,this}return Di=t,Di}var zi,kp;function cd(){if(kp)return zi;kp=1;var e=RN(),t=MN(),n=PN(),r=ON(),o=DN();function i(a){var s=-1,l=a==null?0:a.length;for(this.clear();++s<l;){var u=a[s];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=o,zi=i,zi}var Vi,Sp;function zN(){if(Sp)return Vi;Sp=1;var e=bo(),t=ud(),n=cd(),r=200;function o(i,a){var s=this.__data__;if(s instanceof e){var l=s.__data__;if(!t||l.length<r-1)return l.push([i,a]),this.size=++s.size,this;s=this.__data__=new n(l)}return s.set(i,a),this.size=s.size,this}return Vi=o,Vi}var Bi,Cp;function $o(){if(Cp)return Bi;Cp=1;var e=bo(),t=gN(),n=mN(),r=_N(),o=yN(),i=zN();function a(s){var l=this.__data__=new e(s);this.size=l.size}return a.prototype.clear=t,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=o,a.prototype.set=i,Bi=a,Bi}var Li,Np;function dd(){if(Np)return Li;Np=1;function e(t,n){for(var r=-1,o=t==null?0:t.length;++r<o&&n(t[r],r,t)!==!1;);return t}return Li=e,Li}var Fi,Ip;function jy(){if(Ip)return Fi;Ip=1;var e=un(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Fi=t,Fi}var Ui,qp;function Eo(){if(qp)return Ui;qp=1;var e=jy();function t(n,r,o){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:o,writable:!0}):n[r]=o}return Ui=t,Ui}var Gi,Tp;function ko(){if(Tp)return Gi;Tp=1;var e=Eo(),t=$n(),n=Object.prototype,r=n.hasOwnProperty;function o(i,a,s){var l=i[a];(!(r.call(i,a)&&t(l,s))||s===void 0&&!(a in i))&&e(i,a,s)}return Gi=o,Gi}var Hi,Rp;function dr(){if(Rp)return Hi;Rp=1;var e=ko(),t=Eo();function n(r,o,i,a){var s=!i;i||(i={});for(var l=-1,u=o.length;++l<u;){var c=o[l],d=a?a(i[c],r[c],c,i,r):void 0;d===void 0&&(d=r[c]),s?t(i,c,d):e(i,c,d)}return i}return Hi=n,Hi}var ji,Ap;function VN(){if(Ap)return ji;Ap=1;function e(t,n){for(var r=-1,o=Array(t);++r<t;)o[r]=n(r);return o}return ji=e,ji}var Yi,Mp;function yt(){if(Mp)return Yi;Mp=1;function e(t){return t!=null&&typeof t=="object"}return Yi=e,Yi}var Xi,Pp;function BN(){if(Pp)return Xi;Pp=1;var e=ln(),t=yt(),n="[object Arguments]";function r(o){return t(o)&&e(o)==n}return Xi=r,Xi}var Ki,Op;function fr(){if(Op)return Ki;Op=1;var e=BN(),t=yt(),n=Object.prototype,r=n.hasOwnProperty,o=n.propertyIsEnumerable,i=e(function(){return arguments}())?e:function(a){return t(a)&&r.call(a,"callee")&&!o.call(a,"callee")};return Ki=i,Ki}var Wi,Dp;function Oe(){if(Dp)return Wi;Dp=1;var e=Array.isArray;return Wi=e,Wi}var Bn={exports:{}},Zi,zp;function LN(){if(zp)return Zi;zp=1;function e(){return!1}return Zi=e,Zi}Bn.exports;var Vp;function kn(){return Vp||(Vp=1,function(e,t){var n=ct(),r=LN(),o=t&&!t.nodeType&&t,i=o&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===o,s=a?n.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||r;e.exports=u}(Bn,Bn.exports)),Bn.exports}var Ji,Bp;function So(){if(Bp)return Ji;Bp=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,o){var i=typeof r;return o=o??e,!!o&&(i=="number"||i!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<o}return Ji=n,Ji}var Qi,Lp;function fd(){if(Lp)return Qi;Lp=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Qi=t,Qi}var ea,Fp;function FN(){if(Fp)return ea;Fp=1;var e=ln(),t=fd(),n=yt(),r="[object Arguments]",o="[object Array]",i="[object Boolean]",a="[object Date]",s="[object Error]",l="[object Function]",u="[object Map]",c="[object Number]",d="[object Object]",f="[object RegExp]",p="[object Set]",g="[object String]",m="[object WeakMap]",y="[object ArrayBuffer]",v="[object DataView]",_="[object Float32Array]",b="[object Float64Array]",$="[object Int8Array]",k="[object Int16Array]",P="[object Int32Array]",q="[object Uint8Array]",G="[object Uint8ClampedArray]",Y="[object Uint16Array]",B="[object Uint32Array]",R={};R[_]=R[b]=R[$]=R[k]=R[P]=R[q]=R[G]=R[Y]=R[B]=!0,R[r]=R[o]=R[y]=R[i]=R[v]=R[a]=R[s]=R[l]=R[u]=R[c]=R[d]=R[f]=R[p]=R[g]=R[m]=!1;function S(W){return n(W)&&t(W.length)&&!!R[e(W)]}return ea=S,ea}var ta,Up;function Co(){if(Up)return ta;Up=1;function e(t){return function(n){return t(n)}}return ta=e,ta}var Ln={exports:{}};Ln.exports;var Gp;function pd(){return Gp||(Gp=1,function(e,t){var n=Gy(),r=t&&!t.nodeType&&t,o=r&&!0&&e&&!e.nodeType&&e,i=o&&o.exports===r,a=i&&n.process,s=function(){try{var l=o&&o.require&&o.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();e.exports=s}(Ln,Ln.exports)),Ln.exports}var na,Hp;function pr(){if(Hp)return na;Hp=1;var e=FN(),t=Co(),n=pd(),r=n&&n.isTypedArray,o=r?t(r):e;return na=o,na}var ra,jp;function Yy(){if(jp)return ra;jp=1;var e=VN(),t=fr(),n=Oe(),r=kn(),o=So(),i=pr(),a=Object.prototype,s=a.hasOwnProperty;function l(u,c){var d=n(u),f=!d&&t(u),p=!d&&!f&&r(u),g=!d&&!f&&!p&&i(u),m=d||f||p||g,y=m?e(u.length,String):[],v=y.length;for(var _ in u)(c||s.call(u,_))&&!(m&&(_=="length"||p&&(_=="offset"||_=="parent")||g&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||o(_,v)))&&y.push(_);return y}return ra=l,ra}var oa,Yp;function No(){if(Yp)return oa;Yp=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,o=typeof r=="function"&&r.prototype||e;return n===o}return oa=t,oa}var ia,Xp;function Xy(){if(Xp)return ia;Xp=1;function e(t,n){return function(r){return t(n(r))}}return ia=e,ia}var aa,Kp;function UN(){if(Kp)return aa;Kp=1;var e=Xy(),t=e(Object.keys,Object);return aa=t,aa}var sa,Wp;function hd(){if(Wp)return sa;Wp=1;var e=No(),t=UN(),n=Object.prototype,r=n.hasOwnProperty;function o(i){if(!e(i))return t(i);var a=[];for(var s in Object(i))r.call(i,s)&&s!="constructor"&&a.push(s);return a}return sa=o,sa}var la,Zp;function qt(){if(Zp)return la;Zp=1;var e=cr(),t=fd();function n(r){return r!=null&&t(r.length)&&!e(r)}return la=n,la}var ua,Jp;function Ut(){if(Jp)return ua;Jp=1;var e=Yy(),t=hd(),n=qt();function r(o){return n(o)?e(o):t(o)}return ua=r,ua}var ca,Qp;function GN(){if(Qp)return ca;Qp=1;var e=dr(),t=Ut();function n(r,o){return r&&e(o,t(o),r)}return ca=n,ca}var da,eh;function HN(){if(eh)return da;eh=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return da=e,da}var fa,th;function jN(){if(th)return fa;th=1;var e=et(),t=No(),n=HN(),r=Object.prototype,o=r.hasOwnProperty;function i(a){if(!e(a))return n(a);var s=t(a),l=[];for(var u in a)u=="constructor"&&(s||!o.call(a,u))||l.push(u);return l}return fa=i,fa}var pa,nh;function cn(){if(nh)return pa;nh=1;var e=Yy(),t=jN(),n=qt();function r(o){return n(o)?e(o,!0):t(o)}return pa=r,pa}var ha,rh;function YN(){if(rh)return ha;rh=1;var e=dr(),t=cn();function n(r,o){return r&&e(o,t(o),r)}return ha=n,ha}var Fn={exports:{}};Fn.exports;var oh;function Ky(){return oh||(oh=1,function(e,t){var n=ct(),r=t&&!t.nodeType&&t,o=r&&!0&&e&&!e.nodeType&&e,i=o&&o.exports===r,a=i?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var d=u.length,f=s?s(d):new u.constructor(d);return u.copy(f),f}e.exports=l}(Fn,Fn.exports)),Fn.exports}var va,ih;function Wy(){if(ih)return va;ih=1;function e(t,n){var r=-1,o=t.length;for(n||(n=Array(o));++r<o;)n[r]=t[r];return n}return va=e,va}var ga,ah;function Zy(){if(ah)return ga;ah=1;function e(t,n){for(var r=-1,o=t==null?0:t.length,i=0,a=[];++r<o;){var s=t[r];n(s,r,t)&&(a[i++]=s)}return a}return ga=e,ga}var ma,sh;function Jy(){if(sh)return ma;sh=1;function e(){return[]}return ma=e,ma}var _a,lh;function vd(){if(lh)return _a;lh=1;var e=Zy(),t=Jy(),n=Object.prototype,r=n.propertyIsEnumerable,o=Object.getOwnPropertySymbols,i=o?function(a){return a==null?[]:(a=Object(a),e(o(a),function(s){return r.call(a,s)}))}:t;return _a=i,_a}var ya,uh;function XN(){if(uh)return ya;uh=1;var e=dr(),t=vd();function n(r,o){return e(r,t(r),o)}return ya=n,ya}var ba,ch;function gd(){if(ch)return ba;ch=1;function e(t,n){for(var r=-1,o=n.length,i=t.length;++r<o;)t[i+r]=n[r];return t}return ba=e,ba}var xa,dh;function Io(){if(dh)return xa;dh=1;var e=Xy(),t=e(Object.getPrototypeOf,Object);return xa=t,xa}var wa,fh;function Qy(){if(fh)return wa;fh=1;var e=gd(),t=Io(),n=vd(),r=Jy(),o=Object.getOwnPropertySymbols,i=o?function(a){for(var s=[];a;)e(s,n(a)),a=t(a);return s}:r;return wa=i,wa}var $a,ph;function KN(){if(ph)return $a;ph=1;var e=dr(),t=Qy();function n(r,o){return e(r,t(r),o)}return $a=n,$a}var Ea,hh;function e1(){if(hh)return Ea;hh=1;var e=gd(),t=Oe();function n(r,o,i){var a=o(r);return t(r)?a:e(a,i(r))}return Ea=n,Ea}var ka,vh;function t1(){if(vh)return ka;vh=1;var e=e1(),t=vd(),n=Ut();function r(o){return e(o,n,t)}return ka=r,ka}var Sa,gh;function WN(){if(gh)return Sa;gh=1;var e=e1(),t=Qy(),n=cn();function r(o){return e(o,n,t)}return Sa=r,Sa}var Ca,mh;function ZN(){if(mh)return Ca;mh=1;var e=un(),t=ct(),n=e(t,"DataView");return Ca=n,Ca}var Na,_h;function JN(){if(_h)return Na;_h=1;var e=un(),t=ct(),n=e(t,"Promise");return Na=n,Na}var Ia,yh;function n1(){if(yh)return Ia;yh=1;var e=un(),t=ct(),n=e(t,"Set");return Ia=n,Ia}var qa,bh;function QN(){if(bh)return qa;bh=1;var e=un(),t=ct(),n=e(t,"WeakMap");return qa=n,qa}var Ta,xh;function Sn(){if(xh)return Ta;xh=1;var e=ZN(),t=ud(),n=JN(),r=n1(),o=QN(),i=ln(),a=Hy(),s="[object Map]",l="[object Object]",u="[object Promise]",c="[object Set]",d="[object WeakMap]",f="[object DataView]",p=a(e),g=a(t),m=a(n),y=a(r),v=a(o),_=i;return(e&&_(new e(new ArrayBuffer(1)))!=f||t&&_(new t)!=s||n&&_(n.resolve())!=u||r&&_(new r)!=c||o&&_(new o)!=d)&&(_=function(b){var $=i(b),k=$==l?b.constructor:void 0,P=k?a(k):"";if(P)switch(P){case p:return f;case g:return s;case m:return u;case y:return c;case v:return d}return $}),Ta=_,Ta}var Ra,wh;function eI(){if(wh)return Ra;wh=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var o=r.length,i=new r.constructor(o);return o&&typeof r[0]=="string"&&t.call(r,"index")&&(i.index=r.index,i.input=r.input),i}return Ra=n,Ra}var Aa,$h;function r1(){if($h)return Aa;$h=1;var e=ct(),t=e.Uint8Array;return Aa=t,Aa}var Ma,Eh;function md(){if(Eh)return Ma;Eh=1;var e=r1();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return Ma=t,Ma}var Pa,kh;function tI(){if(kh)return Pa;kh=1;var e=md();function t(n,r){var o=r?e(n.buffer):n.buffer;return new n.constructor(o,n.byteOffset,n.byteLength)}return Pa=t,Pa}var Oa,Sh;function nI(){if(Sh)return Oa;Sh=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return Oa=t,Oa}var Da,Ch;function rI(){if(Ch)return Da;Ch=1;var e=En(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(o){return n?Object(n.call(o)):{}}return Da=r,Da}var za,Nh;function o1(){if(Nh)return za;Nh=1;var e=md();function t(n,r){var o=r?e(n.buffer):n.buffer;return new n.constructor(o,n.byteOffset,n.length)}return za=t,za}var Va,Ih;function oI(){if(Ih)return Va;Ih=1;var e=md(),t=tI(),n=nI(),r=rI(),o=o1(),i="[object Boolean]",a="[object Date]",s="[object Map]",l="[object Number]",u="[object RegExp]",c="[object Set]",d="[object String]",f="[object Symbol]",p="[object ArrayBuffer]",g="[object DataView]",m="[object Float32Array]",y="[object Float64Array]",v="[object Int8Array]",_="[object Int16Array]",b="[object Int32Array]",$="[object Uint8Array]",k="[object Uint8ClampedArray]",P="[object Uint16Array]",q="[object Uint32Array]";function G(Y,B,R){var S=Y.constructor;switch(B){case p:return e(Y);case i:case a:return new S(+Y);case g:return t(Y,R);case m:case y:case v:case _:case b:case $:case k:case P:case q:return o(Y,R);case s:return new S;case l:case d:return new S(Y);case u:return n(Y);case c:return new S;case f:return r(Y)}}return Va=G,Va}var Ba,qh;function i1(){if(qh)return Ba;qh=1;var e=et(),t=Object.create,n=function(){function r(){}return function(o){if(!e(o))return{};if(t)return t(o);r.prototype=o;var i=new r;return r.prototype=void 0,i}}();return Ba=n,Ba}var La,Th;function a1(){if(Th)return La;Th=1;var e=i1(),t=Io(),n=No();function r(o){return typeof o.constructor=="function"&&!n(o)?e(t(o)):{}}return La=r,La}var Fa,Rh;function iI(){if(Rh)return Fa;Rh=1;var e=Sn(),t=yt(),n="[object Map]";function r(o){return t(o)&&e(o)==n}return Fa=r,Fa}var Ua,Ah;function aI(){if(Ah)return Ua;Ah=1;var e=iI(),t=Co(),n=pd(),r=n&&n.isMap,o=r?t(r):e;return Ua=o,Ua}var Ga,Mh;function sI(){if(Mh)return Ga;Mh=1;var e=Sn(),t=yt(),n="[object Set]";function r(o){return t(o)&&e(o)==n}return Ga=r,Ga}var Ha,Ph;function lI(){if(Ph)return Ha;Ph=1;var e=sI(),t=Co(),n=pd(),r=n&&n.isSet,o=r?t(r):e;return Ha=o,Ha}var ja,Oh;function s1(){if(Oh)return ja;Oh=1;var e=$o(),t=dd(),n=ko(),r=GN(),o=YN(),i=Ky(),a=Wy(),s=XN(),l=KN(),u=t1(),c=WN(),d=Sn(),f=eI(),p=oI(),g=a1(),m=Oe(),y=kn(),v=aI(),_=et(),b=lI(),$=Ut(),k=cn(),P=1,q=2,G=4,Y="[object Arguments]",B="[object Array]",R="[object Boolean]",S="[object Date]",W="[object Error]",w="[object Function]",I="[object GeneratorFunction]",E="[object Map]",O="[object Number]",U="[object Object]",z="[object RegExp]",V="[object Set]",C="[object String]",ee="[object Symbol]",oe="[object WeakMap]",M="[object ArrayBuffer]",D="[object DataView]",H="[object Float32Array]",J="[object Float64Array]",Q="[object Int8Array]",ie="[object Int16Array]",he="[object Int32Array]",pe="[object Uint8Array]",be="[object Uint8ClampedArray]",ge="[object Uint16Array]",L="[object Uint32Array]",T={};T[Y]=T[B]=T[M]=T[D]=T[R]=T[S]=T[H]=T[J]=T[Q]=T[ie]=T[he]=T[E]=T[O]=T[U]=T[z]=T[V]=T[C]=T[ee]=T[pe]=T[be]=T[ge]=T[L]=!0,T[W]=T[w]=T[oe]=!1;function N(X,ne,de,te,ue,ae){var me,ke=ne&P,Ce=ne&q,Je=ne&G;if(de&&(me=ue?de(X,te,ue,ae):de(X)),me!==void 0)return me;if(!_(X))return X;var Ye=m(X);if(Ye){if(me=f(X),!ke)return a(X,me)}else{var ze=d(X),Rt=ze==w||ze==I;if(y(X))return i(X,ke);if(ze==U||ze==Y||Rt&&!ue){if(me=Ce||Rt?{}:g(X),!ke)return Ce?l(X,o(me,X)):s(X,r(me,X))}else{if(!T[ze])return ue?X:{};me=p(X,ze,ke)}}ae||(ae=new e);var At=ae.get(X);if(At)return At;ae.set(X,me),b(X)?X.forEach(function(Ue){me.add(N(Ue,ne,de,Ue,X,ae))}):v(X)&&X.forEach(function(Ue,Xe){me.set(Xe,N(Ue,ne,de,Xe,X,ae))});var Gt=Je?Ce?c:u:Ce?k:$,Mt=Ye?void 0:Gt(X);return t(Mt||X,function(Ue,Xe){Mt&&(Xe=Ue,Ue=X[Xe]),n(me,Xe,N(Ue,ne,de,Xe,X,ae))}),me}return ja=N,ja}var Ya,Dh;function uI(){if(Dh)return Ya;Dh=1;var e=s1(),t=4;function n(r){return e(r,t)}return Ya=n,Ya}var Xa,zh;function _d(){if(zh)return Xa;zh=1;function e(t){return function(){return t}}return Xa=e,Xa}var Ka,Vh;function cI(){if(Vh)return Ka;Vh=1;function e(t){return function(n,r,o){for(var i=-1,a=Object(n),s=o(n),l=s.length;l--;){var u=s[t?l:++i];if(r(a[u],u,a)===!1)break}return n}}return Ka=e,Ka}var Wa,Bh;function yd(){if(Bh)return Wa;Bh=1;var e=cI(),t=e();return Wa=t,Wa}var Za,Lh;function bd(){if(Lh)return Za;Lh=1;var e=yd(),t=Ut();function n(r,o){return r&&e(r,o,t)}return Za=n,Za}var Ja,Fh;function dI(){if(Fh)return Ja;Fh=1;var e=qt();function t(n,r){return function(o,i){if(o==null)return o;if(!e(o))return n(o,i);for(var a=o.length,s=r?a:-1,l=Object(o);(r?s--:++s<a)&&i(l[s],s,l)!==!1;);return o}}return Ja=t,Ja}var Qa,Uh;function qo(){if(Uh)return Qa;Uh=1;var e=bd(),t=dI(),n=t(e);return Qa=n,Qa}var es,Gh;function dn(){if(Gh)return es;Gh=1;function e(t){return t}return es=e,es}var ts,Hh;function l1(){if(Hh)return ts;Hh=1;var e=dn();function t(n){return typeof n=="function"?n:e}return ts=t,ts}var ns,jh;function u1(){if(jh)return ns;jh=1;var e=dd(),t=qo(),n=l1(),r=Oe();function o(i,a){var s=r(i)?e:t;return s(i,n(a))}return ns=o,ns}var rs,Yh;function c1(){return Yh||(Yh=1,rs=u1()),rs}var os,Xh;function fI(){if(Xh)return os;Xh=1;var e=qo();function t(n,r){var o=[];return e(n,function(i,a,s){r(i,a,s)&&o.push(i)}),o}return os=t,os}var is,Kh;function pI(){if(Kh)return is;Kh=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return is=t,is}var as,Wh;function hI(){if(Wh)return as;Wh=1;function e(t){return this.__data__.has(t)}return as=e,as}var ss,Zh;function d1(){if(Zh)return ss;Zh=1;var e=cd(),t=pI(),n=hI();function r(o){var i=-1,a=o==null?0:o.length;for(this.__data__=new e;++i<a;)this.add(o[i])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,ss=r,ss}var ls,Jh;function vI(){if(Jh)return ls;Jh=1;function e(t,n){for(var r=-1,o=t==null?0:t.length;++r<o;)if(n(t[r],r,t))return!0;return!1}return ls=e,ls}var us,Qh;function f1(){if(Qh)return us;Qh=1;function e(t,n){return t.has(n)}return us=e,us}var cs,ev;function p1(){if(ev)return cs;ev=1;var e=d1(),t=vI(),n=f1(),r=1,o=2;function i(a,s,l,u,c,d){var f=l&r,p=a.length,g=s.length;if(p!=g&&!(f&&g>p))return!1;var m=d.get(a),y=d.get(s);if(m&&y)return m==s&&y==a;var v=-1,_=!0,b=l&o?new e:void 0;for(d.set(a,s),d.set(s,a);++v<p;){var $=a[v],k=s[v];if(u)var P=f?u(k,$,v,s,a,d):u($,k,v,a,s,d);if(P!==void 0){if(P)continue;_=!1;break}if(b){if(!t(s,function(q,G){if(!n(b,G)&&($===q||c($,q,l,u,d)))return b.push(G)})){_=!1;break}}else if(!($===k||c($,k,l,u,d))){_=!1;break}}return d.delete(a),d.delete(s),_}return cs=i,cs}var ds,tv;function gI(){if(tv)return ds;tv=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(o,i){r[++n]=[i,o]}),r}return ds=e,ds}var fs,nv;function xd(){if(nv)return fs;nv=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(o){r[++n]=o}),r}return fs=e,fs}var ps,rv;function mI(){if(rv)return ps;rv=1;var e=En(),t=r1(),n=$n(),r=p1(),o=gI(),i=xd(),a=1,s=2,l="[object Boolean]",u="[object Date]",c="[object Error]",d="[object Map]",f="[object Number]",p="[object RegExp]",g="[object Set]",m="[object String]",y="[object Symbol]",v="[object ArrayBuffer]",_="[object DataView]",b=e?e.prototype:void 0,$=b?b.valueOf:void 0;function k(P,q,G,Y,B,R,S){switch(G){case _:if(P.byteLength!=q.byteLength||P.byteOffset!=q.byteOffset)return!1;P=P.buffer,q=q.buffer;case v:return!(P.byteLength!=q.byteLength||!R(new t(P),new t(q)));case l:case u:case f:return n(+P,+q);case c:return P.name==q.name&&P.message==q.message;case p:case m:return P==q+"";case d:var W=o;case g:var w=Y&a;if(W||(W=i),P.size!=q.size&&!w)return!1;var I=S.get(P);if(I)return I==q;Y|=s,S.set(P,q);var E=r(W(P),W(q),Y,B,R,S);return S.delete(P),E;case y:if($)return $.call(P)==$.call(q)}return!1}return ps=k,ps}var hs,ov;function _I(){if(ov)return hs;ov=1;var e=t1(),t=1,n=Object.prototype,r=n.hasOwnProperty;function o(i,a,s,l,u,c){var d=s&t,f=e(i),p=f.length,g=e(a),m=g.length;if(p!=m&&!d)return!1;for(var y=p;y--;){var v=f[y];if(!(d?v in a:r.call(a,v)))return!1}var _=c.get(i),b=c.get(a);if(_&&b)return _==a&&b==i;var $=!0;c.set(i,a),c.set(a,i);for(var k=d;++y<p;){v=f[y];var P=i[v],q=a[v];if(l)var G=d?l(q,P,v,a,i,c):l(P,q,v,i,a,c);if(!(G===void 0?P===q||u(P,q,s,l,c):G)){$=!1;break}k||(k=v=="constructor")}if($&&!k){var Y=i.constructor,B=a.constructor;Y!=B&&"constructor"in i&&"constructor"in a&&!(typeof Y=="function"&&Y instanceof Y&&typeof B=="function"&&B instanceof B)&&($=!1)}return c.delete(i),c.delete(a),$}return hs=o,hs}var vs,iv;function yI(){if(iv)return vs;iv=1;var e=$o(),t=p1(),n=mI(),r=_I(),o=Sn(),i=Oe(),a=kn(),s=pr(),l=1,u="[object Arguments]",c="[object Array]",d="[object Object]",f=Object.prototype,p=f.hasOwnProperty;function g(m,y,v,_,b,$){var k=i(m),P=i(y),q=k?c:o(m),G=P?c:o(y);q=q==u?d:q,G=G==u?d:G;var Y=q==d,B=G==d,R=q==G;if(R&&a(m)){if(!a(y))return!1;k=!0,Y=!1}if(R&&!Y)return $||($=new e),k||s(m)?t(m,y,v,_,b,$):n(m,y,q,v,_,b,$);if(!(v&l)){var S=Y&&p.call(m,"__wrapped__"),W=B&&p.call(y,"__wrapped__");if(S||W){var w=S?m.value():m,I=W?y.value():y;return $||($=new e),b(w,I,v,_,$)}}return R?($||($=new e),r(m,y,v,_,b,$)):!1}return vs=g,vs}var gs,av;function h1(){if(av)return gs;av=1;var e=yI(),t=yt();function n(r,o,i,a,s){return r===o?!0:r==null||o==null||!t(r)&&!t(o)?r!==r&&o!==o:e(r,o,i,a,n,s)}return gs=n,gs}var ms,sv;function bI(){if(sv)return ms;sv=1;var e=$o(),t=h1(),n=1,r=2;function o(i,a,s,l){var u=s.length,c=u,d=!l;if(i==null)return!c;for(i=Object(i);u--;){var f=s[u];if(d&&f[2]?f[1]!==i[f[0]]:!(f[0]in i))return!1}for(;++u<c;){f=s[u];var p=f[0],g=i[p],m=f[1];if(d&&f[2]){if(g===void 0&&!(p in i))return!1}else{var y=new e;if(l)var v=l(g,m,p,i,a,y);if(!(v===void 0?t(m,g,n|r,l,y):v))return!1}}return!0}return ms=o,ms}var _s,lv;function v1(){if(lv)return _s;lv=1;var e=et();function t(n){return n===n&&!e(n)}return _s=t,_s}var ys,uv;function xI(){if(uv)return ys;uv=1;var e=v1(),t=Ut();function n(r){for(var o=t(r),i=o.length;i--;){var a=o[i],s=r[a];o[i]=[a,s,e(s)]}return o}return ys=n,ys}var bs,cv;function g1(){if(cv)return bs;cv=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return bs=e,bs}var xs,dv;function wI(){if(dv)return xs;dv=1;var e=bI(),t=xI(),n=g1();function r(o){var i=t(o);return i.length==1&&i[0][2]?n(i[0][0],i[0][1]):function(a){return a===o||e(a,o,i)}}return xs=r,xs}var ws,fv;function Cn(){if(fv)return ws;fv=1;var e=ln(),t=yt(),n="[object Symbol]";function r(o){return typeof o=="symbol"||t(o)&&e(o)==n}return ws=r,ws}var $s,pv;function wd(){if(pv)return $s;pv=1;var e=Oe(),t=Cn(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function o(i,a){if(e(i))return!1;var s=typeof i;return s=="number"||s=="symbol"||s=="boolean"||i==null||t(i)?!0:r.test(i)||!n.test(i)||a!=null&&i in Object(a)}return $s=o,$s}var Es,hv;function $I(){if(hv)return Es;hv=1;var e=cd(),t="Expected a function";function n(r,o){if(typeof r!="function"||o!=null&&typeof o!="function")throw new TypeError(t);var i=function(){var a=arguments,s=o?o.apply(this,a):a[0],l=i.cache;if(l.has(s))return l.get(s);var u=r.apply(this,a);return i.cache=l.set(s,u)||l,u};return i.cache=new(n.Cache||e),i}return n.Cache=e,Es=n,Es}var ks,vv;function EI(){if(vv)return ks;vv=1;var e=$I(),t=500;function n(r){var o=e(r,function(a){return i.size===t&&i.clear(),a}),i=o.cache;return o}return ks=n,ks}var Ss,gv;function kI(){if(gv)return Ss;gv=1;var e=EI(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(o){var i=[];return o.charCodeAt(0)===46&&i.push(""),o.replace(t,function(a,s,l,u){i.push(l?u.replace(n,"$1"):s||a)}),i});return Ss=r,Ss}var Cs,mv;function To(){if(mv)return Cs;mv=1;function e(t,n){for(var r=-1,o=t==null?0:t.length,i=Array(o);++r<o;)i[r]=n(t[r],r,t);return i}return Cs=e,Cs}var Ns,_v;function SI(){if(_v)return Ns;_v=1;var e=En(),t=To(),n=Oe(),r=Cn(),o=e?e.prototype:void 0,i=o?o.toString:void 0;function a(s){if(typeof s=="string")return s;if(n(s))return t(s,a)+"";if(r(s))return i?i.call(s):"";var l=s+"";return l=="0"&&1/s==-1/0?"-0":l}return Ns=a,Ns}var Is,yv;function m1(){if(yv)return Is;yv=1;var e=SI();function t(n){return n==null?"":e(n)}return Is=t,Is}var qs,bv;function Ro(){if(bv)return qs;bv=1;var e=Oe(),t=wd(),n=kI(),r=m1();function o(i,a){return e(i)?i:t(i,a)?[i]:n(r(i))}return qs=o,qs}var Ts,xv;function hr(){if(xv)return Ts;xv=1;var e=Cn();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return Ts=t,Ts}var Rs,wv;function Ao(){if(wv)return Rs;wv=1;var e=Ro(),t=hr();function n(r,o){o=e(o,r);for(var i=0,a=o.length;r!=null&&i<a;)r=r[t(o[i++])];return i&&i==a?r:void 0}return Rs=n,Rs}var As,$v;function CI(){if($v)return As;$v=1;var e=Ao();function t(n,r,o){var i=n==null?void 0:e(n,r);return i===void 0?o:i}return As=t,As}var Ms,Ev;function NI(){if(Ev)return Ms;Ev=1;function e(t,n){return t!=null&&n in Object(t)}return Ms=e,Ms}var Ps,kv;function _1(){if(kv)return Ps;kv=1;var e=Ro(),t=fr(),n=Oe(),r=So(),o=fd(),i=hr();function a(s,l,u){l=e(l,s);for(var c=-1,d=l.length,f=!1;++c<d;){var p=i(l[c]);if(!(f=s!=null&&u(s,p)))break;s=s[p]}return f||++c!=d?f:(d=s==null?0:s.length,!!d&&o(d)&&r(p,d)&&(n(s)||t(s)))}return Ps=a,Ps}var Os,Sv;function y1(){if(Sv)return Os;Sv=1;var e=NI(),t=_1();function n(r,o){return r!=null&&t(r,o,e)}return Os=n,Os}var Ds,Cv;function II(){if(Cv)return Ds;Cv=1;var e=h1(),t=CI(),n=y1(),r=wd(),o=v1(),i=g1(),a=hr(),s=1,l=2;function u(c,d){return r(c)&&o(d)?i(a(c),d):function(f){var p=t(f,c);return p===void 0&&p===d?n(f,c):e(d,p,s|l)}}return Ds=u,Ds}var zs,Nv;function b1(){if(Nv)return zs;Nv=1;function e(t){return function(n){return n==null?void 0:n[t]}}return zs=e,zs}var Vs,Iv;function qI(){if(Iv)return Vs;Iv=1;var e=Ao();function t(n){return function(r){return e(r,n)}}return Vs=t,Vs}var Bs,qv;function TI(){if(qv)return Bs;qv=1;var e=b1(),t=qI(),n=wd(),r=hr();function o(i){return n(i)?e(r(i)):t(i)}return Bs=o,Bs}var Ls,Tv;function Tt(){if(Tv)return Ls;Tv=1;var e=wI(),t=II(),n=dn(),r=Oe(),o=TI();function i(a){return typeof a=="function"?a:a==null?n:typeof a=="object"?r(a)?t(a[0],a[1]):e(a):o(a)}return Ls=i,Ls}var Fs,Rv;function x1(){if(Rv)return Fs;Rv=1;var e=Zy(),t=fI(),n=Tt(),r=Oe();function o(i,a){var s=r(i)?e:t;return s(i,n(a,3))}return Fs=o,Fs}var Us,Av;function RI(){if(Av)return Us;Av=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,o){return r!=null&&t.call(r,o)}return Us=n,Us}var Gs,Mv;function w1(){if(Mv)return Gs;Mv=1;var e=RI(),t=_1();function n(r,o){return r!=null&&t(r,o,e)}return Gs=n,Gs}var Hs,Pv;function AI(){if(Pv)return Hs;Pv=1;var e=hd(),t=Sn(),n=fr(),r=Oe(),o=qt(),i=kn(),a=No(),s=pr(),l="[object Map]",u="[object Set]",c=Object.prototype,d=c.hasOwnProperty;function f(p){if(p==null)return!0;if(o(p)&&(r(p)||typeof p=="string"||typeof p.splice=="function"||i(p)||s(p)||n(p)))return!p.length;var g=t(p);if(g==l||g==u)return!p.size;if(a(p))return!e(p).length;for(var m in p)if(d.call(p,m))return!1;return!0}return Hs=f,Hs}var js,Ov;function $1(){if(Ov)return js;Ov=1;function e(t){return t===void 0}return js=e,js}var Ys,Dv;function E1(){if(Dv)return Ys;Dv=1;var e=qo(),t=qt();function n(r,o){var i=-1,a=t(r)?Array(r.length):[];return e(r,function(s,l,u){a[++i]=o(s,l,u)}),a}return Ys=n,Ys}var Xs,zv;function k1(){if(zv)return Xs;zv=1;var e=To(),t=Tt(),n=E1(),r=Oe();function o(i,a){var s=r(i)?e:n;return s(i,t(a,3))}return Xs=o,Xs}var Ks,Vv;function MI(){if(Vv)return Ks;Vv=1;function e(t,n,r,o){var i=-1,a=t==null?0:t.length;for(o&&a&&(r=t[++i]);++i<a;)r=n(r,t[i],i,t);return r}return Ks=e,Ks}var Ws,Bv;function PI(){if(Bv)return Ws;Bv=1;function e(t,n,r,o,i){return i(t,function(a,s,l){r=o?(o=!1,a):n(r,a,s,l)}),r}return Ws=e,Ws}var Zs,Lv;function S1(){if(Lv)return Zs;Lv=1;var e=MI(),t=qo(),n=Tt(),r=PI(),o=Oe();function i(a,s,l){var u=o(a)?e:r,c=arguments.length<3;return u(a,n(s,4),l,c,t)}return Zs=i,Zs}var Js,Fv;function OI(){if(Fv)return Js;Fv=1;var e=ln(),t=Oe(),n=yt(),r="[object String]";function o(i){return typeof i=="string"||!t(i)&&n(i)&&e(i)==r}return Js=o,Js}var Qs,Uv;function DI(){if(Uv)return Qs;Uv=1;var e=b1(),t=e("length");return Qs=t,Qs}var el,Gv;function zI(){if(Gv)return el;Gv=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,i="\\ufe0e\\ufe0f",a="\\u200d",s=RegExp("["+a+e+o+i+"]");function l(u){return s.test(u)}return el=l,el}var tl,Hv;function VI(){if(Hv)return tl;Hv=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,i="\\ufe0e\\ufe0f",a="["+e+"]",s="["+o+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+s+"|"+l+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",g=u+"?",m="["+i+"]?",y="(?:"+p+"(?:"+[c,d,f].join("|")+")"+m+g+")*",v=m+g+y,_="(?:"+[c+s+"?",s,d,f,a].join("|")+")",b=RegExp(l+"(?="+l+")|"+_+v,"g");function $(k){for(var P=b.lastIndex=0;b.test(k);)++P;return P}return tl=$,tl}var nl,jv;function BI(){if(jv)return nl;jv=1;var e=DI(),t=zI(),n=VI();function r(o){return t(o)?n(o):e(o)}return nl=r,nl}var rl,Yv;function LI(){if(Yv)return rl;Yv=1;var e=hd(),t=Sn(),n=qt(),r=OI(),o=BI(),i="[object Map]",a="[object Set]";function s(l){if(l==null)return 0;if(n(l))return r(l)?o(l):l.length;var u=t(l);return u==i||u==a?l.size:e(l).length}return rl=s,rl}var ol,Xv;function FI(){if(Xv)return ol;Xv=1;var e=dd(),t=i1(),n=bd(),r=Tt(),o=Io(),i=Oe(),a=kn(),s=cr(),l=et(),u=pr();function c(d,f,p){var g=i(d),m=g||a(d)||u(d);if(f=r(f,4),p==null){var y=d&&d.constructor;m?p=g?new y:[]:l(d)?p=s(y)?t(o(d)):{}:p={}}return(m?e:n)(d,function(v,_,b){return f(p,v,_,b)}),p}return ol=c,ol}var il,Kv;function UI(){if(Kv)return il;Kv=1;var e=En(),t=fr(),n=Oe(),r=e?e.isConcatSpreadable:void 0;function o(i){return n(i)||t(i)||!!(r&&i&&i[r])}return il=o,il}var al,Wv;function $d(){if(Wv)return al;Wv=1;var e=gd(),t=UI();function n(r,o,i,a,s){var l=-1,u=r.length;for(i||(i=t),s||(s=[]);++l<u;){var c=r[l];o>0&&i(c)?o>1?n(c,o-1,i,a,s):e(s,c):a||(s[s.length]=c)}return s}return al=n,al}var sl,Zv;function GI(){if(Zv)return sl;Zv=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return sl=e,sl}var ll,Jv;function C1(){if(Jv)return ll;Jv=1;var e=GI(),t=Math.max;function n(r,o,i){return o=t(o===void 0?r.length-1:o,0),function(){for(var a=arguments,s=-1,l=t(a.length-o,0),u=Array(l);++s<l;)u[s]=a[o+s];s=-1;for(var c=Array(o+1);++s<o;)c[s]=a[s];return c[o]=i(u),e(r,this,c)}}return ll=n,ll}var ul,Qv;function HI(){if(Qv)return ul;Qv=1;var e=_d(),t=jy(),n=dn(),r=t?function(o,i){return t(o,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:n;return ul=r,ul}var cl,eg;function jI(){if(eg)return cl;eg=1;var e=800,t=16,n=Date.now;function r(o){var i=0,a=0;return function(){var s=n(),l=t-(s-a);if(a=s,l>0){if(++i>=e)return arguments[0]}else i=0;return o.apply(void 0,arguments)}}return cl=r,cl}var dl,tg;function N1(){if(tg)return dl;tg=1;var e=HI(),t=jI(),n=t(e);return dl=n,dl}var fl,ng;function Mo(){if(ng)return fl;ng=1;var e=dn(),t=C1(),n=N1();function r(o,i){return n(t(o,i,e),o+"")}return fl=r,fl}var pl,rg;function I1(){if(rg)return pl;rg=1;function e(t,n,r,o){for(var i=t.length,a=r+(o?1:-1);o?a--:++a<i;)if(n(t[a],a,t))return a;return-1}return pl=e,pl}var hl,og;function YI(){if(og)return hl;og=1;function e(t){return t!==t}return hl=e,hl}var vl,ig;function XI(){if(ig)return vl;ig=1;function e(t,n,r){for(var o=r-1,i=t.length;++o<i;)if(t[o]===n)return o;return-1}return vl=e,vl}var gl,ag;function KI(){if(ag)return gl;ag=1;var e=I1(),t=YI(),n=XI();function r(o,i,a){return i===i?n(o,i,a):e(o,t,a)}return gl=r,gl}var ml,sg;function WI(){if(sg)return ml;sg=1;var e=KI();function t(n,r){var o=n==null?0:n.length;return!!o&&e(n,r,0)>-1}return ml=t,ml}var _l,lg;function ZI(){if(lg)return _l;lg=1;function e(t,n,r){for(var o=-1,i=t==null?0:t.length;++o<i;)if(r(n,t[o]))return!0;return!1}return _l=e,_l}var yl,ug;function JI(){if(ug)return yl;ug=1;function e(){}return yl=e,yl}var bl,cg;function QI(){if(cg)return bl;cg=1;var e=n1(),t=JI(),n=xd(),r=1/0,o=e&&1/n(new e([,-0]))[1]==r?function(i){return new e(i)}:t;return bl=o,bl}var xl,dg;function eq(){if(dg)return xl;dg=1;var e=d1(),t=WI(),n=ZI(),r=f1(),o=QI(),i=xd(),a=200;function s(l,u,c){var d=-1,f=t,p=l.length,g=!0,m=[],y=m;if(c)g=!1,f=n;else if(p>=a){var v=u?null:o(l);if(v)return i(v);g=!1,f=r,y=new e}else y=u?[]:m;e:for(;++d<p;){var _=l[d],b=u?u(_):_;if(_=c||_!==0?_:0,g&&b===b){for(var $=y.length;$--;)if(y[$]===b)continue e;u&&y.push(b),m.push(_)}else f(y,b,c)||(y!==m&&y.push(b),m.push(_))}return m}return xl=s,xl}var wl,fg;function q1(){if(fg)return wl;fg=1;var e=qt(),t=yt();function n(r){return t(r)&&e(r)}return wl=n,wl}var $l,pg;function tq(){if(pg)return $l;pg=1;var e=$d(),t=Mo(),n=eq(),r=q1(),o=t(function(i){return n(e(i,1,r,!0))});return $l=o,$l}var El,hg;function nq(){if(hg)return El;hg=1;var e=To();function t(n,r){return e(r,function(o){return n[o]})}return El=t,El}var kl,vg;function T1(){if(vg)return kl;vg=1;var e=nq(),t=Ut();function n(r){return r==null?[]:e(r,t(r))}return kl=n,kl}var Sl,gg;function tt(){if(gg)return Sl;gg=1;var e;if(typeof Lc=="function")try{e={clone:uI(),constant:_d(),each:c1(),filter:x1(),has:w1(),isArray:Oe(),isEmpty:AI(),isFunction:cr(),isUndefined:$1(),keys:Ut(),map:k1(),reduce:S1(),size:LI(),transform:FI(),union:tq(),values:T1()}}catch{}return e||(e=window._),Sl=e,Sl}var Cl,mg;function Ed(){if(mg)return Cl;mg=1;var e=tt();Cl=o;var t="\0",n="\0",r="";function o(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(c){return this._label=c,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return e.keys(this._nodes)},o.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},o.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},o.prototype.setNodes=function(c,d){var f=arguments,p=this;return e.each(c,function(g){f.length>1?p.setNode(g,d):p.setNode(g)}),this},o.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},o.prototype.node=function(c){return this._nodes[c]},o.prototype.hasNode=function(c){return e.has(this._nodes,c)},o.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var f=function(p){d.removeEdge(d._edgeObjs[p])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(p){d.setParent(p)}),delete this._children[c]),e.each(e.keys(this._in[c]),f),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),f),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},o.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var f=d;!e.isUndefined(f);f=this.parent(f))if(f===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},o.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},o.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==n)return d}},o.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},o.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},o.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},o.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},o.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},o.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;e.each(this._nodes,function(m,y){c(y)&&d.setNode(y,m)}),e.each(this._edgeObjs,function(m){d.hasNode(m.v)&&d.hasNode(m.w)&&d.setEdge(m,f.edge(m))});var p={};function g(m){var y=f.parent(m);return y===void 0||d.hasNode(y)?(p[m]=y,y):y in p?p[y]:g(y)}return this._isCompound&&e.each(d.nodes(),function(m){d.setParent(m,g(m))}),d},o.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return e.values(this._edgeObjs)},o.prototype.setPath=function(c,d){var f=this,p=arguments;return e.reduce(c,function(g,m){return p.length>1?f.setEdge(g,m,d):f.setEdge(g,m),m}),this},o.prototype.setEdge=function(){var c,d,f,p,g=!1,m=arguments[0];typeof m=="object"&&m!==null&&"v"in m?(c=m.v,d=m.w,f=m.name,arguments.length===2&&(p=arguments[1],g=!0)):(c=m,d=arguments[1],f=arguments[3],arguments.length>2&&(p=arguments[2],g=!0)),c=""+c,d=""+d,e.isUndefined(f)||(f=""+f);var y=s(this._isDirected,c,d,f);if(e.has(this._edgeLabels,y))return g&&(this._edgeLabels[y]=p),this;if(!e.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[y]=g?p:this._defaultEdgeLabelFn(c,d,f);var v=l(this._isDirected,c,d,f);return c=v.v,d=v.w,Object.freeze(v),this._edgeObjs[y]=v,i(this._preds[d],c),i(this._sucs[c],d),this._in[d][y]=v,this._out[c][y]=v,this._edgeCount++,this},o.prototype.edge=function(c,d,f){var p=arguments.length===1?u(this._isDirected,arguments[0]):s(this._isDirected,c,d,f);return this._edgeLabels[p]},o.prototype.hasEdge=function(c,d,f){var p=arguments.length===1?u(this._isDirected,arguments[0]):s(this._isDirected,c,d,f);return e.has(this._edgeLabels,p)},o.prototype.removeEdge=function(c,d,f){var p=arguments.length===1?u(this._isDirected,arguments[0]):s(this._isDirected,c,d,f),g=this._edgeObjs[p];return g&&(c=g.v,d=g.w,delete this._edgeLabels[p],delete this._edgeObjs[p],a(this._preds[d],c),a(this._sucs[c],d),delete this._in[d][p],delete this._out[c][p],this._edgeCount--),this},o.prototype.inEdges=function(c,d){var f=this._in[c];if(f){var p=e.values(f);return d?e.filter(p,function(g){return g.v===d}):p}},o.prototype.outEdges=function(c,d){var f=this._out[c];if(f){var p=e.values(f);return d?e.filter(p,function(g){return g.w===d}):p}},o.prototype.nodeEdges=function(c,d){var f=this.inEdges(c,d);if(f)return f.concat(this.outEdges(c,d))};function i(c,d){c[d]?c[d]++:c[d]=1}function a(c,d){--c[d]||delete c[d]}function s(c,d,f,p){var g=""+d,m=""+f;if(!c&&g>m){var y=g;g=m,m=y}return g+r+m+r+(e.isUndefined(p)?t:p)}function l(c,d,f,p){var g=""+d,m=""+f;if(!c&&g>m){var y=g;g=m,m=y}var v={v:g,w:m};return p&&(v.name=p),v}function u(c,d){return s(c,d.v,d.w,d.name)}return Cl}var Nl,_g;function rq(){return _g||(_g=1,Nl="2.1.8"),Nl}var Il,yg;function oq(){return yg||(yg=1,Il={Graph:Ed(),version:rq()}),Il}var ql,bg;function iq(){if(bg)return ql;bg=1;var e=tt(),t=Ed();ql={write:n,read:i};function n(a){var s={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:r(a),edges:o(a)};return e.isUndefined(a.graph())||(s.value=e.clone(a.graph())),s}function r(a){return e.map(a.nodes(),function(s){var l=a.node(s),u=a.parent(s),c={v:s};return e.isUndefined(l)||(c.value=l),e.isUndefined(u)||(c.parent=u),c})}function o(a){return e.map(a.edges(),function(s){var l=a.edge(s),u={v:s.v,w:s.w};return e.isUndefined(s.name)||(u.name=s.name),e.isUndefined(l)||(u.value=l),u})}function i(a){var s=new t(a.options).setGraph(a.value);return e.each(a.nodes,function(l){s.setNode(l.v,l.value),l.parent&&s.setParent(l.v,l.parent)}),e.each(a.edges,function(l){s.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),s}return ql}var Tl,xg;function aq(){if(xg)return Tl;xg=1;var e=tt();Tl=t;function t(n){var r={},o=[],i;function a(s){e.has(r,s)||(r[s]=!0,i.push(s),e.each(n.successors(s),a),e.each(n.predecessors(s),a))}return e.each(n.nodes(),function(s){i=[],a(s),i.length&&o.push(i)}),o}return Tl}var Rl,wg;function R1(){if(wg)return Rl;wg=1;var e=tt();Rl=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var o=this._keyIndices;if(n=String(n),!e.has(o,n)){var i=this._arr,a=i.length;return o[n]=a,i.push({key:n,priority:r}),this._decrease(a),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var o=this._keyIndices[n];if(r>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[o].priority+" New: "+r);this._arr[o].priority=r,this._decrease(o)},t.prototype._heapify=function(n){var r=this._arr,o=2*n,i=o+1,a=n;o<r.length&&(a=r[o].priority<r[a].priority?o:a,i<r.length&&(a=r[i].priority<r[a].priority?i:a),a!==n&&(this._swap(n,a),this._heapify(a)))},t.prototype._decrease=function(n){for(var r=this._arr,o=r[n].priority,i;n!==0&&(i=n>>1,!(r[i].priority<o));)this._swap(n,i),n=i},t.prototype._swap=function(n,r){var o=this._arr,i=this._keyIndices,a=o[n],s=o[r];o[n]=s,o[r]=a,i[s.key]=n,i[a.key]=r},Rl}var Al,$g;function A1(){if($g)return Al;$g=1;var e=tt(),t=R1();Al=r;var n=e.constant(1);function r(i,a,s,l){return o(i,String(a),s||n,l||function(u){return i.outEdges(u)})}function o(i,a,s,l){var u={},c=new t,d,f,p=function(g){var m=g.v!==d?g.v:g.w,y=u[m],v=s(g),_=f.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+v);_<y.distance&&(y.distance=_,y.predecessor=d,c.decrease(m,_))};for(i.nodes().forEach(function(g){var m=g===a?0:Number.POSITIVE_INFINITY;u[g]={distance:m},c.add(g,m)});c.size()>0&&(d=c.removeMin(),f=u[d],f.distance!==Number.POSITIVE_INFINITY);)l(d).forEach(p);return u}return Al}var Ml,Eg;function sq(){if(Eg)return Ml;Eg=1;var e=A1(),t=tt();Ml=n;function n(r,o,i){return t.transform(r.nodes(),function(a,s){a[s]=e(r,s,o,i)},{})}return Ml}var Pl,kg;function M1(){if(kg)return Pl;kg=1;var e=tt();Pl=t;function t(n){var r=0,o=[],i={},a=[];function s(l){var u=i[l]={onStack:!0,lowlink:r,index:r++};if(o.push(l),n.successors(l).forEach(function(f){e.has(i,f)?i[f].onStack&&(u.lowlink=Math.min(u.lowlink,i[f].index)):(s(f),u.lowlink=Math.min(u.lowlink,i[f].lowlink))}),u.lowlink===u.index){var c=[],d;do d=o.pop(),i[d].onStack=!1,c.push(d);while(l!==d);a.push(c)}}return n.nodes().forEach(function(l){e.has(i,l)||s(l)}),a}return Pl}var Ol,Sg;function lq(){if(Sg)return Ol;Sg=1;var e=tt(),t=M1();Ol=n;function n(r){return e.filter(t(r),function(o){return o.length>1||o.length===1&&r.hasEdge(o[0],o[0])})}return Ol}var Dl,Cg;function uq(){if(Cg)return Dl;Cg=1;var e=tt();Dl=n;var t=e.constant(1);function n(o,i,a){return r(o,i||t,a||function(s){return o.outEdges(s)})}function r(o,i,a){var s={},l=o.nodes();return l.forEach(function(u){s[u]={},s[u][u]={distance:0},l.forEach(function(c){u!==c&&(s[u][c]={distance:Number.POSITIVE_INFINITY})}),a(u).forEach(function(c){var d=c.v===u?c.w:c.v,f=i(c);s[u][d]={distance:f,predecessor:u}})}),l.forEach(function(u){var c=s[u];l.forEach(function(d){var f=s[d];l.forEach(function(p){var g=f[u],m=c[p],y=f[p],v=g.distance+m.distance;v<y.distance&&(y.distance=v,y.predecessor=m.predecessor)})})}),s}return Dl}var zl,Ng;function P1(){if(Ng)return zl;Ng=1;var e=tt();zl=t,t.CycleException=n;function t(r){var o={},i={},a=[];function s(l){if(e.has(i,l))throw new n;e.has(o,l)||(i[l]=!0,o[l]=!0,e.each(r.predecessors(l),s),delete i[l],a.push(l))}if(e.each(r.sinks(),s),e.size(o)!==r.nodeCount())throw new n;return a}function n(){}return n.prototype=new Error,zl}var Vl,Ig;function cq(){if(Ig)return Vl;Ig=1;var e=P1();Vl=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Vl}var Bl,qg;function O1(){if(qg)return Bl;qg=1;var e=tt();Bl=t;function t(r,o,i){e.isArray(o)||(o=[o]);var a=(r.isDirected()?r.successors:r.neighbors).bind(r),s=[],l={};return e.each(o,function(u){if(!r.hasNode(u))throw new Error("Graph does not have node: "+u);n(r,u,i==="post",l,a,s)}),s}function n(r,o,i,a,s,l){e.has(a,o)||(a[o]=!0,i||l.push(o),e.each(s(o),function(u){n(r,u,i,a,s,l)}),i&&l.push(o))}return Bl}var Ll,Tg;function dq(){if(Tg)return Ll;Tg=1;var e=O1();Ll=t;function t(n,r){return e(n,r,"post")}return Ll}var Fl,Rg;function fq(){if(Rg)return Fl;Rg=1;var e=O1();Fl=t;function t(n,r){return e(n,r,"pre")}return Fl}var Ul,Ag;function pq(){if(Ag)return Ul;Ag=1;var e=tt(),t=Ed(),n=R1();Ul=r;function r(o,i){var a=new t,s={},l=new n,u;function c(f){var p=f.v===u?f.w:f.v,g=l.priority(p);if(g!==void 0){var m=i(f);m<g&&(s[p]=u,l.decrease(p,m))}}if(o.nodeCount()===0)return a;e.each(o.nodes(),function(f){l.add(f,Number.POSITIVE_INFINITY),a.setNode(f)}),l.decrease(o.nodes()[0],0);for(var d=!1;l.size()>0;){if(u=l.removeMin(),e.has(s,u))a.setEdge(u,s[u]);else{if(d)throw new Error("Input graph is not connected: "+o);d=!0}o.nodeEdges(u).forEach(c)}return a}return Ul}var Gl,Mg;function hq(){return Mg||(Mg=1,Gl={components:aq(),dijkstra:A1(),dijkstraAll:sq(),findCycles:lq(),floydWarshall:uq(),isAcyclic:cq(),postorder:dq(),preorder:fq(),prim:pq(),tarjan:M1(),topsort:P1()}),Gl}var Hl,Pg;function vq(){if(Pg)return Hl;Pg=1;var e=oq();return Hl={Graph:e.Graph,json:iq(),alg:hq(),version:e.version},Hl}var jl,Og;function st(){if(Og)return jl;Og=1;var e;if(typeof Lc=="function")try{e=vq()}catch{}return e||(e=window.graphlib),jl=e,jl}var Yl,Dg;function gq(){if(Dg)return Yl;Dg=1;var e=s1(),t=1,n=4;function r(o){return e(o,t|n)}return Yl=r,Yl}var Xl,zg;function Po(){if(zg)return Xl;zg=1;var e=$n(),t=qt(),n=So(),r=et();function o(i,a,s){if(!r(s))return!1;var l=typeof a;return(l=="number"?t(s)&&n(a,s.length):l=="string"&&a in s)?e(s[a],i):!1}return Xl=o,Xl}var Kl,Vg;function mq(){if(Vg)return Kl;Vg=1;var e=Mo(),t=$n(),n=Po(),r=cn(),o=Object.prototype,i=o.hasOwnProperty,a=e(function(s,l){s=Object(s);var u=-1,c=l.length,d=c>2?l[2]:void 0;for(d&&n(l[0],l[1],d)&&(c=1);++u<c;)for(var f=l[u],p=r(f),g=-1,m=p.length;++g<m;){var y=p[g],v=s[y];(v===void 0||t(v,o[y])&&!i.call(s,y))&&(s[y]=f[y])}return s});return Kl=a,Kl}var Wl,Bg;function _q(){if(Bg)return Wl;Bg=1;var e=Tt(),t=qt(),n=Ut();function r(o){return function(i,a,s){var l=Object(i);if(!t(i)){var u=e(a,3);i=n(i),a=function(d){return u(l[d],d,l)}}var c=o(i,a,s);return c>-1?l[u?i[c]:c]:void 0}}return Wl=r,Wl}var Zl,Lg;function yq(){if(Lg)return Zl;Lg=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Zl=t,Zl}var Jl,Fg;function bq(){if(Fg)return Jl;Fg=1;var e=yq(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Jl=n,Jl}var Ql,Ug;function xq(){if(Ug)return Ql;Ug=1;var e=bq(),t=et(),n=Cn(),r=NaN,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt;function l(u){if(typeof u=="number")return u;if(n(u))return r;if(t(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=t(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=e(u);var d=i.test(u);return d||a.test(u)?s(u.slice(2),d?2:8):o.test(u)?r:+u}return Ql=l,Ql}var eu,Gg;function D1(){if(Gg)return eu;Gg=1;var e=xq(),t=1/0,n=17976931348623157e292;function r(o){if(!o)return o===0?o:0;if(o=e(o),o===t||o===-1/0){var i=o<0?-1:1;return i*n}return o===o?o:0}return eu=r,eu}var tu,Hg;function wq(){if(Hg)return tu;Hg=1;var e=D1();function t(n){var r=e(n),o=r%1;return r===r?o?r-o:r:0}return tu=t,tu}var nu,jg;function $q(){if(jg)return nu;jg=1;var e=I1(),t=Tt(),n=wq(),r=Math.max;function o(i,a,s){var l=i==null?0:i.length;if(!l)return-1;var u=s==null?0:n(s);return u<0&&(u=r(l+u,0)),e(i,t(a,3),u)}return nu=o,nu}var ru,Yg;function Eq(){if(Yg)return ru;Yg=1;var e=_q(),t=$q(),n=e(t);return ru=n,ru}var ou,Xg;function z1(){if(Xg)return ou;Xg=1;var e=$d();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return ou=t,ou}var iu,Kg;function kq(){if(Kg)return iu;Kg=1;var e=yd(),t=l1(),n=cn();function r(o,i){return o==null?o:e(o,t(i),n)}return iu=r,iu}var au,Wg;function Sq(){if(Wg)return au;Wg=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return au=e,au}var su,Zg;function Cq(){if(Zg)return su;Zg=1;var e=Eo(),t=bd(),n=Tt();function r(o,i){var a={};return i=n(i,3),t(o,function(s,l,u){e(a,l,i(s,l,u))}),a}return su=r,su}var lu,Jg;function kd(){if(Jg)return lu;Jg=1;var e=Cn();function t(n,r,o){for(var i=-1,a=n.length;++i<a;){var s=n[i],l=r(s);if(l!=null&&(u===void 0?l===l&&!e(l):o(l,u)))var u=l,c=s}return c}return lu=t,lu}var uu,Qg;function Nq(){if(Qg)return uu;Qg=1;function e(t,n){return t>n}return uu=e,uu}var cu,em;function Iq(){if(em)return cu;em=1;var e=kd(),t=Nq(),n=dn();function r(o){return o&&o.length?e(o,n,t):void 0}return cu=r,cu}var du,tm;function V1(){if(tm)return du;tm=1;var e=Eo(),t=$n();function n(r,o,i){(i!==void 0&&!t(r[o],i)||i===void 0&&!(o in r))&&e(r,o,i)}return du=n,du}var fu,nm;function qq(){if(nm)return fu;nm=1;var e=ln(),t=Io(),n=yt(),r="[object Object]",o=Function.prototype,i=Object.prototype,a=o.toString,s=i.hasOwnProperty,l=a.call(Object);function u(c){if(!n(c)||e(c)!=r)return!1;var d=t(c);if(d===null)return!0;var f=s.call(d,"constructor")&&d.constructor;return typeof f=="function"&&f instanceof f&&a.call(f)==l}return fu=u,fu}var pu,rm;function B1(){if(rm)return pu;rm=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return pu=e,pu}var hu,om;function Tq(){if(om)return hu;om=1;var e=dr(),t=cn();function n(r){return e(r,t(r))}return hu=n,hu}var vu,im;function Rq(){if(im)return vu;im=1;var e=V1(),t=Ky(),n=o1(),r=Wy(),o=a1(),i=fr(),a=Oe(),s=q1(),l=kn(),u=cr(),c=et(),d=qq(),f=pr(),p=B1(),g=Tq();function m(y,v,_,b,$,k,P){var q=p(y,_),G=p(v,_),Y=P.get(G);if(Y){e(y,_,Y);return}var B=k?k(q,G,_+"",y,v,P):void 0,R=B===void 0;if(R){var S=a(G),W=!S&&l(G),w=!S&&!W&&f(G);B=G,S||W||w?a(q)?B=q:s(q)?B=r(q):W?(R=!1,B=t(G,!0)):w?(R=!1,B=n(G,!0)):B=[]:d(G)||i(G)?(B=q,i(q)?B=g(q):(!c(q)||u(q))&&(B=o(G))):R=!1}R&&(P.set(G,B),$(B,G,b,k,P),P.delete(G)),e(y,_,B)}return vu=m,vu}var gu,am;function Aq(){if(am)return gu;am=1;var e=$o(),t=V1(),n=yd(),r=Rq(),o=et(),i=cn(),a=B1();function s(l,u,c,d,f){l!==u&&n(u,function(p,g){if(f||(f=new e),o(p))r(l,u,g,c,s,d,f);else{var m=d?d(a(l,g),p,g+"",l,u,f):void 0;m===void 0&&(m=p),t(l,g,m)}},i)}return gu=s,gu}var mu,sm;function Mq(){if(sm)return mu;sm=1;var e=Mo(),t=Po();function n(r){return e(function(o,i){var a=-1,s=i.length,l=s>1?i[s-1]:void 0,u=s>2?i[2]:void 0;for(l=r.length>3&&typeof l=="function"?(s--,l):void 0,u&&t(i[0],i[1],u)&&(l=s<3?void 0:l,s=1),o=Object(o);++a<s;){var c=i[a];c&&r(o,c,a,l)}return o})}return mu=n,mu}var _u,lm;function Pq(){if(lm)return _u;lm=1;var e=Aq(),t=Mq(),n=t(function(r,o,i){e(r,o,i)});return _u=n,_u}var yu,um;function L1(){if(um)return yu;um=1;function e(t,n){return t<n}return yu=e,yu}var bu,cm;function Oq(){if(cm)return bu;cm=1;var e=kd(),t=L1(),n=dn();function r(o){return o&&o.length?e(o,n,t):void 0}return bu=r,bu}var xu,dm;function Dq(){if(dm)return xu;dm=1;var e=kd(),t=Tt(),n=L1();function r(o,i){return o&&o.length?e(o,t(i,2),n):void 0}return xu=r,xu}var wu,fm;function zq(){if(fm)return wu;fm=1;var e=ct(),t=function(){return e.Date.now()};return wu=t,wu}var $u,pm;function Vq(){if(pm)return $u;pm=1;var e=ko(),t=Ro(),n=So(),r=et(),o=hr();function i(a,s,l,u){if(!r(a))return a;s=t(s,a);for(var c=-1,d=s.length,f=d-1,p=a;p!=null&&++c<d;){var g=o(s[c]),m=l;if(g==="__proto__"||g==="constructor"||g==="prototype")return a;if(c!=f){var y=p[g];m=u?u(y,g,p):void 0,m===void 0&&(m=r(y)?y:n(s[c+1])?[]:{})}e(p,g,m),p=p[g]}return a}return $u=i,$u}var Eu,hm;function Bq(){if(hm)return Eu;hm=1;var e=Ao(),t=Vq(),n=Ro();function r(o,i,a){for(var s=-1,l=i.length,u={};++s<l;){var c=i[s],d=e(o,c);a(d,c)&&t(u,n(c,o),d)}return u}return Eu=r,Eu}var ku,vm;function Lq(){if(vm)return ku;vm=1;var e=Bq(),t=y1();function n(r,o){return e(r,o,function(i,a){return t(r,a)})}return ku=n,ku}var Su,gm;function Fq(){if(gm)return Su;gm=1;var e=z1(),t=C1(),n=N1();function r(o){return n(t(o,void 0,e),o+"")}return Su=r,Su}var Cu,mm;function Uq(){if(mm)return Cu;mm=1;var e=Lq(),t=Fq(),n=t(function(r,o){return r==null?{}:e(r,o)});return Cu=n,Cu}var Nu,_m;function Gq(){if(_m)return Nu;_m=1;var e=Math.ceil,t=Math.max;function n(r,o,i,a){for(var s=-1,l=t(e((o-r)/(i||1)),0),u=Array(l);l--;)u[a?l:++s]=r,r+=i;return u}return Nu=n,Nu}var Iu,ym;function Hq(){if(ym)return Iu;ym=1;var e=Gq(),t=Po(),n=D1();function r(o){return function(i,a,s){return s&&typeof s!="number"&&t(i,a,s)&&(a=s=void 0),i=n(i),a===void 0?(a=i,i=0):a=n(a),s=s===void 0?i<a?1:-1:n(s),e(i,a,s,o)}}return Iu=r,Iu}var qu,bm;function jq(){if(bm)return qu;bm=1;var e=Hq(),t=e();return qu=t,qu}var Tu,xm;function Yq(){if(xm)return Tu;xm=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return Tu=e,Tu}var Ru,wm;function Xq(){if(wm)return Ru;wm=1;var e=Cn();function t(n,r){if(n!==r){var o=n!==void 0,i=n===null,a=n===n,s=e(n),l=r!==void 0,u=r===null,c=r===r,d=e(r);if(!u&&!d&&!s&&n>r||s&&l&&c&&!u&&!d||i&&l&&c||!o&&c||!a)return 1;if(!i&&!s&&!d&&n<r||d&&o&&a&&!i&&!s||u&&o&&a||!l&&a||!c)return-1}return 0}return Ru=t,Ru}var Au,$m;function Kq(){if($m)return Au;$m=1;var e=Xq();function t(n,r,o){for(var i=-1,a=n.criteria,s=r.criteria,l=a.length,u=o.length;++i<l;){var c=e(a[i],s[i]);if(c){if(i>=u)return c;var d=o[i];return c*(d=="desc"?-1:1)}}return n.index-r.index}return Au=t,Au}var Mu,Em;function Wq(){if(Em)return Mu;Em=1;var e=To(),t=Ao(),n=Tt(),r=E1(),o=Yq(),i=Co(),a=Kq(),s=dn(),l=Oe();function u(c,d,f){d.length?d=e(d,function(m){return l(m)?function(y){return t(y,m.length===1?m[0]:m)}:m}):d=[s];var p=-1;d=e(d,i(n));var g=r(c,function(m,y,v){var _=e(d,function(b){return b(m)});return{criteria:_,index:++p,value:m}});return o(g,function(m,y){return a(m,y,f)})}return Mu=u,Mu}var Pu,km;function Zq(){if(km)return Pu;km=1;var e=$d(),t=Wq(),n=Mo(),r=Po(),o=n(function(i,a){if(i==null)return[];var s=a.length;return s>1&&r(i,a[0],a[1])?a=[]:s>2&&r(a[0],a[1],a[2])&&(a=[a[0]]),t(i,e(a,1),[])});return Pu=o,Pu}var Ou,Sm;function Jq(){if(Sm)return Ou;Sm=1;var e=m1(),t=0;function n(r){var o=++t;return e(r)+o}return Ou=n,Ou}var Du,Cm;function Qq(){if(Cm)return Du;Cm=1;function e(t,n,r){for(var o=-1,i=t.length,a=n.length,s={};++o<i;){var l=o<a?n[o]:void 0;r(s,t[o],l)}return s}return Du=e,Du}var zu,Nm;function eT(){if(Nm)return zu;Nm=1;var e=ko(),t=Qq();function n(r,o){return t(r||[],o||[],e)}return zu=n,zu}var Vu,Im;function Ae(){if(Im)return Vu;Im=1;var e;if(typeof Lc=="function")try{e={cloneDeep:gq(),constant:_d(),defaults:mq(),each:c1(),filter:x1(),find:Eq(),flatten:z1(),forEach:u1(),forIn:kq(),has:w1(),isUndefined:$1(),last:Sq(),map:k1(),mapValues:Cq(),max:Iq(),merge:Pq(),min:Oq(),minBy:Dq(),now:zq(),pick:Uq(),range:jq(),reduce:S1(),sortBy:Zq(),uniqueId:Jq(),values:T1(),zipObject:eT()}}catch{}return e||(e=window._),Vu=e,Vu}var Bu,qm;function tT(){if(qm)return Bu;qm=1,Bu=e;function e(){var r={};r._next=r._prev=r,this._sentinel=r}e.prototype.dequeue=function(){var r=this._sentinel,o=r._prev;if(o!==r)return t(o),o},e.prototype.enqueue=function(r){var o=this._sentinel;r._prev&&r._next&&t(r),r._next=o._next,o._next._prev=r,o._next=r,r._prev=o},e.prototype.toString=function(){for(var r=[],o=this._sentinel,i=o._prev;i!==o;)r.push(JSON.stringify(i,n)),i=i._prev;return"["+r.join(", ")+"]"};function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,o){if(r!=="_next"&&r!=="_prev")return o}return Bu}var Lu,Tm;function nT(){if(Tm)return Lu;Tm=1;var e=Ae(),t=st().Graph,n=tT();Lu=o;var r=e.constant(1);function o(u,c){if(u.nodeCount()<=1)return[];var d=s(u,c||r),f=i(d.graph,d.buckets,d.zeroIdx);return e.flatten(e.map(f,function(p){return u.outEdges(p.v,p.w)}),!0)}function i(u,c,d){for(var f=[],p=c[c.length-1],g=c[0],m;u.nodeCount();){for(;m=g.dequeue();)a(u,c,d,m);for(;m=p.dequeue();)a(u,c,d,m);if(u.nodeCount()){for(var y=c.length-2;y>0;--y)if(m=c[y].dequeue(),m){f=f.concat(a(u,c,d,m,!0));break}}}return f}function a(u,c,d,f,p){var g=p?[]:void 0;return e.forEach(u.inEdges(f.v),function(m){var y=u.edge(m),v=u.node(m.v);p&&g.push({v:m.v,w:m.w}),v.out-=y,l(c,d,v)}),e.forEach(u.outEdges(f.v),function(m){var y=u.edge(m),v=m.w,_=u.node(v);_.in-=y,l(c,d,_)}),u.removeNode(f.v),g}function s(u,c){var d=new t,f=0,p=0;e.forEach(u.nodes(),function(y){d.setNode(y,{v:y,in:0,out:0})}),e.forEach(u.edges(),function(y){var v=d.edge(y.v,y.w)||0,_=c(y),b=v+_;d.setEdge(y.v,y.w,b),p=Math.max(p,d.node(y.v).out+=_),f=Math.max(f,d.node(y.w).in+=_)});var g=e.range(p+f+3).map(function(){return new n}),m=f+1;return e.forEach(d.nodes(),function(y){l(g,m,d.node(y))}),{graph:d,buckets:g,zeroIdx:m}}function l(u,c,d){d.out?d.in?u[d.out-d.in+c].enqueue(d):u[u.length-1].enqueue(d):u[0].enqueue(d)}return Lu}var Fu,Rm;function rT(){if(Rm)return Fu;Rm=1;var e=Ae(),t=nT();Fu={run:n,undo:o};function n(i){var a=i.graph().acyclicer==="greedy"?t(i,s(i)):r(i);e.forEach(a,function(l){var u=i.edge(l);i.removeEdge(l),u.forwardName=l.name,u.reversed=!0,i.setEdge(l.w,l.v,u,e.uniqueId("rev"))});function s(l){return function(u){return l.edge(u).weight}}}function r(i){var a=[],s={},l={};function u(c){e.has(l,c)||(l[c]=!0,s[c]=!0,e.forEach(i.outEdges(c),function(d){e.has(s,d.w)?a.push(d):u(d.w)}),delete s[c])}return e.forEach(i.nodes(),u),a}function o(i){e.forEach(i.edges(),function(a){var s=i.edge(a);if(s.reversed){i.removeEdge(a);var l=s.forwardName;delete s.reversed,delete s.forwardName,i.setEdge(a.w,a.v,s,l)}})}return Fu}var Uu,Am;function je(){if(Am)return Uu;Am=1;var e=Ae(),t=st().Graph;Uu={addDummyNode:n,simplify:r,asNonCompoundGraph:o,successorWeights:i,predecessorWeights:a,intersectRect:s,buildLayerMatrix:l,normalizeRanks:u,removeEmptyRanks:c,addBorderNode:d,maxRank:f,partition:p,time:g,notime:m};function n(y,v,_,b){var $;do $=e.uniqueId(b);while(y.hasNode($));return _.dummy=v,y.setNode($,_),$}function r(y){var v=new t().setGraph(y.graph());return e.forEach(y.nodes(),function(_){v.setNode(_,y.node(_))}),e.forEach(y.edges(),function(_){var b=v.edge(_.v,_.w)||{weight:0,minlen:1},$=y.edge(_);v.setEdge(_.v,_.w,{weight:b.weight+$.weight,minlen:Math.max(b.minlen,$.minlen)})}),v}function o(y){var v=new t({multigraph:y.isMultigraph()}).setGraph(y.graph());return e.forEach(y.nodes(),function(_){y.children(_).length||v.setNode(_,y.node(_))}),e.forEach(y.edges(),function(_){v.setEdge(_,y.edge(_))}),v}function i(y){var v=e.map(y.nodes(),function(_){var b={};return e.forEach(y.outEdges(_),function($){b[$.w]=(b[$.w]||0)+y.edge($).weight}),b});return e.zipObject(y.nodes(),v)}function a(y){var v=e.map(y.nodes(),function(_){var b={};return e.forEach(y.inEdges(_),function($){b[$.v]=(b[$.v]||0)+y.edge($).weight}),b});return e.zipObject(y.nodes(),v)}function s(y,v){var _=y.x,b=y.y,$=v.x-_,k=v.y-b,P=y.width/2,q=y.height/2;if(!$&&!k)throw new Error("Not possible to find intersection inside of the rectangle");var G,Y;return Math.abs(k)*P>Math.abs($)*q?(k<0&&(q=-q),G=q*$/k,Y=q):($<0&&(P=-P),G=P,Y=P*k/$),{x:_+G,y:b+Y}}function l(y){var v=e.map(e.range(f(y)+1),function(){return[]});return e.forEach(y.nodes(),function(_){var b=y.node(_),$=b.rank;e.isUndefined($)||(v[$][b.order]=_)}),v}function u(y){var v=e.min(e.map(y.nodes(),function(_){return y.node(_).rank}));e.forEach(y.nodes(),function(_){var b=y.node(_);e.has(b,"rank")&&(b.rank-=v)})}function c(y){var v=e.min(e.map(y.nodes(),function(k){return y.node(k).rank})),_=[];e.forEach(y.nodes(),function(k){var P=y.node(k).rank-v;_[P]||(_[P]=[]),_[P].push(k)});var b=0,$=y.graph().nodeRankFactor;e.forEach(_,function(k,P){e.isUndefined(k)&&P%$!==0?--b:b&&e.forEach(k,function(q){y.node(q).rank+=b})})}function d(y,v,_,b){var $={width:0,height:0};return arguments.length>=4&&($.rank=_,$.order=b),n(y,"border",$,v)}function f(y){return e.max(e.map(y.nodes(),function(v){var _=y.node(v).rank;if(!e.isUndefined(_))return _}))}function p(y,v){var _={lhs:[],rhs:[]};return e.forEach(y,function(b){v(b)?_.lhs.push(b):_.rhs.push(b)}),_}function g(y,v){var _=e.now();try{return v()}finally{console.log(y+" time: "+(e.now()-_)+"ms")}}function m(y,v){return v()}return Uu}var Gu,Mm;function oT(){if(Mm)return Gu;Mm=1;var e=Ae(),t=je();Gu={run:n,undo:o};function n(i){i.graph().dummyChains=[],e.forEach(i.edges(),function(a){r(i,a)})}function r(i,a){var s=a.v,l=i.node(s).rank,u=a.w,c=i.node(u).rank,d=a.name,f=i.edge(a),p=f.labelRank;if(c!==l+1){i.removeEdge(a);var g,m,y;for(y=0,++l;l<c;++y,++l)f.points=[],m={width:0,height:0,edgeLabel:f,edgeObj:a,rank:l},g=t.addDummyNode(i,"edge",m,"_d"),l===p&&(m.width=f.width,m.height=f.height,m.dummy="edge-label",m.labelpos=f.labelpos),i.setEdge(s,g,{weight:f.weight},d),y===0&&i.graph().dummyChains.push(g),s=g;i.setEdge(s,u,{weight:f.weight},d)}}function o(i){e.forEach(i.graph().dummyChains,function(a){var s=i.node(a),l=s.edgeLabel,u;for(i.setEdge(s.edgeObj,l);s.dummy;)u=i.successors(a)[0],i.removeNode(a),l.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(l.x=s.x,l.y=s.y,l.width=s.width,l.height=s.height),a=u,s=i.node(a)})}return Gu}var Hu,Pm;function to(){if(Pm)return Hu;Pm=1;var e=Ae();Hu={longestPath:t,slack:n};function t(r){var o={};function i(a){var s=r.node(a);if(e.has(o,a))return s.rank;o[a]=!0;var l=e.min(e.map(r.outEdges(a),function(u){return i(u.w)-r.edge(u).minlen}));return(l===Number.POSITIVE_INFINITY||l===void 0||l===null)&&(l=0),s.rank=l}e.forEach(r.sources(),i)}function n(r,o){return r.node(o.w).rank-r.node(o.v).rank-r.edge(o).minlen}return Hu}var ju,Om;function F1(){if(Om)return ju;Om=1;var e=Ae(),t=st().Graph,n=to().slack;ju=r;function r(s){var l=new t({directed:!1}),u=s.nodes()[0],c=s.nodeCount();l.setNode(u,{});for(var d,f;o(l,s)<c;)d=i(l,s),f=l.hasNode(d.v)?n(s,d):-n(s,d),a(l,s,f);return l}function o(s,l){function u(c){e.forEach(l.nodeEdges(c),function(d){var f=d.v,p=c===f?d.w:f;!s.hasNode(p)&&!n(l,d)&&(s.setNode(p,{}),s.setEdge(c,p,{}),u(p))})}return e.forEach(s.nodes(),u),s.nodeCount()}function i(s,l){return e.minBy(l.edges(),function(u){if(s.hasNode(u.v)!==s.hasNode(u.w))return n(l,u)})}function a(s,l,u){e.forEach(s.nodes(),function(c){l.node(c).rank+=u})}return ju}var Yu,Dm;function iT(){if(Dm)return Yu;Dm=1;var e=Ae(),t=F1(),n=to().slack,r=to().longestPath,o=st().alg.preorder,i=st().alg.postorder,a=je().simplify;Yu=s,s.initLowLimValues=d,s.initCutValues=l,s.calcCutValue=c,s.leaveEdge=p,s.enterEdge=g,s.exchangeEdges=m;function s(b){b=a(b),r(b);var $=t(b);d($),l($,b);for(var k,P;k=p($);)P=g($,b,k),m($,b,k,P)}function l(b,$){var k=i(b,b.nodes());k=k.slice(0,k.length-1),e.forEach(k,function(P){u(b,$,P)})}function u(b,$,k){var P=b.node(k),q=P.parent;b.edge(k,q).cutvalue=c(b,$,k)}function c(b,$,k){var P=b.node(k),q=P.parent,G=!0,Y=$.edge(k,q),B=0;return Y||(G=!1,Y=$.edge(q,k)),B=Y.weight,e.forEach($.nodeEdges(k),function(R){var S=R.v===k,W=S?R.w:R.v;if(W!==q){var w=S===G,I=$.edge(R).weight;if(B+=w?I:-I,v(b,k,W)){var E=b.edge(k,W).cutvalue;B+=w?-E:E}}}),B}function d(b,$){arguments.length<2&&($=b.nodes()[0]),f(b,{},1,$)}function f(b,$,k,P,q){var G=k,Y=b.node(P);return $[P]=!0,e.forEach(b.neighbors(P),function(B){e.has($,B)||(k=f(b,$,k,B,P))}),Y.low=G,Y.lim=k++,q?Y.parent=q:delete Y.parent,k}function p(b){return e.find(b.edges(),function($){return b.edge($).cutvalue<0})}function g(b,$,k){var P=k.v,q=k.w;$.hasEdge(P,q)||(P=k.w,q=k.v);var G=b.node(P),Y=b.node(q),B=G,R=!1;G.lim>Y.lim&&(B=Y,R=!0);var S=e.filter($.edges(),function(W){return R===_(b,b.node(W.v),B)&&R!==_(b,b.node(W.w),B)});return e.minBy(S,function(W){return n($,W)})}function m(b,$,k,P){var q=k.v,G=k.w;b.removeEdge(q,G),b.setEdge(P.v,P.w,{}),d(b),l(b,$),y(b,$)}function y(b,$){var k=e.find(b.nodes(),function(q){return!$.node(q).parent}),P=o(b,k);P=P.slice(1),e.forEach(P,function(q){var G=b.node(q).parent,Y=$.edge(q,G),B=!1;Y||(Y=$.edge(G,q),B=!0),$.node(q).rank=$.node(G).rank+(B?Y.minlen:-Y.minlen)})}function v(b,$,k){return b.hasEdge($,k)}function _(b,$,k){return k.low<=$.lim&&$.lim<=k.lim}return Yu}var Xu,zm;function aT(){if(zm)return Xu;zm=1;var e=to(),t=e.longestPath,n=F1(),r=iT();Xu=o;function o(l){switch(l.graph().ranker){case"network-simplex":s(l);break;case"tight-tree":a(l);break;case"longest-path":i(l);break;default:s(l)}}var i=t;function a(l){t(l),n(l)}function s(l){r(l)}return Xu}var Ku,Vm;function sT(){if(Vm)return Ku;Vm=1;var e=Ae();Ku=t;function t(o){var i=r(o);e.forEach(o.graph().dummyChains,function(a){for(var s=o.node(a),l=s.edgeObj,u=n(o,i,l.v,l.w),c=u.path,d=u.lca,f=0,p=c[f],g=!0;a!==l.w;){if(s=o.node(a),g){for(;(p=c[f])!==d&&o.node(p).maxRank<s.rank;)f++;p===d&&(g=!1)}if(!g){for(;f<c.length-1&&o.node(p=c[f+1]).minRank<=s.rank;)f++;p=c[f]}o.setParent(a,p),a=o.successors(a)[0]}})}function n(o,i,a,s){var l=[],u=[],c=Math.min(i[a].low,i[s].low),d=Math.max(i[a].lim,i[s].lim),f,p;f=a;do f=o.parent(f),l.push(f);while(f&&(i[f].low>c||d>i[f].lim));for(p=f,f=s;(f=o.parent(f))!==p;)u.push(f);return{path:l.concat(u.reverse()),lca:p}}function r(o){var i={},a=0;function s(l){var u=a;e.forEach(o.children(l),s),i[l]={low:u,lim:a++}}return e.forEach(o.children(),s),i}return Ku}var Wu,Bm;function lT(){if(Bm)return Wu;Bm=1;var e=Ae(),t=je();Wu={run:n,cleanup:a};function n(s){var l=t.addDummyNode(s,"root",{},"_root"),u=o(s),c=e.max(e.values(u))-1,d=2*c+1;s.graph().nestingRoot=l,e.forEach(s.edges(),function(p){s.edge(p).minlen*=d});var f=i(s)+1;e.forEach(s.children(),function(p){r(s,l,d,f,c,u,p)}),s.graph().nodeRankFactor=d}function r(s,l,u,c,d,f,p){var g=s.children(p);if(!g.length){p!==l&&s.setEdge(l,p,{weight:0,minlen:u});return}var m=t.addBorderNode(s,"_bt"),y=t.addBorderNode(s,"_bb"),v=s.node(p);s.setParent(m,p),v.borderTop=m,s.setParent(y,p),v.borderBottom=y,e.forEach(g,function(_){r(s,l,u,c,d,f,_);var b=s.node(_),$=b.borderTop?b.borderTop:_,k=b.borderBottom?b.borderBottom:_,P=b.borderTop?c:2*c,q=$!==k?1:d-f[p]+1;s.setEdge(m,$,{weight:P,minlen:q,nestingEdge:!0}),s.setEdge(k,y,{weight:P,minlen:q,nestingEdge:!0})}),s.parent(p)||s.setEdge(l,m,{weight:0,minlen:d+f[p]})}function o(s){var l={};function u(c,d){var f=s.children(c);f&&f.length&&e.forEach(f,function(p){u(p,d+1)}),l[c]=d}return e.forEach(s.children(),function(c){u(c,1)}),l}function i(s){return e.reduce(s.edges(),function(l,u){return l+s.edge(u).weight},0)}function a(s){var l=s.graph();s.removeNode(l.nestingRoot),delete l.nestingRoot,e.forEach(s.edges(),function(u){var c=s.edge(u);c.nestingEdge&&s.removeEdge(u)})}return Wu}var Zu,Lm;function uT(){if(Lm)return Zu;Lm=1;var e=Ae(),t=je();Zu=n;function n(o){function i(a){var s=o.children(a),l=o.node(a);if(s.length&&e.forEach(s,i),e.has(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(var u=l.minRank,c=l.maxRank+1;u<c;++u)r(o,"borderLeft","_bl",a,l,u),r(o,"borderRight","_br",a,l,u)}}e.forEach(o.children(),i)}function r(o,i,a,s,l,u){var c={width:0,height:0,rank:u,borderType:i},d=l[i][u-1],f=t.addDummyNode(o,"border",c,a);l[i][u]=f,o.setParent(f,s),d&&o.setEdge(d,f,{weight:1})}return Zu}var Ju,Fm;function cT(){if(Fm)return Ju;Fm=1;var e=Ae();Ju={adjust:t,undo:n};function t(u){var c=u.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&r(u)}function n(u){var c=u.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&i(u),(c==="lr"||c==="rl")&&(s(u),r(u))}function r(u){e.forEach(u.nodes(),function(c){o(u.node(c))}),e.forEach(u.edges(),function(c){o(u.edge(c))})}function o(u){var c=u.width;u.width=u.height,u.height=c}function i(u){e.forEach(u.nodes(),function(c){a(u.node(c))}),e.forEach(u.edges(),function(c){var d=u.edge(c);e.forEach(d.points,a),e.has(d,"y")&&a(d)})}function a(u){u.y=-u.y}function s(u){e.forEach(u.nodes(),function(c){l(u.node(c))}),e.forEach(u.edges(),function(c){var d=u.edge(c);e.forEach(d.points,l),e.has(d,"x")&&l(d)})}function l(u){var c=u.x;u.x=u.y,u.y=c}return Ju}var Qu,Um;function dT(){if(Um)return Qu;Um=1;var e=Ae();Qu=t;function t(n){var r={},o=e.filter(n.nodes(),function(u){return!n.children(u).length}),i=e.max(e.map(o,function(u){return n.node(u).rank})),a=e.map(e.range(i+1),function(){return[]});function s(u){if(!e.has(r,u)){r[u]=!0;var c=n.node(u);a[c.rank].push(u),e.forEach(n.successors(u),s)}}var l=e.sortBy(o,function(u){return n.node(u).rank});return e.forEach(l,s),a}return Qu}var ec,Gm;function fT(){if(Gm)return ec;Gm=1;var e=Ae();ec=t;function t(r,o){for(var i=0,a=1;a<o.length;++a)i+=n(r,o[a-1],o[a]);return i}function n(r,o,i){for(var a=e.zipObject(i,e.map(i,function(f,p){return p})),s=e.flatten(e.map(o,function(f){return e.sortBy(e.map(r.outEdges(f),function(p){return{pos:a[p.w],weight:r.edge(p).weight}}),"pos")}),!0),l=1;l<i.length;)l<<=1;var u=2*l-1;l-=1;var c=e.map(new Array(u),function(){return 0}),d=0;return e.forEach(s.forEach(function(f){var p=f.pos+l;c[p]+=f.weight;for(var g=0;p>0;)p%2&&(g+=c[p+1]),p=p-1>>1,c[p]+=f.weight;d+=f.weight*g})),d}return ec}var tc,Hm;function pT(){if(Hm)return tc;Hm=1;var e=Ae();tc=t;function t(n,r){return e.map(r,function(o){var i=n.inEdges(o);if(i.length){var a=e.reduce(i,function(s,l){var u=n.edge(l),c=n.node(l.v);return{sum:s.sum+u.weight*c.order,weight:s.weight+u.weight}},{sum:0,weight:0});return{v:o,barycenter:a.sum/a.weight,weight:a.weight}}else return{v:o}})}return tc}var nc,jm;function hT(){if(jm)return nc;jm=1;var e=Ae();nc=t;function t(o,i){var a={};e.forEach(o,function(l,u){var c=a[l.v]={indegree:0,in:[],out:[],vs:[l.v],i:u};e.isUndefined(l.barycenter)||(c.barycenter=l.barycenter,c.weight=l.weight)}),e.forEach(i.edges(),function(l){var u=a[l.v],c=a[l.w];!e.isUndefined(u)&&!e.isUndefined(c)&&(c.indegree++,u.out.push(a[l.w]))});var s=e.filter(a,function(l){return!l.indegree});return n(s)}function n(o){var i=[];function a(u){return function(c){c.merged||(e.isUndefined(c.barycenter)||e.isUndefined(u.barycenter)||c.barycenter>=u.barycenter)&&r(u,c)}}function s(u){return function(c){c.in.push(u),--c.indegree===0&&o.push(c)}}for(;o.length;){var l=o.pop();i.push(l),e.forEach(l.in.reverse(),a(l)),e.forEach(l.out,s(l))}return e.map(e.filter(i,function(u){return!u.merged}),function(u){return e.pick(u,["vs","i","barycenter","weight"])})}function r(o,i){var a=0,s=0;o.weight&&(a+=o.barycenter*o.weight,s+=o.weight),i.weight&&(a+=i.barycenter*i.weight,s+=i.weight),o.vs=i.vs.concat(o.vs),o.barycenter=a/s,o.weight=s,o.i=Math.min(i.i,o.i),i.merged=!0}return nc}var rc,Ym;function vT(){if(Ym)return rc;Ym=1;var e=Ae(),t=je();rc=n;function n(i,a){var s=t.partition(i,function(m){return e.has(m,"barycenter")}),l=s.lhs,u=e.sortBy(s.rhs,function(m){return-m.i}),c=[],d=0,f=0,p=0;l.sort(o(!!a)),p=r(c,u,p),e.forEach(l,function(m){p+=m.vs.length,c.push(m.vs),d+=m.barycenter*m.weight,f+=m.weight,p=r(c,u,p)});var g={vs:e.flatten(c,!0)};return f&&(g.barycenter=d/f,g.weight=f),g}function r(i,a,s){for(var l;a.length&&(l=e.last(a)).i<=s;)a.pop(),i.push(l.vs),s++;return s}function o(i){return function(a,s){return a.barycenter<s.barycenter?-1:a.barycenter>s.barycenter?1:i?s.i-a.i:a.i-s.i}}return rc}var oc,Xm;function gT(){if(Xm)return oc;Xm=1;var e=Ae(),t=pT(),n=hT(),r=vT();oc=o;function o(s,l,u,c){var d=s.children(l),f=s.node(l),p=f?f.borderLeft:void 0,g=f?f.borderRight:void 0,m={};p&&(d=e.filter(d,function(k){return k!==p&&k!==g}));var y=t(s,d);e.forEach(y,function(k){if(s.children(k.v).length){var P=o(s,k.v,u,c);m[k.v]=P,e.has(P,"barycenter")&&a(k,P)}});var v=n(y,u);i(v,m);var _=r(v,c);if(p&&(_.vs=e.flatten([p,_.vs,g],!0),s.predecessors(p).length)){var b=s.node(s.predecessors(p)[0]),$=s.node(s.predecessors(g)[0]);e.has(_,"barycenter")||(_.barycenter=0,_.weight=0),_.barycenter=(_.barycenter*_.weight+b.order+$.order)/(_.weight+2),_.weight+=2}return _}function i(s,l){e.forEach(s,function(u){u.vs=e.flatten(u.vs.map(function(c){return l[c]?l[c].vs:c}),!0)})}function a(s,l){e.isUndefined(s.barycenter)?(s.barycenter=l.barycenter,s.weight=l.weight):(s.barycenter=(s.barycenter*s.weight+l.barycenter*l.weight)/(s.weight+l.weight),s.weight+=l.weight)}return oc}var ic,Km;function mT(){if(Km)return ic;Km=1;var e=Ae(),t=st().Graph;ic=n;function n(o,i,a){var s=r(o),l=new t({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(u){return o.node(u)});return e.forEach(o.nodes(),function(u){var c=o.node(u),d=o.parent(u);(c.rank===i||c.minRank<=i&&i<=c.maxRank)&&(l.setNode(u),l.setParent(u,d||s),e.forEach(o[a](u),function(f){var p=f.v===u?f.w:f.v,g=l.edge(p,u),m=e.isUndefined(g)?0:g.weight;l.setEdge(p,u,{weight:o.edge(f).weight+m})}),e.has(c,"minRank")&&l.setNode(u,{borderLeft:c.borderLeft[i],borderRight:c.borderRight[i]}))}),l}function r(o){for(var i;o.hasNode(i=e.uniqueId("_root")););return i}return ic}var ac,Wm;function _T(){if(Wm)return ac;Wm=1;var e=Ae();ac=t;function t(n,r,o){var i={},a;e.forEach(o,function(s){for(var l=n.parent(s),u,c;l;){if(u=n.parent(l),u?(c=i[u],i[u]=l):(c=a,a=l),c&&c!==l){r.setEdge(c,l);return}l=u}})}return ac}var sc,Zm;function yT(){if(Zm)return sc;Zm=1;var e=Ae(),t=dT(),n=fT(),r=gT(),o=mT(),i=_T(),a=st().Graph,s=je();sc=l;function l(f){var p=s.maxRank(f),g=u(f,e.range(1,p+1),"inEdges"),m=u(f,e.range(p-1,-1,-1),"outEdges"),y=t(f);d(f,y);for(var v=Number.POSITIVE_INFINITY,_,b=0,$=0;$<4;++b,++$){c(b%2?g:m,b%4>=2),y=s.buildLayerMatrix(f);var k=n(f,y);k<v&&($=0,_=e.cloneDeep(y),v=k)}d(f,_)}function u(f,p,g){return e.map(p,function(m){return o(f,m,g)})}function c(f,p){var g=new a;e.forEach(f,function(m){var y=m.graph().root,v=r(m,y,g,p);e.forEach(v.vs,function(_,b){m.node(_).order=b}),i(m,g,v.vs)})}function d(f,p){e.forEach(p,function(g){e.forEach(g,function(m,y){f.node(m).order=y})})}return sc}var lc,Jm;function bT(){if(Jm)return lc;Jm=1;var e=Ae(),t=st().Graph,n=je();lc={positionX:g,findType1Conflicts:r,findType2Conflicts:o,addConflict:a,hasConflict:s,verticalAlignment:l,horizontalCompaction:u,alignCoordinates:f,findSmallestWidthAlignment:d,balance:p};function r(v,_){var b={};function $(k,P){var q=0,G=0,Y=k.length,B=e.last(P);return e.forEach(P,function(R,S){var W=i(v,R),w=W?v.node(W).order:Y;(W||R===B)&&(e.forEach(P.slice(G,S+1),function(I){e.forEach(v.predecessors(I),function(E){var O=v.node(E),U=O.order;(U<q||w<U)&&!(O.dummy&&v.node(I).dummy)&&a(b,E,I)})}),G=S+1,q=w)}),P}return e.reduce(_,$),b}function o(v,_){var b={};function $(P,q,G,Y,B){var R;e.forEach(e.range(q,G),function(S){R=P[S],v.node(R).dummy&&e.forEach(v.predecessors(R),function(W){var w=v.node(W);w.dummy&&(w.order<Y||w.order>B)&&a(b,W,R)})})}function k(P,q){var G=-1,Y,B=0;return e.forEach(q,function(R,S){if(v.node(R).dummy==="border"){var W=v.predecessors(R);W.length&&(Y=v.node(W[0]).order,$(q,B,S,G,Y),B=S,G=Y)}$(q,B,q.length,Y,P.length)}),q}return e.reduce(_,k),b}function i(v,_){if(v.node(_).dummy)return e.find(v.predecessors(_),function(b){return v.node(b).dummy})}function a(v,_,b){if(_>b){var $=_;_=b,b=$}var k=v[_];k||(v[_]=k={}),k[b]=!0}function s(v,_,b){if(_>b){var $=_;_=b,b=$}return e.has(v[_],b)}function l(v,_,b,$){var k={},P={},q={};return e.forEach(_,function(G){e.forEach(G,function(Y,B){k[Y]=Y,P[Y]=Y,q[Y]=B})}),e.forEach(_,function(G){var Y=-1;e.forEach(G,function(B){var R=$(B);if(R.length){R=e.sortBy(R,function(E){return q[E]});for(var S=(R.length-1)/2,W=Math.floor(S),w=Math.ceil(S);W<=w;++W){var I=R[W];P[B]===B&&Y<q[I]&&!s(b,B,I)&&(P[I]=B,P[B]=k[B]=k[I],Y=q[I])}}})}),{root:k,align:P}}function u(v,_,b,$,k){var P={},q=c(v,_,b,k),G=k?"borderLeft":"borderRight";function Y(S,W){for(var w=q.nodes(),I=w.pop(),E={};I;)E[I]?S(I):(E[I]=!0,w.push(I),w=w.concat(W(I))),I=w.pop()}function B(S){P[S]=q.inEdges(S).reduce(function(W,w){return Math.max(W,P[w.v]+q.edge(w))},0)}function R(S){var W=q.outEdges(S).reduce(function(I,E){return Math.min(I,P[E.w]-q.edge(E))},Number.POSITIVE_INFINITY),w=v.node(S);W!==Number.POSITIVE_INFINITY&&w.borderType!==G&&(P[S]=Math.max(P[S],W))}return Y(B,q.predecessors.bind(q)),Y(R,q.successors.bind(q)),e.forEach($,function(S){P[S]=P[b[S]]}),P}function c(v,_,b,$){var k=new t,P=v.graph(),q=m(P.nodesep,P.edgesep,$);return e.forEach(_,function(G){var Y;e.forEach(G,function(B){var R=b[B];if(k.setNode(R),Y){var S=b[Y],W=k.edge(S,R);k.setEdge(S,R,Math.max(q(v,B,Y),W||0))}Y=B})}),k}function d(v,_){return e.minBy(e.values(_),function(b){var $=Number.NEGATIVE_INFINITY,k=Number.POSITIVE_INFINITY;return e.forIn(b,function(P,q){var G=y(v,q)/2;$=Math.max(P+G,$),k=Math.min(P-G,k)}),$-k})}function f(v,_){var b=e.values(_),$=e.min(b),k=e.max(b);e.forEach(["u","d"],function(P){e.forEach(["l","r"],function(q){var G=P+q,Y=v[G],B;if(Y!==_){var R=e.values(Y);B=q==="l"?$-e.min(R):k-e.max(R),B&&(v[G]=e.mapValues(Y,function(S){return S+B}))}})})}function p(v,_){return e.mapValues(v.ul,function(b,$){if(_)return v[_.toLowerCase()][$];var k=e.sortBy(e.map(v,$));return(k[1]+k[2])/2})}function g(v){var _=n.buildLayerMatrix(v),b=e.merge(r(v,_),o(v,_)),$={},k;e.forEach(["u","d"],function(q){k=q==="u"?_:e.values(_).reverse(),e.forEach(["l","r"],function(G){G==="r"&&(k=e.map(k,function(S){return e.values(S).reverse()}));var Y=(q==="u"?v.predecessors:v.successors).bind(v),B=l(v,k,b,Y),R=u(v,k,B.root,B.align,G==="r");G==="r"&&(R=e.mapValues(R,function(S){return-S})),$[q+G]=R})});var P=d(v,$);return f($,P),p($,v.graph().align)}function m(v,_,b){return function($,k,P){var q=$.node(k),G=$.node(P),Y=0,B;if(Y+=q.width/2,e.has(q,"labelpos"))switch(q.labelpos.toLowerCase()){case"l":B=-q.width/2;break;case"r":B=q.width/2;break}if(B&&(Y+=b?B:-B),B=0,Y+=(q.dummy?_:v)/2,Y+=(G.dummy?_:v)/2,Y+=G.width/2,e.has(G,"labelpos"))switch(G.labelpos.toLowerCase()){case"l":B=G.width/2;break;case"r":B=-G.width/2;break}return B&&(Y+=b?B:-B),B=0,Y}}function y(v,_){return v.node(_).width}return lc}var uc,Qm;function xT(){if(Qm)return uc;Qm=1;var e=Ae(),t=je(),n=bT().positionX;uc=r;function r(i){i=t.asNonCompoundGraph(i),o(i),e.forEach(n(i),function(a,s){i.node(s).x=a})}function o(i){var a=t.buildLayerMatrix(i),s=i.graph().ranksep,l=0;e.forEach(a,function(u){var c=e.max(e.map(u,function(d){return i.node(d).height}));e.forEach(u,function(d){i.node(d).y=l+c/2}),l+=c+s})}return uc}var cc,e_;function wT(){if(e_)return cc;e_=1;var e=Ae(),t=rT(),n=oT(),r=aT(),o=je().normalizeRanks,i=sT(),a=je().removeEmptyRanks,s=lT(),l=uT(),u=cT(),c=yT(),d=xT(),f=je(),p=st().Graph;cc=g;function g(M,D){var H=D&&D.debugTiming?f.time:f.notime;H("layout",function(){var J=H("  buildLayoutGraph",function(){return Y(M)});H("  runLayout",function(){m(J,H)}),H("  updateInputGraph",function(){y(M,J)})})}function m(M,D){D("    makeSpaceForEdgeLabels",function(){B(M)}),D("    removeSelfEdges",function(){z(M)}),D("    acyclic",function(){t.run(M)}),D("    nestingGraph.run",function(){s.run(M)}),D("    rank",function(){r(f.asNonCompoundGraph(M))}),D("    injectEdgeLabelProxies",function(){R(M)}),D("    removeEmptyRanks",function(){a(M)}),D("    nestingGraph.cleanup",function(){s.cleanup(M)}),D("    normalizeRanks",function(){o(M)}),D("    assignRankMinMax",function(){S(M)}),D("    removeEdgeLabelProxies",function(){W(M)}),D("    normalize.run",function(){n.run(M)}),D("    parentDummyChains",function(){i(M)}),D("    addBorderSegments",function(){l(M)}),D("    order",function(){c(M)}),D("    insertSelfEdges",function(){V(M)}),D("    adjustCoordinateSystem",function(){u.adjust(M)}),D("    position",function(){d(M)}),D("    positionSelfEdges",function(){C(M)}),D("    removeBorderNodes",function(){U(M)}),D("    normalize.undo",function(){n.undo(M)}),D("    fixupEdgeLabelCoords",function(){E(M)}),D("    undoCoordinateSystem",function(){u.undo(M)}),D("    translateGraph",function(){w(M)}),D("    assignNodeIntersects",function(){I(M)}),D("    reversePoints",function(){O(M)}),D("    acyclic.undo",function(){t.undo(M)})}function y(M,D){e.forEach(M.nodes(),function(H){var J=M.node(H),Q=D.node(H);J&&(J.x=Q.x,J.y=Q.y,D.children(H).length&&(J.width=Q.width,J.height=Q.height))}),e.forEach(M.edges(),function(H){var J=M.edge(H),Q=D.edge(H);J.points=Q.points,e.has(Q,"x")&&(J.x=Q.x,J.y=Q.y)}),M.graph().width=D.graph().width,M.graph().height=D.graph().height}var v=["nodesep","edgesep","ranksep","marginx","marginy"],_={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],$=["width","height"],k={width:0,height:0},P=["minlen","weight","width","height","labeloffset"],q={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},G=["labelpos"];function Y(M){var D=new p({multigraph:!0,compound:!0}),H=oe(M.graph());return D.setGraph(e.merge({},_,ee(H,v),e.pick(H,b))),e.forEach(M.nodes(),function(J){var Q=oe(M.node(J));D.setNode(J,e.defaults(ee(Q,$),k)),D.setParent(J,M.parent(J))}),e.forEach(M.edges(),function(J){var Q=oe(M.edge(J));D.setEdge(J,e.merge({},q,ee(Q,P),e.pick(Q,G)))}),D}function B(M){var D=M.graph();D.ranksep/=2,e.forEach(M.edges(),function(H){var J=M.edge(H);J.minlen*=2,J.labelpos.toLowerCase()!=="c"&&(D.rankdir==="TB"||D.rankdir==="BT"?J.width+=J.labeloffset:J.height+=J.labeloffset)})}function R(M){e.forEach(M.edges(),function(D){var H=M.edge(D);if(H.width&&H.height){var J=M.node(D.v),Q=M.node(D.w),ie={rank:(Q.rank-J.rank)/2+J.rank,e:D};f.addDummyNode(M,"edge-proxy",ie,"_ep")}})}function S(M){var D=0;e.forEach(M.nodes(),function(H){var J=M.node(H);J.borderTop&&(J.minRank=M.node(J.borderTop).rank,J.maxRank=M.node(J.borderBottom).rank,D=e.max(D,J.maxRank))}),M.graph().maxRank=D}function W(M){e.forEach(M.nodes(),function(D){var H=M.node(D);H.dummy==="edge-proxy"&&(M.edge(H.e).labelRank=H.rank,M.removeNode(D))})}function w(M){var D=Number.POSITIVE_INFINITY,H=0,J=Number.POSITIVE_INFINITY,Q=0,ie=M.graph(),he=ie.marginx||0,pe=ie.marginy||0;function be(ge){var L=ge.x,T=ge.y,N=ge.width,X=ge.height;D=Math.min(D,L-N/2),H=Math.max(H,L+N/2),J=Math.min(J,T-X/2),Q=Math.max(Q,T+X/2)}e.forEach(M.nodes(),function(ge){be(M.node(ge))}),e.forEach(M.edges(),function(ge){var L=M.edge(ge);e.has(L,"x")&&be(L)}),D-=he,J-=pe,e.forEach(M.nodes(),function(ge){var L=M.node(ge);L.x-=D,L.y-=J}),e.forEach(M.edges(),function(ge){var L=M.edge(ge);e.forEach(L.points,function(T){T.x-=D,T.y-=J}),e.has(L,"x")&&(L.x-=D),e.has(L,"y")&&(L.y-=J)}),ie.width=H-D+he,ie.height=Q-J+pe}function I(M){e.forEach(M.edges(),function(D){var H=M.edge(D),J=M.node(D.v),Q=M.node(D.w),ie,he;H.points?(ie=H.points[0],he=H.points[H.points.length-1]):(H.points=[],ie=Q,he=J),H.points.unshift(f.intersectRect(J,ie)),H.points.push(f.intersectRect(Q,he))})}function E(M){e.forEach(M.edges(),function(D){var H=M.edge(D);if(e.has(H,"x"))switch((H.labelpos==="l"||H.labelpos==="r")&&(H.width-=H.labeloffset),H.labelpos){case"l":H.x-=H.width/2+H.labeloffset;break;case"r":H.x+=H.width/2+H.labeloffset;break}})}function O(M){e.forEach(M.edges(),function(D){var H=M.edge(D);H.reversed&&H.points.reverse()})}function U(M){e.forEach(M.nodes(),function(D){if(M.children(D).length){var H=M.node(D),J=M.node(H.borderTop),Q=M.node(H.borderBottom),ie=M.node(e.last(H.borderLeft)),he=M.node(e.last(H.borderRight));H.width=Math.abs(he.x-ie.x),H.height=Math.abs(Q.y-J.y),H.x=ie.x+H.width/2,H.y=J.y+H.height/2}}),e.forEach(M.nodes(),function(D){M.node(D).dummy==="border"&&M.removeNode(D)})}function z(M){e.forEach(M.edges(),function(D){if(D.v===D.w){var H=M.node(D.v);H.selfEdges||(H.selfEdges=[]),H.selfEdges.push({e:D,label:M.edge(D)}),M.removeEdge(D)}})}function V(M){var D=f.buildLayerMatrix(M);e.forEach(D,function(H){var J=0;e.forEach(H,function(Q,ie){var he=M.node(Q);he.order=ie+J,e.forEach(he.selfEdges,function(pe){f.addDummyNode(M,"selfedge",{width:pe.label.width,height:pe.label.height,rank:he.rank,order:ie+ ++J,e:pe.e,label:pe.label},"_se")}),delete he.selfEdges})})}function C(M){e.forEach(M.nodes(),function(D){var H=M.node(D);if(H.dummy==="selfedge"){var J=M.node(H.e.v),Q=J.x+J.width/2,ie=J.y,he=H.x-Q,pe=J.height/2;M.setEdge(H.e,H.label),M.removeNode(D),H.label.points=[{x:Q+2*he/3,y:ie-pe},{x:Q+5*he/6,y:ie-pe},{x:Q+he,y:ie},{x:Q+5*he/6,y:ie+pe},{x:Q+2*he/3,y:ie+pe}],H.label.x=H.x,H.label.y=H.y}})}function ee(M,D){return e.mapValues(e.pick(M,D),Number)}function oe(M){var D={};return e.forEach(M,function(H,J){D[J.toLowerCase()]=H}),D}return cc}var dc,t_;function $T(){if(t_)return dc;t_=1;var e=Ae(),t=je(),n=st().Graph;dc={debugOrdering:r};function r(o){var i=t.buildLayerMatrix(o),a=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(o.nodes(),function(s){a.setNode(s,{label:s}),a.setParent(s,"layer"+o.node(s).rank)}),e.forEach(o.edges(),function(s){a.setEdge(s.v,s.w,{},s.name)}),e.forEach(i,function(s,l){var u="layer"+l;a.setNode(u,{rank:"same"}),e.reduce(s,function(c,d){return a.setEdge(c,d,{style:"invis"}),d})}),a}return dc}var fc,n_;function ET(){return n_||(n_=1,fc="0.8.5"),fc}var pc,r_;function kT(){return r_||(r_=1,pc={graphlib:st(),layout:wT(),debug:$T(),util:{time:je().time,notime:je().notime},version:ET()}),pc}var ST=kT();const o_=e0(ST),CT={class:"flex flex-col gap-3 rounded-3xl p-3 bg-white border-[2px] border-transparent shadow-sm hover:shadow-md selected-border w-[240px]"},NT={class:"flex items-center gap-2"},IT={class:"text-gray-700 font-semibold"},qT={class:"flex flex-col items-start bg-gray-100 rounded-lg p-3"},TT={class:"flex items-center gap-2 mb-2 text-gray-700"},RT={class:"flex flex-col gap-2"},AT={class:"flex items-center gap-1 max-w-[180px]"},MT={class:"text-gray-700 line-clamp-1 break-all"},PT={key:0,class:"flex-shrink-0 text-red-700"},OT={class:"text-gray-500 bg-gray-200 px-1 py-0.5 rounded"},DT={key:0,class:"text-gray-500 text-xs px-0.5"},zT=Ee({__name:"StartNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e;return(n,r)=>{var l,u,c,d;const o=F("icon-home"),i=F("a-avatar"),a=F("icon-caret-down"),s=F("icon-plus");return A(),K("div",CT,[h("div",NT,[x(i,{shape:"square",size:24,class:"bg-blue-700 rounded-lg flex-shrink-0"},{default:j(()=>[x(o,{size:16})]),_:1}),h("div",IT,re((l=t.data)==null?void 0:l.title),1)]),h("div",qT,[h("div",TT,[x(a),r[0]||(r[0]=h("div",{class:"text-xs font-semibold"},"输入数据",-1))]),h("div",RT,[(A(!0),K(_e,null,xe((u=t.data)==null?void 0:u.inputs,f=>(A(),K("div",{key:f.name,class:"flex items-center gap-2 text-xs"},[h("div",AT,[h("div",MT,re(f.name),1),f.required?(A(),K("div",PT,"*")):se("",!0)]),h("div",OT,re(f.type),1)]))),128)),(d=(c=t.data)==null?void 0:c.inputs)!=null&&d.length?se("",!0):(A(),K("div",DT,"-"))])]),x(Z(Ve),{type:"source",position:Z(le).Right,class:"!w-4 !h-4 !bg-blue-700 !text-white flex items-center justify-center"},{default:j(()=>[x(s,{size:12,class:"pointer-events-none"})]),_:1},8,["position"])])}}}),VT=Ft(zT,[["__scopeId","data-v-5b07da08"]]),BT={class:"flex flex-col gap-3 rounded-2xl p-3 bg-white border-[2px] border-transparent shadow-sm hover:shadow-md selected-border transition-all w-[360px]"},LT={class:"flex items-center gap-2"},FT={class:"text-gray-700 font-semibold"},UT={class:"flex flex-col items-start bg-gray-100 rounded-lg p-3"},GT={class:"w-full flex items-center gap-2 mb-2 text-gray-700 text-xs"},HT={class:"w-[180px] flex-shrink-0 flex items-center gap-2 text-gray-700"},jT={class:"w-full flex flex-col gap-2"},YT={class:"w-[180px] flex-shrink-0 flex items-center gap-2"},XT={class:"flex items-center gap-1"},KT={class:"text-gray-700 line-clamp-1 break-all"},WT={key:0,class:"text-red-700 flex-shrink-0"},ZT={class:"text-gray-500 bg-gray-200 px-1 py-0.5 rounded flex-shrink-0"},JT={class:"flex-1 flex"},QT={key:0,class:"bg-white line-clamp-1 break-all text-gray-500 border px-1 py-0.5 rounded"},eR={key:1,class:"text-gray-500 flex-1 px-1 py-0.5 line-clamp-1 break-all"},tR={key:0,class:"text-gray-500 text-xs px-0.5"},nR={class:"flex flex-col items-start bg-gray-100 rounded-lg p-3"},rR={class:"flex items-center gap-2 mb-2 text-gray-700"},oR={class:"text-xs text-gray-700 leading-5 line-clamp-3"},iR={class:"flex flex-col items-start bg-gray-100 rounded-lg p-3"},aR={class:"flex items-center gap-2 mb-2 text-gray-700"},sR={class:"flex flex-col gap-2"},lR={class:"max-w-[180px] text-gray-700 line-clamp-1 break-all"},uR={class:"text-gray-500 bg-gray-200 px-1 py-0.5 rounded"},cR=Ee({__name:"LLMNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e;return(n,r)=>{var l,u,c,d,f,p;const o=F("icon-language"),i=F("a-avatar"),a=F("icon-caret-down"),s=F("icon-plus");return A(),K("div",BT,[h("div",LT,[x(i,{shape:"square",size:24,class:"bg-sky-500 rounded-lg flex-shrink-0"},{default:j(()=>[x(o,{size:16})]),_:1}),h("div",FT,re((l=t.data)==null?void 0:l.title),1)]),h("div",UT,[h("div",GT,[h("div",HT,[x(a),r[0]||(r[0]=h("div",{class:"font-semibold"},"输入数据",-1))]),r[1]||(r[1]=h("div",{class:"flex-1"},"值",-1))]),h("div",jT,[(A(!0),K(_e,null,xe((u=t.data)==null?void 0:u.inputs,g=>(A(),K("div",{key:g.name,class:"w-full flex items-center text-xs gap-2"},[h("div",YT,[h("div",XT,[h("div",KT,re(g.name),1),g.required?(A(),K("div",WT,"*")):se("",!0)]),h("div",ZT,re(g.type),1)]),h("div",JT,[g.value.type=="ref"?(A(),K("div",QT," 引用 / "+re(g.value.content.ref_var_name),1)):(A(),K("div",eR,re(g.value.content),1))])]))),128)),(d=(c=t.data)==null?void 0:c.inputs)!=null&&d.length?se("",!0):(A(),K("div",tR,"-"))])]),h("div",nR,[h("div",rR,[x(a),r[2]||(r[2]=h("div",{class:"text-xs font-semibold"},"提示词",-1))]),h("div",oR,re(((f=t.data)==null?void 0:f.prompt)??"-"),1)]),h("div",iR,[h("div",aR,[x(a),r[3]||(r[3]=h("div",{class:"text-xs font-semibold"},"输出数据",-1))]),h("div",sR,[(A(!0),K(_e,null,xe((p=t.data)==null?void 0:p.outputs,g=>(A(),K("div",{key:g.name,class:"flex items-center gap-2 text-xs"},[h("div",lR,re(g.name),1),h("div",uR,re(g.type),1)]))),128))])]),x(Z(Ve),{type:"source",position:Z(le).Right,class:"!w-4 !h-4 !bg-blue-700 !text-white flex items-center justify-center"},{default:j(()=>[x(s,{size:12,class:"pointer-events-none"})]),_:1},8,["position"]),x(Z(Ve),{type:"target",position:Z(le).Left,class:"!w-4 !h-4 !bg-blue-700 !text-white flex items-center justify-center"},{default:j(()=>[x(s,{size:12,class:"pointer-events-none"})]),_:1},8,["position"])])}}}),dR=Ft(cR,[["__scopeId","data-v-313e7baf"]]),fR={class:"flex flex-col gap-3 rounded-2xl p-3 bg-white border-[2px] border-transparent shadow-sm hover:shadow-md selected-border transition-all w-[360px]"},pR={class:"flex items-center gap-2"},hR={class:"text-gray-700 font-semibold"},vR={class:"flex flex-col items-start bg-gray-100 rounded-lg p-3"},gR={class:"w-full flex items-center gap-2 mb-2 text-gray-700 text-xs"},mR={class:"w-[180px] flex-shrink-0 flex items-center gap-2 text-gray-700"},_R={class:"w-full flex flex-col gap-2"},yR={class:"w-[180px] flex-shrink-0 flex items-center gap-2"},bR={class:"flex items-center gap-1"},xR={class:"text-gray-700 line-clamp-1 break-all"},wR={key:0,class:"text-red-700 flex-shrink-0"},$R={class:"max-w-[60px] line-clamp-1 break-all text-gray-500 bg-gray-200 px-1 py-0.5 rounded flex-shrink-0"},ER={class:"flex-1 flex"},kR={key:0,class:"bg-white line-clamp-1 break-all text-gray-500 border px-1 py-0.5 rounded"},SR={key:1,class:"text-gray-500 inline-block px-1 py-0.5"},CR={key:0,class:"text-gray-500 text-xs px-0.5"},NR={class:"flex flex-col items-start bg-gray-100 rounded-lg p-3"},IR={class:"flex items-center gap-2 mb-2 text-gray-700"},qR={class:"flex flex-col gap-2"},TR={class:"max-w-[180px] text-gray-700 line-clamp-1 break-all"},RR={class:"text-gray-500 bg-gray-200 px-1 py-0.5 rounded"},AR=Ee({__name:"CodeNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e;return(n,r)=>{var l,u,c,d;const o=F("icon-code"),i=F("a-avatar"),a=F("icon-caret-down"),s=F("icon-plus");return A(),K("div",fR,[h("div",pR,[x(i,{shape:"square",size:24,class:"bg-cyan-500 rounded-lg flex-shrink-0"},{default:j(()=>[x(o,{size:16})]),_:1}),h("div",hR,re((l=t.data)==null?void 0:l.title),1)]),h("div",vR,[h("div",gR,[h("div",mR,[x(a),r[0]||(r[0]=h("div",{class:"font-semibold"},"输入数据",-1))]),r[1]||(r[1]=h("div",{class:"flex-1 font-semibold"},"值",-1))]),h("div",_R,[(A(!0),K(_e,null,xe(t.data.inputs,f=>(A(),K("div",{key:f.name,class:"w-full flex items-center text-xs gap-2"},[h("div",yR,[h("div",bR,[h("div",xR,re(f.name),1),f.required?(A(),K("div",wR,"*")):se("",!0)]),h("div",$R,re(f.type),1)]),h("div",ER,[f.value.type=="ref"?(A(),K("div",kR," 引用 / "+re(f.value.content.ref_var_name),1)):(A(),K("div",SR,re(f.value.content),1))])]))),128)),(c=(u=t.data)==null?void 0:u.inputs)!=null&&c.length?se("",!0):(A(),K("div",CR,"-"))])]),h("div",NR,[h("div",IR,[x(a),r[2]||(r[2]=h("div",{class:"text-xs font-semibold"},"输出数据",-1))]),h("div",qR,[(A(!0),K(_e,null,xe((d=t.data)==null?void 0:d.outputs,f=>(A(),K("div",{key:f.name,class:"flex items-center gap-2 text-xs"},[h("div",TR,re(f.name),1),h("div",RR,re(f.type),1)]))),128))])]),x(Z(Ve),{type:"source",position:Z(le).Right,class:"!w-4 !h-4 !bg-blue-700 !text-white flex items-center justify-center"},{default:j(()=>[x(s,{size:12,class:"pointer-events-none"})]),_:1},8,["position"]),x(Z(Ve),{type:"target",position:Z(le).Left,class:"!w-4 !h-4 !bg-blue-700 !text-white flex items-center justify-center"},{default:j(()=>[x(s,{size:12,class:"pointer-events-none"})]),_:1},8,["position"])])}}}),MR=Ft(AR,[["__scopeId","data-v-ce83eb53"]]),PR={class:"flex flex-col gap-3 rounded-2xl p-3 bg-white border-[2px] border-transparent shadow-sm hover:shadow-md selected-border transition-all w-[360px]"},OR={class:"flex items-center gap-2"},DR={class:"text-gray-700 font-semibold"},zR={class:"flex flex-col items-start bg-gray-100 rounded-lg p-3"},VR={class:"w-full flex items-center mb-2 text-gray-700 text-xs"},BR={class:"w-[180px] flex-shrink-0 flex items-center gap-2 text-gray-700"},LR={class:"w-full flex flex-col gap-2"},FR={class:"w-[180px] flex-shrink-0 flex items-center gap-2"},UR={class:"max-w-[120px] text-gray-700 line-clamp-1 break-all"},GR={class:"text-gray-500 bg-gray-200 px-1 py-0.5 rounded flex-shrink-0"},HR={class:"flex-1 flex"},jR={key:0,class:"bg-white line-clamp-1 break-all text-gray-500 border px-1 py-0.5 rounded"},YR={key:1,class:"text-gray-500 flex-1 px-1 py-0.5 line-clamp-1 break-all"},XR={key:0,class:"text-gray-500 text-xs px-0.5"},KR=Ee({__name:"EndNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e;return(n,r)=>{var l,u,c,d;const o=F("icon-filter"),i=F("a-avatar"),a=F("icon-caret-down"),s=F("icon-plus");return A(),K("div",PR,[h("div",OR,[x(i,{shape:"square",size:24,class:"bg-red-700 rounded-lg flex-shrink-0"},{default:j(()=>[x(o,{size:16})]),_:1}),h("div",DR,re((l=t.data)==null?void 0:l.title),1)]),h("div",zR,[h("div",VR,[h("div",BR,[x(a),r[0]||(r[0]=h("div",{class:"font-semibold"},"输出数据",-1))]),r[1]||(r[1]=h("div",{class:"flex-1 font-semibold"},"值",-1))]),h("div",LR,[(A(!0),K(_e,null,xe((u=t.data)==null?void 0:u.outputs,f=>(A(),K("div",{key:f.name,class:"w-full flex items-center text-xs gap-2"},[h("div",FR,[h("div",UR,re(f.name),1),h("div",GR,re(f.type),1)]),h("div",HR,[f.value.type=="ref"?(A(),K("div",jR," 引用 / "+re(f.value.content.ref_var_name),1)):(A(),K("div",YR,re(f.value.content),1))])]))),128)),(d=(c=t.data)==null?void 0:c.outputs)!=null&&d.length?se("",!0):(A(),K("div",XR,"-"))])]),x(Z(Ve),{type:"target",position:Z(le).Left,class:"!w-4 !h-4 !bg-blue-700 !text-white flex items-center justify-center"},{default:j(()=>[x(s,{size:12,class:"pointer-events-none"})]),_:1},8,["position"])])}}}),WR=Ft(KR,[["__scopeId","data-v-86d165c6"]]),ZR={class:"flex flex-col gap-3 rounded-2xl p-3 bg-white border-[2px] border-transparent shadow-sm hover:shadow-md selected-border w-[360px]"},JR={class:"flex items-center gap-2"},QR={class:"text-gray-700 font-semibold"},eA={class:"flex flex-col items-start bg-gray-100 rounded-lg p-3"},tA={class:"w-full flex items-center gap-2 mb-2 text-gray-700 text-xs"},nA={class:"w-[180px] flex-shrink-0 flex items-center gap-2 text-gray-700"},rA={class:"w-full flex flex-col gap-2"},oA={class:"w-[180px] flex-shrink-0 flex items-center gap-2"},iA={class:"flex items-center gap-1"},aA={class:"text-gray-700 line-clamp-1 break-all"},sA={key:0,class:"text-red-700 flex-shrink-0"},lA={class:"max-w-[60px] line-clamp-1 break-all text-gray-500 bg-gray-200 px-1 py-0.5 rounded flex-shrink-0"},uA={class:"flex-1 flex"},cA={key:0,class:"bg-white line-clamp-1 break-all text-gray-500 border px-1 py-0.5 rounded"},dA={key:1,class:"text-gray-500 inline-block px-1 py-0.5"},fA={key:0,class:"text-gray-500 text-xs px-0.5"},pA={class:"flex flex-col items-start bg-gray-100 rounded-lg p-3"},hA={class:"flex items-center gap-2 mb-2 text-gray-700"},vA={class:"flex flex-col gap-2"},gA={class:"max-w-[180px] text-gray-700 line-clamp-1 break-all"},mA={class:"text-gray-500 bg-gray-200 px-1 py-0.5 rounded"},_A=Ee({__name:"ToolNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e;return(n,r)=>{var l,u,c,d;const o=F("icon-tool"),i=F("a-avatar"),a=F("icon-caret-down"),s=F("icon-plus");return A(),K("div",ZR,[h("div",JR,[x(i,{shape:"square",size:24,class:"bg-orange-500 rounded-lg flex-shrink-0"},{default:j(()=>[x(o,{size:16})]),_:1}),h("div",QR,re((l=t.data)==null?void 0:l.title),1)]),h("div",eA,[h("div",tA,[h("div",nA,[x(a),r[0]||(r[0]=h("div",{class:"font-semibold"},"输入数据",-1))]),r[1]||(r[1]=h("div",{class:"flex-1 font-semibold"},"值",-1))]),h("div",rA,[(A(!0),K(_e,null,xe(t.data.inputs,f=>(A(),K("div",{key:f.name,class:"w-full flex items-center text-xs gap-2"},[h("div",oA,[h("div",iA,[h("div",aA,re(f.name),1),f.required?(A(),K("div",sA,"*")):se("",!0)]),h("div",lA,re(f.type),1)]),h("div",uA,[f.value.type=="ref"?(A(),K("div",cA," 引用 / "+re(f.value.content.ref_var_name),1)):(A(),K("div",dA,re(f.value.content),1))])]))),128)),(c=(u=t.data)==null?void 0:u.inputs)!=null&&c.length?se("",!0):(A(),K("div",fA,"-"))])]),h("div",pA,[h("div",hA,[x(a),r[2]||(r[2]=h("div",{class:"text-xs font-semibold"},"输出数据",-1))]),h("div",vA,[(A(!0),K(_e,null,xe((d=t.data)==null?void 0:d.outputs,f=>(A(),K("div",{key:f.name,class:"flex items-center gap-2 text-xs"},[h("div",gA,re(f.name),1),h("div",mA,re(f.type),1)]))),128))])]),x(Z(Ve),{type:"source",position:Z(le).Right,class:"!w-4 !h-4 !bg-blue-700 !text-white flex items-center justify-center"},{default:j(()=>[x(s,{size:12,class:"pointer-events-none"})]),_:1},8,["position"]),x(Z(Ve),{type:"target",position:Z(le).Left,class:"!w-4 !h-4 !bg-blue-700 !text-white flex items-center justify-center"},{default:j(()=>[x(s,{size:12,class:"pointer-events-none"})]),_:1},8,["position"])])}}}),yA=Ft(_A,[["__scopeId","data-v-d154aa4c"]]),bA={class:"flex flex-col gap-3 rounded-2xl p-3 bg-white border-[2px] border-transparent shadow-sm hover:shadow-md selected-border transition-all w-[360px]"},xA={class:"flex items-center gap-2"},wA={class:"text-gray-700 font-semibold"},$A={class:"flex flex-col items-start bg-gray-100 rounded-lg p-3"},EA={class:"w-full flex items-center gap-2 mb-2 text-gray-700 text-xs"},kA={class:"w-[180px] flex-shrink-0 flex items-center gap-2 text-gray-700"},SA={class:"w-full flex flex-col gap-2"},CA={class:"w-[180px] flex-shrink-0 flex items-center gap-2"},NA={class:"flex items-center gap-1"},IA={class:"text-gray-700 line-clamp-1 break-all"},qA={key:0,class:"text-red-700 flex-shrink-0"},TA={class:"max-w-[60px] line-clamp-1 break-all text-gray-500 bg-gray-200 px-1 py-0.5 rounded flex-shrink-0"},RA={class:"flex-1 flex"},AA={key:0,class:"bg-white line-clamp-1 break-all text-gray-500 border px-1 py-0.5 rounded"},MA={key:1,class:"text-gray-500 inline-block px-1 py-0.5"},PA={key:0,class:"text-gray-500 text-xs px-0.5"},OA={class:"flex flex-col items-start bg-gray-100 rounded-lg p-3"},DA={class:"flex items-center gap-2 mb-2 text-gray-700"},zA={class:"flex flex-col gap-2"},VA={class:"max-w-[180px] text-gray-700 line-clamp-1 break-all"},BA={class:"text-gray-500 bg-gray-200 px-1 py-0.5 rounded"},LA=Ee({__name:"HttpRequestNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e;return(n,r)=>{var l,u,c,d;const o=F("icon-link"),i=F("a-avatar"),a=F("icon-caret-down"),s=F("icon-plus");return A(),K("div",bA,[h("div",xA,[x(i,{shape:"square",size:24,class:"bg-rose-500 rounded-lg flex-shrink-0"},{default:j(()=>[x(o,{size:16})]),_:1}),h("div",wA,re((l=t.data)==null?void 0:l.title),1)]),h("div",$A,[h("div",EA,[h("div",kA,[x(a),r[0]||(r[0]=h("div",{class:"font-semibold"},"输入数据",-1))]),r[1]||(r[1]=h("div",{class:"flex-1"},"值",-1))]),h("div",SA,[(A(!0),K(_e,null,xe(t.data.inputs,f=>(A(),K("div",{key:f.name,class:"w-full flex items-center text-xs gap-2"},[h("div",CA,[h("div",NA,[h("div",IA,re(f.name),1),f.required?(A(),K("div",qA,"*")):se("",!0)]),h("div",TA,re(f.type),1)]),h("div",RA,[f.value.type=="ref"?(A(),K("div",AA," 引用 / "+re(f.value.content.ref_var_name),1)):(A(),K("div",MA,re(f.value.content),1))])]))),128)),(c=(u=t.data)==null?void 0:u.inputs)!=null&&c.length?se("",!0):(A(),K("div",PA,"-"))])]),h("div",OA,[h("div",DA,[x(a),r[2]||(r[2]=h("div",{class:"text-xs font-semibold"},"输出数据",-1))]),h("div",zA,[(A(!0),K(_e,null,xe((d=t.data)==null?void 0:d.outputs,f=>(A(),K("div",{key:f.name,class:"flex items-center gap-2 text-xs"},[h("div",VA,re(f.name),1),h("div",BA,re(f.type),1)]))),128))])]),x(Z(Ve),{type:"source",position:Z(le).Right,class:"!w-4 !h-4 !bg-blue-700 !text-white flex items-center justify-center"},{default:j(()=>[x(s,{size:12,class:"pointer-events-none"})]),_:1},8,["position"]),x(Z(Ve),{type:"target",position:Z(le).Left,class:"!w-4 !h-4 !bg-blue-700 !text-white flex items-center justify-center"},{default:j(()=>[x(s,{size:12,class:"pointer-events-none"})]),_:1},8,["position"])])}}}),FA=Ft(LA,[["__scopeId","data-v-f027426a"]]),UA={class:"flex flex-col gap-3 rounded-2xl p-3 bg-white border-[2px] border-transparent shadow-sm hover:shadow-md selected-border transition-all w-[360px]"},GA={class:"flex items-center gap-2"},HA={class:"text-gray-700 font-semibold"},jA={class:"flex flex-col items-start bg-gray-100 rounded-lg p-3"},YA={class:"w-full flex items-center mb-2 text-gray-700 text-xs gap-2"},XA={class:"w-[180px] flex-shrink-0 flex items-center gap-2 text-gray-700"},KA={class:"w-full flex flex-col gap-2"},WA={class:"w-[180px] flex-shrink-0 flex items-center gap-2"},ZA={class:"flex items-center gap-1"},JA={class:"text-gray-700 line-clamp-1 break-all"},QA={key:0,class:"text-red-700 flex-shrink-0"},e5={class:"text-gray-500 bg-gray-200 px-1 py-0.5 rounded flex-shrink-0"},t5={class:"flex-1 flex"},n5={key:0,class:"bg-white line-clamp-1 break-all text-gray-500 border px-1 py-0.5 rounded"},r5={key:1,class:"text-gray-500 flex-1 px-1 py-0.5 line-clamp-1 break-all"},o5={class:"flex flex-col items-start bg-gray-100 rounded-lg p-3"},i5={class:"flex items-center gap-2 mb-2 text-gray-700"},a5={class:"flex flex-col gap-2"},s5={class:"text-gray-700"},l5={key:0,class:"text-gray-500 text-xs px-0.5"},u5={class:"flex flex-col items-start bg-gray-100 rounded-lg p-3"},c5={class:"flex items-center gap-2 mb-2 text-gray-700"},d5={class:"flex flex-col gap-2"},f5={class:"flex items-center gap-1"},p5={class:"text-gray-700"},h5={class:"text-gray-500 bg-gray-200 px-1 py-0.5 rounded"},v5=Ee({__name:"DatasetRetrievalNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e;return(n,r)=>{var l,u,c,d,f,p,g;const o=F("icon-storage"),i=F("a-avatar"),a=F("icon-caret-down"),s=F("icon-plus");return A(),K("div",UA,[h("div",GA,[x(i,{shape:"square",size:24,class:"bg-violet-500 rounded-lg flex-shrink-0"},{default:j(()=>[x(o,{size:16})]),_:1}),h("div",HA,re((l=t.data)==null?void 0:l.title),1)]),h("div",jA,[h("div",YA,[h("div",XA,[x(a),r[0]||(r[0]=h("div",{class:"font-semibold"},"输入数据",-1))]),r[1]||(r[1]=h("div",{class:"flex-1 font-semibold"},"值",-1))]),h("div",KA,[(A(!0),K(_e,null,xe(t.data.inputs,m=>(A(),K("div",{key:m.name,class:"w-full flex items-center text-xs gap-2"},[h("div",WA,[h("div",ZA,[h("div",JA,re(m.name),1),m.required?(A(),K("div",QA,"*")):se("",!0)]),h("div",e5,re(m.type),1)]),h("div",t5,[m.value.type=="ref"?(A(),K("div",n5," 引用 / "+re(m.value.content.ref_var_name),1)):(A(),K("div",r5,re(m.value.content),1))])]))),128))])]),h("div",o5,[h("div",i5,[x(a),r[2]||(r[2]=h("div",{class:"text-xs font-semibold"},"关联知识库",-1))]),h("div",a5,[(A(!0),K(_e,null,xe(((c=(u=t.data)==null?void 0:u.meta)==null?void 0:c.datasets)??[],m=>(A(),K("div",{key:m.id,class:"flex items-center gap-2 text-xs"},[x(i,{size:16,shape:"square","image-url":m==null?void 0:m.icon},null,8,["image-url"]),h("div",s5,re(m==null?void 0:m.name),1)]))),128)),(p=(f=(d=t.data)==null?void 0:d.meta)==null?void 0:f.datasets)!=null&&p.length?se("",!0):(A(),K("div",l5,"-"))])]),h("div",u5,[h("div",c5,[x(a),r[3]||(r[3]=h("div",{class:"text-xs font-semibold"},"输出数据",-1))]),h("div",d5,[(A(!0),K(_e,null,xe((g=t.data)==null?void 0:g.outputs,m=>(A(),K("div",{key:m.name,class:"flex items-center gap-2 text-xs"},[h("div",f5,[h("div",p5,re(m.name),1)]),h("div",h5,re(m.type),1)]))),128))])]),x(Z(Ve),{type:"source",position:Z(le).Right,class:"!w-4 !h-4 !bg-blue-700 !text-white flex items-center justify-center"},{default:j(()=>[x(s,{size:12,class:"pointer-events-none"})]),_:1},8,["position"]),x(Z(Ve),{type:"target",position:Z(le).Left,class:"!w-4 !h-4 !bg-blue-700 !text-white flex items-center justify-center"},{default:j(()=>[x(s,{size:12,class:"pointer-events-none"})]),_:1},8,["position"])])}}}),g5=Ft(v5,[["__scopeId","data-v-82b878e7"]]),m5={class:"flex flex-col gap-3 rounded-2xl p-3 bg-white border-[2px] border-transparent shadow-sm hover:shadow-md selected-border w-[360px]"},_5={class:"flex items-center gap-2"},y5={class:"text-gray-700 font-semibold"},b5={class:"flex flex-col items-start bg-gray-100 rounded-lg p-3"},x5={class:"w-full flex items-center gap-2 mb-2 text-gray-700 text-xs"},w5={class:"w-[180px] flex-shrink-0 flex items-center gap-2 text-gray-700"},$5={class:"w-full flex flex-col gap-2"},E5={class:"w-[180px] flex-shrink-0 flex items-center gap-2"},k5={class:"flex items-center gap-1"},S5={class:"text-gray-700 line-clamp-1 break-all"},C5={key:0,class:"text-red-700 flex-shrink-0"},N5={class:"max-w-[60px] line-clamp-1 break-all text-gray-500 bg-gray-200 px-1 py-0.5 rounded flex-shrink-0"},I5={class:"flex-1 flex"},q5={key:0,class:"bg-white line-clamp-1 break-all text-gray-500 border px-1 py-0.5 rounded"},T5={key:1,class:"text-gray-500 inline-block px-1 py-0.5"},R5={key:0,class:"text-gray-500 text-xs px-0.5"},A5={class:"flex flex-col items-start bg-gray-100 rounded-lg p-3"},M5={class:"flex items-center gap-2 mb-2 text-gray-700"},P5={class:"text-xs text-gray-700 line-clamp-3"},O5={class:"flex flex-col items-start bg-gray-100 rounded-lg p-3"},D5={class:"flex items-center gap-2 mb-2 text-gray-700"},z5={class:"flex flex-col gap-2"},V5={class:"max-w-[180px] text-gray-700 line-clamp-1 break-all"},B5={class:"text-gray-500 bg-gray-200 px-1 py-0.5 rounded"},L5=Ee({__name:"TemplateTransformNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e;return(n,r)=>{var l,u,c,d,f;const o=F("icon-branch"),i=F("a-avatar"),a=F("icon-caret-down"),s=F("icon-plus");return A(),K("div",m5,[h("div",_5,[x(i,{shape:"square",size:24,class:"bg-emerald-400 rounded-lg flex-shrink-0"},{default:j(()=>[x(o,{size:16})]),_:1}),h("div",y5,re((l=t.data)==null?void 0:l.title),1)]),h("div",b5,[h("div",x5,[h("div",w5,[x(a),r[0]||(r[0]=h("div",{class:"font-semibold"},"输入数据",-1))]),r[1]||(r[1]=h("div",{class:"flex-1 font-semibold"},"值",-1))]),h("div",$5,[(A(!0),K(_e,null,xe(t.data.inputs,p=>(A(),K("div",{key:p.name,class:"w-full flex items-center text-xs gap-2"},[h("div",E5,[h("div",k5,[h("div",S5,re(p.name),1),p.required?(A(),K("div",C5,"*")):se("",!0)]),h("div",N5,re(p.type),1)]),h("div",I5,[p.value.type=="ref"?(A(),K("div",q5," 引用 / "+re(p.value.content.ref_var_name),1)):(A(),K("div",T5,re(p.value.content),1))])]))),128)),(c=(u=t.data)==null?void 0:u.inputs)!=null&&c.length?se("",!0):(A(),K("div",R5,"-"))])]),h("div",A5,[h("div",M5,[x(a),r[2]||(r[2]=h("div",{class:"text-xs font-semibold"},"转换模板",-1))]),h("div",P5,re(((d=t.data)==null?void 0:d.template)??"-"),1)]),h("div",O5,[h("div",D5,[x(a),r[3]||(r[3]=h("div",{class:"text-xs font-semibold"},"输出数据",-1))]),h("div",z5,[(A(!0),K(_e,null,xe((f=t.data)==null?void 0:f.outputs,p=>(A(),K("div",{key:p.name,class:"flex items-center gap-2 text-xs"},[h("div",V5,re(p.name),1),h("div",B5,re(p.type),1)]))),128))])]),x(Z(Ve),{type:"source",position:Z(le).Right,class:"!w-4 !h-4 !bg-blue-700 !text-white flex items-center justify-center"},{default:j(()=>[x(s,{size:12,class:"pointer-events-none"})]),_:1},8,["position"]),x(Z(Ve),{type:"target",position:Z(le).Left,class:"!w-4 !h-4 !bg-blue-700 !text-white flex items-center justify-center"},{default:j(()=>[x(s,{size:12,class:"pointer-events-none"})]),_:1},8,["position"])])}}}),F5=Ft(L5,[["__scopeId","data-v-ba25f45b"]]),U5={key:0,class:"absolute right-0 top-0 bottom-0 w-[400px] bg-white z-50 border-l overflow-scroll scrollbar-w-none p-4"},G5={class:"flex items-center justify-between mb-2"},H5={class:"flex items-center gap-2"},j5={class:""},Y5={key:0,class:"text-red-700"},X5={class:"text-xs text-gray-500 bg-gray-200 px-1 py-0.5 rounded flex-shrink-0"},K5={key:0,class:"flex flex-col gap-2 bg-green-100 rounded-lg border border-green-500 p-3 mb-2"},W5={class:"flex items-center gap-2"},Z5={class:"text-gray-500 text-xs"},J5={key:1,class:"flex flex-col gap-2"},Q5={key:0,class:"flex flex-col gap-2 bg-red-100 p-3 rounded-lg border border-red-700"},eM={class:"flex items-center gap-2 text-red-500"},tM={class:"text-xs text-gray-500"},nM={key:1,class:"flex flex-col gap-2 bg-green-100 p-3 rounded-lg border border-green-500"},rM={class:"flex items-center gap-2 text-green-500"},oM={class:"flex items-center gap-2 text-xs"},iM={class:"flex-1 flex flex-col gap-2"},aM={class:"text-gray-700"},sM={class:"flex-1 flex flex-col gap-2"},lM={class:"text-gray-700"},uM={key:2,class:"bg-gray-700 rounded-lg p-3 text-white"},cM=Ee({__name:"DebugModal",props:{visible:{type:Boolean,required:!0,default:!1},workflow_id:{type:String,required:!0,default:""}},emits:["update:visible"],setup(e,{emit:t}){const n=e,r=t,{nodes:o}=Ie(),i=$e({}),a=$e([]),s=$e("input"),{error:l,loading:u,handleDebugWorkflow:c}=n0(),d=ve(()=>{var v;const y=o.value.find(_=>_.type==="start");return((v=y==null?void 0:y.data)==null?void 0:v.inputs)??[]}),f=ve(()=>{const y=a.value.find(v=>v.node_data.node_type==="end");return y?y.outputs:null}),p=ve(()=>a.value.reduce((y,v)=>y+v.latency,0)),g=ve(()=>a.value.reduce((y,v)=>(v.node_data.type==="tool"&&(y+=v.latency),y),0)),m=async({errors:y})=>{a.value=[],l.value="",!y&&(s.value="output",await c(n.workflow_id,i.value,v=>{a.value.push(v==null?void 0:v.data)}))};return Se(()=>n.visible,y=>{y&&(l.value="",a.value=[],s.value="input",i.value={})}),(y,v)=>{const _=F("icon-close"),b=F("a-button"),$=F("a-empty"),k=F("a-input"),P=F("a-input-number"),q=F("a-radio"),G=F("a-radio-group"),Y=F("a-form-item"),B=F("icon-play-arrow"),R=F("a-form"),S=F("a-tab-pane"),W=F("icon-loading"),w=F("icon-exclamation-circle-fill"),I=F("icon-check-circle-fill"),E=F("a-tabs");return n.visible?(A(),K("div",U5,[h("div",G5,[v[2]||(v[2]=h("div",{class:"text-base font-bold text-gray-700"},"工作流调试",-1)),x(b,{size:"mini",type:"text",class:"!text-gray-700",onClick:v[0]||(v[0]=()=>r("update:visible",!1))},{icon:j(()=>[x(_)]),_:1})]),x(E,{"active-key":s.value,"onUpdate:activeKey":v[1]||(v[1]=O=>s.value=O)},{default:j(()=>[x(S,{key:"input",title:"输入"},{default:j(()=>[d.value.length<=0?(A(),fe($,{key:0,class:"my-4"},{default:j(()=>v[3]||(v[3]=[we("该工作流暂无输入数据")])),_:1})):se("",!0),x(R,{model:i.value,layout:"vertical",onSubmit:m},{default:j(()=>[(A(!0),K(_e,null,xe(d.value,(O,U)=>(A(),fe(Y,{key:U,field:O.name,required:O.required,"hide-asterisk":""},{label:j(()=>[h("div",H5,[h("div",j5,re(O.name),1),O.required?(A(),K("div",Y5,"*")):se("",!0),h("div",X5,re(O.type),1)])]),default:j(()=>[O.type==="string"?(A(),fe(k,{key:0,modelValue:i.value[O.name],"onUpdate:modelValue":z=>i.value[O.name]=z,placeholder:"请输入参考值",class:"!rounded-lg"},null,8,["modelValue","onUpdate:modelValue"])):["int","float"].includes(O.type)?(A(),fe(P,{key:1,modelValue:i.value[O.name],"onUpdate:modelValue":z=>i.value[O.name]=z,placeholder:"请输入参考值",class:"!rounded-lg"},null,8,["modelValue","onUpdate:modelValue"])):O.type==="boolean"?(A(),fe(G,{key:2,modelValue:i.value[O.name],"onUpdate:modelValue":z=>i.value[O.name]=z},{default:j(()=>[x(q,{value:!0},{default:j(()=>v[4]||(v[4]=[we("是")])),_:1}),x(q,{value:!1},{default:j(()=>v[5]||(v[5]=[we("否")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])):se("",!0)]),_:2},1032,["field","required"]))),128)),x(b,{loading:Z(u),type:"primary","html-type":"submit",long:"",class:"rounded-lg"},{icon:j(()=>[x(B)]),default:j(()=>[v[6]||(v[6]=we(" 开始运行 "))]),_:1},8,["loading"])]),_:1},8,["model"])]),_:1}),x(S,{key:"output",title:"输出"},{default:j(()=>{var O,U;return[Z(u)?(A(),K("div",K5,[h("div",W5,[x(W,{class:"text-green-500"}),v[7]||(v[7]=h("div",{class:"text-green-500"},"工作流运行中",-1))]),h("div",Z5," 已成功运行节点【"+re(((U=(O=a.value.slice(-1)[0])==null?void 0:O.node_data)==null?void 0:U.title)??"-")+"】 ",1)])):(A(),K("div",J5,[Z(l)?(A(),K("div",Q5,[h("div",eM,[x(w),v[8]||(v[8]=h("div",null,"工作流运行失败",-1))]),h("div",tM,re(Z(l)),1)])):se("",!0),f.value?(A(),K("div",nM,[h("div",rM,[x(I),v[9]||(v[9]=h("div",{class:""},"运行成功",-1))]),h("div",oM,[v[12]||(v[12]=h("div",{class:"flex-1 flex flex-col gap-2"},[h("div",{class:"text-gray-500"},"总消耗"),h("div",{class:"text-gray-700"},"500 Tokens")],-1)),h("div",iM,[v[10]||(v[10]=h("div",{class:"text-gray-500"},"总用时",-1)),h("div",aM,re(p.value.toFixed(2))+"s",1)]),h("div",sM,[v[11]||(v[11]=h("div",{class:"text-gray-500"},"插件消耗",-1)),h("div",lM,re(g.value.toFixed(2))+"s",1)])])])):se("",!0),f.value?(A(),K("div",uM,re(f.value),1)):se("",!0)])),!Z(u)&&!f.value&&!Z(l)?(A(),fe($,{key:2,class:"my-4"},{default:j(()=>v[13]||(v[13]=[we(" 该工作流暂无运行调试结果 ")])),_:1})):se("",!0)]}),_:1})]),_:1},8,["active-key"])])):se("",!0)}}}),dM={key:0,id:"start-node-info",class:"absolute top-0 right-0 bottom-0 w-[400px] border-l z-50 bg-white overflow-scroll scrollbar-w-none p-3"},fM={class:"flex items-center justify-between gap-3 mb-2"},pM={class:"flex items-center gap-1 flex-1"},hM={class:""},vM={class:"flex items-center justify-between mb-2"},gM={class:"flex items-center gap-2 text-gray-700 font-semibold"},mM={class:"flex flex-col gap-2"},_M={class:"flex flex-col gap-2"},yM={class:"flex items-center justify-between mb-2"},bM={class:"flex items-center gap-2 flex-1"},xM={class:"text-gray-700 font-semibold line-clamp-1 break-all"},wM=Ee({__name:"StartNodeInfo",props:{visible:{type:Boolean,required:!0,default:!1},node:{type:Object,required:!0,default:()=>({})},loading:{type:Boolean,required:!0,default:!1}},emits:["updateNode"],setup(e,{emit:t}){const n=e,r=t,o=$e({}),i=()=>{var l;(l=o.value)==null||l.inputs.push({name:"",type:"string",description:"",required:!0}),Qe.success("新增输入字段成功")},a=l=>{var u,c;(c=(u=o.value)==null?void 0:u.inputs)==null||c.splice(l,1)},s=async({errors:l})=>{l||(ye.cloneDeep(n.node),r("updateNode",{id:n.node.id,title:o.value.title,description:o.value.description,inputs:ye.cloneDeep(o.value.inputs)}))};return Se(()=>n.node,l=>{o.value={id:l.id,type:l.type,title:l.data.title,description:l.data.description,inputs:[...ye.cloneDeep(l.data.inputs)]}},{immediate:!0}),(l,u)=>{const c=F("icon-home"),d=F("a-avatar"),f=F("a-input"),p=F("icon-close"),g=F("a-button"),m=F("a-textarea"),y=F("a-divider"),v=F("icon-question-circle"),_=F("a-tooltip"),b=F("icon-plus"),$=F("icon-paste"),k=F("a-form-item"),P=F("a-option"),q=F("a-select"),G=F("a-switch"),Y=F("a-empty"),B=F("a-form");return n.visible?(A(),K("div",dM,[h("div",fM,[h("div",pM,[x(d,{size:30,shape:"square",class:"bg-blue-700 rounded-lg flex-shrink-0"},{default:j(()=>[x(c)]),_:1}),x(f,{"model-value":o.value.title,"onUpdate:modelValue":u[0]||(u[0]=R=>o.value.title=R),placeholder:"请输入标题",class:"!bg-white text-gray-700 font-semibold px-2"},null,8,["model-value"])]),x(g,{type:"text",size:"mini",class:"!text-gray-700 flex-shrink-0"},{icon:j(()=>[x(p)]),_:1})]),x(m,{"auto-size":{minRows:3,maxRows:5},modelValue:o.value.description,"onUpdate:modelValue":u[1]||(u[1]=R=>o.value.description=R),class:"rounded-lg text-gray-700 !text-xs",placeholder:"输入描述..."},null,8,["modelValue"]),x(y,{class:"my-2"}),h("div",hM,[h("div",vM,[h("div",gM,[u[3]||(u[3]=h("div",{class:""},"输入参数",-1)),x(_,{content:"定义组件运行时的输入参数，大模型调用该组件时，将根据此信息抽取输入参数"},{default:j(()=>[x(v)]),_:1})]),x(g,{type:"text",size:"mini",class:"!text-gray-700",onClick:u[2]||(u[2]=()=>i())},{icon:j(()=>[x(b)]),_:1})]),h("div",mM,[x(B,{model:o.value,size:"mini","auto-label-width":"",onSubmit:s},{default:j(()=>{var R;return[h("div",_M,[(A(!0),K(_e,null,xe(o.value.inputs,(S,W)=>(A(),K("div",{key:W,class:"bg-gray-50 rounded-lg p-3"},[h("div",yM,[h("div",bM,[x($,{size:16}),h("div",xM,re(S.name),1)]),x(g,{size:"mini",type:"text",class:"!text-gray-700 flex-shrink-0",onClick:()=>a(W)},{icon:j(()=>[x(p)]),_:2},1032,["onClick"])]),x(k,{field:`inputs[${W}].name`,label:"参数名称",required:"","asterisk-position":"end"},{default:j(()=>[x(f,{modelValue:S.name,"onUpdate:modelValue":w=>S.name=w,size:"small",placeholder:"请输入变量名称",required:"","asterisk-position":"end"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["field"]),x(k,{field:`inputs[${W}].type`,label:"变量类型",required:"","asterisk-position":"end"},{default:j(()=>[x(q,{size:"mini",modelValue:S.type,"onUpdate:modelValue":w=>S.type=w},{default:j(()=>[x(P,{value:"string"},{default:j(()=>u[4]||(u[4]=[we("STRING")])),_:1}),x(P,{value:"int"},{default:j(()=>u[5]||(u[5]=[we("INT")])),_:1}),x(P,{value:"float"},{default:j(()=>u[6]||(u[6]=[we("FLOAT")])),_:1}),x(P,{value:"boolean"},{default:j(()=>u[7]||(u[7]=[we("BOOLEAN")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["field"]),x(k,{field:`inputs[${W}].description`,label:"参数描述",required:"","asterisk-position":"end"},{default:j(()=>[x(m,{"auto-size":{minRows:3,maxRows:3},modelValue:S.description,"onUpdate:modelValue":w=>S.description=w,size:"small",placeholder:"请准确描述该参数锁代表的含义，这将帮助大模型更好理解用户意图。"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["field"]),x(k,{field:`inputs[${W}].required`,label:"是否必填",required:"","asterisk-position":"end"},{default:j(()=>[x(G,{size:"small","checked-color":"#10b981","unchecked-color":"#556581",modelValue:S.required,"onUpdate:modelValue":w=>S.required=w},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["field"])]))),128)),((R=o.value)==null?void 0:R.inputs.length)<=0?(A(),fe(Y,{key:0,class:"my-4"},{default:j(()=>u[8]||(u[8]=[we("该节点暂无输入数据")])),_:1})):se("",!0),x(g,{loading:n.loading,type:"primary",size:"small","html-type":"submit",long:"",class:"rounded-lg"},{default:j(()=>u[9]||(u[9]=[we("保存")])),_:1},8,["loading"])])]}),_:1},8,["model"])])])])):se("",!0)}}}),$M={class:"flex items-center gap-1 cursor-pointer hover:bg-gray-100 px-1.5 py-1 rounded-lg"},EM={class:"text-gray-700 text-xs"},kM={class:"bg-white px-6 py-5 shadow rounded-lg w-[460px]"},SM={class:"flex flex-col gap-2 mb-2"},CM={class:"flex items-center gap-2"},NM={class:"text-xs text-gray-700"},IM={class:"text-xs text-gray-700"},qM={class:"flex items-center gap-2"},TM={class:"text-xs text-gray-700 py-2"},RM={class:"flex items-center gap-2 text-gray-500 w-[120px] flex-shrink-0"},AM={class:"text-xs"},MM=Ee({__name:"ModelConfig",props:{model_config:{type:Object,default:()=>({}),required:!0}},emits:["update:model_config"],setup(e,{emit:t}){const n=e,r=t,o=$e({}),{loading:i,language_model:a,loadLanguageModel:s}=u0(),{language_models:l,loadLanguageModels:u}=c0(),c=ve(()=>l.value.map(p=>({isGroup:!0,label:p.label,options:p.models.map(g=>({label:g.label,value:`${p.name}/${g.model_name}`}))}))),d=p=>{const[g,m]=p.split("/");s(g,m).then(()=>{o.value.parameters=a.value.parameters.reduce((y,v)=>(y[v.name]=v.default??null,y),{})})},f=()=>{const[p,g]=o.value.selectValue.split("/"),m={provider:p,model:g,parameters:o.value.parameters};r("update:model_config",m)};return Se(()=>n.model_config,p=>{console.log(n.model_config),o.value.selectValue=`${p==null?void 0:p.provider}/${p.model}`,o.value.provider=p==null?void 0:p.provider,o.value.model=p==null?void 0:p.model,o.value.parameters=p==null?void 0:p.parameters,p!=null&&p.provider&&s(String(p==null?void 0:p.provider),String(p==null?void 0:p.model))},{immediate:!0}),gt(()=>{u()}),(p,g)=>{var Y;const m=F("a-avatar"),y=F("icon-down"),v=F("a-space"),_=F("a-select"),b=F("icon-question-circle"),$=F("a-tooltip"),k=F("a-slider"),P=F("a-input"),q=F("a-spin"),G=F("a-trigger");return(Y=n.model_config)!=null&&Y.provider?(A(),fe(G,{key:0,trigger:"click",position:"br","popup-translate":[0,12],onHide:f},{content:j(()=>[h("div",kM,[g[3]||(g[3]=h("div",{class:"text-gray-700 text-base font-semibold mb-3"},"模型设置",-1)),h("div",SM,[g[2]||(g[2]=h("div",{class:"text-gray-700"},"模型",-1)),x(_,{"model-value":o.value.selectValue,"onUpdate:modelValue":g[0]||(g[0]=B=>o.value.selectValue=B),options:c.value,size:"small",class:"rounded-lg mb-2",placeholder:"请选择Agent使用的大语言模型",onChange:d},{label:j(({data:B})=>[h("div",CM,[x(m,{size:16,shape:"square","image-url":`${Z(Un)}/language-models/${B.value.split("/")[0]}/icon`},null,8,["image-url"]),x(v,{size:4},{default:j(()=>[h("div",NM,re(B.value.split("/")[0]),1),g[1]||(g[1]=h("div",{class:"text-xs text-gray-500"},"·",-1)),h("div",IM,re(B.value.split("/")[1]),1)]),_:2},1024)])]),option:j(({data:B})=>[h("div",qM,[x(m,{size:16,shape:"square","image-url":`${Z(Un)}/language-models/${B.value.split("/")[0]}/icon`},null,8,["image-url"]),h("div",TM,re(B.label),1)])]),_:1},8,["model-value","options"])]),g[4]||(g[4]=h("div",{class:"text-gray-700 mb-2"},"参数",-1)),x(q,{loading:Z(i),class:"w-full"},{default:j(()=>{var B;return[(A(!0),K(_e,null,xe((B=Z(a))==null?void 0:B.parameters,R=>{var S;return A(),K("div",{key:R.name,class:"flex items-center gap-2 h-8 mb-4"},[h("div",RM,[h("div",AM,re(R==null?void 0:R.label),1),x($,{content:R==null?void 0:R.help},{default:j(()=>[x(b)]),_:2},1032,["content"])]),((S=R==null?void 0:R.options)==null?void 0:S.length)>0?(A(),fe(_,{key:0,"model-value":o.value.parameters[R.name],"onUpdate:modelValue":W=>o.value.parameters[R.name]=W,"default-value":R.default,placeholder:"请选择参数值",options:R.options},null,8,["model-value","onUpdate:modelValue","default-value","options"])):R.type==="boolean"?(A(),fe(_,{key:1,"model-value":o.value.parameters[R.name],"onUpdate:modelValue":W=>o.value.parameters[R.name]=W,"default-value":R.default,placeholder:"请选择参数值",options:[{label:"是",value:!0},{label:"否",value:!1}]},null,8,["model-value","onUpdate:modelValue","default-value"])):["int","float"].includes(R.type)?(A(),fe(k,{key:2,"model-value":o.value.parameters[R.name],"onUpdate:modelValue":W=>o.value.parameters[R.name]=W,"default-value":R.default,min:R==null?void 0:R.min,max:R==null?void 0:R.max,step:(R==null?void 0:R.type)==="float"?.1:1,"show-input":""},null,8,["model-value","onUpdate:modelValue","default-value","min","max","step"])):R.type==="string"?(A(),fe(P,{key:3,"model-value":o.value.parameters[R.name],"onUpdate:modelValue":W=>o.value.parameters[R.name]=W,"default-value":R.default,placeholder:"请输入参数值"},null,8,["model-value","onUpdate:modelValue","default-value"])):se("",!0)])}),128))]}),_:1},8,["loading"])])]),default:j(()=>{var B,R;return[h("div",$M,[x(m,{size:16,shape:"square","image-url":`${Z(Un)}/language-models/${(B=o.value)==null?void 0:B.provider}/icon`},null,8,["image-url"]),h("div",EM,re((R=o.value)==null?void 0:R.model),1),x(y)])]}),_:1})):se("",!0)}}}),PM={key:0,id:"llm-node-info",class:"absolute top-0 right-0 bottom-0 w-[400px] border-l z-50 bg-white overflow-scroll scrollbar-w-none p-3"},OM={class:"flex items-center justify-between gap-3 mb-2"},DM={class:"flex items-center gap-1 flex-1"},zM={class:"flex flex-col gap-2"},VM={class:"flex items-center justify-between"},BM={class:"flex items-center gap-2 text-gray-700 font-semibold"},LM={class:"flex flex-col gap-2"},FM={class:"flex items-center justify-between"},UM={class:"flex items-center gap-2 text-gray-700 font-semibold"},GM={class:"w-[20%] flex-shrink-0"},HM={class:"w-[25%] flex-shrink-0"},jM={class:"w-[47%] flex-shrink-0 flex items-center gap-1"},YM={class:"w-[8%] text-right"},XM={class:"flex flex-col gap-2"},KM={class:"flex items-center justify-between"},WM={class:"flex items-center gap-2 text-gray-700 font-semibold"},ZM={class:"flex flex-col gap-2"},JM={class:"flex items-center gap-2"},QM={class:"text-gray-700"},e3={class:"text-gray-500 bg-gray-200 px-1 py-0.5 rounded"},t3=Ee({__name:"LLMNodeInfo",props:{visible:{type:Boolean,required:!0,default:!1},node:{type:Object,required:!0,default:()=>({})},loading:{type:Boolean,required:!0,default:!1}},emits:["update:visible","updateNode"],setup(e,{emit:t}){const n=e,r=t,{nodes:o,edges:i}=Ie(),a=$e({}),s=ve(()=>sn(ye.cloneDeep(o.value),ye.cloneDeep(i.value),n.node.id)),l=()=>{var d;(d=a.value)==null||d.inputs.push({name:"",type:"string",content:"",ref:""}),Qe.success("新增输入字段成功")},u=d=>{var f,p;(p=(f=a.value)==null?void 0:f.inputs)==null||p.splice(d,1)},c=async({errors:d})=>{if(d)return;const f=ye.cloneDeep(a.value.inputs);r("updateNode",{id:n.node.id,title:a.value.title,description:a.value.description,prompt:a.value.prompt,model_config:a.value.model_config,inputs:f.map(p=>({name:p.name,description:"",required:!0,type:p.type==="ref"?"string":p.type,value:{type:p.type==="ref"?"ref":"literal",content:p.type==="ref"?{ref_node_id:p.ref.split("/")[0]||"",ref_var_name:p.ref.split("/")[1]||""}:p.content},meta:{}})),outputs:ye.cloneDeep(a.value.outputs)})};return Se(()=>n.node,d=>{const f=ye.cloneDeep(d.data.inputs);a.value={id:d.id,type:d.type,title:d.data.title,description:d.data.description,prompt:d.data.prompt,model_config:d.data.language_model_config,inputs:f.map(p=>{const g=p.value.type==="ref"?`${p.value.content.ref_node_id}/${p.value.content.ref_var_name}`:"";let m=!1;if(p.value.type==="ref"){for(const y of s.value)for(const v of y.options)if(v.value===g){m=!0;break}}return{name:p.name,type:p.value.type==="literal"?p.type:"ref",content:p.value.type==="literal"?p.value.content:"",ref:p.value.type==="ref"&&m?g:""}}),outputs:[{name:"output",type:"string",value:{type:"generated",content:""}}]}},{immediate:!0}),(d,f)=>{const p=F("icon-language"),g=F("a-avatar"),m=F("a-input"),y=F("icon-close"),v=F("a-button"),_=F("a-textarea"),b=F("a-divider"),$=F("icon-question-circle"),k=F("a-tooltip"),P=F("icon-plus"),q=F("a-select"),G=F("icon-minus-circle"),Y=F("a-empty"),B=F("a-form-item"),R=F("a-form");return n.visible?(A(),K("div",PM,[h("div",OM,[h("div",DM,[x(g,{size:30,shape:"square",class:"bg-sky-500 rounded-lg flex-shrink-0"},{default:j(()=>[x(p)]),_:1}),x(m,{"model-value":a.value.title,"onUpdate:modelValue":f[0]||(f[0]=S=>a.value.title=S),placeholder:"请输入标题",class:"!bg-white text-gray-700 font-semibold px-2"},null,8,["model-value"])]),x(v,{type:"text",size:"mini",class:"!text-gray700 flex-shrink-0",onClick:f[1]||(f[1]=()=>r("update:visible",!1))},{icon:j(()=>[x(y)]),_:1})]),x(_,{"auto-size":{minRows:3,maxRows:5},modelValue:a.value.description,"onUpdate:modelValue":f[2]||(f[2]=S=>a.value.description=S),class:"rounded-lg text-gray-700 !text-xs",placeholder:"输入描述..."},null,8,["modelValue"]),x(b,{class:"my-2"}),x(R,{size:"mini",model:a.value,layout:"vertical",onSubmit:c},{default:j(()=>{var S,W,w;return[h("div",zM,[h("div",VM,[h("div",BM,[f[6]||(f[6]=h("div",{class:""},"语言模型配置",-1)),x(k,{content:"选择不同的大语言模型作为节点的底座模型"},{default:j(()=>[x($)]),_:1})]),x(MM,{model_config:a.value.model_config,"onUpdate:model_config":f[3]||(f[3]=I=>a.value.model_config=I)},null,8,["model_config"])])]),x(b,{class:"my-4"}),h("div",LM,[h("div",FM,[h("div",UM,[f[7]||(f[7]=h("div",{class:""},"输入数据",-1)),x(k,{content:"输入给大模型的参数，可在下方提示词中引用。所有输入参数会被转为string输入。"},{default:j(()=>[x($)]),_:1})]),x(v,{type:"text",size:"mini",class:"!text-gray-700",onClick:f[4]||(f[4]=()=>l())},{icon:j(()=>[x(P)]),_:1})]),f[9]||(f[9]=h("div",{class:"flex items-center gap-1 text-xs text-gray-500 mb-2"},[h("div",{class:"w-[20%]"},"参数名"),h("div",{class:"w-[25%]"},"类型"),h("div",{class:"w-[47%]"},"值"),h("div",{class:"w-[8%]"})],-1)),(A(!0),K(_e,null,xe((S=a.value)==null?void 0:S.inputs,(I,E)=>(A(),K("div",{key:E,class:"flex items-center gap-1"},[h("div",GM,[x(m,{modelValue:I.name,"onUpdate:modelValue":O=>I.name=O,size:"mini",placeholder:"请输入参数名",class:"!px-2"},null,8,["modelValue","onUpdate:modelValue"])]),h("div",HM,[x(q,{size:"mini",modelValue:I.type,"onUpdate:modelValue":O=>I.type=O,class:"px-2",options:[{label:"引用",value:"ref"},{label:"STRING",value:"string"},{label:"INT",value:"int"},{label:"FLOAT",value:"float"},{label:"BOOLEAN",value:"boolean"}]},null,8,["modelValue","onUpdate:modelValue"])]),h("div",jM,[I.type!=="ref"?(A(),fe(m,{key:0,size:"mini",modelValue:I.content,"onUpdate:modelValue":O=>I.content=O,placeholder:"请输入参数值"},null,8,["modelValue","onUpdate:modelValue"])):(A(),fe(q,{key:1,placeholder:"请选择引用变量",size:"mini","tag-nowrap":"",modelValue:I.ref,"onUpdate:modelValue":O=>I.ref=O,options:s.value},null,8,["modelValue","onUpdate:modelValue","options"]))]),h("div",YM,[x(G,{class:"text-gray-500 hover:text-gray-700 cursor-pointer flex-shrink-0",onClick:()=>u(E)},null,8,["onClick"])])]))),128)),((W=a.value)==null?void 0:W.inputs.length)<=0?(A(),fe(Y,{key:0,class:"my-4"},{default:j(()=>f[8]||(f[8]=[we("该节点暂无输入数据")])),_:1})):se("",!0)]),x(b,{class:"my-4"}),h("div",XM,[h("div",KM,[h("div",WM,[f[10]||(f[10]=h("div",{class:""},"提示词",-1)),x(k,{content:"作为人类消息传递给大语言模型，可以使用{{参数名}}插入引用/创建的变量。"},{default:j(()=>[x($)]),_:1})])]),x(B,{field:"prompt","hide-label":"","hide-asterisk":"",required:""},{default:j(()=>[x(_,{"auto-size":{minRows:5,maxRows:10},modelValue:a.value.prompt,"onUpdate:modelValue":f[5]||(f[5]=I=>a.value.prompt=I),placeholder:"编写大模型的提示词，使大模型实现对应的功能。通过插入{{参数名}}可以引用对应的参数值。",class:"rounded-lg"},null,8,["modelValue"])]),_:1})]),x(b,{class:"my-4"}),h("div",ZM,[f[11]||(f[11]=h("div",{class:"font-semibold text-gray-700"},"输出数据",-1)),f[12]||(f[12]=h("div",{class:"text-gray-500 text-xs"},"参数名",-1)),(A(!0),K(_e,null,xe((w=a.value)==null?void 0:w.outputs,(I,E)=>(A(),K("div",{key:E,class:"flex flex-col gap-2"},[h("div",JM,[h("div",QM,re(I.name),1),h("div",e3,re(I.type),1)])]))),128))]),x(b,{class:"my-4"}),x(v,{loading:n.loading,type:"primary",size:"small","html-type":"submit",long:"",class:"rounded-lg"},{default:j(()=>f[13]||(f[13]=[we(" 保存 ")])),_:1},8,["loading"])]}),_:1},8,["model"])])):se("",!0)}}}),n3={key:0,id:"llm-node-info",class:"absolute top-0 right-0 bottom-0 w-[400px] border-l z-50 bg-white overflow-scroll scrollbar-w-none p-3"},r3={class:"flex items-center justify-between gap-3 mb-2"},o3={class:"flex items-center gap-1 flex-1"},i3={class:"flex flex-col gap-2"},a3={class:"flex items-center justify-between"},s3={class:"flex items-center gap-2 text-gray-700 font-semibold"},l3={class:"w-[20%] flex-shrink-0"},u3={class:"w-[25%] flex-shrink-0"},c3={class:"w-[47%] flex-shrink-0 flex items-center gap-1"},d3={class:"w-[8%] text-right"},f3={class:"flex flex-col gap-2"},p3={class:"flex items-center justify-between"},h3={class:"flex items-center gap-2 text-gray-700 font-semibold"},v3={class:"flex flex-col gap-2"},g3={class:"flex items-center justify-between"},m3={class:"flex items-center gap-2 text-gray-700 font-semibold"},_3={class:"w-[46%] flex-shrink-0"},y3={class:"w-[46%] flex-shrink-0"},b3={class:"w-[8%] text-right"},x3=Ee({__name:"CodeNodeInfo",props:{visible:{type:Boolean,required:!0,default:!1},node:{type:Object,required:!0,default:()=>({})},loading:{type:Boolean,required:!0,default:!1}},emits:["update:visible","updateNode"],setup(e,{emit:t}){const n=e,r=t,{nodes:o,edges:i}=Ie(),a=$e({}),s=ve(()=>sn(ye.cloneDeep(o.value),ye.cloneDeep(i.value),n.node.id)),l=()=>{var p;(p=a.value)==null||p.inputs.push({name:"",type:"string",content:"",ref:""}),Qe.success("新增输入字段成功")},u=p=>{var g,m;(m=(g=a.value)==null?void 0:g.inputs)==null||m.splice(p,1)},c=()=>{var p;(p=a.value)==null||p.outputs.push({name:"",description:"",required:!0,type:"string",value:{type:"generated",content:""},meta:{}}),Qe.success("新增输出字段成功")},d=p=>{var g;(g=a.value)==null||g.outputs.splice(p,1)},f=async({errors:p})=>{if(p)return;const g=ye.cloneDeep(a.value.inputs);r("updateNode",{id:n.node.id,title:a.value.title,description:a.value.description,code:a.value.code,inputs:g.map(m=>({name:m.name,description:"",required:!0,type:m.type==="ref"?"string":m.type,value:{type:m.type==="ref"?"ref":"literal",content:m.type==="ref"?{ref_node_id:m.ref.split("/")[0]||"",ref_var_name:m.ref.split("/")[1]||""}:m.content},meta:{}})),outputs:ye.cloneDeep(a.value.outputs)})};return Se(()=>n.node,p=>{const g=ye.cloneDeep(p.data.inputs);a.value={id:p.id,type:p.type,title:p.data.title,description:p.data.description,code:p.data.code,inputs:g.map(m=>{const y=m.value.type==="ref"?`${m.value.content.ref_node_id}/${m.value.content.ref_var_name}`:"";let v=!1;if(m.value.type==="ref"){for(const _ of s.value)for(const b of _.options)if(b.value===y){v=!0;break}}return{name:m.name,type:m.value.type==="literal"?m.type:"ref",content:m.value.type==="literal"?m.value.content:"",ref:m.value.type==="ref"&&v?y:""}}),outputs:ye.cloneDeep(p.data.outputs)}},{immediate:!0}),(p,g)=>{const m=F("icon-code"),y=F("a-avatar"),v=F("a-input"),_=F("icon-close"),b=F("a-button"),$=F("a-textarea"),k=F("a-divider"),P=F("icon-question-circle"),q=F("a-tooltip"),G=F("icon-plus"),Y=F("a-select"),B=F("icon-minus-circle"),R=F("a-empty"),S=F("a-form-item"),W=F("a-form");return n.visible?(A(),K("div",n3,[h("div",r3,[h("div",o3,[x(y,{size:30,shape:"square",class:"bg-cyan-500 rounded-lg flex-shrink-0"},{default:j(()=>[x(m)]),_:1}),x(v,{"model-value":a.value.title,"onUpdate:modelValue":g[0]||(g[0]=w=>a.value.title=w),placeholder:"请输入标题",class:"!bg-white text-gray-700 font-semibold px-2"},null,8,["model-value"])]),x(b,{type:"text",size:"mini",class:"!text-gray700 flex-shrink-0",onClick:g[1]||(g[1]=()=>r("update:visible",!1))},{icon:j(()=>[x(_)]),_:1})]),x($,{"auto-size":{minRows:3,maxRows:5},modelValue:a.value.description,"onUpdate:modelValue":g[2]||(g[2]=w=>a.value.description=w),class:"rounded-lg text-gray-700 !text-xs",placeholder:"输入描述..."},null,8,["modelValue"]),x(k,{class:"my-2"}),x(W,{size:"mini",model:a.value,layout:"vertical",onSubmit:f},{default:j(()=>{var w,I,E,O,U;return[h("div",i3,[h("div",a3,[h("div",s3,[g[6]||(g[6]=h("div",{class:""},"输入参数",-1)),x(q,{content:"代码运行的输入变量。代码中可以直接引用此处添加的变量。"},{default:j(()=>[x(P)]),_:1})]),x(b,{type:"text",size:"mini",class:"!text-gray-700",onClick:g[3]||(g[3]=()=>l())},{icon:j(()=>[x(G)]),_:1})]),g[8]||(g[8]=h("div",{class:"flex items-center gap-1 text-xs text-gray-500 mb-2"},[h("div",{class:"w-[20%]"},"参数名"),h("div",{class:"w-[25%]"},"类型"),h("div",{class:"w-[47%]"},"值"),h("div",{class:"w-[8%]"})],-1)),(A(!0),K(_e,null,xe((w=a.value)==null?void 0:w.inputs,(z,V)=>(A(),K("div",{key:V,class:"flex items-center gap-1"},[h("div",l3,[x(v,{modelValue:z.name,"onUpdate:modelValue":C=>z.name=C,size:"mini",placeholder:"请输入参数名",class:"!px-2"},null,8,["modelValue","onUpdate:modelValue"])]),h("div",u3,[x(Y,{size:"mini",modelValue:z.type,"onUpdate:modelValue":C=>z.type=C,class:"px-2",options:[{label:"引用",value:"ref"},{label:"STRING",value:"string"},{label:"INT",value:"int"},{label:"FLOAT",value:"float"},{label:"BOOLEAN",value:"boolean"}]},null,8,["modelValue","onUpdate:modelValue"])]),h("div",c3,[z.type!=="ref"?(A(),fe(v,{key:0,size:"mini",modelValue:z.content,"onUpdate:modelValue":C=>z.content=C,placeholder:"请输入参数值"},null,8,["modelValue","onUpdate:modelValue"])):(A(),fe(Y,{key:1,placeholder:"请选择引用变量",size:"mini","tag-nowrap":"",modelValue:z.ref,"onUpdate:modelValue":C=>z.ref=C,options:s.value},null,8,["modelValue","onUpdate:modelValue","options"]))]),h("div",d3,[x(B,{class:"text-gray-500 hover:text-gray-700 cursor-pointer flex-shrink-0",onClick:()=>u(V)},null,8,["onClick"])])]))),128)),((I=a.value)==null?void 0:I.inputs.length)<=0?(A(),fe(R,{key:0,class:"my-4"},{default:j(()=>g[7]||(g[7]=[we("该节点暂无输入数据")])),_:1})):se("",!0)]),x(k,{class:"my-4"}),h("div",f3,[h("div",p3,[h("div",h3,[g[9]||(g[9]=h("div",{class:""},"代码",-1)),x(q,{content:"需要在后端执行的源代码，函数名为main，参数固定为params。"},{default:j(()=>[x(P)]),_:1})])]),x(S,{field:"code","hide-label":"","hide-asterisk":"",required:""},{default:j(()=>[x($,{"auto-size":{minRows:5,maxRows:10},modelValue:a.value.code,"onUpdate:modelValue":g[4]||(g[4]=z=>a.value.code=z),placeholder:"使用输入参数中的变量，构建函数功能。需要通过 return 一个对象来输出结果。",class:"!bg-gray-700 hover:!bg-gray-800 text-white rounded-lg"},null,8,["modelValue"])]),_:1})]),x(k,{class:"my-4"}),h("div",v3,[h("div",g3,[h("div",m3,[g[10]||(g[10]=h("div",{class:""},"输出参数",-1)),x(q,{content:"代码运行后的输出变量。此处的变量名、变量类型必须与代码中 return 结果一致。"},{default:j(()=>[x(P)]),_:1})]),x(b,{type:"text",size:"mini",class:"!text-gray-700",onClick:g[5]||(g[5]=()=>c())},{icon:j(()=>[x(G)]),_:1})]),g[12]||(g[12]=h("div",{class:"flex items-center gap-1 text-xs text-gray-500 mb-2"},[h("div",{class:"w-[46%]"},"参数名"),h("div",{class:"w-[46%]"},"类型"),h("div",{class:"w-[8%]"})],-1)),(A(!0),K(_e,null,xe((E=a.value)==null?void 0:E.outputs,(z,V)=>(A(),K("div",{key:V,class:"flex items-center gap-1"},[h("div",_3,[x(v,{modelValue:z.name,"onUpdate:modelValue":C=>z.name=C,size:"mini",placeholder:"请输入参数名",class:"!px-2"},null,8,["modelValue","onUpdate:modelValue"])]),h("div",y3,[x(Y,{size:"mini",modelValue:z.type,"onUpdate:modelValue":C=>z.type=C,class:"px-2",options:[{label:"STRING",value:"string"},{label:"INT",value:"int"},{label:"FLOAT",value:"float"},{label:"BOOLEAN",value:"boolean"}]},null,8,["modelValue","onUpdate:modelValue"])]),h("div",b3,[x(B,{class:"text-gray-500 hover:text-gray-700 cursor-pointer flex-shrink-0",onClick:()=>d(V)},null,8,["onClick"])])]))),128)),((U=(O=a.value)==null?void 0:O.outputs)==null?void 0:U.length)<=0?(A(),fe(R,{key:0,class:"my-4"},{default:j(()=>g[11]||(g[11]=[we("该节点暂无输出数据")])),_:1})):se("",!0)]),x(k,{class:"my-4"}),x(b,{loading:n.loading,type:"primary",size:"small","html-type":"submit",long:"",class:"rounded-lg"},{default:j(()=>g[13]||(g[13]=[we(" 保存 ")])),_:1},8,["loading"])]}),_:1},8,["model"])])):se("",!0)}}}),w3={key:0,id:"llm-node-info",class:"absolute top-0 right-0 bottom-0 w-[400px] border-l z-50 bg-white overflow-scroll scrollbar-w-none p-3"},$3={class:"flex items-center justify-between gap-3 mb-2"},E3={class:"flex items-center gap-1 flex-1"},k3={class:"flex flex-col gap-2"},S3={class:"flex items-center justify-between"},C3={class:"flex items-center gap-2 text-gray-700 font-semibold"},N3={class:"flex items-center gap-2"},I3={class:"w-[25%] flex-shrink-0"},q3={class:"w-[75%] flex-shrink-0"},T3={class:"flex flex-col gap-2"},R3={class:"flex items-center justify-between"},A3={class:"flex items-center gap-2 text-gray-700 font-semibold"},M3={class:"w-[20%] flex-shrink-0"},P3={class:"w-[25%] flex-shrink-0"},O3={class:"w-[47%] flex-shrink-0 flex items-center gap-1"},D3={class:"w-[8%] text-right"},z3={class:"flex flex-col gap-2"},V3={class:"flex items-center justify-between"},B3={class:"flex items-center gap-2 text-gray-700 font-semibold"},L3={class:"w-[20%] flex-shrink-0"},F3={class:"w-[25%] flex-shrink-0"},U3={class:"w-[47%] flex-shrink-0 flex items-center gap-1"},G3={class:"w-[8%] text-right"},H3={class:"flex flex-col gap-2"},j3={class:"flex items-center justify-between"},Y3={class:"flex items-center gap-2 text-gray-700 font-semibold"},X3={class:"w-[20%] flex-shrink-0"},K3={class:"w-[25%] flex-shrink-0"},W3={class:"w-[47%] flex-shrink-0 flex items-center gap-1"},Z3={class:"w-[8%] text-right"},J3={class:"flex flex-col gap-2"},Q3={class:"flex items-center gap-2"},eP={class:"text-gray-700"},tP={class:"text-gray-500 bg-gray-200 px-1 py-0.5 rounded"},nP=Ee({__name:"HttpRequestNodeInfo",props:{visible:{type:Boolean,required:!0,default:!1},node:{type:Object,required:!0,default:()=>({})},loading:{type:Boolean,required:!0,default:!1}},emits:["update:visible","updateNode"],setup(e,{emit:t}){const n=e,r=t,{nodes:o,edges:i}=Ie(),a=$e({}),s=[{label:"引用",value:"ref"},{label:"STRING",value:"string"},{label:"INT",value:"int"},{label:"FLOAT",value:"float"},{label:"BOOLEAN",value:"boolean"}],l=ve(()=>sn(ye.cloneDeep(o.value),ye.cloneDeep(i.value),n.node.id)),u=f=>{var p,g,m;f==="params"?(p=a.value)==null||p.paramsInputs.push({name:"",type:"string",content:"",ref:"",meta_type:f}):f==="headers"?(g=a.value)==null||g.headersInputs.push({name:"",type:"string",content:"",ref:"",meta_type:f}):f==="body"&&((m=a.value)==null||m.bodyInputs.push({name:"",type:"string",content:"",ref:"",meta_type:f})),Qe.success("新增输入字段成功")},c=(f,p)=>{var g,m,y;f==="params"?(g=a.value)==null||g.paramsInputs.splice(p,1):f==="headers"?(m=a.value)==null||m.headersInputs.splice(p,1):f==="body"&&((y=a.value)==null||y.bodyInputs.splice(p,1))},d=async({errors:f})=>{if(f)return;const p=[...ye.cloneDeep(a.value.headersInputs),...ye.cloneDeep(a.value.paramsInputs),...ye.cloneDeep(a.value.bodyInputs)];r("updateNode",{id:n.node.id,title:a.value.title,description:a.value.description,method:a.value.method,url:a.value.url,inputs:p.map(g=>({name:g.name,description:"",required:!0,type:g.type==="ref"?"string":g.type,value:{type:g.type==="ref"?"ref":"literal",content:g.type==="ref"?{ref_node_id:g.ref.split("/")[0]||"",ref_var_name:g.ref.split("/")[1]||""}:g.content},meta:{type:g.meta_type}})),outputs:ye.cloneDeep(a.value.outputs)})};return Se(()=>n.node,f=>{const p=ye.cloneDeep(f.data.inputs).map(g=>{const m=g.value.type==="ref"?`${g.value.content.ref_node_id}/${g.value.content.ref_var_name}`:"";let y=!1;if(g.value.type==="ref"){for(const v of l.value)for(const _ of v.options)if(_.value===m){y=!0;break}}return{name:g.name,type:g.value.type==="literal"?g.type:"ref",content:g.value.type==="literal"?g.value.content:"",ref:g.value.type==="ref"&&y?m:"",meta_type:g.meta.type}});a.value={id:f.id,type:f.type,title:f.data.title,description:f.data.description,method:f.data.method,url:f.data.url,paramsInputs:p.filter(g=>g.meta_type==="params"),headersInputs:p.filter(g=>g.meta_type==="headers"),bodyInputs:p.filter(g=>g.meta_type==="body"),outputs:[{name:"status_code",type:"int",value:{type:"generated",content:0}},{name:"text",type:"string",value:{type:"generated",content:""}}]}},{immediate:!0}),(f,p)=>{const g=F("icon-link"),m=F("a-avatar"),y=F("a-input"),v=F("icon-close"),_=F("a-button"),b=F("a-textarea"),$=F("a-divider"),k=F("icon-question-circle"),P=F("a-tooltip"),q=F("a-select"),G=F("icon-plus"),Y=F("icon-minus-circle"),B=F("a-empty"),R=F("a-form");return n.visible?(A(),K("div",w3,[h("div",$3,[h("div",E3,[x(m,{size:30,shape:"square",class:"bg-rose-500 rounded-lg flex-shrink-0"},{default:j(()=>[x(g)]),_:1}),x(y,{"model-value":a.value.title,"onUpdate:modelValue":p[0]||(p[0]=S=>a.value.title=S),placeholder:"请输入标题",class:"!bg-white text-gray-700 font-semibold px-2"},null,8,["model-value"])]),x(_,{type:"text",size:"mini",class:"!text-gray700 flex-shrink-0",onClick:p[1]||(p[1]=()=>r("update:visible",!1))},{icon:j(()=>[x(v)]),_:1})]),x(b,{"auto-size":{minRows:3,maxRows:5},modelValue:a.value.description,"onUpdate:modelValue":p[2]||(p[2]=S=>a.value.description=S),class:"rounded-lg text-gray-700 !text-xs",placeholder:"输入描述..."},null,8,["modelValue"]),x($,{class:"my-2"}),x(R,{size:"mini",model:a.value,layout:"vertical",onSubmit:d},{default:j(()=>{var S,W,w,I,E,O,U;return[h("div",k3,[h("div",S3,[h("div",C3,[p[8]||(p[8]=h("div",{class:""},"基本信息",-1)),x(P,{content:"配置请求的基础方法与基础URL地址"},{default:j(()=>[x(k)]),_:1})])]),h("div",N3,[h("div",I3,[x(q,{modelValue:a.value.method,"onUpdate:modelValue":p[3]||(p[3]=z=>a.value.method=z),size:"mini","default-value":"get",options:[{label:"GET",value:"get"},{label:"POST",value:"post"},{label:"PUT",value:"put"},{label:"PATCH",value:"patch"},{label:"DELETE",value:"delete"},{label:"HEAD",value:"head"},{label:"OPTIONS",value:"options"}],placeholder:"请选择请求方法",class:"px-2"},null,8,["modelValue"])]),h("div",q3,[x(y,{modelValue:a.value.url,"onUpdate:modelValue":p[4]||(p[4]=z=>a.value.url=z),size:"mini",placeholder:"请填写请求URL"},null,8,["modelValue"])])])]),x($,{class:"my-4"}),h("div",T3,[h("div",R3,[h("div",A3,[p[9]||(p[9]=h("div",{class:""},"HEADERS参数",-1)),x(P,{content:"附加到URL中headers的参数信息"},{default:j(()=>[x(k)]),_:1})]),x(_,{type:"text",size:"mini",class:"!text-gray-700",onClick:p[5]||(p[5]=()=>u("headers"))},{icon:j(()=>[x(G)]),_:1})]),p[11]||(p[11]=h("div",{class:"flex items-center gap-1 text-xs text-gray-500 mb-2"},[h("div",{class:"w-[20%]"},"参数名"),h("div",{class:"w-[25%]"},"类型"),h("div",{class:"w-[47%]"},"值"),h("div",{class:"w-[8%]"})],-1)),(A(!0),K(_e,null,xe((S=a.value)==null?void 0:S.headersInputs,(z,V)=>(A(),K("div",{key:V,class:"flex items-center gap-1"},[h("div",M3,[x(y,{modelValue:z.name,"onUpdate:modelValue":C=>z.name=C,size:"mini",placeholder:"请输入参数名",class:"!px-2"},null,8,["modelValue","onUpdate:modelValue"])]),h("div",P3,[x(q,{size:"mini",modelValue:z.type,"onUpdate:modelValue":C=>z.type=C,class:"px-2",options:s},null,8,["modelValue","onUpdate:modelValue"])]),h("div",O3,[z.type!=="ref"?(A(),fe(y,{key:0,size:"mini",modelValue:z.content,"onUpdate:modelValue":C=>z.content=C,placeholder:"请输入参数值"},null,8,["modelValue","onUpdate:modelValue"])):(A(),fe(q,{key:1,placeholder:"请选择引用变量",size:"mini","tag-nowrap":"",modelValue:z.ref,"onUpdate:modelValue":C=>z.ref=C,options:l.value},null,8,["modelValue","onUpdate:modelValue","options"]))]),h("div",D3,[x(Y,{class:"text-gray-500 hover:text-gray-700 cursor-pointer flex-shrink-0",onClick:()=>c("headers",V)},null,8,["onClick"])])]))),128)),((W=a.value)==null?void 0:W.headersInputs.length)<=0?(A(),fe(B,{key:0,class:"my-4"},{default:j(()=>p[10]||(p[10]=[we("该节点暂无HEADERS参数")])),_:1})):se("",!0)]),x($,{class:"my-4"}),h("div",z3,[h("div",V3,[h("div",B3,[p[12]||(p[12]=h("div",{class:""},"PARAMS参数",-1)),x(P,{content:"附加到URL中query中的参数信息"},{default:j(()=>[x(k)]),_:1})]),x(_,{type:"text",size:"mini",class:"!text-gray-700",onClick:p[6]||(p[6]=()=>u("params"))},{icon:j(()=>[x(G)]),_:1})]),p[14]||(p[14]=h("div",{class:"flex items-center gap-1 text-xs text-gray-500 mb-2"},[h("div",{class:"w-[20%]"},"参数名"),h("div",{class:"w-[25%]"},"类型"),h("div",{class:"w-[47%]"},"值"),h("div",{class:"w-[8%]"})],-1)),(A(!0),K(_e,null,xe((w=a.value)==null?void 0:w.paramsInputs,(z,V)=>(A(),K("div",{key:V,class:"flex items-center gap-1"},[h("div",L3,[x(y,{modelValue:z.name,"onUpdate:modelValue":C=>z.name=C,size:"mini",placeholder:"请输入参数名",class:"!px-2"},null,8,["modelValue","onUpdate:modelValue"])]),h("div",F3,[x(q,{size:"mini",modelValue:z.type,"onUpdate:modelValue":C=>z.type=C,class:"px-2",options:s},null,8,["modelValue","onUpdate:modelValue"])]),h("div",U3,[z.type!=="ref"?(A(),fe(y,{key:0,size:"mini",modelValue:z.content,"onUpdate:modelValue":C=>z.content=C,placeholder:"请输入参数值"},null,8,["modelValue","onUpdate:modelValue"])):(A(),fe(q,{key:1,placeholder:"请选择引用变量",size:"mini","tag-nowrap":"",modelValue:z.ref,"onUpdate:modelValue":C=>z.ref=C,options:l.value},null,8,["modelValue","onUpdate:modelValue","options"]))]),h("div",G3,[x(Y,{class:"text-gray-500 hover:text-gray-700 cursor-pointer flex-shrink-0",onClick:()=>c("params",V)},null,8,["onClick"])])]))),128)),((I=a.value)==null?void 0:I.paramsInputs.length)<=0?(A(),fe(B,{key:0,class:"my-4"},{default:j(()=>p[13]||(p[13]=[we("该节点暂无PARAMS参数")])),_:1})):se("",!0)]),x($,{class:"my-4"}),h("div",H3,[h("div",j3,[h("div",Y3,[p[15]||(p[15]=h("div",{class:""},"BODY参数",-1)),x(P,{content:"附加到URL中body的参数信息"},{default:j(()=>[x(k)]),_:1})]),x(_,{type:"text",size:"mini",class:"!text-gray-700",onClick:p[7]||(p[7]=()=>u("body"))},{icon:j(()=>[x(G)]),_:1})]),p[17]||(p[17]=h("div",{class:"flex items-center gap-1 text-xs text-gray-500 mb-2"},[h("div",{class:"w-[20%]"},"参数名"),h("div",{class:"w-[25%]"},"类型"),h("div",{class:"w-[47%]"},"值"),h("div",{class:"w-[8%]"})],-1)),(A(!0),K(_e,null,xe((E=a.value)==null?void 0:E.bodyInputs,(z,V)=>(A(),K("div",{key:V,class:"flex items-center gap-1"},[h("div",X3,[x(y,{modelValue:z.name,"onUpdate:modelValue":C=>z.name=C,size:"mini",placeholder:"请输入参数名",class:"!px-2"},null,8,["modelValue","onUpdate:modelValue"])]),h("div",K3,[x(q,{size:"mini",modelValue:z.type,"onUpdate:modelValue":C=>z.type=C,class:"px-2",options:s},null,8,["modelValue","onUpdate:modelValue"])]),h("div",W3,[z.type!=="ref"?(A(),fe(y,{key:0,size:"mini",modelValue:z.content,"onUpdate:modelValue":C=>z.content=C,placeholder:"请输入参数值"},null,8,["modelValue","onUpdate:modelValue"])):(A(),fe(q,{key:1,placeholder:"请选择引用变量",size:"mini","tag-nowrap":"",modelValue:z.ref,"onUpdate:modelValue":C=>z.ref=C,options:l.value},null,8,["modelValue","onUpdate:modelValue","options"]))]),h("div",Z3,[x(Y,{class:"text-gray-500 hover:text-gray-700 cursor-pointer flex-shrink-0",onClick:()=>c("body",V)},null,8,["onClick"])])]))),128)),((O=a.value)==null?void 0:O.bodyInputs.length)<=0?(A(),fe(B,{key:0,class:"my-4"},{default:j(()=>p[16]||(p[16]=[we("该节点暂无BODY参数")])),_:1})):se("",!0)]),x($,{class:"my-4"}),h("div",J3,[p[18]||(p[18]=h("div",{class:"font-semibold text-gray-700"},"输出数据",-1)),p[19]||(p[19]=h("div",{class:"text-gray-500 text-xs"},"参数名",-1)),(A(!0),K(_e,null,xe((U=a.value)==null?void 0:U.outputs,(z,V)=>(A(),K("div",{key:V,class:"flex flex-col gap-2"},[h("div",Q3,[h("div",eP,re(z.name),1),h("div",tP,re(z.type),1)])]))),128))]),x($,{class:"my-4"}),x(_,{loading:n.loading,type:"primary",size:"small","html-type":"submit",long:"",class:"rounded-lg"},{default:j(()=>p[20]||(p[20]=[we(" 保存 ")])),_:1},8,["loading"])]}),_:1},8,["model"])])):se("",!0)}}}),rP={key:0,id:"llm-node-info",class:"absolute top-0 right-0 bottom-0 w-[400px] border-l z-50 bg-white overflow-scroll scrollbar-w-none p-3"},oP={class:"flex items-center justify-between gap-3 mb-2"},iP={class:"flex items-center gap-1 flex-1"},aP={class:"flex flex-col gap-2"},sP={class:"flex items-center justify-between"},lP={class:"flex items-center gap-2 text-gray-700 font-semibold"},uP={class:"w-[20%] flex-shrink-0"},cP={class:"w-[25%] flex-shrink-0"},dP={class:"w-[47%] flex-shrink-0 flex items-center gap-1"},fP={class:"w-[8%] text-right"},pP=Ee({__name:"EndNodeInfo",props:{visible:{type:Boolean,required:!0,default:!1},node:{type:Object,required:!0,default:()=>({})},loading:{type:Boolean,required:!0,default:!1}},emits:["update:visible","updateNode"],setup(e,{emit:t}){const n=e,r=t,{nodes:o,edges:i}=Ie(),a=$e({}),s=[{label:"引用",value:"ref"},{label:"STRING",value:"string"},{label:"INT",value:"int"},{label:"FLOAT",value:"float"},{label:"BOOLEAN",value:"boolean"}],l=ve(()=>sn(ye.cloneDeep(o.value),ye.cloneDeep(i.value),n.node.id)),u=()=>{var f;(f=a.value)==null||f.outputs.push({name:"",type:"string",content:"",ref:""}),Qe.success("新增输入字段成功")},c=f=>{var p,g;(g=(p=a.value)==null?void 0:p.outputs)==null||g.splice(f,1)},d=async({errors:f})=>{if(f)return;const p=ye.cloneDeep(a.value.outputs);r("updateNode",{id:n.node.id,title:a.value.title,description:a.value.description,outputs:p.map(g=>({name:g.name,description:"",required:!0,type:g.type==="ref"?"string":g.type,value:{type:g.type==="ref"?"ref":"literal",content:g.type==="ref"?{ref_node_id:g.ref.split("/",2)[0]||"",ref_var_name:g.ref.split("/",2)[1]||""}:g.content},meta:{}}))})};return Se(()=>n.node,f=>{const p=ye.cloneDeep(f.data.outputs);a.value={id:f.id,type:f.type,title:f.data.title,description:f.data.description,outputs:p.map(g=>{const m=g.value.type==="ref"?`${g.value.content.ref_node_id}/${g.value.content.ref_var_name}`:"";let y=!1;if(g.value.type==="ref"){for(const v of l.value)for(const _ of v.options)if(_.value===m){y=!0;break}}return{name:g.name,type:g.value.type==="literal"?g.type:"ref",content:g.value.type==="literal"?g.value.content:"",ref:g.value.type==="ref"&&y?m:""}})}},{immediate:!0}),(f,p)=>{const g=F("icon-filter"),m=F("a-avatar"),y=F("a-input"),v=F("icon-close"),_=F("a-button"),b=F("a-textarea"),$=F("a-divider"),k=F("icon-question-circle"),P=F("a-tooltip"),q=F("icon-plus"),G=F("a-select"),Y=F("icon-minus-circle"),B=F("a-empty"),R=F("a-form");return n.visible?(A(),K("div",rP,[h("div",oP,[h("div",iP,[x(m,{size:30,shape:"square",class:"bg-red-700 rounded-lg flex-shrink-0"},{default:j(()=>[x(g)]),_:1}),x(y,{"model-value":a.value.title,"onUpdate:modelValue":p[0]||(p[0]=S=>a.value.title=S),placeholder:"请输入标题",class:"!bg-white text-gray-700 font-semibold px-2"},null,8,["model-value"])]),x(_,{type:"text",size:"mini",class:"!text-gray700 flex-shrink-0",onClick:p[1]||(p[1]=()=>r("update:visible",!1))},{icon:j(()=>[x(v)]),_:1})]),x(b,{"auto-size":{minRows:3,maxRows:5},modelValue:a.value.description,"onUpdate:modelValue":p[2]||(p[2]=S=>a.value.description=S),class:"rounded-lg text-gray-700 !text-xs",placeholder:"输入描述..."},null,8,["modelValue"]),x($,{class:"my-2"}),x(R,{size:"mini",model:a.value,layout:"vertical",onSubmit:d},{default:j(()=>{var S,W;return[h("div",aP,[h("div",sP,[h("div",lP,[p[4]||(p[4]=h("div",{class:""},"输出参数",-1)),x(P,{content:"组件运行完成后的最终输出。"},{default:j(()=>[x(k)]),_:1})]),x(_,{type:"text",size:"mini",class:"!text-gray-700",onClick:p[3]||(p[3]=()=>u())},{icon:j(()=>[x(q)]),_:1})]),p[6]||(p[6]=h("div",{class:"flex items-center gap-1 text-xs text-gray-500 mb-2"},[h("div",{class:"w-[20%]"},"参数名"),h("div",{class:"w-[25%]"},"类型"),h("div",{class:"w-[47%]"},"值"),h("div",{class:"w-[8%]"})],-1)),(A(!0),K(_e,null,xe((S=a.value)==null?void 0:S.outputs,(w,I)=>(A(),K("div",{key:I,class:"flex items-center gap-1"},[h("div",uP,[x(y,{modelValue:w.name,"onUpdate:modelValue":E=>w.name=E,size:"mini",placeholder:"请输入参数名",class:"!px-2"},null,8,["modelValue","onUpdate:modelValue"])]),h("div",cP,[x(G,{size:"mini",modelValue:w.type,"onUpdate:modelValue":E=>w.type=E,class:"px-2",options:s},null,8,["modelValue","onUpdate:modelValue"])]),h("div",dP,[w.type!=="ref"?(A(),fe(y,{key:0,size:"mini",modelValue:w.content,"onUpdate:modelValue":E=>w.content=E,placeholder:"请输入参数值"},null,8,["modelValue","onUpdate:modelValue"])):(A(),fe(G,{key:1,placeholder:"请选择引用变量",size:"mini","tag-nowrap":"",modelValue:w.ref,"onUpdate:modelValue":E=>w.ref=E,options:l.value},null,8,["modelValue","onUpdate:modelValue","options"]))]),h("div",fP,[x(Y,{class:"text-gray-500 hover:text-gray-700 cursor-pointer flex-shrink-0",onClick:()=>c(I)},null,8,["onClick"])])]))),128)),((W=a.value)==null?void 0:W.outputs.length)<=0?(A(),fe(B,{key:0,class:"my-4"},{default:j(()=>p[5]||(p[5]=[we("该节点暂无输入数据")])),_:1})):se("",!0)]),x($,{class:"my-4"}),x(_,{loading:n.loading,type:"primary",size:"small","html-type":"submit",long:"",class:"rounded-lg"},{default:j(()=>p[7]||(p[7]=[we(" 保存 ")])),_:1},8,["loading"])]}),_:1},8,["model"])])):se("",!0)}}}),hP={key:0,id:"llm-node-info",class:"absolute top-0 right-0 bottom-0 w-[400px] border-l z-50 bg-white overflow-scroll scrollbar-w-none p-3"},vP={class:"flex items-center justify-between gap-3 mb-2"},gP={class:"flex items-center gap-1 flex-1"},mP={class:"flex flex-col gap-2"},_P={class:"flex items-center justify-between"},yP={class:"flex items-center gap-2 text-gray-700 font-semibold"},bP={class:"w-[20%] flex-shrink-0"},xP={class:"w-[25%] flex-shrink-0"},wP={class:"w-[47%] flex-shrink-0 flex items-center gap-1"},$P={class:"w-[8%] text-right"},EP={class:"flex flex-col gap-2"},kP={class:"flex items-center justify-between"},SP={class:"flex items-center gap-2 text-gray-700 font-semibold"},CP={class:"flex flex-col gap-2"},NP={class:"flex items-center gap-2"},IP={class:"text-gray-700"},qP={class:"text-gray-500 bg-gray-200 px-1 py-0.5 rounded"},TP=Ee({__name:"TemplateTransformNodeInfo",props:{visible:{type:Boolean,required:!0,default:!1},node:{type:Object,required:!0,default:()=>({})},loading:{type:Boolean,required:!0,default:!1}},emits:["update:visible","updateNode"],setup(e,{emit:t}){const n=e,r=t,{nodes:o,edges:i}=Ie(),a=$e({}),s=ve(()=>sn(ye.cloneDeep(o.value),ye.cloneDeep(i.value),n.node.id)),l=()=>{var d;(d=a.value)==null||d.inputs.push({name:"",type:"string",content:"",ref:""}),Qe.success("新增输入字段成功")},u=d=>{var f,p;(p=(f=a.value)==null?void 0:f.inputs)==null||p.splice(d,1)},c=async({errors:d})=>{if(d)return;const f=ye.cloneDeep(a.value.inputs);r("updateNode",{id:n.node.id,title:a.value.title,description:a.value.description,template:a.value.template,inputs:f.map(p=>({name:p.name,description:"",required:!0,type:p.type==="ref"?"string":p.type,value:{type:p.type==="ref"?"ref":"literal",content:p.type==="ref"?{ref_node_id:p.ref.split("/",2)[0]||"",ref_var_name:p.ref.split("/",2)[1]||""}:p.content},meta:{}})),outputs:ye.cloneDeep(a.value.outputs)})};return Se(()=>n.node,d=>{const f=ye.cloneDeep(d.data.inputs);a.value={id:d.id,type:d.type,title:d.data.title,description:d.data.description,template:d.data.template,inputs:f.map(p=>{const g=p.value.type==="ref"?`${p.value.content.ref_node_id}/${p.value.content.ref_var_name}`:"";let m=!1;if(p.value.type==="ref"){for(const y of s.value)for(const v of y.options)if(v.value===g){m=!0;break}}return{name:p.name,type:p.value.type==="literal"?p.type:"ref",content:p.value.type==="literal"?p.value.content:"",ref:p.value.type==="ref"&&m?g:""}}),outputs:[{name:"output",type:"string",value:{type:"generated",content:""}}]}},{immediate:!0}),(d,f)=>{const p=F("icon-branch"),g=F("a-avatar"),m=F("a-input"),y=F("icon-close"),v=F("a-button"),_=F("a-textarea"),b=F("a-divider"),$=F("icon-question-circle"),k=F("a-tooltip"),P=F("icon-plus"),q=F("a-select"),G=F("icon-minus-circle"),Y=F("a-empty"),B=F("a-form-item"),R=F("a-form");return n.visible?(A(),K("div",hP,[h("div",vP,[h("div",gP,[x(g,{size:30,shape:"square",class:"bg-emerald-400 rounded-lg flex-shrink-0"},{default:j(()=>[x(p)]),_:1}),x(m,{"model-value":a.value.title,"onUpdate:modelValue":f[0]||(f[0]=S=>a.value.title=S),placeholder:"请输入标题",class:"!bg-white text-gray-700 font-semibold px-2"},null,8,["model-value"])]),x(v,{type:"text",size:"mini",class:"!text-gray700 flex-shrink-0",onClick:f[1]||(f[1]=()=>r("update:visible",!1))},{icon:j(()=>[x(y)]),_:1})]),x(_,{"auto-size":{minRows:3,maxRows:5},modelValue:a.value.description,"onUpdate:modelValue":f[2]||(f[2]=S=>a.value.description=S),class:"rounded-lg text-gray-700 !text-xs",placeholder:"输入描述..."},null,8,["modelValue"]),x(b,{class:"my-2"}),x(R,{size:"mini",model:a.value,layout:"vertical",onSubmit:c},{default:j(()=>{var S,W,w;return[h("div",mP,[h("div",_P,[h("div",yP,[f[5]||(f[5]=h("div",{class:""},"输入参数",-1)),x(k,{content:"输入给大模型的参数，可在下方提示词中引用。所有输入参数会被转为string输入。"},{default:j(()=>[x($)]),_:1})]),x(v,{type:"text",size:"mini",class:"!text-gray-700",onClick:f[3]||(f[3]=()=>l())},{icon:j(()=>[x(P)]),_:1})]),f[7]||(f[7]=h("div",{class:"flex items-center gap-1 text-xs text-gray-500 mb-2"},[h("div",{class:"w-[20%]"},"参数名"),h("div",{class:"w-[25%]"},"类型"),h("div",{class:"w-[47%]"},"值"),h("div",{class:"w-[8%]"})],-1)),(A(!0),K(_e,null,xe((S=a.value)==null?void 0:S.inputs,(I,E)=>(A(),K("div",{key:E,class:"flex items-center gap-1"},[h("div",bP,[x(m,{modelValue:I.name,"onUpdate:modelValue":O=>I.name=O,size:"mini",placeholder:"请输入参数名",class:"!px-2"},null,8,["modelValue","onUpdate:modelValue"])]),h("div",xP,[x(q,{size:"mini",modelValue:I.type,"onUpdate:modelValue":O=>I.type=O,class:"px-2",options:[{label:"引用",value:"ref"},{label:"STRING",value:"string"},{label:"INT",value:"int"},{label:"FLOAT",value:"float"},{label:"BOOLEAN",value:"boolean"}]},null,8,["modelValue","onUpdate:modelValue"])]),h("div",wP,[I.type!=="ref"?(A(),fe(m,{key:0,size:"mini",modelValue:I.content,"onUpdate:modelValue":O=>I.content=O,placeholder:"请输入参数值"},null,8,["modelValue","onUpdate:modelValue"])):(A(),fe(q,{key:1,placeholder:"请选择引用变量",size:"mini","tag-nowrap":"",modelValue:I.ref,"onUpdate:modelValue":O=>I.ref=O,options:s.value},null,8,["modelValue","onUpdate:modelValue","options"]))]),h("div",$P,[x(G,{class:"text-gray-500 hover:text-gray-700 cursor-pointer flex-shrink-0",onClick:()=>u(E)},null,8,["onClick"])])]))),128)),((W=a.value)==null?void 0:W.inputs.length)<=0?(A(),fe(Y,{key:0,class:"my-4"},{default:j(()=>f[6]||(f[6]=[we("该节点暂无输入数据")])),_:1})):se("",!0)]),x(b,{class:"my-4"}),h("div",EP,[h("div",kP,[h("div",SP,[f[8]||(f[8]=h("div",{class:""},"转换模板",-1)),x(k,{content:"需要处理并转换字符串的模板，格式必须符合jinja2的模板要求，可以使用{{参数名}}引用变量。"},{default:j(()=>[x($)]),_:1})])]),x(B,{field:"template","hide-label":"","hide-asterisk":"",required:""},{default:j(()=>[x(_,{"auto-size":{minRows:5,maxRows:10},modelValue:a.value.template,"onUpdate:modelValue":f[4]||(f[4]=I=>a.value.template=I),placeholder:"支持使用连接符拼接输入框中输入的参数，组合成字符串输出。通过插入{{参数名}}可以引用对应的参数值。",class:"rounded-lg"},null,8,["modelValue"])]),_:1})]),x(b,{class:"my-4"}),h("div",CP,[f[9]||(f[9]=h("div",{class:"font-semibold text-gray-700"},"输出数据",-1)),f[10]||(f[10]=h("div",{class:"text-gray-500 text-xs"},"参数名",-1)),(A(!0),K(_e,null,xe((w=a.value)==null?void 0:w.outputs,(I,E)=>(A(),K("div",{key:E,class:"flex flex-col gap-2"},[h("div",NP,[h("div",IP,re(I.name),1),h("div",qP,re(I.type),1)])]))),128))]),x(b,{class:"my-4"}),x(v,{loading:n.loading,type:"primary",size:"small","html-type":"submit",long:"",class:"rounded-lg"},{default:j(()=>f[11]||(f[11]=[we(" 保存 ")])),_:1},8,["loading"])]}),_:1},8,["model"])])):se("",!0)}}}),RP={key:0,id:"llm-node-info",class:"absolute top-0 right-0 bottom-0 w-[400px] border-l z-50 bg-white overflow-scroll scrollbar-w-none p-3"},AP={class:"flex items-center justify-between gap-3 mb-2"},MP={class:"flex items-center gap-1 flex-1"},PP={class:"flex flex-col gap-2"},OP={class:"flex items-center justify-between"},DP={class:"flex items-center gap-2 text-gray-700 font-semibold"},zP={class:"w-[20%] flex-shrink-0"},VP={class:"text-xs text-gray-500"},BP={class:"w-[25%] flex-shrink-0"},LP={class:"w-[55%] flex-shrink-0 flex items-center gap-1"},FP={class:"flex flex-col gap-2"},UP={class:"flex items-center justify-between"},GP={class:"flex items-center gap-2 text-gray-700 font-semibold"},HP={class:"flex flex-col gap-2"},jP={class:"flex items-center justify-between"},YP={class:"flex items-center gap-2 text-gray-700 font-semibold"},XP={class:"flex items-center gap-4 w-full pl-3"},KP={class:"flex flex-col gap-2"},WP={class:"flex items-center justify-between"},ZP={class:"flex items-center gap-2 text-gray-700 font-semibold"},JP={class:"flex items-center gap-4 w-full pl-3"},QP={class:"flex flex-col gap-2"},eO={class:"flex items-center justify-between"},tO={class:"flex items-center gap-2 text-gray-700 font-semibold"},nO={key:0,class:"flex flex-col gap-1"},rO={class:"flex items-center gap-2"},oO={class:"flex flex-col flex-1 gap-1 h-9"},iO={class:"text-gray-700 font-bold leading-[18px] line-clamp-1 break-all"},aO={class:"text-gray-500 text-xs line-clamp-1 break-all"},sO={key:1,class:"text-xs text-gray-500 leading-[22px]"},lO={class:"flex flex-col gap-2"},uO={class:"flex items-center gap-2"},cO={class:"text-gray-700"},dO={class:"text-gray-500 bg-gray-200 px-1 py-0.5 rounded"},fO={class:"flex items-center justify-between mb-6"},pO={class:"h-[calc(100vh-180px)] mb-4 overflow-scroll scrollbar-w-none"},hO={class:"flex flex-col gap-2"},vO=["onClick"],gO={class:"line-clamp-1 text-gray-500 flex-1"},mO={class:"flex items-center justify-between"},_O={class:""},yO=Ee({__name:"DatasetRetrievalNodeInfo",props:{visible:{type:Boolean,required:!0,default:!1},node:{type:Object,required:!0,default:()=>({})},loading:{type:Boolean,required:!0,default:!1}},emits:["update:visible","updateNode"],setup(e,{emit:t}){const n=e,r=t,o=$e(!1),i=$e({}),{nodes:a,edges:s}=Ie(),{loading:l,paginator:u,datasets:c,loadDatasets:d}=h0(),f=ve(()=>sn(ye.cloneDeep(a.value),ye.cloneDeep(s.value),n.node.id)),p=async v=>{const{scrollTop:_,scrollHeight:b,clientHeight:$}=v.target;if(_+$>=b-10){if(l.value)return;await d()}},g=v=>{i.value.datasets.splice(v,1)},m=v=>{const _=c.value[v];if(i.value.datasets.some(b=>b.id===_.id))i.value.datasets=i.value.datasets.filter(b=>b.id!==_.id);else{if(i.value.datasets.length>=5){Qe.warning("关联知识库已超过5个，无法继续关联");return}i.value.datasets.push({id:_.id,name:_.name,icon:_.icon,description:_.description})}},y=async({errors:v})=>{if(v)return;const _=ye.cloneDeep(i.value.inputs),b=ye.cloneDeep(i.value.datasets);r("updateNode",{id:n.node.id,title:i.value.title,description:i.value.description,dataset_ids:b.map($=>$.id),meta:{datasets:b},retrieval_config:ye.cloneDeep(i.value.retrieval_config),inputs:_.map($=>({name:$.name,description:"",required:!0,type:$.type==="ref"?"string":$.type,value:{type:$.type==="ref"?"ref":"literal",content:$.type==="ref"?{ref_node_id:$.ref.split("/")[0]||"",ref_var_name:$.ref.split("/")[1]||""}:$.content},meta:{}})),outputs:ye.cloneDeep(i.value.outputs)})};return Se(()=>n.node,v=>{const _=ye.cloneDeep(v.data.inputs);i.value={id:v.id,type:v.type,title:v.data.title,description:v.data.description,datasets:ye.cloneDeep(v.data.meta.datasets)??[],retrieval_config:ye.cloneDeep(v.data.retrieval_config)??{k:4,retrieval_strategy:"semantic",score:0},inputs:_.map(b=>{const $=b.value.type==="ref"?`${b.value.content.ref_node_id}/${b.value.content.ref_var_name}`:"";let k=!1;if(b.value.type==="ref"){for(const P of f.value)for(const q of P.options)if(q.value===$){k=!0;break}}return{name:b.name,type:b.value.type==="literal"?b.type:"ref",content:b.value.type==="literal"?b.value.content:"",ref:b.value.type==="ref"&&k?$:""}}),outputs:[{name:"combine_documents",type:"string",value:{type:"generated",content:""}}]}},{immediate:!0}),(v,_)=>{const b=F("icon-storage"),$=F("a-avatar"),k=F("a-input"),P=F("icon-close"),q=F("a-button"),G=F("a-textarea"),Y=F("a-divider"),B=F("icon-question-circle"),R=F("a-tooltip"),S=F("a-select"),W=F("a-radio-group"),w=F("a-slider"),I=F("a-input-number"),E=F("icon-plus"),O=F("icon-delete"),U=F("a-form"),z=F("a-empty"),V=F("a-spin"),C=F("a-space"),ee=F("a-col"),oe=F("a-row"),M=F("a-modal");return n.visible?(A(),K("div",RP,[h("div",AP,[h("div",MP,[x($,{size:30,shape:"square",class:"bg-violet-500 rounded-lg flex-shrink-0"},{default:j(()=>[x(b)]),_:1}),x(k,{"model-value":i.value.title,"onUpdate:modelValue":_[0]||(_[0]=D=>i.value.title=D),placeholder:"请输入标题",class:"!bg-white text-gray-700 font-semibold px-2"},null,8,["model-value"])]),x(q,{type:"text",size:"mini",class:"!text-gray700 flex-shrink-0",onClick:_[1]||(_[1]=()=>r("update:visible",!1))},{icon:j(()=>[x(P)]),_:1})]),x(G,{"auto-size":{minRows:3,maxRows:5},modelValue:i.value.description,"onUpdate:modelValue":_[2]||(_[2]=D=>i.value.description=D),class:"rounded-lg text-gray-700 !text-xs",placeholder:"输入描述..."},null,8,["modelValue"]),x(Y,{class:"my-2"}),x(U,{size:"mini",model:i.value,layout:"vertical",onSubmit:y},{default:j(()=>{var D,H,J;return[h("div",PP,[h("div",OP,[h("div",DP,[_[12]||(_[12]=h("div",{class:""},"输入数据",-1)),x(R,{content:"输入给大模型的参数，可在下方提示词中引用。所有输入参数会被转为string输入。"},{default:j(()=>[x(B)]),_:1})])]),_[13]||(_[13]=h("div",{class:"flex items-center gap-1 text-xs text-gray-500 mb-2"},[h("div",{class:"w-[20%]"},"参数名"),h("div",{class:"w-[25%]"},"类型"),h("div",{class:"w-[55%]"},"值")],-1)),(A(!0),K(_e,null,xe((D=i.value)==null?void 0:D.inputs,(Q,ie)=>(A(),K("div",{key:ie,class:"flex items-center gap-1"},[h("div",zP,[h("div",VP,re(Q.name),1)]),h("div",BP,[x(S,{size:"mini",modelValue:Q.type,"onUpdate:modelValue":he=>Q.type=he,class:"px-2",options:[{label:"引用",value:"ref"},{label:"STRING",value:"string"},{label:"INT",value:"int"},{label:"FLOAT",value:"float"},{label:"BOOLEAN",value:"boolean"}]},null,8,["modelValue","onUpdate:modelValue"])]),h("div",LP,[Q.type!=="ref"?(A(),fe(k,{key:0,size:"mini",modelValue:Q.content,"onUpdate:modelValue":he=>Q.content=he,placeholder:"请输入参数值"},null,8,["modelValue","onUpdate:modelValue"])):(A(),fe(S,{key:1,placeholder:"请选择引用变量",size:"mini","tag-nowrap":"",modelValue:Q.ref,"onUpdate:modelValue":he=>Q.ref=he,options:f.value},null,8,["modelValue","onUpdate:modelValue","options"]))])]))),128))]),x(Y,{class:"my-4"}),h("div",FP,[h("div",UP,[h("div",GP,[_[14]||(_[14]=h("div",{class:""},"检索设置",-1)),x(R,{content:"配置知识库的检索规则，支持相似性检索、混合检索、全文检索。"},{default:j(()=>[x(B)]),_:1})])]),x(W,{modelValue:i.value.retrieval_config.retrieval_strategy,"onUpdate:modelValue":_[3]||(_[3]=Q=>i.value.retrieval_config.retrieval_strategy=Q),"default-value":"semantic",options:[{label:"混合策略",value:"hybrid"},{label:"全文检索",value:"full_text"},{label:"相似性检索",value:"semantic"}]},null,8,["modelValue"])]),x(Y,{class:"my-4"}),h("div",HP,[h("div",jP,[h("div",YP,[_[15]||(_[15]=h("div",{class:""},"最大召回数量",-1)),x(R,{content:"配置知识库的最大召回数量，范围为0-10."},{default:j(()=>[x(B)]),_:1})])]),h("div",XP,[x(w,{modelValue:i.value.retrieval_config.k,"onUpdate:modelValue":_[4]||(_[4]=Q=>i.value.retrieval_config.k=Q),step:1,min:1,max:10},null,8,["modelValue"]),x(I,{size:"mini",modelValue:i.value.retrieval_config.k,"onUpdate:modelValue":_[5]||(_[5]=Q=>i.value.retrieval_config.k=Q),class:"w-[80px]","default-value":4},null,8,["modelValue"])])]),x(Y,{class:"my-4"}),h("div",KP,[h("div",WP,[h("div",ZP,[_[16]||(_[16]=h("div",{class:""},"最小匹配度",-1)),x(R,{content:"配置知识库的最小匹配度，范围为0-1"},{default:j(()=>[x(B)]),_:1})])]),h("div",JP,[x(w,{modelValue:i.value.retrieval_config.score,"onUpdate:modelValue":_[6]||(_[6]=Q=>i.value.retrieval_config.score=Q),step:.01,min:0,max:.99},null,8,["modelValue"]),x(I,{size:"mini",modelValue:i.value.retrieval_config.score,"onUpdate:modelValue":_[7]||(_[7]=Q=>i.value.retrieval_config.score=Q),class:"w-[80px]",min:0,max:.99,step:.01,precision:2,"default-value":.5},null,8,["modelValue"])])]),x(Y,{class:"my-4"}),h("div",QP,[h("div",eO,[h("div",tO,[_[17]||(_[17]=h("div",{class:""},"关联知识库",-1)),x(R,{content:"绑定知识库检索节点需要检索的知识库，最多可以关联5个知识库。"},{default:j(()=>[x(B)]),_:1})]),x(q,{size:"mini",type:"text",class:"!text-gray-700",onClick:_[8]||(_[8]=()=>o.value=!0)},{icon:j(()=>[x(E)]),_:1})]),((H=i.value.datasets)==null?void 0:H.length)>0?(A(),K("div",nO,[(A(!0),K(_e,null,xe(i.value.datasets,(Q,ie)=>(A(),K("div",{key:Q.id,class:"flex items-center justify-between bg-white p-3 rounded-lg cursor-pointer hover:shadow-sm group border"},[h("div",rO,[x($,{size:36,shape:"square",class:"rounded flex-shrink-0","image-url":Q.icon},null,8,["image-url"]),h("div",oO,[h("div",iO,re(Q.name),1),h("div",aO,re(Q.description),1)])]),x(q,{size:"mini",type:"text",class:"hidden group-hover:block flex-shrink-0 ml-2 !text-red-700 rounded",onClick:()=>g(ie)},{icon:j(()=>[x(O)]),_:2},1032,["onClick"])]))),128))])):(A(),K("div",sO," 引用文本类型的数据，实现知识问答，工作流最多支持关联 5 个知识库。 "))]),x(Y,{class:"my-4"}),h("div",lO,[_[18]||(_[18]=h("div",{class:"font-semibold text-gray-700"},"输出数据",-1)),_[19]||(_[19]=h("div",{class:"text-gray-500 text-xs"},"参数名",-1)),(A(!0),K(_e,null,xe((J=i.value)==null?void 0:J.outputs,(Q,ie)=>(A(),K("div",{key:ie,class:"flex flex-col gap-2"},[h("div",uO,[h("div",cO,re(Q.name),1),h("div",dO,re(Q.type),1)])]))),128))]),x(Y,{class:"my-4"}),x(q,{loading:n.loading,type:"primary",size:"small","html-type":"submit",long:"",class:"rounded-lg"},{default:j(()=>_[20]||(_[20]=[we(" 保存 ")])),_:1},8,["loading"])]}),_:1},8,["model"]),x(M,{visible:o.value,"hide-title":"",footer:!1,width:400,"modal-class":"h-[calc(100vh-32px)]",onCancel:_[11]||(_[11]=()=>o.value=!1)},{default:j(()=>[h("div",fO,[_[21]||(_[21]=h("div",{class:"text-lg font-bold text-gray-700"},"选择引用知识库",-1)),x(q,{type:"text",class:"!text-gray-700",size:"small",onClick:_[9]||(_[9]=()=>o.value=!1)},{icon:j(()=>[x(P)]),_:1})]),h("div",pO,[x(V,{loading:Z(l),class:"block h-full w-full scrollbar-w-none overflow-scroll",onScroll:p},{default:j(()=>[h("div",hO,[(A(!0),K(_e,null,xe(Z(c),(D,H)=>(A(),K("div",{key:D.id,class:Fe(`flex items-center gap-2 border px-3 py-2 rounded-lg cursor-pointer hover:bg-blue-50 hover:border-blue-700 ${i.value.datasets.some(J=>J.id===D.id)?"bg-blue-50 border-blue-700":""}`),onClick:()=>m(H)},[x($,{size:24,shape:"square",class:"flex-shrink-0 rounded","image-url":D.icon},null,8,["image-url"]),h("div",gO,re(D.name),1)],10,vO))),128)),Z(c).length===0?(A(),fe(z,{key:0,description:"没有可用的知识库",class:"h-[400px] flex flex-col items-center justify-center"})):se("",!0)]),Z(u).total_page>=2?(A(),fe(oe,{key:0},{default:j(()=>[Z(u).current_page<=Z(u).total_page?(A(),fe(ee,{key:0,span:24,class:"!text-center"},{default:j(()=>[x(C,{class:"my-4"},{default:j(()=>[x(V),_[22]||(_[22]=h("div",{class:"text-gray-400"},"加载中",-1))]),_:1})]),_:1})):(A(),fe(ee,{key:1,span:24,class:"!text-center"},{default:j(()=>_[23]||(_[23]=[h("div",{class:"text-gray-400 my-4"},"数据已加载完成",-1)])),_:1}))]),_:1})):se("",!0)]),_:1},8,["loading"])]),h("div",mO,[h("div",_O,re(i.value.datasets.length)+" 个知识库被选中",1),x(C,{size:12},{default:j(()=>[x(q,{type:"primary",class:"rounded-lg",onClick:_[10]||(_[10]=()=>o.value=!1)},{default:j(()=>_[24]||(_[24]=[we(" 确定 ")])),_:1})]),_:1})])]),_:1},8,["visible"])])):se("",!0)}}}),bO={key:0,id:"llm-node-info",class:"absolute top-0 right-0 bottom-0 w-[400px] border-l z-50 bg-white overflow-scroll scrollbar-w-none p-3"},xO={class:"flex items-center justify-between gap-3 mb-2"},wO={class:"flex items-center gap-1 flex-1"},$O={class:"flex flex-col gap-2"},EO={class:"flex items-center justify-between"},kO={class:"flex items-center gap-2 text-gray-700 font-semibold"},SO={key:0,class:"flex flex-col gap-1"},CO={class:"flex items-center justify-between bg-white p-3 rounded-lg cursor-pointer hover:shadow-sm group border"},NO={class:"flex items-center gap-2"},IO={class:"flex flex-col flex-1 gap-1 h-9"},qO={class:"text-gray-700 font-bold leading-[18px] line-clamp-1 break-all"},TO={class:"text-gray-500 text-xs line-clamp-1 break-all"},RO={key:1,class:"text-xs text-gray-500 leading-[22px]"},AO={class:"flex flex-col gap-2"},MO={class:"flex items-center justify-between"},PO={class:"flex items-center gap-2 text-gray-700 font-semibold"},OO={class:"w-[30%] flex-shrink-0"},DO={class:"flex items-center gap-1 text-xs text-gray-500"},zO={class:""},VO={class:"text-gray-500 bg-gray-200 px-1 py-0.5 rounded"},BO={class:"w-[25%] flex-shrink-0"},LO={class:"w-[45%] flex-shrink-0 flex items-center gap-1"},FO={class:"flex flex-col gap-2"},UO={class:"flex items-center justify-between"},GO={class:"flex items-center gap-2 text-gray-700 font-semibold"},HO={key:0,class:"flex items-center gap-1 text-xs text-gray-500 mb-2"},jO={class:"w-[20%] flex-shrink-0"},YO={class:"flex items-center gap-1 text-xs text-gray-500"},XO={class:""},KO={class:"w-[80%] flex-shrink-0"},WO={class:"flex flex-col gap-2"},ZO={class:"flex items-center gap-2"},JO={class:"text-gray-700"},QO={class:"text-gray-500 text-xs bg-gray-200 px-1 py-0.5 rounded"},e8={class:"flex w-full h-full"},t8={class:"flex flex-col flex-shrink-0 bg-gray-50 w-[200px] h-full px-3 py-4 overflow-scroll scrollbar-w-none"},n8={class:"flex flex-col gap-1 mb-4"},r8={key:0,class:""},o8={class:"flex flex-col gap-1"},i8=["onClick"],a8=["innerHTML"],s8={class:"flex-1 p-4"},l8={class:"w-full flex items-center justify-between gap-2 mb-7"},u8={class:"text-lg font-bold text-gray-700"},c8={key:0,class:"h-[calc(100vh-130px)] overflow-scroll scrollbar-w-none"},d8={class:"text-gray-900"},f8={class:"flex flex-col gap-1"},p8={class:"flex items-center gap-2"},h8={class:"text-gray-900"},v8={key:0,class:""},g8={key:1},m8={class:"text-gray-900"},_8={class:"flex flex-col gap-1"},y8={class:"flex items-center gap-2"},b8={class:"text-gray-900"},x8={key:0,class:""},w8=Ee({__name:"ToolNodeInfo",props:{visible:{type:Boolean,required:!0,default:!1},node:{type:Object,required:!0,default:()=>({})},loading:{type:Boolean,required:!0,default:!1}},emits:["update:visible","updateNode"],setup(e,{emit:t}){const n=e,r=t,{nodes:o,edges:i}=Ie(),{loading:a,paginator:s,api_tool_providers:l,loadApiToolProviders:u}=v0(),{builtin_tool:c,loadBuiltinTool:d}=d0(),{api_tool:f,loadApiTool:p}=g0(),{builtin_tools:g,loadBuiltinTools:m}=f0(),{categories:y}=p0(),v=$e({}),_=$e(!1),b=$e("api_tool"),$=$e("all"),k=ve(()=>$.value==="all"?g:g.value.filter(I=>I.category===$.value)),P={str:"string",int:"int",float:"float",bool:"boolean"},q={type:"api_tool",provider:{id:"",name:"",label:"",icon:"",description:""},tool:{id:"",name:"",label:"",description:"",params:{}}},G=ve(()=>sn(ye.cloneDeep(o.value),ye.cloneDeep(i.value),n.node.id)),Y=async()=>{_.value=!0,await u(!0),await m()},B=()=>{v.value.tool=q,v.value.params=[],v.value.inputs=[]},R=(I,E)=>{var O,U,z;return((U=(O=v.value.tool)==null?void 0:O.provider)==null?void 0:U.name)===I.name&&((z=v.value.tool)==null?void 0:z.tool.name)===E.name},S=async(I,E)=>{var U,z,V,C,ee,oe;let O;if(b.value==="api_tool"){const M=l.value[I],D=M.tools[E];O={type:"api_tool",provider:{id:M.id,name:M.name,label:M.name,icon:M.icon,description:M.description},tool:{id:D.name,name:D.name,label:D.name,description:D.description,params:{}}}}else{const M=k.value[I],D=M.tools[E],H=D.params;O={type:"builtin_tool",provider:{id:M.name,name:M.name,label:M.label,icon:`${Un}/builtin-tools/${M.name}/icon`,description:M.description},tool:{id:D.name,name:D.name,label:D.label,description:D.description,params:H.reduce((J,Q)=>(J[Q.name]=Q.default,J),{})}}}if(((V=(z=(U=v.value)==null?void 0:U.tool)==null?void 0:z.provider)==null?void 0:V.id)===O.provider.id&&((oe=(ee=(C=v.value)==null?void 0:C.tool)==null?void 0:ee.tool)==null?void 0:oe.name)===O.tool.name)v.value.tool=q,v.value.inputs=[],v.value.params=[];else if(v.value.tool=O,O.type==="builtin_tool"){await d(O.provider.name,O.tool.name);const M=c.value.inputs,D=c.value.params;v.value.inputs=M.map(H=>({name:H.name,type:P[H.type],value_type:"ref",content:"",ref:""})),v.value.params=D.map(H=>({key:H.name,value:H.default}))}else{await p(O.provider.id,O.tool.name);const M=f.value.inputs;v.value.inputs=M.map(D=>({name:D.name,type:P[D.type],value_type:"ref",content:"",ref:""})),v.value.params=[]}},W=async I=>{const{scrollTop:E,scrollHeight:O,clientHeight:U}=I.target;if(E+U>=O-10){if(a.value)return;await u()}},w=async({errors:I})=>{var z,V,C;if(I)return;const E=ye.cloneDeep(v.value.inputs),O=ye.cloneDeep(v.value.params);let U={};O.forEach(ee=>{U[ee.key]=ee.value}),r("updateNode",{id:n.node.id,title:v.value.title,description:v.value.description,tool_type:(z=v.value.tool)==null?void 0:z.type,provider_id:(V=v.value.tool)==null?void 0:V.provider.id,tool_id:(C=v.value.tool)==null?void 0:C.tool.name,meta:ye.cloneDeep(v.value.tool),params:U,inputs:E.map(ee=>({name:ee.name,description:"",required:!0,type:ee.value_type==="ref"?"string":ee.type,value:{type:ee.value_type==="ref"?"ref":"literal",content:ee.value_type==="ref"?{ref_node_id:ee.ref.split("/")[0]||"",ref_var_name:ee.ref.split("/")[1]||""}:ee.content},meta:{}})),outputs:ye.cloneDeep(v.value.outputs)})};return Se(()=>n.node,I=>{const E=ye.cloneDeep(I.data.inputs),O=ye.cloneDeep(I.data.params);v.value={id:I.id,type:I.type,title:I.data.title,description:I.data.description,tool:ye.cloneDeep(I.data.meta)??q,params:Object.entries(O).map(([U,z])=>({key:U,value:z})),inputs:E.map(U=>{const z=U.value.type==="ref"?`${U.value.content.ref_node_id}/${U.value.content.ref_var_name}`:"";let V=!1;if(U.value.type==="ref"){for(const C of G.value)for(const ee of C.options)if(ee.value===z){V=!0;break}}return{name:U.name,type:U.type,value_type:U.value.type==="literal"?U.type:"ref",content:U.value.type==="literal"?U.value.content:"",ref:U.value.type==="ref"&&V?z:""}}),outputs:[{name:"text",type:"string",value:{type:"generated",content:""}}]}},{immediate:!0}),(I,E)=>{const O=F("icon-tool"),U=F("a-avatar"),z=F("a-input"),V=F("icon-close"),C=F("a-button"),ee=F("a-textarea"),oe=F("a-divider"),M=F("icon-question-circle"),D=F("a-tooltip"),H=F("icon-plus"),J=F("icon-delete"),Q=F("a-select"),ie=F("a-empty"),he=F("a-form"),pe=F("router-link"),be=F("icon-code"),ge=F("icon-translate"),L=F("icon-apps"),T=F("a-spin"),N=F("a-space"),X=F("a-col"),ne=F("a-row"),de=F("a-modal");return n.visible?(A(),K("div",bO,[h("div",xO,[h("div",wO,[x(U,{size:30,shape:"square",class:"bg-orange-500 rounded-lg flex-shrink-0"},{default:j(()=>[x(O)]),_:1}),x(z,{"model-value":v.value.title,"onUpdate:modelValue":E[0]||(E[0]=te=>v.value.title=te),placeholder:"请输入标题",class:"!bg-white text-gray-700 font-semibold px-2"},null,8,["model-value"])]),x(C,{type:"text",size:"mini",class:"!text-gray700 flex-shrink-0",onClick:E[1]||(E[1]=()=>r("update:visible",!1))},{icon:j(()=>[x(V)]),_:1})]),x(ee,{"auto-size":{minRows:3,maxRows:5},modelValue:v.value.description,"onUpdate:modelValue":E[2]||(E[2]=te=>v.value.description=te),class:"rounded-lg text-gray-700 !text-xs",placeholder:"输入描述..."},null,8,["modelValue"]),x(oe,{class:"my-2"}),x(he,{size:"mini",model:v.value,layout:"vertical",onSubmit:w},{default:j(()=>{var te,ue,ae,me,ke,Ce,Je,Ye,ze,Rt,At,Gt,Mt,Ue,Xe,Nn,In,Te,Sd,Cd,Nd,Id,qd;return[h("div",$O,[h("div",EO,[h("div",kO,[E[9]||(E[9]=h("div",{class:""},"绑定插件",-1)),x(D,{content:"为工具节点绑定指定的扩展插件，支持插件广场以及自定义API插件。"},{default:j(()=>[x(M)]),_:1})]),x(C,{type:"text",size:"mini",class:"!text-gray-700",onClick:Y},{icon:j(()=>[x(H)]),_:1})]),(ue=(te=v.value.tool)==null?void 0:te.provider)!=null&&ue.id&&((me=(ae=v.value.tool)==null?void 0:ae.tool)!=null&&me.name)?(A(),K("div",SO,[h("div",CO,[h("div",NO,[x(U,{size:36,shape:"square",class:"rounded flex-shrink-0","image-url":(Je=(Ce=(ke=v.value)==null?void 0:ke.tool)==null?void 0:Ce.provider)==null?void 0:Je.icon},null,8,["image-url"]),h("div",IO,[h("div",qO,re((Rt=(ze=(Ye=v.value)==null?void 0:Ye.tool)==null?void 0:ze.provider)==null?void 0:Rt.label)+"/"+re((Mt=(Gt=(At=v.value)==null?void 0:At.tool)==null?void 0:Gt.tool)==null?void 0:Mt.name),1),h("div",TO,re((Nn=(Xe=(Ue=v.value)==null?void 0:Ue.tool)==null?void 0:Xe.tool)==null?void 0:Nn.description),1)])]),x(C,{size:"mini",type:"text",class:"hidden group-hover:block flex-shrink-0 ml-2 !text-red-700 rounded",onClick:E[3]||(E[3]=()=>B())},{icon:j(()=>[x(J)]),_:1})])])):(A(),K("div",RO," 插件能够让工作流调用外部API，例如搜索信息、浏览网页、生成图片等，扩展工作流的能力和使用场景。 "))]),x(oe,{class:"my-4"}),h("div",AO,[h("div",MO,[h("div",PO,[E[10]||(E[10]=h("div",{class:""},"输入数据",-1)),x(D,{content:"输入给大模型的参数，可在下方提示词中引用。所有输入参数会被转为string输入。"},{default:j(()=>[x(M)]),_:1})])]),E[12]||(E[12]=h("div",{class:"flex items-center gap-1 text-xs text-gray-500 mb-2"},[h("div",{class:"w-[30%]"},"参数名"),h("div",{class:"w-[25%]"},"类型"),h("div",{class:"w-[45%]"},"值")],-1)),(A(!0),K(_e,null,xe((In=v.value)==null?void 0:In.inputs,(Le,qn)=>(A(),K("div",{key:qn,class:"flex items-center gap-1"},[h("div",OO,[h("div",DO,[h("div",zO,re(Le.name),1),h("div",VO,re(Le.type),1)])]),h("div",BO,[x(Q,{size:"mini",modelValue:Le.value_type,"onUpdate:modelValue":Ht=>Le.value_type=Ht,class:"px-2",options:[{label:"引用",value:"ref"},{label:"直接输入",value:"literal"}]},null,8,["modelValue","onUpdate:modelValue"])]),h("div",LO,[Le.value_type!=="ref"?(A(),fe(z,{key:0,size:"mini",modelValue:Le.content,"onUpdate:modelValue":Ht=>Le.content=Ht,placeholder:"请输入参数值"},null,8,["modelValue","onUpdate:modelValue"])):(A(),fe(Q,{key:1,placeholder:"请选择引用变量",size:"mini","tag-nowrap":"",modelValue:Le.ref,"onUpdate:modelValue":Ht=>Le.ref=Ht,options:G.value},null,8,["modelValue","onUpdate:modelValue","options"]))])]))),128)),((Te=v.value)==null?void 0:Te.inputs.length)<=0?(A(),fe(ie,{key:0,class:"my-4"},{default:j(()=>E[11]||(E[11]=[we("该节点暂无输入数据")])),_:1})):se("",!0)]),x(oe,{class:"my-4"}),h("div",FO,[h("div",UO,[h("div",GO,[E[13]||(E[13]=h("div",{class:""},"PARAMS参数",-1)),x(D,{content:"内置工具使用的PARAMS参数，用于初始化内置工具。"},{default:j(()=>[x(M)]),_:1})])]),((Cd=(Sd=v.value)==null?void 0:Sd.params)==null?void 0:Cd.length)>0?(A(),K("div",HO,E[14]||(E[14]=[h("div",{class:"w-[20%]"},"参数名",-1),h("div",{class:"w-[80%]"},"值",-1)]))):se("",!0),(A(!0),K(_e,null,xe((Nd=v.value)==null?void 0:Nd.params,(Le,qn)=>(A(),K("div",{key:qn,class:"flex items-center gap-1"},[h("div",jO,[h("div",YO,[h("div",XO,re(Le.key),1)])]),h("div",KO,[x(z,{size:"mini",modelValue:Le.value,"onUpdate:modelValue":Ht=>Le.value=Ht,placeholder:"请输入参数值"},null,8,["modelValue","onUpdate:modelValue"])])]))),128)),((Id=v.value)==null?void 0:Id.params.length)<=0?(A(),fe(ie,{key:1,class:"my-4"},{default:j(()=>E[15]||(E[15]=[we("该工具暂无PARAMS数据")])),_:1})):se("",!0)]),x(oe,{class:"my-4"}),h("div",WO,[E[16]||(E[16]=h("div",{class:"font-semibold text-gray-700"},"输出数据",-1)),E[17]||(E[17]=h("div",{class:"text-gray-500 text-xs"},"参数名",-1)),(A(!0),K(_e,null,xe((qd=v.value)==null?void 0:qd.outputs,(Le,qn)=>(A(),K("div",{key:qn,class:"flex flex-col gap-2"},[h("div",ZO,[h("div",JO,re(Le.name),1),h("div",QO,re(Le.type),1)])]))),128))]),x(oe,{class:"my-4"}),x(C,{loading:n.loading,type:"primary",size:"small","html-type":"submit",long:"",class:"rounded-lg"},{default:j(()=>E[18]||(E[18]=[we(" 保存 ")])),_:1},8,["loading"])]}),_:1},8,["model"]),x(de,{visible:_.value,"onUpdate:visible":E[8]||(E[8]=te=>_.value=te),"hide-title":"",footer:!1,class:"tools-modal","modal-class":"right-4 h-[calc(100vh-32px)]"},{default:j(()=>[h("div",e8,[h("div",t8,[E[24]||(E[24]=h("div",{class:"text-gray-900 font-bold text-lg mb-4"},"关联插件",-1)),x(pe,{to:{name:"space-tools-list"}},{default:j(()=>[x(C,{long:"",type:"primary",class:"rounded-lg mb-5"},{default:j(()=>E[19]||(E[19]=[we("创建自定义插件")])),_:1})]),_:1}),h("div",n8,[h("div",{class:Fe(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${b.value==="api_tool"?"text-blue-700 bg-white":"text-gray-700"}`),onClick:E[4]||(E[4]=te=>b.value="api_tool")},[x(be),E[20]||(E[20]=we(" 自定义插件 "))],2),h("div",{class:Fe(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${b.value==="builtin_tool"?"text-blue-700 bg-white":"text-gray-700"}`),onClick:E[5]||(E[5]=te=>b.value="builtin_tool")},[x(ge),E[21]||(E[21]=we(" 内置插件 "))],2)]),b.value==="builtin_tool"?(A(),K("div",r8,[E[23]||(E[23]=h("div",{class:"text-xs text-gray-500 mb-3"},"类别",-1)),h("div",o8,[h("div",{class:Fe(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${$.value==="all"?"text-blue-700 bg-white":"text-gray-700"}`),onClick:E[6]||(E[6]=te=>$.value="all")},[x(L),E[22]||(E[22]=we(" 全部 "))],2),(A(!0),K(_e,null,xe(Z(y),te=>(A(),K("div",{key:te.name,class:Fe(`rounded-lg h-8 leading-8 px-3 flex items-center gap-2 cursor-pointer hover:bg-white hover:text-blue-700 ${$.value===te.category?"text-blue-700 bg-white":" text-gray-700"}`),onClick:ue=>$.value=te.category},[h("span",{innerHTML:te.icon},null,8,a8),we(" "+re(te.name),1)],10,i8))),128))])])):se("",!0)]),h("div",s8,[h("div",l8,[h("div",u8,re(b.value==="api_tool"?"自定义插件":"内置插件"),1),x(C,{size:"mini",type:"text",class:"!text-gray-700 ml-6",onClick:E[7]||(E[7]=()=>_.value=!1)},{icon:j(()=>[x(V)]),_:1})]),b.value==="builtin_tool"?(A(),K("div",c8,[(A(!0),K(_e,null,xe(k.value,(te,ue)=>(A(),K("div",{key:te.name,class:"flex flex-col gap-3 mb-3"},[h("div",d8,re(te.label),1),h("div",f8,[(A(!0),K(_e,null,xe(te.tools,(ae,me)=>(A(),K("div",{key:ae.name,class:Fe(`flex items-center justify-between px-2 h-8 rounded-lg cursor-pointer hover:bg-gray-50 group ${R(te,ae)?"bg-blue-50 border border-blue-700":""}`)},[h("div",p8,[x(U,{size:20,shape:"circle","image-url":`${Z(Un)}/builtin-tools/${te.name}/icon`},null,8,["image-url"]),h("div",h8,re(ae.label),1)]),x(C,{size:"mini",class:"hidden group-hover:block rounded px-1.5 flex-shrink-0",onClick:()=>S(ue,me)},{icon:j(()=>[x(H)]),default:j(()=>[we(" "+re(R(te,ae)?"删除":"添加"),1)]),_:2},1032,["onClick"])],2))),128))])]))),128)),k.value.length===0?(A(),K("div",v8,[x(ie,{description:"没有可用的内置插件",class:"h-[400px] flex flex-col items-center justify-center"})])):se("",!0)])):se("",!0),b.value==="api_tool"?(A(),K("div",g8,[x(T,{loading:Z(a),class:"block h-[calc(100vh-130px)] overflow-scroll scrollbar-w-none",onScroll:W},{default:j(()=>[(A(!0),K(_e,null,xe(Z(l),(te,ue)=>(A(),K("div",{key:te.id,class:"flex flex-col gap-3 mb-3"},[h("div",m8,re(te.name),1),h("div",_8,[(A(!0),K(_e,null,xe(te.tools,(ae,me)=>(A(),K("div",{key:ae.name,class:Fe(`flex items-center justify-between px-2 h-8 rounded-lg cursor-pointer hover:bg-gray-50 group ${R(te,ae)?"bg-blue-50 border border-blue-700":""}`)},[h("div",y8,[x(U,{size:20,shape:"circle","image-url":te.icon},null,8,["image-url"]),h("div",b8,re(ae.name),1)]),x(C,{size:"mini",class:"hidden group-hover:block rounded px-1.5 flex-shrink-0",onClick:()=>S(Number(ue),me)},{icon:j(()=>[x(H)]),default:j(()=>[we(" "+re(R(te,ae)?"删除":"添加"),1)]),_:2},1032,["onClick"])],2))),128))])]))),128)),Z(l).length===0?(A(),K("div",x8,[x(ie,{description:"没有可用的API插件",class:"h-[400px] flex flex-col items-center justify-center"})])):se("",!0),Z(s).total_page>=2?(A(),fe(ne,{key:1},{default:j(()=>[Z(s).current_page<=Z(s).total_page?(A(),fe(X,{key:0,span:24,class:"!text-center"},{default:j(()=>[x(N,{class:"my-4"},{default:j(()=>[x(T),E[25]||(E[25]=h("div",{class:"text-gray-400"},"加载中",-1))]),_:1})]),_:1})):(A(),fe(X,{key:1,span:24,class:"!text-center"},{default:j(()=>E[26]||(E[26]=[h("div",{class:"text-gray-400 my-4"},"数据已加载完成",-1)])),_:1}))]),_:1})):se("",!0)]),_:1},8,["loading"])])):se("",!0)])])]),_:1},8,["visible"])])):se("",!0)}}}),Be=[];for(let e=0;e<256;++e)Be.push((e+256).toString(16).slice(1));function $8(e,t=0){return(Be[e[t+0]]+Be[e[t+1]]+Be[e[t+2]]+Be[e[t+3]]+"-"+Be[e[t+4]]+Be[e[t+5]]+"-"+Be[e[t+6]]+Be[e[t+7]]+"-"+Be[e[t+8]]+Be[e[t+9]]+"-"+Be[e[t+10]]+Be[e[t+11]]+Be[e[t+12]]+Be[e[t+13]]+Be[e[t+14]]+Be[e[t+15]]).toLowerCase()}let hc;const E8=new Uint8Array(16);function k8(){if(!hc){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");hc=crypto.getRandomValues.bind(crypto)}return hc(E8)}const S8=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),i_={randomUUID:S8};function C8(e,t,n){var o;e=e||{};const r=e.random??((o=e.rng)==null?void 0:o.call(e))??k8();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,$8(r)}function a_(e,t,n){return i_.randomUUID?i_.randomUUID():C8(e)}const N8={class:"min-h-screen flex flex-col h-full overflow-hidden relative"},I8={class:"h-[77px] flex-shrink-0 bg-white p-4 flex items-center justify-between relative border-b"},q8={class:"flex items-center gap-2"},T8={class:"flex items-center gap-3"},R8={class:"flex flex-col justify-between h-[40px]"},A8={key:1,class:"text-gray-700 font-bold"},M8={key:2,class:"flex items-center gap-2"},P8={key:3,class:"flex items-center gap-2"},O8={class:"max-w-[160px] line-clamp-1 text-xs text-gray-500"},D8={class:"flex items-center h-[18px] text-xs text-gray-500"},z8={class:""},V8={style:{height:"900px",border:"1px solid #ccc"}},B8={class:"p-[5px] bg-white rounded-xl border z-50"},L8={class:"bg-white borer border-gray-200 w-[240px] shadow rounded-xl overflow-hidden py-2"},F8={class:"flex items-center gap-2"},U8={class:"flex items-center gap-2"},G8={class:"flex items-center gap-2"},H8={class:"flex items-center gap-2"},j8={class:"flex items-center gap-2"},Y8={class:"flex items-center gap-2"},X8={class:"flex items-center gap-2"},K8={class:"flex items-center gap-2"},W8={class:"flex items-center gap-3"},aD=Ee({__name:"DetailView",setup(e){const t=t0(),n=$e(null),r=$e(1),o=[{label:"200%",value:2},{label:"100%",value:1},{label:"75%",value:.75},{label:"50%",value:.5},{label:"25%",value:.25}],i={start:Ke(VT),llm:Ke(dR),tool:Ke(yA),dataset_retrieval:Ke(g5),template_transform:Ke(F5),http_request:Ke(FA),code:Ke(MR),end:Ke(WR)},a={start:{title:"开始节点",description:"工作流的起点节点，支持定义工作流的起点输入等信息",inputs:[]},llm:{title:"大语言模型",description:"调用大语言模型，根据输入参数和提示词生成回复。",prompt:"",model_config:{provider:"deepseek",model:"deepseek-chat",parameters:{frequency_penalty:.2,max_tokens:8192,presence_penalty:.2,temperature:.5,top_p:.85}},inputs:[],outputs:[{name:"output",type:"string",value:{type:"generated",content:""}}]},tool:{title:"扩展插件",description:"调用插件广场或自定义API插件，支持能力扩展和复用",tool_type:"",provider_id:"",tool_id:"",params:{},inputs:[],outputs:[{name:"text",type:"string",value:{type:"generated",content:""}}],meta:{type:"api_tool",provider:{id:"",name:"",label:"",icon:"",description:""},tool:{id:"",name:"",label:"",description:"",params:{}}}},dataset_retrieval:{title:"知识库检索",description:"根据输入的参数，在选定的知识库中检索相关片段并召回，返回切片列表",dataset_ids:[],retrieval_config:{retrieval_strategy:"semantic",k:4,score:0},inputs:[{name:"query",type:"string",value:{type:"ref",content:{ref_node_id:"",ref_var_name:""}}}],outputs:[{name:"combine_documents",type:"string",value:{type:"generated",content:""}}],meta:{datasets:[]}},template_transform:{title:"模板转换",description:"对多个字符串变量的格式进行处理",template:"",inputs:[],outputs:[{name:"output",type:"string",value:{type:"generated",content:""}}]},http_request:{title:"HTTP请求",description:"配置外部API服务，并发起请求。",url:"",method:"get",inputs:[],outputs:[{name:"status_code",type:"int",value:{type:"generated",content:0}},{name:"text",type:"string",value:{type:"generated",content:""}}]},code:{title:"Python代码执行",description:"编写代码，处理输入输出变量来生成返回值",code:"",inputs:[],outputs:[]},end:{title:"结束节点",description:"工作流的结束节点，支持定义工作流最终输出的变量等信息",outputs:[]}},s=$e(null),l=$e(!0),u=$e(!1),c=$e(!1),{onPaneReady:d,onViewportChange:f,onConnect:p,onPaneClick:g,onNodeClick:m,onEdgeClick:y,onNodeDragStop:v,findNode:_,nodes:b}=Ie(),{loading:$,workflow:k,loadWorkflow:P}=r0(),{loading:q,handleUpdateDraftGraph:G,convertGraphToReq:Y}=o0(),{nodes:B,edges:R,loadDraftGraph:S}=i0(),{loading:W,handlePublishWorkflow:w}=a0(),{handleCancelPublish:I}=s0(),E=()=>{const V=new o_.graphlib.Graph;V.setDefaultEdgeLabel(()=>({})),V.setGraph({rankdir:"LR",align:"UL",nodesep:80,ranksep:60,edgesep:10});const C=ye.cloneDeep(B.value),ee=ye.cloneDeep(R.value);C.forEach(oe=>{V.setNode(oe.id,{width:oe.dimensions.width,height:oe.dimensions.height})}),ee.forEach(oe=>{V.setEdge(oe.source,oe.target)}),o_.layout(V),B.value=C.map(oe=>{const{x:M,y:D}=V.node(oe.id);return{...oe,position:{x:M,y:D}}})},O=V=>{if(V==="start"){if(b.value.some(H=>H.type==="start")){Qe.error("工作流中只允许有一个开始节点");return}}else if(V==="end"&&b.value.some(H=>H.type==="end")){Qe.error("工作流中只允许有一个结束节点");return}const C=b.value.length,ee=b.value.reduce((H,J)=>(H.xSum+=J.position.x,H.ySum+=J.position.y,H),{xSum:0,ySum:0}),oe=C>0?ee.xSum/C:0,M=C>0?ee.ySum/C:0,D=a[V];B.value.push({id:a_(),type:V,position:{x:oe,y:M},data:{...D,title:`${D.title}_${l0(5)}`}})},U=()=>{var V;l.value||G(String(((V=t.params)==null?void 0:V.workflow_id)??""),Y(B.value,R.value))},z=V=>{var ee;const C=B.value.findIndex(oe=>oe.id===V.id);C!==-1&&(B.value[C].data={...B.value[C].data,...V}),G(String(((ee=t.params)==null?void 0:ee.workflow_id)??""),Y(B.value,R.value),!0)};return p(V=>{const{source:C,target:ee}=V;if(C===ee){Qe.error("不能将节点连接到本身");return}if(R.value.some(H=>H.source===C&&H.target===ee||H.source===ee&&H.target===C)){Qe.error("这两个节点已有连接，无需重复添加");return}const M=_(C),D=_(ee);R.value.push({...V,id:a_(),source_type:M==null?void 0:M.type,target_type:D==null?void 0:D.type,animated:!0,style:{strokeWidth:2,stroke:"#9ca3af"}})}),g(()=>{u.value=!1,s.value=null}),y(()=>{u.value=!1,s.value=null}),m(V=>{var C;(!s.value||((C=s.value)==null?void 0:C.id)!==V.node.id)&&(s.value=V.node,c.value=!0),u.value=!1}),v(()=>{var V;G(String(((V=t.params)==null?void 0:V.workflow_id)??""),Y(B.value,R.value),!1)}),d(V=>{V.fitView(),n.value=V}),f(V=>{r.value=V.zoom}),gt(async()=>{var C;const V=String(((C=t.params)==null?void 0:C.workflow_id)??"");await P(V),await S(V),l.value=!1}),(V,C)=>{const ee=F("icon-left"),oe=F("a-button"),M=F("router-link"),D=F("a-avatar"),H=F("a-skeleton-line"),J=F("icon-schedule"),Q=F("a-tag"),ie=F("icon-down"),he=F("a-doption"),pe=F("a-dropdown"),be=F("a-button-group"),ge=F("a-space"),L=F("a-divider"),T=F("icon-plus-circle-fill"),N=F("icon-home"),X=F("icon-language"),ne=F("icon-tool"),de=F("icon-storage"),te=F("icon-branch"),ue=F("icon-link"),ae=F("icon-code"),me=F("icon-filter"),ke=F("a-trigger"),Ce=F("icon-apps"),Je=F("a-tooltip"),Ye=F("icon-play-arrow");return A(),K("div",N8,[h("div",I8,[h("div",q8,[x(M,{to:{name:"space-workflows-list"}},{default:j(()=>[x(oe,{size:"mini"},{icon:j(()=>[x(ee)]),_:1})]),_:1}),h("div",T8,[x(D,{size:40,shape:"square",class:"rounded-lg","image-url":Z(k).icon},null,8,["image-url"]),h("div",R8,[Z($)?(A(),fe(H,{key:0,widths:[100]})):(A(),K("div",A8,re(Z(k).name),1)),Z($)?(A(),K("div",M8,[x(H,{widths:[60],"line-height":18}),x(H,{widths:[60],"line-height":18}),x(H,{widths:[60],"line-height":18})])):(A(),K("div",P8,[h("div",O8,re(Z(k).description),1),h("div",D8,[x(J),we(" "+re(Z(k).status==="draft"?"草稿":"已发布"),1)]),x(Q,{size:"small",class:"rounded h-[18px] leading-[18px] bg-gray-200 text-gray-500"},{default:j(()=>[we(" 已自动保存 "+re(Z(U1)(Z(k).updated_at*1e3).format("HH:mm:ss")),1)]),_:1})]))])])]),h("div",z8,[x(ge,{size:12},{default:j(()=>[x(be,null,{default:j(()=>[x(oe,{disabled:!Z(k).is_debug_passed,loading:Z(W),type:"primary",class:"!rounded-tl-lg !rounded-bl-lg",onClick:C[0]||(C[0]=()=>Z(w)(String(Z(k).id)))},{default:j(()=>C[24]||(C[24]=[we(" 更新发布 ")])),_:1},8,["disabled","loading"]),x(pe,{position:"br"},{content:j(()=>[x(he,{disabled:Z(k).status!=="published",class:"!text-red-700",onClick:C[1]||(C[1]=()=>Z(I)(String(Z(k).id)))},{default:j(()=>C[25]||(C[25]=[we(" 取消发布 ")])),_:1},8,["disabled"])]),default:j(()=>[x(oe,{disabled:Z(k).status!=="published",type:"primary",class:"!rounded-tr-lg !rounded-br-lg !w-5"},{icon:j(()=>[x(ie)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})])]),h("div",V8,[x(Z(bE),{"min-zoom":.25,"max-zoom":2,"nodes-connectable":!0,"connection-mode":Z(Nt).Strict,"connection-line-options":{style:{strokeWidth:2,stroke:"#9ca3af"}},"node-types":i,nodes:Z(B),"onUpdate:nodes":[C[22]||(C[22]=ze=>Yn(B)?B.value=ze:null),U],edges:Z(R),"onUpdate:edges":[C[23]||(C[23]=ze=>Yn(R)?R.value=ze:null),U]},{default:j(()=>{var ze,Rt,At,Gt,Mt,Ue,Xe,Nn,In;return[x(Z(NE)),x(Z(cN),{class:"rounded-xl border border-gray-300 overflow-hidden !left-0 !right-auto",width:160,height:96,pannable:"",zoomable:""}),x(Z(vy),{position:"bottom-center"},{default:j(()=>[h("div",B8,[x(ge,{size:8},{split:j(()=>[x(L,{direction:"vertical",class:"m-0"})]),default:j(()=>[x(ke,{position:"top","popup-translate":[0,-16]},{content:j(()=>[h("div",L8,[h("div",{class:"flex flex-col px-3 py-2 gap-2 cursor-pointer hover:bg-gray-50",onClick:C[2]||(C[2]=()=>O("start"))},[h("div",F8,[x(D,{shape:"square",size:24,class:"bg-blue-700 rounded-lg"},{default:j(()=>[x(N)]),_:1}),C[27]||(C[27]=h("div",{class:"text-gray-700 font-semibold"},"开始节点",-1))]),C[28]||(C[28]=h("div",{class:"text-gray-500 text-xs"}," 工作流的起始节点，支持定义工作流的起点输入等信息。 ",-1))]),h("div",{class:"flex flex-col px-3 py-2 gap-2 cursor-pointer hover:bg-gray-50",onClick:C[3]||(C[3]=()=>O("llm"))},[h("div",U8,[x(D,{shape:"square",size:24,class:"bg-sky-500 rounded-lg"},{default:j(()=>[x(X)]),_:1}),C[29]||(C[29]=h("div",{class:"text-gray-700 font-semibold"},"大语言模型",-1))]),C[30]||(C[30]=h("div",{class:"text-gray-500 text-xs"}," 调用大语言模型，根据输入参数和提示词生成回复 ",-1))]),h("div",{class:"flex flex-col px-3 py-2 gap-2 cursor-pointer hover:bg-gray-50",onClick:C[4]||(C[4]=()=>O("tool"))},[h("div",G8,[x(D,{shape:"square",size:24,class:"bg-orange-500 rounded-lg"},{default:j(()=>[x(ne)]),_:1}),C[31]||(C[31]=h("div",{class:"text-gray-700 font-semibold"},"扩展插件",-1))]),C[32]||(C[32]=h("div",{class:"text-gray-500 text-xs"}," 添加插件广场内或自定义API插件，支持能力扩展和复用。 ",-1))]),h("div",{class:"flex flex-col px-3 py-2 gap-2 cursor-pointer hover:bg-gray-50",onClick:C[5]||(C[5]=()=>O("dataset_retrieval"))},[h("div",H8,[x(D,{shape:"square",size:24,class:"bg-violet-500 rounded-lg"},{default:j(()=>[x(de)]),_:1}),C[33]||(C[33]=h("div",{class:"text-gray-700 font-semibold"},"知识库检索",-1))]),C[34]||(C[34]=h("div",{class:"text-gray-500 text-xs"}," 根据输入的参数，在选定的知识库中检索相关片段并召回，返回切片列表。 ",-1))]),h("div",{class:"flex flex-col px-3 py-2 gap-2 cursor-pointer hover:bg-gray-50",onClick:C[6]||(C[6]=()=>O("template_transform"))},[h("div",j8,[x(D,{shape:"square",size:24,class:"bg-emerald-400 rounded-lg"},{default:j(()=>[x(te)]),_:1}),C[35]||(C[35]=h("div",{class:"text-gray-700 font-semibold"},"模板转换",-1))]),C[36]||(C[36]=h("div",{class:"text-gray-500 text-xs"},"对多个字符串变量的格式进行处理。",-1))]),h("div",{class:"flex flex-col px-3 py-2 gap-2 cursor-pointer hover:bg-gray-50",onClick:C[7]||(C[7]=()=>O("http_request"))},[h("div",Y8,[x(D,{shape:"square",size:24,class:"bg-rose-500 rounded-lg"},{default:j(()=>[x(ue)]),_:1}),C[37]||(C[37]=h("div",{class:"text-gray-700 font-semibold"},"HTTP请求",-1))]),C[38]||(C[38]=h("div",{class:"text-gray-500 text-xs"},"配置外部API服务，并发起请求。",-1))]),h("div",{class:"flex flex-col px-3 py-2 gap-2 cursor-pointer hover:bg-gray-50",onClick:C[8]||(C[8]=()=>O("code"))},[h("div",X8,[x(D,{shape:"square",size:24,class:"bg-cyan-500 rounded-lg"},{default:j(()=>[x(ae)]),_:1}),C[39]||(C[39]=h("div",{class:"text-gray-700 font-semibold"},"Python代码执行",-1))]),C[40]||(C[40]=h("div",{class:"text-gray-500 text-xs"}," 编写代码处理输入输出变量来生成返回值。 ",-1))]),h("div",{class:"flex flex-col px-3 py-2 gap-2 cursor-pointer hover:bg-gray-50",onClick:C[9]||(C[9]=()=>O("end"))},[h("div",K8,[x(D,{shape:"square",size:24,class:"bg-red-700 rounded-lg"},{default:j(()=>[x(me)]),_:1}),C[41]||(C[41]=h("div",{class:"text-gray-700 font-semibold"},"结束节点",-1))]),C[42]||(C[42]=h("div",{class:"text-gray-500 text-xs"}," 工作流的结束节点，支持定义工作流最终输出的变量等信息。 ",-1))])])]),default:j(()=>[x(oe,{type:"primary",size:"small",class:"rounded-lg px-2"},{icon:j(()=>[x(T)]),default:j(()=>[C[26]||(C[26]=we(" 节点 "))]),_:1})]),_:1}),h("div",W8,[x(Je,{content:"自适应布局"},{default:j(()=>[x(oe,{size:"small",type:"text",class:"!text-gray-700 rounded-lg",onClick:C[10]||(C[10]=()=>E())},{icon:j(()=>[x(Ce)]),_:1})]),_:1}),x(pe,{trigger:"hover",onSelect:C[11]||(C[11]=Te=>{r.value=Number(Te),n.value.zoomTo(Te)})},{content:j(()=>[(A(),K(_e,null,xe(o,Te=>x(he,{key:Te.value,value:Te.value},{default:j(()=>[we(re(Te.label),1)]),_:2},1032,["value"])),64))]),default:j(()=>[x(oe,{size:"small",class:"!text-gray-700 px-2 rounded-lg gap-1 w-[80px]"},{default:j(()=>[we(re((r.value*100).toFixed(0))+"% ",1),x(ie)]),_:1})]),_:1})]),x(oe,{type:"text",size:"small",class:"px-2 rounded-lg",onClick:C[12]||(C[12]=()=>{s.value=null,u.value=!0})},{icon:j(()=>[x(Ye)]),default:j(()=>[C[43]||(C[43]=we(" 调试 "))]),_:1})]),_:1})])]),_:1}),x(cM,{workflow_id:String(((ze=Z(t).params)==null?void 0:ze.workflow_id)??""),visible:u.value,"onUpdate:visible":C[13]||(C[13]=Te=>u.value=Te)},null,8,["workflow_id","visible"]),s.value&&((Rt=s.value)==null?void 0:Rt.type)==="start"?(A(),fe(wM,{key:0,loading:Z(q),node:s.value,visible:c.value,"onUpdate:visible":C[14]||(C[14]=Te=>c.value=Te),onUpdateNode:z},null,8,["loading","node","visible"])):se("",!0),s.value&&((At=s.value)==null?void 0:At.type)==="llm"?(A(),fe(t3,{key:1,loading:Z(q),node:s.value,visible:c.value,"onUpdate:visible":C[15]||(C[15]=Te=>c.value=Te),onUpdateNode:z},null,8,["loading","node","visible"])):se("",!0),s.value&&((Gt=s.value)==null?void 0:Gt.type)==="template_transform"?(A(),fe(TP,{key:2,loading:Z(q),node:s.value,visible:c.value,"onUpdate:visible":C[16]||(C[16]=Te=>c.value=Te),onUpdateNode:z},null,8,["loading","node","visible"])):se("",!0),s.value&&((Mt=s.value)==null?void 0:Mt.type)==="code"?(A(),fe(x3,{key:3,loading:Z(q),node:s.value,visible:c.value,"onUpdate:visible":C[17]||(C[17]=Te=>c.value=Te),onUpdateNode:z},null,8,["loading","node","visible"])):se("",!0),s.value&&((Ue=s.value)==null?void 0:Ue.type)==="http_request"?(A(),fe(nP,{key:4,loading:Z(q),node:s.value,visible:c.value,"onUpdate:visible":C[18]||(C[18]=Te=>c.value=Te),onUpdateNode:z},null,8,["loading","node","visible"])):se("",!0),s.value&&((Xe=s.value)==null?void 0:Xe.type)==="dataset_retrieval"?(A(),fe(yO,{key:5,loading:Z(q),node:s.value,visible:c.value,"onUpdate:visible":C[19]||(C[19]=Te=>c.value=Te),onUpdateNode:z},null,8,["loading","node","visible"])):se("",!0),s.value&&((Nn=s.value)==null?void 0:Nn.type)==="tool"?(A(),fe(w8,{key:6,loading:Z(q),node:s.value,visible:c.value,"onUpdate:visible":C[20]||(C[20]=Te=>c.value=Te),onUpdateNode:z},null,8,["loading","node","visible"])):se("",!0),s.value&&((In=s.value)==null?void 0:In.type)==="end"?(A(),fe(pP,{key:7,loading:Z(q),node:s.value,visible:c.value,"onUpdate:visible":C[21]||(C[21]=Te=>c.value=Te),onUpdateNode:z},null,8,["loading","node","visible"])):se("",!0)]}),_:1},8,["connection-mode","nodes","edges"])])])}}});export{aD as default};
